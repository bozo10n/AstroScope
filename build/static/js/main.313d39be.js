/*! For license information please see main.313d39be.js.LICENSE.txt */
(()=>{var e={579:(e,t,n)=>{"use strict";e.exports=n(2799)},2016:(e,t,n)=>{"use strict";e.exports=n(4492)},2284:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{A:()=>i})},2330:(e,t,n)=>{"use strict";var i=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useState,s=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function A(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(i){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=o({inst:{value:n,getSnapshot:t}}),r=i[0].inst,c=i[1];return a(function(){r.value=n,r.getSnapshot=t,A(r)&&c({inst:r})},[e,n,t]),s(function(){return A(r)&&c({inst:r}),e(function(){A(r)&&c({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var o in i={},t)"key"!==o&&(i[o]=t[o]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},3179:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],A=a+1,c=e[A];if(0>o(l,n))A<r&&0>o(c,l)?(e[i]=c,e[A]=n,i=A):(e[i]=l,e[a]=n,i=a);else{if(!(A<r&&0>o(c,n)))break e;e[i]=c,e[A]=n,i=A}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var A=[],c=[],u=1,h=null,d=3,p=!1,f=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(A,t)}t=i(c)}}function b(e){if(g=!1,w(e),!f)if(null!==i(A))f=!0,I();else{var t=i(c);null!==t&&U(b,t.startTime-e)}}var x,B=!1,_=-1,C=5,S=-1;function E(){return!(t.unstable_now()-S<C)}function T(){if(B){var e=t.unstable_now();S=e;var n=!0;try{e:{f=!1,g&&(g=!1,v(_),_=-1),p=!0;var o=d;try{t:{for(w(e),h=i(A);null!==h&&!(h.expirationTime>e&&E());){var s=h.callback;if("function"===typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,w(e),n=!0;break t}h===i(A)&&r(A),w(e)}else r(A);h=i(A)}if(null!==h)n=!0;else{var l=i(c);null!==l&&U(b,l.startTime-e),n=!1}}break e}finally{h=null,d=o,p=!1}n=void 0}}finally{n?x():B=!1}}}if("function"===typeof y)x=function(){y(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,F=M.port2;M.port1.onmessage=T,x=function(){F.postMessage(null)}}else x=function(){m(T,0)};function I(){B||(B=!0,x())}function U(e,n){_=m(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,I())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(A)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===i(A)&&e===i(c)&&(g?(v(_),_=-1):g=!0,U(b,o-s))):(e.sortIndex=a,n(A,e),f||p||(f=!0,I())),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray;function B(){}var _={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function S(e,t,i){var r=i.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,A,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case i:c=!0;break;case h:return F((c=e._init)(e._payload),t,r,o,s)}}if(c)return s=s(e),c=""===o?"."+M(e,0):o,x(s)?(r="",null!=c&&(r=c.replace(T,"$&/")+"/"),F(s,t,r,"",function(e){return e})):null!=s&&(E(s)&&(l=s,A=r+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+c,s=S(l.type,A,l.props)),t.push(s)),1;c=0;var u,d=""===o?".":o+":";if(x(e))for(var f=0;f<e.length;f++)c+=F(o=e[f],t,r,a=d+M(o,f),s);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(o=e.next()).done;)c+=F(o=o.value,t,r,a=d+M(o,f++),s);else if("object"===a){if("function"===typeof e.then)return F(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(B,B):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,o,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function I(e,t,n){if(null==e)return e;var i=[],r=0;return F(e,i,"","",function(e){return t.call(n,e,r++)}),i}function U(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},R={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=d,t.Children=R,t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),r=e.key;if(null!=t)for(o in void 0!==t.key&&(r=""+t.key),t)!C.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(i[o]=t[o]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),a=0;a<o;a++)s[a]=arguments[a+2];i.children=s}return S(e.type,r,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var i,r={},o=null;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)C.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===r[i]&&(r[i]=s[i]);return S(e,o,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:A,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:U}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var i=e(),r=_.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(B,L)}catch(o){L(o)}finally{null!==t&&null!==n.types&&(t.types=n.types),_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return _.H.useEffect(e,t)},t.useEffectEvent=function(e){return _.H.useEffectEvent(e)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.2.0"},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4492:(e,t,n)=>{"use strict";e.exports=function(e){function t(e,t,n,i){return new _r(e,t,n,i)}function i(){}function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=lo&&e[lo]||e["@@iterator"])?e:null}function s(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===Ao?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case Kr:return"Fragment";case Wr:return"Portal";case Xr:return"Profiler";case qr:return"StrictMode";case eo:return"Suspense";case to:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case Zr:return(e.displayName||"Context")+".Provider";case Yr:return(e._context.displayName||"Context")+".Consumer";case $r:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case no:return null!==(t=e.displayName||null)?t:s(e.type)||"Memo";case io:t=e._payload,e=e._init;try{return s(e(t))}catch(n){}}return null}function a(e){if(void 0===oo)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);oo=t&&t[1]||"",so=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+oo+e+so}function l(e,t){if(!e||uo)return"";uo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){i=o}e.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&i&&"string"===typeof a.stack)return[a.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),s=o[0],l=o[1];if(s&&l){var A=s.split("\n"),c=l.split("\n");for(r=i=0;i<A.length&&!A[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===A.length||r===c.length)for(i=A.length-1,r=c.length-1;1<=i&&0<=r&&A[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(A[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||A[i]!==c[r]){var u="\n"+A[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=r);break}}}finally{uo=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?a(n):""}function A(e){switch(e.tag){case 26:case 27:case 5:return a(e.type);case 16:return a("Lazy");case 13:return a("Suspense");case 19:return a("SuspenseList");case 0:case 15:return e=l(e.type,!1);case 11:return e=l(e.type.render,!1);case 1:return e=l(e.type,!0);default:return""}}function c(e){try{var t="";do{t+=A(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function h(e){if(u(e)!==e)throw Error(r(188))}function d(e){var t=e.alternate;if(!t){if(null===(t=u(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(i=o.return)){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return h(o),e;if(s===i)return h(o),t;s=s.sibling}throw Error(r(188))}if(n.return!==i.return)n=o,i=s;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,i=s;break}if(l===i){a=!0,i=o,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=o;break}if(l===i){a=!0,i=s,n=o;break}l=l.sibling}if(!a)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=p(e)))return t;e=e.sibling}return null}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=f(e)))return t;e=e.sibling}return null}function g(e){return{current:e}}function m(e){0>va||(e.current=ma[va],ma[va]=null,va--)}function v(e,t){va++,ma[va]=e.current,e.current=t}function y(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function w(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&n;return 0!==a?0!==(n=a&~r)?i=y(n):0!==(o&=a)?i=y(o):e||0!==(s=a&~s)&&(i=y(s)):0!==(a=n&~r)?i=y(a):0!==o?i=y(o):e||0!==(s=n&~s)&&(i=y(s)),0===i?0:0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||32===r&&0!==(4194176&s))?t:i}function b(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function x(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function B(){var e=Ba;return 0===(4194176&(Ba<<=1))&&(Ba=128),e}function _(){var e=_a;return 0===(62914560&(_a<<=1))&&(_a=4194304),e}function C(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function S(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function E(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-wa(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194218&n}function T(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-wa(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function M(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function F(e){if("function"===typeof Ra&&Pa(e),ka&&"function"===typeof ka.setStrictMode)try{ka.setStrictMode(Na,e)}catch(t){}}function I(e,t){if("object"===typeof e&&null!==e){var n=Oa.get(e);return void 0!==n?n:(t={value:e,source:t,stack:c(t)},Oa.set(e,t),t)}return{value:e,source:t,stack:c(t)}}function U(e,t){Ha[Qa++]=Ga,Ha[Qa++]=za,za=e,Ga=t}function L(e,t,n){ja[Va++]=Ka,ja[Va++]=qa,ja[Va++]=Wa,Wa=e;var i=Ka;e=qa;var r=32-wa(i)-1;i&=~(1<<r),n+=1;var o=32-wa(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Ka=1<<32-wa(t)+r|n<<r|i,qa=o+e}else Ka=1<<o|n<<r|i,qa=e}function R(e){null!==e.return&&(U(e,1),L(e,1,0))}function P(e){for(;e===za;)za=Ha[--Qa],Ha[Qa]=null,Ga=Ha[--Qa],Ha[Qa]=null;for(;e===Wa;)Wa=ja[--Va],ja[Va]=null,qa=ja[--Va],ja[Va]=null,Ka=ja[--Va],ja[Va]=null}function N(e,t){v(Ya,t),v(Ja,e),v(Xa,null),e=vo(t),m(Xa),v(Xa,e)}function k(){m(Xa),m(Ja),m(Ya)}function D(e){null!==e.memoizedState&&v(Za,e);var t=Xa.current,n=yo(t,e.type);t!==n&&(v(Ja,e),v(Xa,n))}function O(e){Ja.current===e&&(m(Xa),m(Ja)),Za.current===e&&(m(Za),Fo?Ko._currentValue=Wo:Ko._currentValue2=Wo)}function H(e){throw V(I(Error(r(418,"")),e)),rl}function Q(e,t){if(!Lo)throw Error(r(175));Hs(e.stateNode,e.type,e.memoizedProps,t,e)||H(e)}function z(e){for($a=e.return;$a;)switch($a.tag){case 3:case 27:return void(il=!0);case 5:case 13:return void(il=!1);default:$a=$a.return}}function G(e){if(!Lo||e!==$a)return!1;if(!tl)return z(e),tl=!0,!1;var t=!1;if(ua?3!==e.tag&&27!==e.tag&&(5!==e.tag||qs(e.type)&&!Co(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||qs(e.type)&&!Co(e.type,e.memoizedProps))&&(t=!0),t&&el&&H(e),z(e),13===e.tag){if(!Lo)throw Error(r(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));el=Gs(e)}else el=$a?Ls(e.stateNode):null;return!0}function j(){Lo&&(el=$a=null,tl=!1)}function V(e){null===nl?nl=[e]:nl.push(e)}function W(){for(var e=sl,t=al=sl=0;t<e;){var n=ol[t];ol[t++]=null;var i=ol[t];ol[t++]=null;var r=ol[t];ol[t++]=null;var o=ol[t];if(ol[t++]=null,null!==i&&null!==r){var s=i.pending;null===s?r.next=r:(r.next=s.next,s.next=r),i.pending=r}0!==o&&J(n,r,o)}}function K(e,t,n,i){ol[sl++]=e,ol[sl++]=t,ol[sl++]=n,ol[sl++]=i,al|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function q(e,t,n,i){return K(e,t,n,i),Y(e)}function X(e,t){return K(e,null,null,t),Y(e)}function J(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(i=o.alternate)&&(i.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(r=!0)),e=o,o=o.return;r&&null!==t&&3===e.tag&&(o=e.stateNode,r=31-wa(n),null===(e=(o=o.hiddenUpdates)[r])?o[r]=[t]:e.push(t),t.lane=536870912|n)}function Y(e){if(50<nc)throw nc=0,ic=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Z(e){var t;e!==Al&&null===e.next&&(null===Al?ll=Al=e:Al=Al.next=e),ul=!0,cl||(cl=!0,t=ee,Xo?Jo(function(){0!==(6&TA)?Ca(Fa,t):t()}):Ca(Fa,t))}function $(e,t){if(!hl&&ul){hl=!0;do{for(var n=!1,i=ll;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var o=0;else{var s=i.suspendedLanes,a=i.pingedLanes;o=(1<<31-wa(42|e)+1)-1,o=201326677&(o&=r&~(s&~a))?201326677&o|1:o?2|o:0}0!==o&&(n=!0,ie(i,o))}else o=IA,0===(3&(o=w(i,i===MA?o:0)))||b(i,o)||(n=!0,ie(i,o));i=i.next}}while(n);hl=!1}}function ee(){ul=cl=!1;var e=0;0!==dl&&(Oo()&&(e=dl),dl=0);for(var t=Ma(),n=null,i=ll;null!==i;){var r=i.next,o=te(i,t);0===o?(i.next=null,null===n?ll=r:n.next=r,null===r&&(Al=n)):(n=i,(0!==e||0!==(3&o))&&(ul=!0)),i=r}$(e,!1)}function te(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-wa(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=x(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=IA,n=w(e,e===(t=MA)?n:0),i=e.callbackNode,0===n||e===t&&2===UA||null!==e.cancelPendingCommit)return null!==i&&null!==i&&Sa(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||b(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&Sa(i),M(n)){case 2:case 8:n=Ia;break;case 32:default:n=Ua;break;case 268435456:n=La}return i=ne.bind(null,e),n=Ca(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&Sa(i),e.callbackPriority=2,e.callbackNode=null,2}function ne(e,t){var n=e.callbackNode;if(gr()&&e.callbackNode!==n)return null;var i=IA;return 0===(i=w(e,e===MA?i:0))?null:(Ki(e,i,t),te(e,Ma()),null!=e.callbackNode&&e.callbackNode===n?ne.bind(null,e):null)}function ie(e,t){if(gr())return null;Ki(e,t,!0)}function re(){return 0===dl&&(dl=B()),dl}function oe(){if(0===--fl&&null!==pl){null!==ml&&(ml.status="fulfilled");var e=pl;pl=null,gl=0,ml=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function se(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ae(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function le(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ae(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&TA)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Y(e),J(e,null,n),t}return K(e,i,t,n),Y(e)}function ce(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,T(e,n)}}function ue(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function he(){if(yl){if(null!==ml)throw ml}}function de(e,t,n,i){yl=!1;var r=e.updateQueue;vl=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,A=l.next;l.next=null,null===s?o=A:s.next=A,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=A:a.next=A,c.lastBaseUpdate=l))}if(null!==o){var u=r.baseState;for(s=0,c=A=l=null,a=o;;){var h=-536870913&a.lane,d=h!==a.lane;if(d?(IA&h)===h:(i&h)===h){0!==h&&h===gl&&(yl=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,f=a;h=t;var g=n;switch(f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(g,u,h):p)||void 0===h)break e;u=Gr({},u,h);break e;case 2:vl=!0}}null!==(h=a.callback)&&(e.flags|=64,d&&(e.flags|=8192),null===(d=r.callbacks)?r.callbacks=[h]:d.push(h))}else d={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(A=c=d,l=u):c=c.next=d,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}null===c&&(l=u),r.baseState=l,r.firstBaseUpdate=A,r.lastBaseUpdate=c,null===o&&(r.shared.lanes=0),OA|=s,e.lanes=s,e.memoizedState=u}}function pe(e,t){if("function"!==typeof e)throw Error(r(191,e));e.call(t)}function fe(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)pe(n[e],t)}function ge(e,t){if(Da(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!wl.call(t,r)||!Da(e[r],t[r]))return!1}return!0}function me(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ve(){}function ye(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ve,ve),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===bl)throw Error(r(483));throw e;default:if("string"===typeof t.status)t.then(ve,ve);else{if(null!==(e=MA)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===bl)throw Error(r(483));throw e}throw _l=t,bl}}function we(){if(null===_l)throw Error(r(459));var e=_l;return _l=null,e}function be(e){var t=Sl;return Sl+=1,null===Cl&&(Cl=[]),ye(Cl,e,t)}function xe(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Be(e,t){if(t.$$typeof===jr)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _e(e){return(0,e._init)(e._payload)}function Ce(e){function n(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function i(t,i){if(!e)return null;for(;null!==i;)n(t,i),i=i.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Sr(e,t)).index=0,e.sibling=null,e}function l(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=33554434,n):i:(t.flags|=33554434,n):(t.flags|=1048576,n)}function A(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=Ir(n,e.mode,i)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,i){var r=n.type;return r===Kr?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===io&&_e(r)===t.type)?(xe(t=a(t,n.props),n),t.return=e,t):(xe(t=Tr(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,i)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,i,r){return null===t||7!==t.tag?((t=Mr(n,e.mode,i,r)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ir(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Vr:return xe(n=Tr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case Wr:return(t=Ur(t,e.mode,n)).return=e,t;case io:return p(e,t=(0,t._init)(t._payload),n)}if(ho(t)||o(t))return(t=Mr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return p(e,be(t),n);if(t.$$typeof===Zr)return p(e,Ln(e,t),n);Be(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:c(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Vr:return n.key===r?u(e,t,n,i):null;case Wr:return n.key===r?h(e,t,n,i):null;case io:return f(e,t,n=(r=n._init)(n._payload),i)}if(ho(n)||o(n))return null!==r?null:d(e,t,n,i,null);if("function"===typeof n.then)return f(e,t,be(n),i);if(n.$$typeof===Zr)return f(e,t,Ln(e,n),i);Be(e,n)}return null}function g(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case Vr:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case Wr:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case io:return g(e,t,n,i=(0,i._init)(i._payload),r)}if(ho(i)||o(i))return d(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return g(e,t,n,be(i),r);if(i.$$typeof===Zr)return g(e,t,n,Ln(t,i),r);Be(t,i)}return null}function m(t,c,u,h){if("object"===typeof u&&null!==u&&u.type===Kr&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case Vr:e:{for(var d=u.key;null!==c;){if(c.key===d){if((d=u.type)===Kr){if(7===c.tag){i(t,c.sibling),(h=a(c,u.props.children)).return=t,t=h;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===io&&_e(d)===c.type){i(t,c.sibling),xe(h=a(c,u.props),u),h.return=t,t=h;break e}i(t,c);break}n(t,c),c=c.sibling}u.type===Kr?((h=Mr(u.props.children,t.mode,h,u.key)).return=t,t=h):(xe(h=Tr(u.type,u.key,u.props,null,t.mode,h),u),h.return=t,t=h)}return A(t);case Wr:e:{for(d=u.key;null!==c;){if(c.key===d){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){i(t,c.sibling),(h=a(c,u.children||[])).return=t,t=h;break e}i(t,c);break}n(t,c),c=c.sibling}(h=Ur(u,t.mode,h)).return=t,t=h}return A(t);case io:return m(t,c,u=(d=u._init)(u._payload),h)}if(ho(u))return function(t,r,o,a){for(var A=null,c=null,u=r,h=r=0,d=null;null!==u&&h<o.length;h++){u.index>h?(d=u,u=null):d=u.sibling;var m=f(t,u,o[h],a);if(null===m){null===u&&(u=d);break}e&&u&&null===m.alternate&&n(t,u),r=l(m,r,h),null===c?A=m:c.sibling=m,c=m,u=d}if(h===o.length)return i(t,u),tl&&U(t,h),A;if(null===u){for(;h<o.length;h++)null!==(u=p(t,o[h],a))&&(r=l(u,r,h),null===c?A=u:c.sibling=u,c=u);return tl&&U(t,h),A}for(u=s(u);h<o.length;h++)null!==(d=g(u,t,h,o[h],a))&&(e&&null!==d.alternate&&u.delete(null===d.key?h:d.key),r=l(d,r,h),null===c?A=d:c.sibling=d,c=d);return e&&u.forEach(function(e){return n(t,e)}),tl&&U(t,h),A}(t,c,u,h);if(o(u)){if("function"!==typeof(d=o(u)))throw Error(r(150));return function(t,o,a,A){if(null==a)throw Error(r(151));for(var c=null,u=null,h=o,d=o=0,m=null,v=a.next();null!==h&&!v.done;d++,v=a.next()){h.index>d?(m=h,h=null):m=h.sibling;var y=f(t,h,v.value,A);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&n(t,h),o=l(y,o,d),null===u?c=y:u.sibling=y,u=y,h=m}if(v.done)return i(t,h),tl&&U(t,d),c;if(null===h){for(;!v.done;d++,v=a.next())null!==(v=p(t,v.value,A))&&(o=l(v,o,d),null===u?c=v:u.sibling=v,u=v);return tl&&U(t,d),c}for(h=s(h);!v.done;d++,v=a.next())null!==(v=g(h,t,d,v.value,A))&&(e&&null!==v.alternate&&h.delete(null===v.key?d:v.key),o=l(v,o,d),null===u?c=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return n(t,e)}),tl&&U(t,d),c}(t,c,u=d.call(u),h)}if("function"===typeof u.then)return m(t,c,be(u),h);if(u.$$typeof===Zr)return m(t,c,Ln(t,u),h);Be(t,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(i(t,c.sibling),(h=a(c,u)).return=t,t=h):(i(t,c),(h=Ir(u,t.mode,h)).return=t,t=h),A(t)):i(t,c)}return function(e,n,i,r){try{Sl=0;var o=m(e,n,i,r);return Cl=null,o}catch(a){if(a===bl)throw a;var s=t(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}function Se(e,t){v(Fl,e=kA),v(Ml,t),kA=e|t.baseLanes}function Ee(){v(Fl,kA),v(Ml,Ml.current)}function Te(){kA=Fl.current,m(Ml),m(Fl)}function Me(e){var t=e.alternate;v(Ll,1&Ll.current),v(Il,e),null===Ul&&(null===t||null!==Ml.current||null!==t.memoizedState)&&(Ul=e)}function Fe(e){if(22===e.tag){if(v(Ll,Ll.current),v(Il,e),null===Ul){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ul=e)}}else Ie()}function Ie(){v(Ll,Ll.current),v(Il,Il.current)}function Ue(e){m(Il),Ul===e&&(Ul=null),m(Ll)}function Le(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Es(n)||Ts(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Re(){throw Error(r(321))}function Pe(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Da(e[n],t[n]))return!1;return!0}function Ne(e,t,n,i,r,o){return Rl=o,Pl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,co.H=null===e||null===e.memoizedState?Kl:ql,Hl=!1,o=n(i,r),Hl=!1,Ol&&(o=De(t,n,i,r)),ke(e),o}function ke(e){co.H=Wl;var t=null!==Nl&&null!==Nl.next;if(Rl=0,kl=Nl=Pl=null,Dl=!1,zl=0,Gl=null,t)throw Error(r(300));null===e||$l||null!==(e=e.dependencies)&&Fn(e)&&($l=!0)}function De(e,t,n,i){Pl=e;var o=0;do{if(Ol&&(Gl=null),zl=0,Ol=!1,25<=o)throw Error(r(301));if(o+=1,kl=Nl=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}co.H=Xl,s=t(n,i)}while(Ol);return s}function Oe(){var e=co.H,t=e.useState()[0];return t="function"===typeof t.then?Ve(t):t,e=e.useState()[0],(null!==Nl?Nl.memoizedState:null)!==e&&(Pl.flags|=1024),t}function He(){var e=0!==Ql;return Ql=0,e}function Qe(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ze(e){if(Dl){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Dl=!1}Rl=0,kl=Nl=Pl=null,Ol=!1,zl=Ql=0,Gl=null}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===kl?Pl.memoizedState=kl=e:kl=kl.next=e,kl}function je(){if(null===Nl){var e=Pl.alternate;e=null!==e?e.memoizedState:null}else e=Nl.next;var t=null===kl?Pl.memoizedState:kl.next;if(null!==t)kl=t,Nl=e;else{if(null===e){if(null===Pl.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Nl=e).memoizedState,baseState:Nl.baseState,baseQueue:Nl.baseQueue,queue:Nl.queue,next:null},null===kl?Pl.memoizedState=kl=e:kl=kl.next=e}return kl}function Ve(e){var t=zl;return zl+=1,null===Gl&&(Gl=[]),e=ye(Gl,e,t),t=Pl,null===(null===kl?t.memoizedState:kl.next)&&(t=t.alternate,co.H=null===t||null===t.memoizedState?Kl:ql),e}function We(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ve(e);if(e.$$typeof===Zr)return Un(e)}throw Error(r(438,String(e)))}function Ke(e){var t=null,n=Pl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Pl.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n=Vl(),Pl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=ao;return t.index++,n}function qe(e,t){return"function"===typeof t?t(e):t}function Xe(e){return Je(je(),Nl,e)}function Je(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var o=e.baseQueue,s=i.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}t.baseQueue=o=s,i.pending=null}if(s=e.baseState,null===o)e.memoizedState=s;else{var l=a=null,A=null,c=t=o.next,u=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(IA&h)===h:(Rl&h)===h){var d=c.revertLane;if(0===d)null!==A&&(A=A.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===gl&&(u=!0);else{if((Rl&d)===d){c=c.next,d===gl&&(u=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===A?(l=A=h,a=s):A=A.next=h,Pl.lanes|=d,OA|=d}h=c.action,Hl&&n(s,h),s=c.hasEagerState?c.eagerState:n(s,h)}else d={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===A?(l=A=d,a=s):A=A.next=d,Pl.lanes|=h,OA|=h;c=c.next}while(null!==c&&c!==t);if(null===A?a=s:A.next=l,!Da(s,e.memoizedState)&&($l=!0,u&&null!==(n=ml)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=A,i.lastRenderedState=s}return null===o&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ye(e){var t=je(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,s=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);Da(s,t.memoizedState)||($l=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Ze(e,t,n){var i=Pl,o=je(),s=tl;if(s){if(void 0===n)throw Error(r(407));n=n()}else n=t();var a=!Da((Nl||o).memoizedState,n);if(a&&(o.memoizedState=n,$l=!0),o=o.queue,Bt(tt.bind(null,i,o,e),[e]),o.getSnapshot!==t||a||null!==kl&&1&kl.memoizedState.tag){if(i.flags|=2048,vt(9,et.bind(null,i,o,n,t),{destroy:void 0},null),null===MA)throw Error(r(349));s||0!==(60&Rl)||$e(i,t,n)}return n}function $e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Pl.updateQueue)?(t=Vl(),Pl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function et(e,t,n,i){t.value=n,t.getSnapshot=i,nt(t)&&it(e)}function tt(e,t,n){return n(function(){nt(t)&&it(e)})}function nt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Da(e,n)}catch(i){return!0}}function it(e){var t=X(e,2);null!==t&&Wi(t,e,2)}function rt(e){var t=Ge();if("function"===typeof e){var n=e;if(e=n(),Hl){F(!0);try{n()}finally{F(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:e},t}function ot(e,t,n,i){return e.baseState=n,Je(e,Nl,"function"===typeof i?i:qe)}function st(e,t,n,i,o){if(Gt(e))throw Error(r(485));if(null!==(e=t.action)){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==co.T?n(!0):s.isTransition=!1,i(s),null===(n=t.pending)?(s.next=t.pending=s,at(t,s)):(s.next=n.next,t.pending=n.next=s)}}function at(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var o=co.T,s={};co.T=s;try{var a=n(r,i),l=co.S;null!==l&&l(s,a),lt(e,t,a)}catch(A){ct(e,t,A)}finally{co.T=o}}else try{lt(e,t,o=n(r,i))}catch(c){ct(e,t,c)}}function lt(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){At(e,t,n)},function(n){return ct(e,t,n)}):At(e,t,n)}function At(e,t,n){t.status="fulfilled",t.value=n,ut(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,at(e,n)))}function ct(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,ut(t),t=t.next}while(t!==i)}e.action=null}function ut(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ht(e,t){return t}function dt(e,t){if(tl){var n=MA.formState;if(null!==n){e:{var i=Pl;if(tl){if(el){var r=Is(el,il);if(r){el=Ls(r),i=Us(r);break e}}H(i)}i=!1}i&&(t=n[0])}}(n=Ge()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:t},n.queue=i,n=Ht.bind(null,Pl,i),i.dispatch=n,i=rt(!1);var o=zt.bind(null,Pl,!1,i.queue);return r={state:t,dispatch:null,action:e,pending:null},(i=Ge()).queue=r,n=st.bind(null,Pl,r,o,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function pt(e){return ft(je(),Nl,e)}function ft(e,t,n){t=Je(e,t,ht)[0],e=Xe(qe)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?Ve(t):t;var i=je(),r=i.queue,o=r.dispatch;return n!==i.memoizedState&&(Pl.flags|=2048,vt(9,gt.bind(null,r,n),{destroy:void 0},null)),[t,o,e]}function gt(e,t){e.action=t}function mt(e){var t=je(),n=Nl;if(null!==n)return ft(t,n,e);je(),t=t.memoizedState;var i=(n=je()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function vt(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},null===(t=Pl.updateQueue)&&(t=Vl(),Pl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function yt(){return je().memoizedState}function wt(e,t,n,i){var r=Ge();Pl.flags|=e,r.memoizedState=vt(1|t,n,{destroy:void 0},void 0===i?null:i)}function bt(e,t,n,i){var r=je();i=void 0===i?null:i;var o=r.memoizedState.inst;null!==Nl&&null!==i&&Pe(i,Nl.memoizedState.deps)?r.memoizedState=vt(t,n,o,i):(Pl.flags|=e,r.memoizedState=vt(1|t,n,o,i))}function xt(e,t){wt(8390656,8,e,t)}function Bt(e,t){bt(2048,8,e,t)}function _t(e,t){return bt(4,2,e,t)}function Ct(e,t){return bt(4,4,e,t)}function St(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Et(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bt(4,4,St.bind(null,t,e),n)}function Tt(){}function Mt(e,t){var n=je();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Pe(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ft(e,t){var n=je();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Pe(t,i[1]))return i[0];if(i=e(),Hl){F(!0);try{e()}finally{F(!1)}}return n.memoizedState=[i,t],i}function It(e,t,n){return void 0===n||0!==(1073741824&Rl)?e.memoizedState=t:(e.memoizedState=n,e=Vi(),Pl.lanes|=e,OA|=e,n)}function Ut(e,t,n,i){return Da(n,t)?n:null!==Ml.current?(e=It(e,n,i),Da(e,t)||($l=!0),e):0===(42&Rl)?($l=!0,e.memoizedState=n):(e=Vi(),Pl.lanes|=e,OA|=e,t)}function Lt(e,t,n,i,r){var o=ko();No(0!==o&&8>o?o:8);var s=co.T,a={};co.T=a,zt(e,!1,t,n);try{var l=r(),A=co.S;if(null!==A&&A(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Qt(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),ji());else Qt(e,t,i,ji())}catch(c){Qt(e,t,{then:function(){},status:"rejected",reason:c},ji())}finally{No(o),co.T=s}}function Rt(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Wo,baseState:Wo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:Wo},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pt(){return Un(Ko)}function Nt(){return je().memoizedState}function kt(){return je().memoizedState}function Dt(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=ji(),i=Ae(t,e=le(n),n);return null!==i&&(Wi(i,t,n),ce(i,t,n)),t={cache:Pn()},void(e.payload=t)}t=t.return}}function Ot(e,t,n){var i=ji();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Gt(e)?jt(t,n):null!==(n=q(e,t,n,i))&&(Wi(n,e,i),Vt(n,t,i))}function Ht(e,t,n){Qt(e,t,n,ji())}function Qt(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gt(e))jt(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,Da(a,s))return K(e,t,r,0),null===MA&&W(),!1}catch(l){}if(null!==(n=q(e,t,r,i)))return Wi(n,e,i),Vt(n,t,i),!0}return!1}function zt(e,t,n,i){if(i={lane:2,revertLane:re(),action:i,hasEagerState:!1,eagerState:null,next:null},Gt(e)){if(t)throw Error(r(479))}else null!==(t=q(e,n,i,2))&&Wi(t,e,2)}function Gt(e){var t=e.alternate;return e===Pl||null!==t&&t===Pl}function jt(e,t){Ol=Dl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vt(e,t,n){if(0!==(4194176&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,T(e,n)}}function Wt(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:Gr({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function Kt(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ge(n,i)||!ge(r,o))}function qt(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Jl.enqueueReplaceState(t,t.state,null)}function Xt(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=Gr({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function Jt(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Yt(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Zt(e,t,n){return(n=le(n)).tag=3,n.payload={element:null},n.callback=function(){Jt(e,t)},n}function $t(e){return(e=le(e)).tag=3,e}function en(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var o=i.value;e.payload=function(){return r(o)},e.callback=function(){Yt(t,n,i)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Yt(t,n,i),"function"!==typeof r&&(null===JA?JA=new Set([this]):JA.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}function tn(e,t,n,i){t.child=null===e?Tl(t,null,n,i):El(t,e.child,n,i)}function nn(e,t,n,i,r){n=n.render;var o=t.ref;if("ref"in i){var s={};for(var a in i)"ref"!==a&&(s[a]=i[a])}else s=i;return In(t),i=Ne(e,t,n,s,o,r),a=He(),null===e||$l?(tl&&a&&R(t),t.flags|=1,tn(e,t,i,r),t.child):(Qe(e,t,r),xn(e,t,r))}function rn(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Cr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Tr(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,on(e,t,o,i,r))}if(o=e.child,!Bn(e,r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ge)(s,i)&&e.ref===t.ref)return xn(e,t,r)}return t.flags|=1,(e=Sr(o,i)).ref=t.ref,e.return=t,t.child=e}function on(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(ge(o,i)&&e.ref===t.ref){if($l=!1,t.pendingProps=i=o,!Bn(e,r))return t.lanes=e.lanes,xn(e,t,r);0!==(131072&e.flags)&&($l=!0)}}return An(e,t,n,i,r)}function sn(e,t,n){var i=t.pendingProps,r=i.children,o=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(ln(e,t),"hidden"===i.mode||o){if(0!==(128&t.flags)){if(i=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;t.childLanes=o&~i}else t.childLanes=0,t.child=null;return an(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,an(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Dn(t,null!==s?s.cachePool:null),null!==s?Se(t,s):Ee(),Fe(t)}else null!==s?(Dn(t,s.cachePool),Se(t,s),Ie(),t.memoizedState=null):(null!==e&&Dn(t,null),Ee(),Ie());return tn(e,t,r,n),t.child}function an(e,t,n,i){var r=kn();return r=null===r?null:{parent:Fo?aA._currentValue:aA._currentValue2,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Dn(t,null),Ee(),Fe(t),null!==e&&Mn(e,t,i,!0),null}function ln(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function An(e,t,n,i,r){return In(t),n=Ne(e,t,n,i,void 0,r),i=He(),null===e||$l?(tl&&i&&R(t),t.flags|=1,tn(e,t,n,r),t.child):(Qe(e,t,r),xn(e,t,r))}function cn(e,t,n,i,r,o){return In(t),t.updateQueue=null,n=De(t,i,n,r),ke(e),i=He(),null===e||$l?(tl&&i&&R(t),t.flags|=1,tn(e,t,n,o),t.child):(Qe(e,t,o),xn(e,t,o))}function un(e,t,n,i,r){if(In(t),null===t.stateNode){var o=ya,s=n.contextType;"object"===typeof s&&null!==s&&(o=Un(s)),o=new n(i,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=Jl,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=i,o.state=t.memoizedState,o.refs={},se(t),s=n.contextType,o.context="object"===typeof s&&null!==s?Un(s):ya,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(Wt(t,n,s,i),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&Jl.enqueueReplaceState(o,o.state,null),de(t,i,o,r),he(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=Xt(n,a);o.props=l;var A=o.context,c=n.contextType;s=ya,"object"===typeof c&&null!==c&&(s=Un(c));var u=n.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||A!==s)&&qt(t,o,i,s),vl=!1;var h=t.memoizedState;o.state=h,de(t,i,o,r),he(),A=t.memoizedState,a||h!==A||vl?("function"===typeof u&&(Wt(t,n,u,i),A=t.memoizedState),(l=vl||Kt(t,n,l,i,h,A,s))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=A),o.props=i,o.state=A,o.context=s,i=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,ae(e,t),c=Xt(n,s=t.memoizedProps),o.props=c,u=t.pendingProps,h=o.context,A=n.contextType,l=ya,"object"===typeof A&&null!==A&&(l=Un(A)),(A="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==u||h!==l)&&qt(t,o,i,l),vl=!1,h=t.memoizedState,o.state=h,de(t,i,o,r),he();var d=t.memoizedState;s!==u||h!==d||vl||null!==e&&null!==e.dependencies&&Fn(e.dependencies)?("function"===typeof a&&(Wt(t,n,a,i),d=t.memoizedState),(c=vl||Kt(t,n,c,i,h,d,l)||null!==e&&null!==e.dependencies&&Fn(e.dependencies))?(A||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,d,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,d,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),o.props=i,o.state=d,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,ln(e,t),i=0!==(128&t.flags),o||i?(o=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&i?(t.child=El(t,e.child,null,r),t.child=El(t,null,n,r)):tn(e,t,n,r),t.memoizedState=o.state,e=t.child):e=xn(e,t,r),e}function hn(e,t,n,i){return j(),t.flags|=256,tn(e,t,n,i),t.child}function dn(e){return{baseLanes:e,cachePool:On()}}function pn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=zA),e}function fn(e,n,i){var o,s=n.pendingProps,a=!1,l=0!==(128&n.flags);if((o=l)||(o=(null===e||null!==e.memoizedState)&&0!==(2&Ll.current)),o&&(a=!0,n.flags&=-129),o=0!==(32&n.flags),n.flags&=-33,null===e){if(tl){if(a?Me(n):Ie(),tl){var A,c=el;(A=c)&&(null!==(c=Os(c,il))?(n.memoizedState={dehydrated:c,treeContext:null!==Wa?{id:Ka,overflow:qa}:null,retryLane:536870912},(A=t(18,null,null,0)).stateNode=c,A.return=n,n.child=A,$a=n,el=null,A=!0):A=!1),A||H(n)}if(null!==(c=n.memoizedState)&&null!==(c=c.dehydrated))return Ts(c)?n.lanes=16:n.lanes=536870912,null;Ue(n)}return c=s.children,s=s.fallback,a?(Ie(),c=mn({mode:"hidden",children:c},a=n.mode),s=Mr(s,a,i,null),c.return=n,s.return=n,c.sibling=s,n.child=c,(a=n.child).memoizedState=dn(i),a.childLanes=pn(e,o,i),n.memoizedState=eA,s):(Me(n),gn(n,c))}if(null!==(A=e.memoizedState)&&null!==(c=A.dehydrated)){if(l)256&n.flags?(Me(n),n.flags&=-257,n=vn(e,n,i)):null!==n.memoizedState?(Ie(),n.child=e.child,n.flags|=128,n=null):(Ie(),a=s.fallback,c=n.mode,s=mn({mode:"visible",children:s.children},c),(a=Mr(a,c,i,null)).flags|=2,s.return=n,a.return=n,s.sibling=a,n.child=s,El(n,e.child,null,i),(s=n.child).memoizedState=dn(i),s.childLanes=pn(e,o,i),n.memoizedState=eA,n=a);else if(Me(n),Ts(c))o=Ms(c).digest,(s=Error(r(419))).stack="",s.digest=o,V({value:s,source:null,stack:null}),n=vn(e,n,i);else if($l||Mn(e,n,i,!1),o=0!==(i&e.childLanes),$l||o){if(null!==(o=MA)){if(0!==(42&(s=i&-i)))s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(0!==(s=0!==(s&(o.suspendedLanes|i))?0:s)&&s!==A.retryLane)throw A.retryLane=s,X(e,s),Wi(o,e,s),Zl}Es(c)||or(),n=vn(e,n,i)}else Es(c)?(n.flags|=128,n.child=e.child,n=xr.bind(null,e),Fs(c,n),n=null):(e=A.treeContext,Lo&&(el=Ns(c),$a=n,tl=!0,nl=null,il=!1,null!==e&&(ja[Va++]=Ka,ja[Va++]=qa,ja[Va++]=Wa,Ka=e.id,qa=e.overflow,Wa=n)),(n=gn(n,s.children)).flags|=4096);return n}return a?(Ie(),a=s.fallback,c=n.mode,l=(A=e.child).sibling,(s=Sr(A,{mode:"hidden",children:s.children})).subtreeFlags=31457280&A.subtreeFlags,null!==l?a=Sr(l,a):(a=Mr(a,c,i,null)).flags|=2,a.return=n,s.return=n,s.sibling=a,n.child=s,s=a,a=n.child,null===(c=e.child.memoizedState)?c=dn(i):(null!==(A=c.cachePool)?(l=Fo?aA._currentValue:aA._currentValue2,A=A.parent!==l?{parent:l,pool:l}:A):A=On(),c={baseLanes:c.baseLanes|i,cachePool:A}),a.memoizedState=c,a.childLanes=pn(e,o,i),n.memoizedState=eA,s):(Me(n),e=(i=e.child).sibling,(i=Sr(i,{mode:"visible",children:s.children})).return=n,i.sibling=null,null!==e&&(null===(o=n.deletions)?(n.deletions=[e],n.flags|=16):o.push(e)),n.child=i,n.memoizedState=null,i)}function gn(e,t){return(t=mn({mode:"visible",children:t},e.mode)).return=e,e.child=t}function mn(e,t){return Fr(e,t,0,null)}function vn(e,t,n){return El(t,e.child,null,n),(e=gn(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function yn(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),En(e.return,t,n)}function wn(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function bn(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(tn(e,t,i.children,n),0!==(2&(i=Ll.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&yn(e,n,t);else if(19===e.tag)yn(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(v(Ll,i),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Le(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),wn(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Le(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}wn(t,!0,n,null,o);break;case"together":wn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),OA|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Mn(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Sr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Fn(e))}function _n(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)$l=!0;else{if(!Bn(e,n)&&0===(128&t.flags))return $l=!1,function(e,t,n){switch(t.tag){case 3:N(t,t.stateNode.containerInfo),Cn(t,aA,e.memoizedState.cache),j();break;case 27:case 5:D(t);break;case 4:N(t,t.stateNode.containerInfo);break;case 10:Cn(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Me(t),t.flags|=128,null):0!==(n&t.child.childLanes)?fn(e,t,n):(Me(t),null!==(e=xn(e,t,n))?e.sibling:null);Me(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Mn(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return bn(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),v(Ll,Ll.current),i)break;return null;case 22:case 23:return t.lanes=0,sn(e,t,n);case 24:Cn(t,aA,e.memoizedState.cache)}return xn(e,t,n)}(e,t,n);$l=0!==(131072&e.flags)}else $l=!1,tl&&0!==(1048576&t.flags)&&L(t,Ga,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((o=i.$$typeof)===$r){t.tag=11,t=nn(null,t,i,e,n);break e}if(o===no){t.tag=14,t=rn(null,t,i,e,n);break e}}throw t=s(i)||i,Error(r(306,t,""))}Cr(i)?(e=Xt(i,e),t.tag=1,t=un(null,t,i,e,n)):(t.tag=0,t=An(null,t,i,e,n))}return t;case 0:return An(e,t,t.type,t.pendingProps,n);case 1:return un(e,t,i=t.type,o=Xt(i,t.pendingProps),n);case 3:e:{if(N(t,t.stateNode.containerInfo),null===e)throw Error(r(387));var a=t.pendingProps;i=(o=t.memoizedState).element,ae(e,t),de(t,a,null,n);var l=t.memoizedState;if(a=l.cache,Cn(t,aA,a),a!==o.cache&&Tn(t,[aA],n,!0),he(),a=l.element,Lo&&o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=hn(e,t,a,n);break e}if(a!==i){V(i=I(Error(r(424)),t)),t=hn(e,t,a,n);break e}for(Lo&&(el=Ps(t.stateNode.containerInfo),$a=t,tl=!0,nl=null,il=!0),n=Tl(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(j(),a===i){t=xn(e,t,n);break e}tn(e,t,a,n)}t=t.child}return t;case 26:if(Ys)return ln(e,t),null===e?(n=ea(t.type,null,t.pendingProps,null))?t.memoizedState=n:tl||(t.stateNode=sa(t.type,t.pendingProps,Ya.current,t)):t.memoizedState=ea(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(ua)return D(t),null===e&&ua&&tl&&(i=t.stateNode=ha(t.type,t.pendingProps,Ya.current,Xa.current,!1),$a=t,il=!0,el=Rs(i)),i=t.pendingProps.children,null!==e||tl?tn(e,t,i,n):t.child=El(t,null,i,n),ln(e,t),t.child;case 5:return null===e&&tl&&(Xs(t.type,t.pendingProps,Xa.current),(o=i=el)&&(null!==(i=ks(i,t.type,t.pendingProps,il))?(t.stateNode=i,$a=t,el=Rs(i),il=!1,o=!0):o=!1),o||H(t)),D(t),o=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,i=a.children,Co(o,a)?i=null:null!==l&&Co(o,l)&&(t.flags|=32),null!==t.memoizedState&&(o=Ne(e,t,Oe,null,null,n),Fo?Ko._currentValue=o:Ko._currentValue2=o),ln(e,t),tn(e,t,i,n),t.child;case 6:return null===e&&tl&&(Js(t.pendingProps,Xa.current),(e=n=el)&&(null!==(n=Ds(n,t.pendingProps,il))?(t.stateNode=n,$a=t,el=null,e=!0):e=!1),e||H(t)),null;case 13:return fn(e,t,n);case 4:return N(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=El(t,null,i,n):tn(e,t,i,n),t.child;case 11:return nn(e,t,t.type,t.pendingProps,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Cn(t,t.type,i.value),tn(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,In(t),i=i(o=Un(o)),t.flags|=1,tn(e,t,i,n),t.child;case 14:return rn(e,t,t.type,t.pendingProps,n);case 15:return on(e,t,t.type,t.pendingProps,n);case 19:return bn(e,t,n);case 22:return sn(e,t,n);case 24:return In(t),i=Un(aA),null===e?(null===(o=kn())&&(o=MA,a=Pn(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:i,cache:o},se(t),Cn(t,aA,o)):(0!==(e.lanes&n)&&(ae(e,t),de(t,null,null,n),he()),o=e.memoizedState,a=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Cn(t,aA,i)):(i=a.cache,Cn(t,aA,i),i!==o.cache&&Tn(t,[aA],n,!0))),tn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Cn(e,t,n){Fo?(v(tA,t._currentValue),t._currentValue=n):(v(tA,t._currentValue2),t._currentValue2=n)}function Sn(e){var t=tA.current;Fo?e._currentValue=t:e._currentValue2=t,m(tA)}function En(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Tn(e,t,n,i){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var s=o.dependencies;if(null!==s){var a=o.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=o;for(var A=0;A<t.length;A++)if(l.context===t[A]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),En(s.return,n,e),i||(a=null);break e}s=l.next}}else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),En(a,n,e),a=null}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}function Mn(e,t,n,i){e=null;for(var o=t,s=!1;null!==o;){if(!s)if(0!==(524288&o.flags))s=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var a=o.alternate;if(null===a)throw Error(r(387));if(null!==(a=a.memoizedProps)){var l=o.type;Da(o.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(o===Za.current){if(null===(a=o.alternate))throw Error(r(387));a.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Ko):e=[Ko])}o=o.return}null!==e&&Tn(t,e,n,i),t.flags|=262144}function Fn(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!Da(Fo?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function In(e){nA=e,iA=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Un(e){return Rn(nA,e)}function Ln(e,t){return null===nA&&In(e),Rn(e,t)}function Rn(e,t){var n=Fo?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===iA){if(null===e)throw Error(r(308));iA=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else iA=iA.next=t;return n}function Pn(){return{controller:new rA,data:new Map,refCount:0}}function Nn(e){e.refCount--,0===e.refCount&&oA(sA,function(){e.controller.abort()})}function kn(){var e=AA.current;return null!==e?e:MA.pooledCache}function Dn(e,t){v(AA,null===t?AA.current:t.pool)}function On(){var e=kn();return null===e?null:{parent:Fo?aA._currentValue:aA._currentValue2,pool:e}}function Hn(e){e.flags|=4}function Qn(e,t){if(null!==e&&e.child===t.child)return!1;if(0!==(16&t.flags))return!0;for(e=t.child;null!==e;){if(0!==(13878&e.flags)||0!==(13878&e.subtreeFlags))return!0;e=e.sibling}return!1}function zn(e,t,n,i){if(Io)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)Bo(e,n.stateNode);else if(!(4===n.tag||ua&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Uo)for(var r=t.child;null!==r;){if(5===r.tag){var o=r.stateNode;n&&i&&(o=Cs(o,r.type,r.memoizedProps)),Bo(e,o)}else if(6===r.tag)o=r.stateNode,n&&i&&(o=Ss(o,r.memoizedProps)),Bo(e,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),zn(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Gn(e,t,n,i){if(Uo)for(var r=t.child;null!==r;){if(5===r.tag){var o=r.stateNode;n&&i&&(o=Cs(o,r.type,r.memoizedProps)),xs(e,o)}else if(6===r.tag)o=r.stateNode,n&&i&&(o=Ss(o,r.memoizedProps)),xs(e,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),Gn(e,r,!(null!==r.memoizedProps&&"manual"===r.memoizedProps.mode),!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function jn(e,t){if(Uo&&Qn(e,t)){var n=(e=t.stateNode).containerInfo,i=bs();Gn(i,t,!1,!1),e.pendingChildren=i,Hn(t),Bs(n,i)}}function Vn(e,t,n,i){if(Io)e.memoizedProps!==i&&Hn(t);else if(Uo){var r=e.stateNode,o=e.memoizedProps;if((e=Qn(e,t))||o!==i){var s=Xa.current;(o=ws(r,n,o,i,!e,null))===r?t.stateNode=r:(_o(o,n,i,s)&&Hn(t),t.stateNode=o,e?zn(o,t,!1,!1):Hn(t))}else t.stateNode=r}}function Wn(e,t,n){if(Qo(t,n)){if(e.flags|=16777216,!zo(t,n)){if(!nr())throw _l=Bl,xl;e.flags|=8192}}else e.flags&=-16777217}function Kn(e,t){if(la(t)){if(e.flags|=16777216,!Aa(t)){if(!nr())throw _l=Bl,xl;e.flags|=8192}}else e.flags&=-16777217}function qn(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_():536870912,e.lanes|=t,GA|=t)}function Xn(e,t){if(!tl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Jn(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=31457280&r.subtreeFlags,i|=31457280&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Yn(e,t,n){var i=t.pendingProps;switch(P(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Jn(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Sn(aA),k(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(G(t)?Hn(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==nl&&(qi(nl),nl=null))),jn(e,t),Jn(t),null;case 26:if(Ys){n=t.type;var o=t.memoizedState;return null===e?(Hn(t),null!==o?(Jn(t),Kn(t,o)):(Jn(t),Wn(t,n,i))):o?o!==e.memoizedState?(Hn(t),Jn(t),Kn(t,o)):(Jn(t),t.flags&=-16777217):(Io?e.memoizedProps!==i&&Hn(t):Vn(e,t,n,i),Jn(t),Wn(t,n,i)),null}case 27:if(ua){if(O(t),n=Ya.current,o=t.type,null!==e&&null!=t.stateNode)Io?e.memoizedProps!==i&&Hn(t):Vn(e,t,o,i);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Jn(t),null}e=Xa.current,G(t)?Q(t,e):(e=ha(o,i,n,e,!0),t.stateNode=e,Hn(t))}return Jn(t),null}case 5:if(O(t),n=t.type,null!==e&&null!=t.stateNode)Vn(e,t,n,i);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Jn(t),null}e=Xa.current,G(t)?Q(t,e):(zn(o=xo(n,i,Ya.current,e,t),t,!1,!1),t.stateNode=o,_o(o,n,i,e)&&Hn(t))}return Jn(t),Wn(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Io?n!==i&&Hn(t):Uo&&(n!==i?(t.stateNode=So(i,Ya.current,Xa.current,t),Hn(t)):t.stateNode=e.stateNode);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(e=Ya.current,n=Xa.current,G(t)){if(!Lo)throw Error(r(176));if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(o=$a))switch(o.tag){case 27:case 5:i=o.memoizedProps}Qs(e,n,t,i)||H(t)}else t.stateNode=So(i,e,n,t)}return Jn(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=G(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!Lo)throw Error(r(344));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));zs(o,t)}else j(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jn(t),o=!1}else null!==nl&&(qi(nl),nl=null),o=!0;if(!o)return 256&t.flags?(Ue(t),t):(Ue(t),null)}if(Ue(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(o=i.alternate.memoizedState.cachePool.pool);var s=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),qn(t,t.updateQueue),Jn(t),null;case 4:return k(),jn(e,t),null===e&&Po(t.stateNode.containerInfo),Jn(t),null;case 10:return Sn(t.type),Jn(t),null;case 19:if(m(Ll),null===(o=t.memoizedState))return Jn(t),null;if(i=0!==(128&t.flags),null===(s=o.rendering))if(i)Xn(o,!1);else{if(0!==DA||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Le(e))){for(t.flags|=128,Xn(o,!1),e=s.updateQueue,t.updateQueue=e,qn(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Er(n,e),n=n.sibling;return v(Ll,1&Ll.current|2),t.child}e=e.sibling}null!==o.tail&&Ma()>qA&&(t.flags|=128,i=!0,Xn(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Le(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,qn(t,e),Xn(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!tl)return Jn(t),null}else 2*Ma()-o.renderingStartTime>qA&&536870912!==n&&(t.flags|=128,i=!0,Xn(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=o.last)?e.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ma(),t.sibling=null,e=Ll.current,v(Ll,i?1&e|2:1&e),t):(Jn(t),null);case 22:case 23:return Ue(t),Te(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(Jn(t),6&t.subtreeFlags&&(t.flags|=8192)):Jn(t),null!==(n=t.updateQueue)&&qn(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&m(AA),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Sn(aA),Jn(t),null;case 25:return null}throw Error(r(156,t.tag))}function Zn(e,t){switch(P(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Sn(aA),k(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return O(t),null;case 13:if(Ue(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));j()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return m(Ll),null;case 4:return k(),null;case 10:return Sn(t.type),null;case 22:case 23:return Ue(t),Te(),null!==e&&m(AA),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Sn(aA),null;default:return null}}function $n(e,t){switch(P(t),t.tag){case 3:Sn(aA),k();break;case 26:case 27:case 5:O(t);break;case 4:k();break;case 13:Ue(t);break;case 19:m(Ll);break;case 10:Sn(t.type);break;case 22:case 23:Ue(t),Te(),null!==e&&m(AA);break;case 24:Sn(aA)}}function ei(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var o=n.create,s=n.inst;i=o(),s.destroy=i}n=n.next}while(n!==r)}}catch(a){vr(t,t.return,a)}}function ti(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var o=r.next;i=o;do{if((i.tag&e)===e){var s=i.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,r=t;var l=n;try{a()}catch(A){vr(r,l,A)}}}i=i.next}while(i!==o)}}catch(A){vr(t,t.return,A)}}function ni(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fe(t,n)}catch(i){vr(e,e.return,i)}}}function ii(e,t,n){n.props=Xt(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){vr(e,t,i)}}function ri(e,t){try{var n=e.ref;if(null!==n){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=mo(i);break;default:r=i}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){vr(e,t,o)}}function oi(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){vr(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){vr(e,t,o)}else n.current=null}function si(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{ls(i,t,n,e)}catch(r){vr(e,e.return,r)}}function ai(e,t,n){try{As(e.stateNode,e.type,n,t,e)}catch(i){vr(e,e.return,i)}}function li(e){return 5===e.tag||3===e.tag||!!Ys&&26===e.tag||!!ua&&27===e.tag||4===e.tag}function Ai(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||li(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(!ua||27!==e.tag)&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ci(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?us(n,e,t):ss(n,e);else if(!(4===i||ua&&27===i)&&null!==(e=e.child))for(ci(e,t,n),e=e.sibling;null!==e;)ci(e,t,n),e=e.sibling}function ui(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?cs(n,e,t):os(n,e);else if(!(4===i||ua&&27===i)&&null!==(e=e.child))for(ui(e,t,n),e=e.sibling;null!==e;)ui(e,t,n),e=e.sibling}function hi(e,t,n){e=e.containerInfo;try{_s(e,n)}catch(i){vr(t,t.return,i)}}function di(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Bi(e,n),4&i&&ei(5,n);break;case 1:if(Bi(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){vr(n,n.return,a)}else{var r=Xt(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){vr(n,n.return,l)}}64&i&&ni(n),512&i&&ri(n,n.return);break;case 3:if(Bi(e,n),64&i&&null!==(i=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=mo(n.child.stateNode);break;case 1:e=n.child.stateNode}try{fe(i,e)}catch(a){vr(n,n.return,a)}}break;case 26:if(Ys){Bi(e,n),512&i&&ri(n,n.return);break}case 27:case 5:Bi(e,n),null===t&&4&i&&si(n),512&i&&ri(n,n.return);break;case 12:Bi(e,n);break;case 13:Bi(e,n),4&i&&mi(e,n);break;case 22:if(!(r=null!==n.memoizedState||cA)){t=null!==t&&null!==t.memoizedState||uA;var o=cA,s=uA;cA=r,(uA=t)&&!s?Ci(e,n,0!==(8772&n.subtreeFlags)):Bi(e,n),cA=o,uA=s}512&i&&("manual"===n.memoizedProps.mode?ri(n,n.return):oi(n,n.return));break;default:Bi(e,n)}}function pi(e){var t=e.alternate;null!==t&&(e.alternate=null,pi(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ho(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fi(e,t,n){for(n=n.child;null!==n;)gi(e,t,n),n=n.sibling}function gi(e,t,n){if(ka&&"function"===typeof ka.onCommitFiberUnmount)try{ka.onCommitFiberUnmount(Na,n)}catch(o){}switch(n.tag){case 26:if(Ys){uA||oi(n,t),fi(e,t,n),n.memoizedState?na(n.memoizedState):n.stateNode&&oa(n.stateNode);break}case 27:if(ua){uA||oi(n,t);var i=gA,r=mA;gA=n.stateNode,fi(e,t,n),fa(n.stateNode),gA=i,mA=r;break}case 5:uA||oi(n,t);case 6:if(Io){if(i=gA,r=mA,gA=null,fi(e,t,n),mA=r,null!==(gA=i))if(mA)try{ds(gA,n.stateNode)}catch(s){vr(n,t,s)}else try{hs(gA,n.stateNode)}catch(s){vr(n,t,s)}}else fi(e,t,n);break;case 18:Io&&null!==gA&&(mA?Ks(gA,n.stateNode):Ws(gA,n.stateNode));break;case 4:Io?(i=gA,r=mA,gA=n.stateNode.containerInfo,mA=!0,fi(e,t,n),gA=i,mA=r):(Uo&&hi(n.stateNode,n,bs()),fi(e,t,n));break;case 0:case 11:case 14:case 15:uA||ti(2,n,t),uA||ti(4,n,t),fi(e,t,n);break;case 1:uA||(oi(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&ii(n,t,i)),fi(e,t,n);break;case 21:fi(e,t,n);break;case 22:uA||oi(n,t),uA=(i=uA)||null!==n.memoizedState,fi(e,t,n),uA=i;break;default:fi(e,t,n)}}function mi(e,t){if(Lo&&null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Vs(e)}catch(n){vr(t,t.return,n)}}function vi(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new dA),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new dA),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var i=Br.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function yi(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var o=n[i],s=e,a=t;if(Io){var l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:gA=l.stateNode,mA=!1;break e;case 3:case 4:gA=l.stateNode.containerInfo,mA=!0;break e}l=l.return}if(null===gA)throw Error(r(160));gi(s,a,o),gA=null,mA=!1}else gi(s,a,o);null!==(s=o.alternate)&&(s.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)wi(t,e),t=t.sibling}function wi(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yi(t,e),bi(e),4&i&&(ti(3,e,e.return),ei(3,e),ti(5,e,e.return));break;case 1:yi(t,e),bi(e),512&i&&(uA||null===n||oi(n,n.return)),64&i&&cA&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:if(Ys){var o=vA;yi(t,e),bi(e),512&i&&(uA||null===n||oi(n,n.return)),4&i&&(i=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=ia(o,e.type,e.memoizedProps,e):ra(o,e.type,e.stateNode):e.stateNode=ta(o,t,e.memoizedProps):i!==t?(null===i?null!==n.stateNode&&oa(n.stateNode):na(i),null===t?ra(o,e.type,e.stateNode):ta(o,t,e.memoizedProps)):null===t&&null!==e.stateNode&&ai(e,e.memoizedProps,n.memoizedProps));break}case 27:if(ua&&4&i&&null===e.alternate){o=e.stateNode;var s=e.memoizedProps;try{da(o),pa(e.type,s,o,e)}catch(u){vr(e,e.return,u)}}case 5:if(yi(t,e),bi(e),512&i&&(uA||null===n||oi(n,n.return)),Io){if(32&e.flags){t=e.stateNode;try{ps(t)}catch(u){vr(e,e.return,u)}}4&i&&null!=e.stateNode&&ai(e,t=e.memoizedProps,null!==n?n.memoizedProps:t),1024&i&&(hA=!0)}break;case 6:if(yi(t,e),bi(e),4&i&&Io){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=null!==n?n.memoizedProps:i,t=e.stateNode;try{as(t,n,i)}catch(u){vr(e,e.return,u)}}break;case 3:if(Ys?(aa(),o=vA,vA=$s(t.containerInfo),yi(t,e),vA=o):yi(t,e),bi(e),4&i){if(Io&&Lo&&null!==n&&n.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(u){vr(e,e.return,u)}if(Uo){i=t.containerInfo,n=t.pendingChildren;try{_s(i,n)}catch(u){vr(e,e.return,u)}}}hA&&(hA=!1,xi(e));break;case 4:Ys?(n=vA,vA=$s(e.stateNode.containerInfo),yi(t,e),bi(e),vA=n):(yi(t,e),bi(e)),4&i&&Uo&&hi(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:yi(t,e),bi(e);break;case 13:yi(t,e),bi(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(KA=Ma()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,vi(e,i)));break;case 22:512&i&&(uA||null===n||oi(n,n.return)),o=null!==e.memoizedState;var a=null!==n&&null!==n.memoizedState,l=cA,A=uA;if(cA=l||o,uA=A||a,yi(t,e),uA=A,cA=l,bi(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&i&&(t._visibility=o?-2&t._visibility:1|t._visibility,o&&(t=cA||uA,null===n||a||t||_i(e)),Io&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode)))e:if(n=null,Io)for(t=e;;){if(5===t.tag||Ys&&26===t.tag||ua&&27===t.tag){if(null===n){a=n=t;try{s=a.stateNode,o?fs(s):ms(a.stateNode,a.memoizedProps)}catch(u){vr(a,a.return,u)}}}else if(6===t.tag){if(null===n){a=t;try{var c=a.stateNode;o?gs(c):vs(c,a.memoizedProps)}catch(u){vr(a,a.return,u)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,vi(e,n))));break;case 19:yi(t,e),bi(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,vi(e,i)));break;case 21:break;default:yi(t,e),bi(e)}}function bi(e){var t=e.flags;if(2&t){try{if(Io&&(!ua||27!==e.tag)){e:{for(var n=e.return;null!==n;){if(li(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 27:if(ua){var o=i.stateNode;ui(e,Ai(e),o);break}case 5:var s=i.stateNode;32&i.flags&&(ps(s),i.flags&=-33),ui(e,Ai(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;ci(e,Ai(e),a);break;default:throw Error(r(161))}}}catch(l){vr(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xi(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;xi(t),5===t.tag&&1024&t.flags&&qo(t.stateNode),e=e.sibling}}function Bi(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)di(e,t.alternate,t),t=t.sibling}function _i(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ti(4,t,t.return),_i(t);break;case 1:oi(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ii(t,t.return,n),_i(t);break;case 26:case 27:case 5:oi(t,t.return),_i(t);break;case 22:oi(t,t.return),null===t.memoizedState&&_i(t);break;default:_i(t)}e=e.sibling}}function Ci(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:Ci(r,o,n),ei(4,o);break;case 1:if(Ci(r,o,n),"function"===typeof(r=(i=o).stateNode).componentDidMount)try{r.componentDidMount()}catch(A){vr(i,i.return,A)}if(null!==(r=(i=o).updateQueue)){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)pe(l[r],a)}catch(A){vr(i,i.return,A)}}n&&64&s&&ni(o),ri(o,o.return);break;case 26:case 27:case 5:Ci(r,o,n),n&&null===i&&4&s&&si(o),ri(o,o.return);break;case 12:default:Ci(r,o,n);break;case 13:Ci(r,o,n),n&&4&s&&mi(r,o);break;case 22:null===o.memoizedState&&Ci(r,o,n),ri(o,o.return)}t=t.sibling}}function Si(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Nn(n))}function Ei(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Nn(e))}function Ti(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Mi(e,t,n,i),t=t.sibling}function Mi(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ti(e,t,n,i),2048&r&&ei(9,t);break;case 3:Ti(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Nn(e)));break;case 12:if(2048&r){Ti(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){vr(t,t.return,l)}}else Ti(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,null!==t.memoizedState?4&o._visibility?Ti(e,t,n,i):Ii(e,t):4&o._visibility?Ti(e,t,n,i):(o._visibility|=4,Fi(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&r&&Si(t.alternate,t);break;case 24:Ti(e,t,n,i),2048&r&&Ei(t.alternate,t);break;default:Ti(e,t,n,i)}}function Fi(e,t,n,i,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,s=t,a=n,l=i,A=s.flags;switch(s.tag){case 0:case 11:case 15:Fi(o,s,a,l,r),ei(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?4&c._visibility?Fi(o,s,a,l,r):Ii(o,s):(c._visibility|=4,Fi(o,s,a,l,r)),r&&2048&A&&Si(s.alternate,s);break;case 24:Fi(o,s,a,l,r),r&&2048&A&&Ei(s.alternate,s);break;default:Fi(o,s,a,l,r)}t=t.sibling}}function Ii(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Ii(n,i),2048&r&&Si(i.alternate,i);break;case 24:Ii(n,i),2048&r&&Ei(i.alternate,i);break;default:Ii(n,i)}t=t.sibling}}function Ui(e){if(e.subtreeFlags&yA)for(e=e.child;null!==e;)Li(e),e=e.sibling}function Li(e){switch(e.tag){case 26:Ui(e),e.flags&yA&&(null!==e.memoizedState?ca(vA,e.memoizedState,e.memoizedProps):jo(e.type,e.memoizedProps));break;case 5:Ui(e),e.flags&yA&&jo(e.type,e.memoizedProps);break;case 3:case 4:if(Ys){var t=vA;vA=$s(e.stateNode.containerInfo),Ui(e),vA=t}else Ui(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=yA,yA=16777216,Ui(e),yA=t):Ui(e));break;default:Ui(e)}}function Ri(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Pi(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];pA=i,Di(i,e)}Ri(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ni(e),e=e.sibling}function Ni(e){switch(e.tag){case 0:case 11:case 15:Pi(e),2048&e.flags&&ti(9,e,e.return);break;case 3:case 12:default:Pi(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,ki(e)):Pi(e)}}function ki(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];pA=i,Di(i,e)}Ri(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ti(8,t,t.return),ki(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,ki(t));break;default:ki(t)}e=e.sibling}}function Di(e,t){for(;null!==pA;){var n=pA;switch(n.tag){case 0:case 11:case 15:ti(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Nn(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,pA=i;else e:for(n=e;null!==pA;){var r=(i=pA).sibling,o=i.return;if(pi(i),i===n){pA=null;break e}if(null!==r){r.return=o,pA=r;break e}pA=o}}}function Oi(e){var t=Ro(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(r(364));return t}if(null===(e=Zo(e)))throw Error(r(362));return e.stateNode.current}function Hi(e,t){var n=e.tag;switch(t.$$typeof){case bA:if(e.type===t.value)return!0;break;case xA:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var i=e[n++],o=i.tag,s=e[n++],a=t[s];if(5!==o&&26!==o&&27!==o||!ts(i)){for(;null!=a&&Hi(i,a);)a=t[++s];if(s===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,s),i=i.sibling}}t=!1}return t;case BA:if((5===n||26===n||27===n)&&ns(e.stateNode,t.value))return!0;break;case CA:if((5===n||6===n||26===n||27===n)&&(null!==(e=es(e))&&0<=e.indexOf(t.value)))return!0;break;case _A:if((5===n||26===n||27===n)&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Qi(e){switch(e.$$typeof){case bA:return"<"+(s(e.value)||"Unknown")+">";case xA:return":has("+(Qi(e)||"")+")";case BA:return'[role="'+e.value+'"]';case CA:return'"'+e.value+'"';case _A:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function zi(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],o=r.tag,s=e[i++],a=t[s];if(5!==o&&26!==o&&27!==o||!ts(r)){for(;null!=a&&Hi(r,a);)a=t[++s];if(s===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,s),r=r.sibling}}return n}function Gi(e,t){if(!Yo)throw Error(r(363));e=zi(e=Oi(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++],o=i.tag;if(5===o||26===o||27===o)ts(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}function ji(){if(0!==(2&TA)&&0!==IA)return IA&-IA;if(null!==co.T){return 0!==gl?gl:re()}return Do()}function Vi(){0===zA&&(zA=0===(536870912&IA)||tl?B():536870912);var e=Il.current;return null!==e&&(e.flags|=32),zA}function Wi(e,t,n){(e===MA&&2===UA||null!==e.cancelPendingCommit)&&(er(e,0),Yi(e,IA,zA,!1)),S(e,n),0!==(2&TA)&&e===MA||(e===MA&&(0===(2&TA)&&(HA|=n),4===DA&&Yi(e,IA,zA,!1)),Z(e))}function Ki(e,t,n){if(0!==(6&TA))throw Error(r(327));for(var i=!n&&0===(60&t)&&0===(t&e.expiredLanes)||b(e,t),o=i?function(e,t){var n=TA;TA|=2;var i=ir(),o=rr();MA!==e||IA!==t?(XA=null,qA=Ma()+500,er(e,t)):PA=b(e,t);e:for(;;)try{if(0!==UA&&null!==FA){t=FA;var s=LA;t:switch(UA){case 1:UA=0,LA=null,ur(e,t,s,1);break;case 2:if(me(s)){UA=0,LA=null,cr(t);break}t=function(){2===UA&&MA===e&&(UA=7),Z(e)},s.then(t,t);break e;case 3:UA=7;break e;case 4:UA=5;break e;case 7:me(s)?(UA=0,LA=null,cr(t)):(UA=0,LA=null,ur(e,t,s,7));break;case 5:var a=null;switch(FA.tag){case 26:a=FA.memoizedState;case 5:case 27:var l=FA,A=l.type,c=l.pendingProps;if(a?Aa(a):zo(A,c)){UA=0,LA=null;var u=l.sibling;if(null!==u)FA=u;else{var h=l.return;null!==h?(FA=h,hr(h)):FA=null}break t}}UA=0,LA=null,ur(e,t,s,5);break;case 6:UA=0,LA=null,ur(e,t,s,6);break;case 8:$i(),DA=6;break e;default:throw Error(r(462))}}lr();break}catch(d){tr(e,d)}return iA=nA=null,co.H=i,co.A=o,TA=n,null!==FA?0:(MA=null,IA=0,W(),DA)}(e,t):sr(e,t,!0),s=i;;){if(0===o){PA&&!i&&Yi(e,t,0,!1);break}if(6===o)Yi(e,t,0,!RA);else{if(n=e.current.alternate,s&&!Ji(n)){o=sr(e,t,!1),s=!1;continue}if(2===o){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;o=jA;var A=Lo&&l.current.memoizedState.isDehydrated;if(A&&(er(l,a).flags|=256),2!==(a=sr(l,a,!1))){if(NA&&!A){l.errorRecoveryDisabledLanes|=s,HA|=s,o=4;break e}s=VA,VA=o,null!==s&&qi(s)}o=a}if(s=!1,2!==o)continue}}if(1===o){er(e,0),Yi(e,t,0,!0);break}e:{switch(i=e,o){case 0:case 1:throw Error(r(345));case 4:if((4194176&t)===t){Yi(i,t,zA,!RA);break e}break;case 2:VA=null;break;case 3:case 5:break;default:throw Error(r(329))}if(i.finishedWork=n,i.finishedLanes=t,(62914560&t)===t&&10<(s=KA+300-Ma())){if(Yi(i,t,zA,!RA),0!==w(i,0))break e;i.timeoutHandle=Eo(Xi.bind(null,i,n,VA,XA,WA,t,zA,HA,GA,RA,2,-0,0),s)}else Xi(i,n,VA,XA,WA,t,zA,HA,GA,RA,0,-0,0)}}break}Z(e)}function qi(e){null===VA?VA=e:VA.push.apply(VA,e)}function Xi(e,t,n,i,r,o,s,a,l,A,c,u,h){var d=t.subtreeFlags;if((8192&d||16785408===(16785408&d))&&(Go(),Li(t),null!==(t=Vo())))return e.cancelPendingCommit=t(pr.bind(null,e,n,i,r,s,a,l,1,u,h)),void Yi(e,o,s,!A);pr(e,n,i,r,s,a,l,c,u,h)}function Ji(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Da(o(),r))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yi(e,t,n,i){t&=~QA,t&=~HA,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var o=31-wa(r),s=1<<o;i[o]=-1,r&=~s}0!==n&&E(e,n,t)}function Zi(){return 0!==(6&TA)||($(0,!1),!1)}function $i(){if(null!==FA){if(0===UA)var e=FA.return;else iA=nA=null,ze(e=FA),Cl=null,Sl=0,e=FA;for(;null!==e;)$n(e.alternate,e),e=e.return;FA=null}}function er(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==Mo&&(e.timeoutHandle=Mo,To(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$i(),MA=e,FA=n=Sr(e.current,null),IA=t,UA=0,LA=null,RA=!1,PA=b(e,t),NA=!1,GA=zA=QA=HA=OA=DA=0,VA=jA=null,WA=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-wa(i),o=1<<r;t|=e[r],i&=~o}return kA=t,W(),n}function tr(e,t){Pl=null,co.H=Wl,t===bl?(t=we(),UA=3):t===xl?(t=we(),UA=4):UA=t===Zl?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,LA=t,null===FA&&(DA=1,Jt(e,I(t,e.current)))}function nr(){var e=Il.current;return null===e||((4194176&IA)===IA?null===Ul:((62914560&IA)===IA||0!==(536870912&IA))&&e===Ul)}function ir(){var e=co.H;return co.H=Wl,null===e?Wl:e}function rr(){var e=co.A;return co.A=wA,e}function or(){DA=4,RA||(4194176&IA)!==IA&&null!==Il.current||(PA=!0),0===(134217727&OA)&&0===(134217727&HA)||null===MA||Yi(MA,IA,zA,!1)}function sr(e,t,n){var i=TA;TA|=2;var r=ir(),o=rr();MA===e&&IA===t||(XA=null,er(e,t)),t=!1;var s=DA;e:for(;;)try{if(0!==UA&&null!==FA){var a=FA,l=LA;switch(UA){case 8:$i(),s=6;break e;case 3:case 2:case 6:null===Il.current&&(t=!0);var A=UA;if(UA=0,LA=null,ur(e,a,l,A),n&&PA){s=0;break e}break;default:A=UA,UA=0,LA=null,ur(e,a,l,A)}}ar(),s=DA;break}catch(c){tr(e,c)}return t&&e.shellSuspendCounter++,iA=nA=null,TA=i,co.H=r,co.A=o,null===FA&&(MA=null,IA=0,W()),s}function ar(){for(;null!==FA;)Ar(FA)}function lr(){for(;null!==FA&&!Ea();)Ar(FA)}function Ar(e){var t=_n(e.alternate,e,kA);e.memoizedProps=e.pendingProps,null===t?hr(e):FA=t}function cr(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=cn(n,t,t.pendingProps,t.type,void 0,IA);break;case 11:t=cn(n,t,t.pendingProps,t.type.render,t.ref,IA);break;case 5:ze(t);default:$n(n,t),t=_n(n,t=FA=Er(t,kA),kA)}e.memoizedProps=e.pendingProps,null===t?hr(e):FA=t}function ur(e,t,n,i){iA=nA=null,ze(t),Cl=null,Sl=0;var o=t.return;try{if(function(e,t,n,i,o){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Mn(t,n,o,!0),null!==(n=Il.current)){switch(n.tag){case 13:return null===Ul?or():null===n.alternate&&0===DA&&(DA=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Bl?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),yr(e,i,o)),!1;case 22:return n.flags|=65536,i===Bl?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),yr(e,i,o)),!1}throw Error(r(435,n.tag))}return yr(e,i,o),or(),!1}if(tl)return null!==(t=Il.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==rl&&V(I(e=Error(r(422),{cause:i}),n))):(i!==rl&&V(I(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,i=I(i,n),ue(e,o=Zt(e.stateNode,i,o)),4!==DA&&(DA=2)),!1;var s=Error(r(520),{cause:i});if(s=I(s,n),null===jA?jA=[s]:jA.push(s),4!==DA&&(DA=2),null===t)return!0;i=I(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,ue(n,e=Zt(n.stateNode,i,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===JA||!JA.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,en(o=$t(o),e,n,i),ue(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,IA))return DA=1,Jt(e,I(n,e.current)),void(FA=null)}catch(s){if(null!==o)throw FA=o,s;return DA=1,Jt(e,I(n,e.current)),void(FA=null)}32768&t.flags?(tl||1===i?e=!0:PA||0!==(536870912&IA)?e=!1:(RA=e=!0,(2===i||3===i||6===i)&&(null!==(i=Il.current)&&13===i.tag&&(i.flags|=16384))),dr(t,e)):hr(t)}function hr(e){var t=e;do{if(0!==(32768&t.flags))return void dr(t,RA);e=t.return;var n=Yn(t.alternate,t,kA);if(null!==n)return void(FA=n);if(null!==(t=t.sibling))return void(FA=t);FA=t=e}while(null!==t);0===DA&&(DA=5)}function dr(e,t){do{var n=Zn(e.alternate,e);if(null!==n)return n.flags&=32767,void(FA=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(FA=e);FA=e=n}while(null!==e);DA=6,FA=null}function pr(e,t,n,i,o,s,a,l,A,c){var u=co.T,h=ko();try{No(2),co.T=null,function(e,t,n,i,o,s,a,l){do{gr()}while(null!==ZA);if(0!==(6&TA))throw Error(r(327));var A=e.finishedWork;if(i=e.finishedLanes,null===A)return null;if(e.finishedWork=null,e.finishedLanes=0,A===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=A.lanes|A.childLanes;if(function(e,t,n,i,r,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,A=e.hiddenUpdates;for(n=s&~n;0<n;){var c=31-wa(n),u=1<<c;a[c]=0,l[c]=-1;var h=A[c];if(null!==h)for(A[c]=null,c=0;c<h.length;c++){var d=h[c];null!==d&&(d.lane&=-536870913)}n&=~u}0!==i&&E(e,i,0),0!==o&&0===r&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,i,c|=al,s,a,l),e===MA&&(FA=MA=null,IA=0),0===(10256&A.subtreeFlags)&&0===(10256&A.flags)||YA||(YA=!0,ec=c,tc=n,function(e,t){Ca(e,t)}(Ua,function(){return gr(),null})),n=0!==(15990&A.flags),0!==(15990&A.subtreeFlags)||n?(n=co.T,co.T=null,s=ko(),No(2),a=TA,TA|=4,function(e,t){for(wo(e.containerInfo),pA=t;null!==pA;)if(t=(e=pA).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,pA=t;else for(;null!==pA;){var n=(e=pA).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&t)&&null!==n){t=void 0;var i=e,o=n.memoizedProps;n=n.memoizedState;var s=i.stateNode;try{var a=Xt(i.type,o,(i.elementType,i.type));t=s.getSnapshotBeforeUpdate(a,n),s.__reactInternalSnapshotBeforeUpdate=t}catch(l){vr(i,i.return,l)}}break;case 3:0!==(1024&t)&&Io&&ys(e.stateNode.containerInfo);break;default:if(0!==(1024&t))throw Error(r(163))}if(null!==(t=e.sibling)){t.return=e.return,pA=t;break}pA=e.return}a=fA,fA=!1}(e,A),wi(A,e),bo(e.containerInfo),e.current=A,di(e,A.alternate,A),Ta(),TA=a,No(s),co.T=n):e.current=A,YA?(YA=!1,ZA=e,$A=i):fr(e,c),c=e.pendingLanes,0===c&&(JA=null),function(e){if(ka&&"function"===typeof ka.onCommitFiberRoot)try{ka.onCommitFiberRoot(Na,e,void 0,128===(128&e.current.flags))}catch(t){}}(A.stateNode),Z(e),null!==t)for(o=e.onRecoverableError,A=0;A<t.length;A++)c=t[A],o(c.value,{componentStack:c.stack});0!==(3&$A)&&gr(),c=e.pendingLanes,0!==(4194218&i)&&0!==(42&c)?e===ic?nc++:(nc=0,ic=e):nc=0,$(0,!1)}(e,t,n,i,h,o,s,a)}finally{co.T=u,No(h)}}function fr(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Nn(t)))}function gr(){if(null!==ZA){var e=ZA,t=ec;ec=0;var n=M($A),i=32>n?32:n;n=co.T;var o=ko();try{if(No(i),co.T=null,null===ZA)var s=!1;else{i=tc,tc=null;var a=ZA,l=$A;if(ZA=null,$A=0,0!==(6&TA))throw Error(r(331));var A=TA;if(TA|=4,Ni(a.current),Mi(a,a.current,l,i),TA=A,$(0,!1),ka&&"function"===typeof ka.onPostCommitFiberRoot)try{ka.onPostCommitFiberRoot(Na,a)}catch(c){}s=!0}return s}finally{No(o),co.T=n,fr(e,t)}}return!1}function mr(e,t,n){t=I(n,t),null!==(e=Ae(e,t=Zt(e.stateNode,t,2),2))&&(S(e,2),Z(e))}function vr(e,t,n){if(3===e.tag)mr(e,e,n);else for(;null!==t;){if(3===t.tag){mr(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===JA||!JA.has(i))){e=I(n,e),null!==(i=Ae(t,n=$t(2),2))&&(en(n,i,t,e),S(i,2),Z(i));break}}t=t.return}}function yr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new EA;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(NA=!0,r.add(n),e=wr.bind(null,e,t,n),t.then(e,e))}function wr(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,MA===e&&(IA&n)===n&&(4===DA||3===DA&&(62914560&IA)===IA&&300>Ma()-KA?0===(2&TA)&&er(e,0):QA|=n,GA===IA&&(GA=0)),Z(e)}function br(e,t){0===t&&(t=_()),null!==(e=X(e,t))&&(S(e,t),Z(e))}function xr(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),br(e,n)}function Br(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),br(e,n)}function _r(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sr(e,n){var i=e.alternate;return null===i?((i=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=31457280&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Er(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Tr(e,n,i,o,s,a){var l=0;if(o=e,"function"===typeof e)Cr(e)&&(l=1);else if("string"===typeof e)l=Ys&&ua?Zs(e,i,Xa.current)?26:ga(e)?27:5:Ys?Zs(e,i,Xa.current)?26:5:ua&&ga(e)?27:5;else e:switch(e){case Kr:return Mr(i.children,s,a,n);case qr:l=8,s|=24;break;case Xr:return(e=t(12,i,n,2|s)).elementType=Xr,e.lanes=a,e;case eo:return(e=t(13,i,n,s)).elementType=eo,e.lanes=a,e;case to:return(e=t(19,i,n,s)).elementType=to,e.lanes=a,e;case ro:return Fr(i,s,a,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Jr:case Zr:l=10;break e;case Yr:l=9;break e;case $r:l=11;break e;case no:l=14;break e;case io:l=16,o=null;break e}l=29,i=Error(r(130,null===e?"null":typeof e,"")),o=null}return(n=t(l,i,n,s)).elementType=e,n.type=o,n.lanes=a,n}function Mr(e,n,i,r){return(e=t(7,e,r,n)).lanes=i,e}function Fr(e,n,i,o){(e=t(22,e,o,n)).elementType=ro,e.lanes=i;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=s._current;if(null===e)throw Error(r(456));if(0===(2&s._pendingVisibility)){var t=X(e,2);null!==t&&(s._pendingVisibility|=2,Wi(t,0,2))}},attach:function(){var e=s._current;if(null===e)throw Error(r(456));if(0!==(2&s._pendingVisibility)){var t=X(e,2);null!==t&&(s._pendingVisibility&=-3,Wi(t,0,2))}}};return e.stateNode=s,e}function Ir(e,n,i){return(e=t(6,e,null,n)).lanes=i,e}function Ur(e,n,i){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Lr(e,t,n,i,r,o,s,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Mo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Rr(e,n,i,r,o,s,a,l,A,c,u,h){return e=new Lr(e,n,i,a,l,A,c,h),n=1,!0===s&&(n|=24),s=t(3,null,null,n),e.current=s,s.stateNode=e,(n=Pn()).refCount++,e.pooledCache=n,n.refCount++,s.memoizedState={element:r,isDehydrated:i,cache:n},se(s),e}function Pr(e){return e?e=ya:ya}function Nr(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return null===(e=null!==(e=d(t))?p(e):null)?null:mo(e.stateNode)}function kr(e,t,n,i,r,o){r=Pr(r),null===i.context?i.context=r:i.pendingContext=r,(i=le(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(i.callback=o),null!==(n=Ae(e,i,t))&&(Wi(n,0,t),ce(n,e,t))}function Dr(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Or(e,t){Dr(e,t),(e=e.alternate)&&Dr(e,t)}var Hr={},Qr=n(5043),zr=n(8513),Gr=Object.assign,jr=Symbol.for("react.element"),Vr=Symbol.for("react.transitional.element"),Wr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),qr=Symbol.for("react.strict_mode"),Xr=Symbol.for("react.profiler"),Jr=Symbol.for("react.provider"),Yr=Symbol.for("react.consumer"),Zr=Symbol.for("react.context"),$r=Symbol.for("react.forward_ref"),eo=Symbol.for("react.suspense"),to=Symbol.for("react.suspense_list"),no=Symbol.for("react.memo"),io=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ro=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var oo,so,ao=Symbol.for("react.memo_cache_sentinel"),lo=Symbol.iterator,Ao=Symbol.for("react.client.reference"),co=Qr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,uo=!1,ho=Array.isArray,po=e.rendererVersion,fo=e.rendererPackageName,go=e.extraDevToolsConfig,mo=e.getPublicInstance,vo=e.getRootHostContext,yo=e.getChildHostContext,wo=e.prepareForCommit,bo=e.resetAfterCommit,xo=e.createInstance,Bo=e.appendInitialChild,_o=e.finalizeInitialChildren,Co=e.shouldSetTextContent,So=e.createTextInstance,Eo=e.scheduleTimeout,To=e.cancelTimeout,Mo=e.noTimeout,Fo=e.isPrimaryRenderer;e.warnsIfNotActing;var Io=e.supportsMutation,Uo=e.supportsPersistence,Lo=e.supportsHydration,Ro=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Po=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var No=e.setCurrentUpdatePriority,ko=e.getCurrentUpdatePriority,Do=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Oo=e.shouldAttemptEagerTransition,Ho=e.detachDeletedInstance;e.requestPostPaintCallback;var Qo=e.maySuspendCommit,zo=e.preloadInstance,Go=e.startSuspendingCommit,jo=e.suspendInstance,Vo=e.waitForCommitToBeReady,Wo=e.NotPendingTransition,Ko=e.HostTransitionContext,qo=e.resetFormInstance;e.bindToConsole;var Xo=e.supportsMicrotasks,Jo=e.scheduleMicrotask,Yo=e.supportsTestSelectors,Zo=e.findFiberRoot,$o=e.getBoundingRect,es=e.getTextContent,ts=e.isHiddenSubtree,ns=e.matchAccessibilityRole,is=e.setFocusIfFocusable,rs=e.setupIntersectionObserver,os=e.appendChild,ss=e.appendChildToContainer,as=e.commitTextUpdate,ls=e.commitMount,As=e.commitUpdate,cs=e.insertBefore,us=e.insertInContainerBefore,hs=e.removeChild,ds=e.removeChildFromContainer,ps=e.resetTextContent,fs=e.hideInstance,gs=e.hideTextInstance,ms=e.unhideInstance,vs=e.unhideTextInstance,ys=e.clearContainer,ws=e.cloneInstance,bs=e.createContainerChildSet,xs=e.appendChildToContainerChildSet,Bs=e.finalizeContainerChildren,_s=e.replaceContainerChildren,Cs=e.cloneHiddenInstance,Ss=e.cloneHiddenTextInstance,Es=e.isSuspenseInstancePending,Ts=e.isSuspenseInstanceFallback,Ms=e.getSuspenseInstanceFallbackErrorDetails,Fs=e.registerSuspenseInstanceRetry,Is=e.canHydrateFormStateMarker,Us=e.isFormStateMarkerMatching,Ls=e.getNextHydratableSibling,Rs=e.getFirstHydratableChild,Ps=e.getFirstHydratableChildWithinContainer,Ns=e.getFirstHydratableChildWithinSuspenseInstance,ks=e.canHydrateInstance,Ds=e.canHydrateTextInstance,Os=e.canHydrateSuspenseInstance,Hs=e.hydrateInstance,Qs=e.hydrateTextInstance,zs=e.hydrateSuspenseInstance,Gs=e.getNextHydratableInstanceAfterSuspenseInstance,js=e.commitHydratedContainer,Vs=e.commitHydratedSuspenseInstance,Ws=e.clearSuspenseBoundary,Ks=e.clearSuspenseBoundaryFromContainer,qs=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Xs=e.validateHydratableInstance,Js=e.validateHydratableTextInstance,Ys=e.supportsResources,Zs=e.isHostHoistableType,$s=e.getHoistableRoot,ea=e.getResource,ta=e.acquireResource,na=e.releaseResource,ia=e.hydrateHoistable,ra=e.mountHoistable,oa=e.unmountHoistable,sa=e.createHoistableInstance,aa=e.prepareToCommitHoistables,la=e.mayResourceSuspendCommit,Aa=e.preloadResource,ca=e.suspendResource,ua=e.supportsSingletons,ha=e.resolveSingletonInstance,da=e.clearSingleton,pa=e.acquireSingletonInstance,fa=e.releaseSingletonInstance,ga=e.isHostSingletonType,ma=[],va=-1,ya={},wa=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ba(e)/xa|0)|0},ba=Math.log,xa=Math.LN2,Ba=128,_a=4194304,Ca=zr.unstable_scheduleCallback,Sa=zr.unstable_cancelCallback,Ea=zr.unstable_shouldYield,Ta=zr.unstable_requestPaint,Ma=zr.unstable_now,Fa=zr.unstable_ImmediatePriority,Ia=zr.unstable_UserBlockingPriority,Ua=zr.unstable_NormalPriority,La=zr.unstable_IdlePriority,Ra=zr.log,Pa=zr.unstable_setDisableYieldValue,Na=null,ka=null,Da="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Oa=new WeakMap,Ha=[],Qa=0,za=null,Ga=0,ja=[],Va=0,Wa=null,Ka=1,qa="",Xa=g(null),Ja=g(null),Ya=g(null),Za=g(null),$a=null,el=null,tl=!1,nl=null,il=!1,rl=Error(r(519)),ol=[],sl=0,al=0,ll=null,Al=null,cl=!1,ul=!1,hl=!1,dl=0,pl=null,fl=0,gl=0,ml=null,vl=!1,yl=!1,wl=Object.prototype.hasOwnProperty,bl=Error(r(460)),xl=Error(r(474)),Bl={then:function(){}},_l=null,Cl=null,Sl=0,El=Ce(!0),Tl=Ce(!1),Ml=g(null),Fl=g(0),Il=g(null),Ul=null,Ll=g(0),Rl=0,Pl=null,Nl=null,kl=null,Dl=!1,Ol=!1,Hl=!1,Ql=0,zl=0,Gl=null,jl=0,Vl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Wl={readContext:Un,use:We,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useLayoutEffect:Re,useInsertionEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useSyncExternalStore:Re,useId:Re};Wl.useCacheRefresh=Re,Wl.useMemoCache=Re,Wl.useHostTransitionStatus=Re,Wl.useFormState=Re,Wl.useActionState=Re,Wl.useOptimistic=Re;var Kl={readContext:Un,use:We,useCallback:function(e,t){return Ge().memoizedState=[e,void 0===t?null:t],e},useContext:Un,useEffect:xt,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,wt(4194308,4,St.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wt(4194308,4,e,t)},useInsertionEffect:function(e,t){wt(4,2,e,t)},useMemo:function(e,t){var n=Ge();t=void 0===t?null:t;var i=e();if(Hl){F(!0);try{e()}finally{F(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ge();if(void 0!==n){var r=n(t);if(Hl){F(!0);try{n(t)}finally{F(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Ot.bind(null,Pl,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ge().memoizedState=e},useState:function(e){var t=(e=rt(e)).queue,n=Ht.bind(null,Pl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Tt,useDeferredValue:function(e,t){return It(Ge(),e,t)},useTransition:function(){var e=rt(!1);return e=Lt.bind(null,Pl,e.queue,!0,!1),Ge().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Pl,o=Ge();if(tl){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===MA)throw Error(r(349));0!==(60&IA)||$e(i,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,xt(tt.bind(null,i,s,e),[e]),i.flags|=2048,vt(9,et.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=Ge(),t=MA.identifierPrefix;if(tl){var n=qa;t=":"+t+"R"+(n=(Ka&~(1<<32-wa(Ka)-1)).toString(32)+n),0<(n=Ql++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=jl++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Ge().memoizedState=Dt.bind(null,Pl)}};Kl.useMemoCache=Ke,Kl.useHostTransitionStatus=Pt,Kl.useFormState=dt,Kl.useActionState=dt,Kl.useOptimistic=function(e){var t=Ge();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zt.bind(null,Pl,!0,n),n.dispatch=t,[e,t]};var ql={readContext:Un,use:We,useCallback:Mt,useContext:Un,useEffect:Bt,useImperativeHandle:Et,useInsertionEffect:_t,useLayoutEffect:Ct,useMemo:Ft,useReducer:Xe,useRef:yt,useState:function(){return Xe(qe)},useDebugValue:Tt,useDeferredValue:function(e,t){return Ut(je(),Nl.memoizedState,e,t)},useTransition:function(){var e=Xe(qe)[0],t=je().memoizedState;return["boolean"===typeof e?e:Ve(e),t]},useSyncExternalStore:Ze,useId:Nt};ql.useCacheRefresh=kt,ql.useMemoCache=Ke,ql.useHostTransitionStatus=Pt,ql.useFormState=pt,ql.useActionState=pt,ql.useOptimistic=function(e,t){return ot(je(),0,e,t)};var Xl={readContext:Un,use:We,useCallback:Mt,useContext:Un,useEffect:Bt,useImperativeHandle:Et,useInsertionEffect:_t,useLayoutEffect:Ct,useMemo:Ft,useReducer:Ye,useRef:yt,useState:function(){return Ye(qe)},useDebugValue:Tt,useDeferredValue:function(e,t){var n=je();return null===Nl?It(n,e,t):Ut(n,Nl.memoizedState,e,t)},useTransition:function(){var e=Ye(qe)[0],t=je().memoizedState;return["boolean"===typeof e?e:Ve(e),t]},useSyncExternalStore:Ze,useId:Nt};Xl.useCacheRefresh=kt,Xl.useMemoCache=Ke,Xl.useHostTransitionStatus=Pt,Xl.useFormState=mt,Xl.useActionState=mt,Xl.useOptimistic=function(e,t){var n=je();return null!==Nl?ot(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Jl={isMounted:function(e){return!!(e=e._reactInternals)&&u(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ji(),r=le(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Ae(e,r,i))&&(Wi(t,0,i),ce(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ji(),r=le(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Ae(e,r,i))&&(Wi(t,0,i),ce(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ji(),i=le(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ae(e,i,n))&&(Wi(t,0,n),ce(t,e,n))}},Yl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Zl=Error(r(461)),$l=!1,eA={dehydrated:null,treeContext:null,retryLane:0},tA=g(null),nA=null,iA=null,rA="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},oA=zr.unstable_scheduleCallback,sA=zr.unstable_NormalPriority,aA={$$typeof:Zr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},lA=co.S;co.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===pl){var n=pl=[];fl=0,gl=re(),ml={status:"pending",value:void 0,then:function(e){n.push(e)}}}fl++,t.then(oe,oe)}(0,t),null!==lA&&lA(e,t)};var AA=g(null),cA=!1,uA=!1,hA=!1,dA="function"===typeof WeakSet?WeakSet:Set,pA=null,fA=!1,gA=null,mA=!1,vA=null,yA=8192,wA={getCacheForType:function(e){var t=Un(aA),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},bA=0,xA=1,BA=2,_A=3,CA=4;if("function"===typeof Symbol&&Symbol.for){var SA=Symbol.for;bA=SA("selector.component"),xA=SA("selector.has_pseudo_class"),BA=SA("selector.role"),_A=SA("selector.test_id"),CA=SA("selector.text")}var EA="function"===typeof WeakMap?WeakMap:Map,TA=0,MA=null,FA=null,IA=0,UA=0,LA=null,RA=!1,PA=!1,NA=!1,kA=0,DA=0,OA=0,HA=0,QA=0,zA=0,GA=0,jA=null,VA=null,WA=!1,KA=0,qA=1/0,XA=null,JA=null,YA=!1,ZA=null,$A=0,ec=0,tc=null,nc=0,ic=null;return Hr.attemptContinuousHydration=function(e){if(13===e.tag){var t=X(e,67108864);null!==t&&Wi(t,0,67108864),Or(e,67108864)}},Hr.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ji(),n=X(e,t);null!==n&&Wi(n,0,t),Or(e,t)}},Hr.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=y(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-wa(t);e.entanglements[1]|=n,t&=~n}Z(e),0===(6&TA)&&(qA=Ma()+500,$(0,!1))}}break;case 13:null!==(t=X(e,2))&&Wi(t,0,2),Zi(),Or(e,2)}},Hr.batchedUpdates=function(e,t){return e(t)},Hr.createComponentSelector=function(e){return{$$typeof:bA,value:e}},Hr.createContainer=function(e,t,n,i,r,o,s,a,l,A){return Rr(e,t,!1,null,0,i,o,s,a,l,0,null)},Hr.createHasPseudoClassSelector=function(e){return{$$typeof:xA,value:e}},Hr.createHydrationContainer=function(e,t,n,i,r,o,s,a,l,A,c,u,h){return(e=Rr(n,i,!0,e,0,o,a,l,A,c,0,h)).context=Pr(null),n=e.current,(r=le(i=ji())).callback=void 0!==t&&null!==t?t:null,Ae(n,r,i),e.current.lanes=i,S(e,i),Z(e),e},Hr.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Wr,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},Hr.createRoleSelector=function(e){return{$$typeof:BA,value:e}},Hr.createTestNameSelector=function(e){return{$$typeof:_A,value:e}},Hr.createTextSelector=function(e){return{$$typeof:CA,value:e}},Hr.defaultOnCaughtError=function(e){console.error(e)},Hr.defaultOnRecoverableError=function(e){Yl(e)},Hr.defaultOnUncaughtError=function(e){Yl(e)},Hr.deferredUpdates=function(e){var t=co.T,n=ko();try{return No(32),co.T=null,e()}finally{No(n),co.T=t}},Hr.discreteUpdates=function(e,t,n,i,r){var o=co.T,s=ko();try{return No(2),co.T=null,e(t,n,i,r)}finally{No(s),co.T=o,0===TA&&(qA=Ma()+500)}},Hr.findAllNodes=Gi,Hr.findBoundingRects=function(e,t){if(!Yo)throw Error(r(363));t=Gi(e,t),e=[];for(var n=0;n<t.length;n++)e.push($o(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,o=i+n.width,s=n.y,a=s+n.height,l=t-1;0<=l;l--)if(t!==l){var A=e[l],c=A.x,u=c+A.width,h=A.y,d=h+A.height;if(i>=c&&s>=h&&o<=u&&a<=d){e.splice(t,1);break}if(!(i!==c||n.width!==A.width||d<s||h>a)){h>s&&(A.height+=h-s,A.y=s),d<a&&(A.height=a-h),e.splice(t,1);break}if(!(s!==h||n.height!==A.height||u<i||c>o)){c>i&&(A.width+=c-i,A.x=i),u<o&&(A.width=o-c),e.splice(t,1);break}}return e},Hr.findHostInstance=Nr,Hr.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=d(e))?f(e):null)?null:mo(e.stateNode)},Hr.findHostInstanceWithWarning=function(e){return Nr(e)},Hr.flushPassiveEffects=gr,Hr.flushSyncFromReconciler=function(e){var t=TA;TA|=1;var n=co.T,i=ko();try{if(No(2),co.T=null,e)return e()}finally{No(i),co.T=n,0===(6&(TA=t))&&$(0,!1)}},Hr.flushSyncWork=Zi,Hr.focusWithin=function(e,t){if(!Yo)throw Error(r(363));for(t=zi(e=Oi(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],i=n.tag;if(!ts(n)){if((5===i||26===i||27===i)&&is(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},Hr.getFindAllNodesFailureDescription=function(e,t){if(!Yo)throw Error(r(363));var n=0,i=[];e=[Oi(e),0];for(var o=0;o<e.length;){var s=e[o++],a=s.tag,l=e[o++],A=t[l];if((5!==a&&26!==a&&27!==a||!ts(s))&&(Hi(s,A)&&(i.push(Qi(A)),++l>n&&(n=l)),l<t.length))for(s=s.child;null!==s;)e.push(s,l),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Qi(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},Hr.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return mo(e.child.stateNode);default:return e.child.stateNode}},Hr.injectIntoDevTools=function(){var e={bundleType:0,version:po,rendererPackageName:fo,currentDispatcherRef:co,findFiberByHostInstance:Ro,reconcilerVersion:"19.0.0"};if(null!==go&&(e.rendererConfig=go),"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Na=t.inject(e),ka=t}catch(n){}e=!!t.checkDCE}}return e},Hr.isAlreadyRendering=function(){return!1},Hr.observeVisibleRects=function(e,t,n,i){if(!Yo)throw Error(r(363));e=Gi(e,t);var o=rs(e,n,i).disconnect;return{disconnect:function(){o()}}},Hr.shouldError=function(){return null},Hr.shouldSuspend=function(){return!1},Hr.startHostTransition=function(e,t,n,o){if(5!==e.tag)throw Error(r(476));var s=Rt(e).queue;Lt(e,s,t,Wo,null===n?i:function(){var t=Rt(e).next.queue;return Qt(e,t,{},ji()),n(o)})},Hr.updateContainer=function(e,t,n,i){var r=t.current,o=ji();return kr(r,o,e,t,n,i),o},Hr.updateContainerSync=function(e,t,n,i){return 0===t.tag&&gr(),kr(t.current,2,e,t,n,i),2},Hr},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},4980:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(2284);function r(e){var t=function(e,t){if("object"!=(0,i.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,i.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,i.A)(t)?t:t+""}function o(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5239:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};function i(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(kt){o(kt)}}function a(e){try{l(i.throw(e))}catch(kt){o(kt)}}function l(e){e.done?n(e.value):r(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())})}function r(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(kt){o=[6,kt],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function o(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||t)}for(var s=function(){function e(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return e.prototype.add=function(t,n,i,r){return new e(this.left+t,this.top+n,this.width+i,this.height+r)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var i=Array.from(n).find(function(e){return 0!==e.width});return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),a=function(e,t){return s.fromClientRect(e,t.getBoundingClientRect())},l=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),r=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new s(0,0,i,r)},A=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320===(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var i=[],r=-1,o="";++r<n;){var s=e[r];s<=65535?i.push(s):(s-=65536,i.push(55296+(s>>10),s%1024+56320)),(r+1===n||i.length>16384)&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return o},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),d=0;d<u.length;d++)h[u.charCodeAt(d)]=d;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"===typeof Uint8Array?[]:new Uint8Array(256),g=0;g<p.length;g++)f[p.charCodeAt(g)]=g;for(var m=function(e){var t,n,i,r,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var A="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),c=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)n=f[e.charCodeAt(t)],i=f[e.charCodeAt(t+1)],r=f[e.charCodeAt(t+2)],o=f[e.charCodeAt(t+3)],c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return A},v=function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n.push(e[i+1]<<8|e[i]);return n},y=function(e){for(var t=e.length,n=[],i=0;i<t;i+=4)n.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return n},w=5,b=11,x=2,B=65536>>w,_=(1<<w)-1,C=B+(1024>>w)+32,S=65536>>b,E=(1<<b-w)-1,T=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},M=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},F=function(e,t){var n=m(e),i=Array.isArray(n)?y(n):new Uint32Array(n),r=Array.isArray(n)?v(n):new Uint16Array(n),o=24,s=T(r,o/2,i[4]/2),a=2===i[5]?T(r,(o+i[4])/2):M(i,Math.ceil((o+i[4])/4));return new I(i[0],i[1],i[2],i[3],s,a)},I=function(){function e(e,t,n,i,r,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=r,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>w])<<x)+(e&_),this.data[t];if(e<=65535)return t=((t=this.index[B+(e-55296>>w)])<<x)+(e&_),this.data[t];if(e<this.highStart)return t=C-S+(e>>b),t=this.index[t],t+=e>>w&E,t=((t=this.index[t])<<x)+(e&_),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L="undefined"===typeof Uint8Array?[]:new Uint8Array(256),R=0;R<U.length;R++)L[U.charCodeAt(R)]=R;var P=50,N=1,k=2,D=3,O=4,H=5,Q=7,z=8,G=9,j=10,V=11,W=12,K=13,q=14,X=15,J=16,Y=17,Z=18,$=19,ee=20,te=21,ne=22,ie=23,re=24,oe=25,se=26,ae=27,le=28,Ae=29,ce=30,ue=31,he=32,de=33,pe=34,fe=35,ge=36,me=37,ve=38,ye=39,we=40,be=41,xe=42,Be=43,_e=[9001,65288],Ce="!",Se="\xd7",Ee="\xf7",Te=F("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Me=[ce,ge],Fe=[N,k,D,H],Ie=[j,z],Ue=[ae,se],Le=Fe.concat(Ie),Re=[ve,ye,we,pe,fe],Pe=[X,K],Ne=function(e,t){void 0===t&&(t="strict");var n=[],i=[],r=[];return e.forEach(function(e,o){var s=Te.get(e);if(s>P?(r.push(!0),s-=P):r.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return i.push(o),n.push(J);if(s===O||s===V){if(0===o)return i.push(o),n.push(ce);var a=n[o-1];return-1===Le.indexOf(a)?(i.push(i[o-1]),n.push(a)):(i.push(o),n.push(ce))}return i.push(o),s===ue?n.push("strict"===t?te:me):s===xe||s===Ae?n.push(ce):s===Be?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(me):n.push(ce):void n.push(s)}),[i,n,r]},ke=function(e,t,n,i){var r=i[n];if(Array.isArray(e)?-1!==e.indexOf(r):e===r)for(var o=n;o<=i.length;){if((l=i[++o])===t)return!0;if(l!==j)break}if(r===j)for(o=n;o>0;){var s=i[--o];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var a=n;a<=i.length;){var l;if((l=i[++a])===t)return!0;if(l!==j)break}if(s!==j)break}return!1},De=function(e,t){for(var n=e;n>=0;){var i=t[n];if(i!==j)return i;n--}return 0},Oe=function(e,t,n,i,r){if(0===n[i])return Se;var o=i-1;if(Array.isArray(r)&&!0===r[o])return Se;var s=o-1,a=o+1,l=t[o],A=s>=0?t[s]:0,c=t[a];if(l===k&&c===D)return Se;if(-1!==Fe.indexOf(l))return Ce;if(-1!==Fe.indexOf(c))return Se;if(-1!==Ie.indexOf(c))return Se;if(De(o,t)===z)return Ee;if(Te.get(e[o])===V)return Se;if((l===he||l===de)&&Te.get(e[a])===V)return Se;if(l===Q||c===Q)return Se;if(l===G)return Se;if(-1===[j,K,X].indexOf(l)&&c===G)return Se;if(-1!==[Y,Z,$,re,le].indexOf(c))return Se;if(De(o,t)===ne)return Se;if(ke(ie,ne,o,t))return Se;if(ke([Y,Z],te,o,t))return Se;if(ke(W,W,o,t))return Se;if(l===j)return Ee;if(l===ie||c===ie)return Se;if(c===J||l===J)return Ee;if(-1!==[K,X,te].indexOf(c)||l===q)return Se;if(A===ge&&-1!==Pe.indexOf(l))return Se;if(l===le&&c===ge)return Se;if(c===ee)return Se;if(-1!==Me.indexOf(c)&&l===oe||-1!==Me.indexOf(l)&&c===oe)return Se;if(l===ae&&-1!==[me,he,de].indexOf(c)||-1!==[me,he,de].indexOf(l)&&c===se)return Se;if(-1!==Me.indexOf(l)&&-1!==Ue.indexOf(c)||-1!==Ue.indexOf(l)&&-1!==Me.indexOf(c))return Se;if(-1!==[ae,se].indexOf(l)&&(c===oe||-1!==[ne,X].indexOf(c)&&t[a+1]===oe)||-1!==[ne,X].indexOf(l)&&c===oe||l===oe&&-1!==[oe,le,re].indexOf(c))return Se;if(-1!==[oe,le,re,Y,Z].indexOf(c))for(var u=o;u>=0;){if((h=t[u])===oe)return Se;if(-1===[le,re].indexOf(h))break;u--}if(-1!==[ae,se].indexOf(c))for(u=-1!==[Y,Z].indexOf(l)?s:o;u>=0;){var h;if((h=t[u])===oe)return Se;if(-1===[le,re].indexOf(h))break;u--}if(ve===l&&-1!==[ve,ye,pe,fe].indexOf(c)||-1!==[ye,pe].indexOf(l)&&-1!==[ye,we].indexOf(c)||-1!==[we,fe].indexOf(l)&&c===we)return Se;if(-1!==Re.indexOf(l)&&-1!==[ee,se].indexOf(c)||-1!==Re.indexOf(c)&&l===ae)return Se;if(-1!==Me.indexOf(l)&&-1!==Me.indexOf(c))return Se;if(l===re&&-1!==Me.indexOf(c))return Se;if(-1!==Me.concat(oe).indexOf(l)&&c===ne&&-1===_e.indexOf(e[a])||-1!==Me.concat(oe).indexOf(c)&&l===Z)return Se;if(l===be&&c===be){for(var d=n[o],p=1;d>0&&t[--d]===be;)p++;if(p%2!==0)return Se}return l===he&&c===de?Se:Ee},He=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Ne(e,t.lineBreak),i=n[0],r=n[1],o=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(r=r.map(function(e){return-1!==[oe,ce,xe].indexOf(e)?me:e}));var s="keep-all"===t.wordBreak?o.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[i,r,s]},Qe=function(){function e(e,t,n,i){this.codePoints=e,this.required=t===Ce,this.start=n,this.end=i}return e.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),ze=function(e,t){var n=A(e),i=He(n,t),r=i[0],o=i[1],s=i[2],a=n.length,l=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var e=Se;c<a&&(e=Oe(n,o,r,++c,s))===Se;);if(e!==Se||c===a){var t=new Qe(n,e,l,c);return l=c,{value:t,done:!1}}return{done:!0,value:null}}}},Ge=1,je=2,Ve=4,We=8,Ke=10,qe=47,Xe=92,Je=9,Ye=32,Ze=34,$e=61,et=35,tt=36,nt=37,it=39,rt=40,ot=41,st=95,at=45,lt=33,At=60,ct=62,ut=64,ht=91,dt=93,pt=61,ft=123,gt=63,mt=125,vt=124,yt=126,wt=128,bt=65533,xt=42,Bt=43,_t=44,Ct=58,St=59,Et=46,Tt=0,Mt=8,Ft=11,It=14,Ut=31,Lt=127,Rt=-1,Pt=48,Nt=97,kt=101,Dt=102,Ot=117,Ht=122,Qt=65,zt=69,Gt=70,jt=85,Vt=90,Wt=function(e){return e>=Pt&&e<=57},Kt=function(e){return e>=55296&&e<=57343},qt=function(e){return Wt(e)||e>=Qt&&e<=Gt||e>=Nt&&e<=Dt},Xt=function(e){return e>=Nt&&e<=Ht},Jt=function(e){return e>=Qt&&e<=Vt},Yt=function(e){return Xt(e)||Jt(e)},Zt=function(e){return e>=wt},$t=function(e){return e===Ke||e===Je||e===Ye},en=function(e){return Yt(e)||Zt(e)||e===st},tn=function(e){return en(e)||Wt(e)||e===at},nn=function(e){return e>=Tt&&e<=Mt||e===Ft||e>=It&&e<=Ut||e===Lt},rn=function(e,t){return e===Xe&&t!==Ke},on=function(e,t,n){return e===at?en(t)||rn(t,n):!!en(e)||!(e!==Xe||!rn(e,t))},sn=function(e,t,n){return e===Bt||e===at?!!Wt(t)||t===Et&&Wt(n):Wt(e===Et?t:e)},an=function(e){var t=0,n=1;e[t]!==Bt&&e[t]!==at||(e[t]===at&&(n=-1),t++);for(var i=[];Wt(e[t]);)i.push(e[t++]);var r=i.length?parseInt(c.apply(void 0,i),10):0;e[t]===Et&&t++;for(var o=[];Wt(e[t]);)o.push(e[t++]);var s=o.length,a=s?parseInt(c.apply(void 0,o),10):0;e[t]!==zt&&e[t]!==kt||t++;var l=1;e[t]!==Bt&&e[t]!==at||(e[t]===at&&(l=-1),t++);for(var A=[];Wt(e[t]);)A.push(e[t++]);var u=A.length?parseInt(c.apply(void 0,A),10):0;return n*(r+a*Math.pow(10,-s))*Math.pow(10,l*u)},ln={type:2},An={type:3},cn={type:4},un={type:13},hn={type:8},dn={type:21},pn={type:9},fn={type:10},gn={type:11},mn={type:12},vn={type:14},yn={type:23},wn={type:1},bn={type:25},xn={type:24},Bn={type:26},_n={type:27},Cn={type:28},Sn={type:29},En={type:31},Tn={type:32},Mn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(A(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Tn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(tn(t)||rn(n,i)){var r=on(t,n,i)?je:Ge;return{type:5,value:this.consumeName(),flags:r}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),un;break;case it:return this.consumeStringToken(it);case rt:return ln;case ot:return An;case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),vn;break;case Bt:if(sn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case _t:return cn;case at:var o=e,s=this.peekCodePoint(0),a=this.peekCodePoint(1);if(sn(o,s,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(on(o,s,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(s===at&&a===ct)return this.consumeCodePoint(),this.consumeCodePoint(),xn;break;case Et:if(sn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===xt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===xt&&(l=this.consumeCodePoint())===qe)return this.consumeToken();if(l===Rt)return this.consumeToken()}break;case Ct:return Bn;case St:return _n;case At:if(this.peekCodePoint(0)===lt&&this.peekCodePoint(1)===at&&this.peekCodePoint(2)===at)return this.consumeCodePoint(),this.consumeCodePoint(),bn;break;case ut:var A=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(on(A,u,h))return{type:7,value:this.consumeName()};break;case ht:return Cn;case Xe:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case dt:return Sn;case pt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),hn;break;case ft:return gn;case mt:return mn;case Ot:case jt:var d=this.peekCodePoint(0),p=this.peekCodePoint(1);return d!==Bt||!qt(p)&&p!==gt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case vt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),dn;break;case yt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;break;case Rt:return Tn}return $t(e)?(this.consumeWhiteSpace(),En):Wt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:c(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===gt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(c.apply(void 0,e.map(function(e){return e===gt?Pt:e})),16),end:parseInt(c.apply(void 0,e.map(function(e){return e===gt?Gt:e})),16)};var i=parseInt(c.apply(void 0,e),16);if(this.peekCodePoint(0)===at&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var r=[];qt(t)&&r.length<6;)r.push(t),t=this.consumeCodePoint();return{type:30,start:i,end:parseInt(c.apply(void 0,r),16)}}return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===rt?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===rt?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===it||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt||this.peekCodePoint(0)===ot)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yn)}for(;;){var i=this.consumeCodePoint();if(i===Rt||i===ot)return{type:22,value:c.apply(void 0,e)};if($t(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt||this.peekCodePoint(0)===ot?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,e)}):(this.consumeBadUrlRemnants(),yn);if(i===Ze||i===it||i===rt||nn(i))return this.consumeBadUrlRemnants(),yn;if(i===Xe){if(!rn(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),yn;e.push(this.consumeEscapedCodePoint())}else e.push(i)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ot||e===Rt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=c.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var i=this._value[n];if(i===Rt||void 0===i||i===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(i===Ke)return this._value.splice(0,n),wn;if(i===Xe){var r=this._value[n+1];r!==Rt&&void 0!==r&&(r===Ke?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(i,r)&&(t+=this.consumeStringSlice(n),t+=c(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ve,n=this.peekCodePoint(0);for(n!==Bt&&n!==at||e.push(this.consumeCodePoint());Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===Et&&Wt(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((n===zt||n===kt)&&((i===Bt||i===at)&&Wt(r)||Wt(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[an(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);return on(i,r,o)?{type:15,number:t,flags:n,unit:this.consumeName()}:i===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=c(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=c(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Kt(n)||n>1114111?bt:n}return e===Rt?bt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=c(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=c(this.consumeEscapedCodePoint())}}},e}(),Fn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Mn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||On(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?Tn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),In=function(e){return 15===e.type},Un=function(e){return 17===e.type},Ln=function(e){return 20===e.type},Rn=function(e){return 0===e.type},Pn=function(e,t){return Ln(e)&&e.value===t},Nn=function(e){return 31!==e.type},kn=function(e){return 31!==e.type&&4!==e.type},Dn=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},On=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Hn=function(e){return 17===e.type||15===e.type},Qn=function(e){return 16===e.type||Hn(e)},zn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Gn={type:17,number:0,flags:Ve},jn={type:16,number:50,flags:Ve},Vn={type:16,number:100,flags:Ve},Wn=function(e,t,n){var i=e[0],r=e[1];return[Kn(i,t),Kn("undefined"!==typeof r?r:i,n)]},Kn=function(e,t){if(16===e.type)return e.number/100*t;if(In(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Xn="grad",Jn="rad",Yn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Xn:return Math.PI/200*t.number;case Jn:return t.number;case Yn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Xn||e.unit===Jn||e.unit===Yn)},ei=function(e){switch(e.filter(Ln).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Gn,Gn];case"to top":case"bottom":return ti(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Gn,Vn];case"to right":case"left":return ti(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vn,Vn];case"to bottom":case"top":return ti(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vn,Gn];case"to left":case"right":return ti(270)}return 0},ti=function(e){return Math.PI*e/180},ni={name:"color",parse:function(e,t){if(18===t.type){var n=ci[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var i=t.value.substring(0,1),r=t.value.substring(1,2),o=t.value.substring(2,3);return oi(parseInt(i+i,16),parseInt(r+r,16),parseInt(o+o,16),1)}if(4===t.value.length){i=t.value.substring(0,1),r=t.value.substring(1,2),o=t.value.substring(2,3);var s=t.value.substring(3,4);return oi(parseInt(i+i,16),parseInt(r+r,16),parseInt(o+o,16),parseInt(s+s,16)/255)}if(6===t.value.length)return i=t.value.substring(0,2),r=t.value.substring(2,4),o=t.value.substring(4,6),oi(parseInt(i,16),parseInt(r,16),parseInt(o,16),1);if(8===t.value.length)return i=t.value.substring(0,2),r=t.value.substring(2,4),o=t.value.substring(4,6),s=t.value.substring(6,8),oi(parseInt(i,16),parseInt(r,16),parseInt(o,16),parseInt(s,16)/255)}if(20===t.type){var a=hi[t.value.toUpperCase()];if("undefined"!==typeof a)return a}return hi.TRANSPARENT}},ii=function(e){return 0===(255&e)},ri=function(e){var t=255&e,n=255&e>>8,i=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+i+","+n+","+t/255+")":"rgb("+r+","+i+","+n+")"},oi=function(e,t,n,i){return(e<<24|t<<16|n<<8|Math.round(255*i))>>>0},si=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},ai=function(e,t){var n=t.filter(kn);if(3===n.length){var i=n.map(si),r=i[0],o=i[1],s=i[2];return oi(r,o,s,1)}if(4===n.length){var a=n.map(si),l=(r=a[0],o=a[1],s=a[2],a[3]);return oi(r,o,s,l)}return 0};function li(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var Ai=function(e,t){var n=t.filter(kn),i=n[0],r=n[1],o=n[2],s=n[3],a=(17===i.type?ti(i.number):Zn.parse(e,i))/(2*Math.PI),l=Qn(r)?r.number/100:0,A=Qn(o)?o.number/100:0,c="undefined"!==typeof s&&Qn(s)?Kn(s,1):1;if(0===l)return oi(255*A,255*A,255*A,1);var u=A<=.5?A*(l+1):A+l-A*l,h=2*A-u,d=li(h,u,a+1/3),p=li(h,u,a),f=li(h,u,a-1/3);return oi(255*d,255*p,255*f,c)},ci={hsl:Ai,hsla:Ai,rgb:ai,rgba:ai},ui=function(e,t){return ni.parse(e,Fn.create(t).parseComponentValue())},hi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},di={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pi={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fi=function(e,t){var n=ni.parse(e,t[0]),i=t[1];return i&&Qn(i)?{color:n,stop:i}:{color:n,stop:null}},gi=function(e,t){var n=e[0],i=e[e.length-1];null===n.stop&&(n.stop=Gn),null===i.stop&&(i.stop=Vn);for(var r=[],o=0,s=0;s<e.length;s++){var a=e[s].stop;if(null!==a){var l=Kn(a,t);l>o?r.push(l):r.push(o),o=l}else r.push(null)}var A=null;for(s=0;s<r.length;s++){var c=r[s];if(null===c)null===A&&(A=s);else if(null!==A){for(var u=s-A,h=(c-r[A-1])/(u+1),d=1;d<=u;d++)r[A+d-1]=h*d;A=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,r[n]/t),0)}})},mi=function(e,t,n){var i=t/2,r=n/2,o=Kn(e[0],t)-i,s=r-Kn(e[1],n);return(Math.atan2(s,o)+2*Math.PI)%(2*Math.PI)},vi=function(e,t,n){var i="number"===typeof e?e:mi(e,t,n),r=Math.abs(t*Math.sin(i))+Math.abs(n*Math.cos(i)),o=t/2,s=n/2,a=r/2,l=Math.sin(i-Math.PI/2)*a,A=Math.cos(i-Math.PI/2)*a;return[r,o-A,o+A,s-l,s+l]},yi=function(e,t){return Math.sqrt(e*e+t*t)},wi=function(e,t,n,i,r){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var o=t[0],s=t[1],a=yi(n-o,i-s);return(r?a<e.optimumDistance:a>e.optimumDistance)?{optimumCorner:t,optimumDistance:a}:e},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},bi=function(e,t,n,i,r){var o=0,s=0;switch(e.size){case 0:0===e.shape?o=s=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(n),Math.abs(n-r)):1===e.shape&&(o=Math.min(Math.abs(t),Math.abs(t-i)),s=Math.min(Math.abs(n),Math.abs(n-r)));break;case 2:if(0===e.shape)o=s=Math.min(yi(t,n),yi(t,n-r),yi(t-i,n),yi(t-i,n-r));else if(1===e.shape){var a=Math.min(Math.abs(n),Math.abs(n-r))/Math.min(Math.abs(t),Math.abs(t-i)),l=wi(i,r,t,n,!0),A=l[0],c=l[1];s=a*(o=yi(A-t,(c-n)/a))}break;case 1:0===e.shape?o=s=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(n),Math.abs(n-r)):1===e.shape&&(o=Math.max(Math.abs(t),Math.abs(t-i)),s=Math.max(Math.abs(n),Math.abs(n-r)));break;case 3:if(0===e.shape)o=s=Math.max(yi(t,n),yi(t,n-r),yi(t-i,n),yi(t-i,n-r));else if(1===e.shape){a=Math.max(Math.abs(n),Math.abs(n-r))/Math.max(Math.abs(t),Math.abs(t-i));var u=wi(i,r,t,n,!1);A=u[0],c=u[1],s=a*(o=yi(A-t,(c-n)/a))}}return Array.isArray(e.size)&&(o=Kn(e.size[0],i),s=2===e.size.length?Kn(e.size[1],r):o),[o,s]},xi=function(e,t){var n=ti(180),i=[];return Dn(t).forEach(function(t,r){if(0===r){var o=t[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(n=ei(t));if($n(o))return void(n=(Zn.parse(e,o)+ti(270))%ti(360))}var s=fi(e,t);i.push(s)}),{angle:n,stops:i,type:1}},Bi="closest-side",_i="farthest-side",Ci="closest-corner",Si="farthest-corner",Ei="circle",Ti="ellipse",Mi="cover",Fi="contain",Ii=function(e,t){var n=0,i=3,r=[],o=[];return Dn(t).forEach(function(t,s){var a=!0;if(0===s?a=t.reduce(function(e,t){if(Ln(t))switch(t.value){case"center":return o.push(jn),!1;case"top":case"left":return o.push(Gn),!1;case"right":case"bottom":return o.push(Vn),!1}else if(Qn(t)||Hn(t))return o.push(t),!1;return e},a):1===s&&(a=t.reduce(function(e,t){if(Ln(t))switch(t.value){case Ei:return n=0,!1;case Ti:return n=1,!1;case Fi:case Bi:return i=0,!1;case _i:return i=1,!1;case Ci:return i=2,!1;case Mi:case Si:return i=3,!1}else if(Hn(t)||Qn(t))return Array.isArray(i)||(i=[]),i.push(t),!1;return e},a)),a){var l=fi(e,t);r.push(l)}}),{size:i,shape:n,stops:r,position:o,type:2}},Ui=function(e){return 1===e.type},Li=function(e){return 2===e.type},Ri={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var i=ki[t.name];if("undefined"===typeof i)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Pi(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!ki[e.name])}var Ni,ki={"linear-gradient":function(e,t){var n=ti(180),i=[];return Dn(t).forEach(function(t,r){if(0===r){var o=t[0];if(20===o.type&&"to"===o.value)return void(n=ei(t));if($n(o))return void(n=Zn.parse(e,o))}var s=fi(e,t);i.push(s)}),{angle:n,stops:i,type:1}},"-moz-linear-gradient":xi,"-ms-linear-gradient":xi,"-o-linear-gradient":xi,"-webkit-linear-gradient":xi,"radial-gradient":function(e,t){var n=0,i=3,r=[],o=[];return Dn(t).forEach(function(t,s){var a=!0;if(0===s){var l=!1;a=t.reduce(function(e,t){if(l)if(Ln(t))switch(t.value){case"center":return o.push(jn),e;case"top":case"left":return o.push(Gn),e;case"right":case"bottom":return o.push(Vn),e}else(Qn(t)||Hn(t))&&o.push(t);else if(Ln(t))switch(t.value){case Ei:return n=0,!1;case Ti:return n=1,!1;case"at":return l=!0,!1;case Bi:return i=0,!1;case Mi:case _i:return i=1,!1;case Fi:case Ci:return i=2,!1;case Si:return i=3,!1}else if(Hn(t)||Qn(t))return Array.isArray(i)||(i=[]),i.push(t),!1;return e},a)}if(a){var A=fi(e,t);r.push(A)}}),{size:i,shape:n,stops:r,position:o,type:2}},"-moz-radial-gradient":Ii,"-ms-radial-gradient":Ii,"-o-radial-gradient":Ii,"-webkit-radial-gradient":Ii,"-webkit-gradient":function(e,t){var n=ti(180),i=[],r=1,o=0,s=3,a=[];return Dn(t).forEach(function(t,n){var o=t[0];if(0===n){if(Ln(o)&&"linear"===o.value)return void(r=1);if(Ln(o)&&"radial"===o.value)return void(r=2)}if(18===o.type)if("from"===o.name){var s=ni.parse(e,o.values[0]);i.push({stop:Gn,color:s})}else if("to"===o.name)s=ni.parse(e,o.values[0]),i.push({stop:Vn,color:s});else if("color-stop"===o.name){var a=o.values.filter(kn);if(2===a.length){s=ni.parse(e,a[1]);var l=a[0];Un(l)&&i.push({stop:{type:16,number:100*l.number,flags:l.flags},color:s})}}}),1===r?{angle:(n+ti(180))%ti(360),stops:i,type:r}:{size:s,shape:o,stops:i,position:a,type:r}}},Di={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return kn(e)&&Pi(e)}).map(function(t){return Ri.parse(e,t)})}},Oi={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Hi={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Dn(t).map(function(e){return e.filter(Qn)}).map(zn)}},Qi={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Dn(t).map(function(e){return e.filter(Ln).map(function(e){return e.value}).join(" ")}).map(zi)}},zi=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Ni||(Ni={}));var Gi,ji={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Dn(t).map(function(e){return e.filter(Vi)})}},Vi=function(e){return Ln(e)||Qn(e)},Wi=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ki=Wi("top"),qi=Wi("right"),Xi=Wi("bottom"),Ji=Wi("left"),Yi=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return zn(t.filter(Qn))}}},Zi=Yi("top-left"),$i=Yi("top-right"),er=Yi("bottom-right"),tr=Yi("bottom-left"),nr=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ir=nr("top"),rr=nr("right"),or=nr("bottom"),sr=nr("left"),ar=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:0}}},lr=ar("top"),Ar=ar("right"),cr=ar("bottom"),ur=ar("left"),hr={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dr={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},pr={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).reduce(function(e,t){return e|fr(t.value)},0)}},fr=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gr={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mr={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Gi||(Gi={}));var vr,yr={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Gi.STRICT:Gi.NORMAL}},wr={name:"line-height",initialValue:"normal",prefix:!1,type:4},br=function(e,t){return Ln(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Qn(e)?Kn(e,t):t},xr={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Ri.parse(e,t)}},Br={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},_r={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Cr=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Sr=Cr("top"),Er=Cr("right"),Tr=Cr("bottom"),Mr=Cr("left"),Fr={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Ir={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Ur=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Lr=Ur("top"),Rr=Ur("right"),Pr=Ur("bottom"),Nr=Ur("left"),kr={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Dr={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Or={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Pn(t[0],"none")?[]:Dn(t).map(function(t){for(var n={color:hi.TRANSPARENT,offsetX:Gn,offsetY:Gn,blur:Gn},i=0,r=0;r<t.length;r++){var o=t[r];Hn(o)?(0===i?n.offsetX=o:1===i?n.offsetY=o:n.blur=o,i++):n.color=ni.parse(e,o)}return n})}},Hr={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Qr={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=zr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},zr={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],i=t[1];t[2],t[3];var r=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var s=t[12],a=t[13];return t[14],t[15],16===t.length?[n,i,r,o,s,a]:null}},Gr={type:16,number:50,flags:Ve},jr=[Gr,Gr],Vr={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Qn);return 2!==n.length?jr:[n[0],n[1]]}},Wr={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(vr||(vr={}));for(var Kr={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return vr.BREAK_ALL;case"keep-all":return vr.KEEP_ALL;default:return vr.NORMAL}}},qr={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Un(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Xr={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Jr={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Un(t)?t.number:1}},Yr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zr={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$r={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],i=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:i.push(n.join(" ")),n.length=0}}),n.length&&i.push(n.join(" ")),i.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},eo={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},to={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return Un(t)?t.number:Ln(t)&&"bold"===t.value?700:400}},no={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ln).map(function(e){return e.value})}},io={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ro=function(e,t){return 0!==(e&t)},oo={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},so={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var i=[],r=t.filter(Nn),o=0;o<r.length;o++){var s=r[o],a=r[o+1];if(20===s.type){var l=a&&Un(a)?a.number:1;i.push({counter:s.value,increment:l})}}return i}},ao={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],i=t.filter(Nn),r=0;r<i.length;r++){var o=i[r],s=i[r+1];if(Ln(o)&&"none"!==o.value){var a=s&&Un(s)?s.number:0;n.push({counter:o.value,reset:a})}}return n}},lo={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(In).map(function(t){return Xr.parse(e,t)})}},Ao={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var i=[],r=t.filter(Rn);if(r.length%2!==0)return null;for(var o=0;o<r.length;o+=2){var s=r[o].value,a=r[o+1].value;i.push({open:s,close:a})}return i}},co=function(e,t,n){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?n?i.open:i.close:""},uo={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Pn(t[0],"none")?[]:Dn(t).map(function(t){for(var n={color:255,offsetX:Gn,offsetY:Gn,blur:Gn,spread:Gn,inset:!1},i=0,r=0;r<t.length;r++){var o=t[r];Pn(o,"inset")?n.inset=!0:Hn(o)?(0===i?n.offsetX=o:1===i?n.offsetY=o:2===i?n.blur=o:n.spread=o,i++):n.color=ni.parse(e,o)}return n})}},ho={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],i=[];return t.filter(Ln).forEach(function(e){switch(e.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}}),n.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),i}},po={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fo={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:0}},go=function(){function e(e,t){var n,i;this.animationDuration=yo(e,lo,t.animationDuration),this.backgroundClip=yo(e,di,t.backgroundClip),this.backgroundColor=yo(e,pi,t.backgroundColor),this.backgroundImage=yo(e,Di,t.backgroundImage),this.backgroundOrigin=yo(e,Oi,t.backgroundOrigin),this.backgroundPosition=yo(e,Hi,t.backgroundPosition),this.backgroundRepeat=yo(e,Qi,t.backgroundRepeat),this.backgroundSize=yo(e,ji,t.backgroundSize),this.borderTopColor=yo(e,Ki,t.borderTopColor),this.borderRightColor=yo(e,qi,t.borderRightColor),this.borderBottomColor=yo(e,Xi,t.borderBottomColor),this.borderLeftColor=yo(e,Ji,t.borderLeftColor),this.borderTopLeftRadius=yo(e,Zi,t.borderTopLeftRadius),this.borderTopRightRadius=yo(e,$i,t.borderTopRightRadius),this.borderBottomRightRadius=yo(e,er,t.borderBottomRightRadius),this.borderBottomLeftRadius=yo(e,tr,t.borderBottomLeftRadius),this.borderTopStyle=yo(e,ir,t.borderTopStyle),this.borderRightStyle=yo(e,rr,t.borderRightStyle),this.borderBottomStyle=yo(e,or,t.borderBottomStyle),this.borderLeftStyle=yo(e,sr,t.borderLeftStyle),this.borderTopWidth=yo(e,lr,t.borderTopWidth),this.borderRightWidth=yo(e,Ar,t.borderRightWidth),this.borderBottomWidth=yo(e,cr,t.borderBottomWidth),this.borderLeftWidth=yo(e,ur,t.borderLeftWidth),this.boxShadow=yo(e,uo,t.boxShadow),this.color=yo(e,hr,t.color),this.direction=yo(e,dr,t.direction),this.display=yo(e,pr,t.display),this.float=yo(e,gr,t.cssFloat),this.fontFamily=yo(e,$r,t.fontFamily),this.fontSize=yo(e,eo,t.fontSize),this.fontStyle=yo(e,io,t.fontStyle),this.fontVariant=yo(e,no,t.fontVariant),this.fontWeight=yo(e,to,t.fontWeight),this.letterSpacing=yo(e,mr,t.letterSpacing),this.lineBreak=yo(e,yr,t.lineBreak),this.lineHeight=yo(e,wr,t.lineHeight),this.listStyleImage=yo(e,xr,t.listStyleImage),this.listStylePosition=yo(e,Br,t.listStylePosition),this.listStyleType=yo(e,_r,t.listStyleType),this.marginTop=yo(e,Sr,t.marginTop),this.marginRight=yo(e,Er,t.marginRight),this.marginBottom=yo(e,Tr,t.marginBottom),this.marginLeft=yo(e,Mr,t.marginLeft),this.opacity=yo(e,Jr,t.opacity);var r=yo(e,Fr,t.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=yo(e,Ir,t.overflowWrap),this.paddingTop=yo(e,Lr,t.paddingTop),this.paddingRight=yo(e,Rr,t.paddingRight),this.paddingBottom=yo(e,Pr,t.paddingBottom),this.paddingLeft=yo(e,Nr,t.paddingLeft),this.paintOrder=yo(e,ho,t.paintOrder),this.position=yo(e,Dr,t.position),this.textAlign=yo(e,kr,t.textAlign),this.textDecorationColor=yo(e,Yr,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=yo(e,Zr,null!==(i=t.textDecorationLine)&&void 0!==i?i:t.textDecoration),this.textShadow=yo(e,Or,t.textShadow),this.textTransform=yo(e,Hr,t.textTransform),this.transform=yo(e,Qr,t.transform),this.transformOrigin=yo(e,Vr,t.transformOrigin),this.visibility=yo(e,Wr,t.visibility),this.webkitTextStrokeColor=yo(e,po,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=yo(e,fo,t.webkitTextStrokeWidth),this.wordBreak=yo(e,Kr,t.wordBreak),this.zIndex=yo(e,qr,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return ii(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return ro(this.display,4)||ro(this.display,33554432)||ro(this.display,268435456)||ro(this.display,536870912)||ro(this.display,67108864)||ro(this.display,134217728)},e}(),mo=function(){function e(e,t){this.content=yo(e,oo,t.content),this.quotes=yo(e,Ao,t.quotes)}return e}(),vo=function(){function e(e,t){this.counterIncrement=yo(e,so,t.counterIncrement),this.counterReset=yo(e,ao,t.counterReset)}return e}(),yo=function(e,t,n){var i=new Mn,r=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;i.write(r);var o=new Fn(i.read());switch(t.type){case 2:var s=o.parseComponentValue();return t.parse(e,Ln(s)?s.value:t.initialValue);case 0:return t.parse(e,o.parseComponentValue());case 1:return t.parse(e,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,o.parseComponentValue());case"color":return ni.parse(e,o.parseComponentValue());case"image":return Ri.parse(e,o.parseComponentValue());case"length":var a=o.parseComponentValue();return Hn(a)?a:Gn;case"length-percentage":var l=o.parseComponentValue();return Qn(l)?l:Gn;case"time":return Xr.parse(e,o.parseComponentValue())}}},wo="data-html2canvas-debug",bo=function(e){switch(e.getAttribute(wo)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xo=function(e,t){var n=bo(e);return 1===n||t===n},Bo=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,xo(t,3),this.styles=new go(e,window.getComputedStyle(t,null)),ca(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=a(this.context,t),xo(t,4)&&(this.flags|=16)}return e}(),_o="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",So="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Eo=0;Eo<Co.length;Eo++)So[Co.charCodeAt(Eo)]=Eo;for(var To=function(e){var t,n,i,r,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var A="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),c=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)n=So[e.charCodeAt(t)],i=So[e.charCodeAt(t+1)],r=So[e.charCodeAt(t+2)],o=So[e.charCodeAt(t+3)],c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return A},Mo=function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n.push(e[i+1]<<8|e[i]);return n},Fo=function(e){for(var t=e.length,n=[],i=0;i<t;i+=4)n.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return n},Io=5,Uo=11,Lo=2,Ro=65536>>Io,Po=(1<<Io)-1,No=Ro+(1024>>Io)+32,ko=65536>>Uo,Do=(1<<Uo-Io)-1,Oo=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Ho=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Qo=function(e,t){var n=To(e),i=Array.isArray(n)?Fo(n):new Uint32Array(n),r=Array.isArray(n)?Mo(n):new Uint16Array(n),o=24,s=Oo(r,o/2,i[4]/2),a=2===i[5]?Oo(r,(o+i[4])/2):Ho(i,Math.ceil((o+i[4])/4));return new zo(i[0],i[1],i[2],i[3],s,a)},zo=function(){function e(e,t,n,i,r,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=r,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Io])<<Lo)+(e&Po),this.data[t];if(e<=65535)return t=((t=this.index[Ro+(e-55296>>Io)])<<Lo)+(e&Po),this.data[t];if(e<this.highStart)return t=No-ko+(e>>Uo),t=this.index[t],t+=e>>Io&Do,t=((t=this.index[t])<<Lo)+(e&Po),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Go="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jo="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Vo=0;Vo<Go.length;Vo++)jo[Go.charCodeAt(Vo)]=Vo;var Wo,Ko=1,qo=2,Xo=3,Jo=4,Yo=5,Zo=7,$o=8,es=9,ts=10,ns=11,is=12,rs=13,os=14,ss=15,as=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320===(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t},ls=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var i=[],r=-1,o="";++r<n;){var s=e[r];s<=65535?i.push(s):(s-=65536,i.push(55296+(s>>10),s%1024+56320)),(r+1===n||i.length>16384)&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return o},As=Qo(_o),cs="\xd7",us="\xf7",hs=function(e){return As.get(e)},ds=function(e,t,n){var i=n-2,r=t[i],o=t[n-1],s=t[n];if(o===qo&&s===Xo)return cs;if(o===qo||o===Xo||o===Jo)return us;if(s===qo||s===Xo||s===Jo)return us;if(o===$o&&-1!==[$o,es,ns,is].indexOf(s))return cs;if((o===ns||o===es)&&(s===es||s===ts))return cs;if((o===is||o===ts)&&s===ts)return cs;if(s===rs||s===Yo)return cs;if(s===Zo)return cs;if(o===Ko)return cs;if(o===rs&&s===os){for(;r===Yo;)r=t[--i];if(r===os)return cs}if(o===ss&&s===ss){for(var a=0;r===ss;)a++,r=t[--i];if(a%2===0)return cs}return us},ps=function(e){var t=as(e),n=t.length,i=0,r=0,o=t.map(hs);return{next:function(){if(i>=n)return{done:!0,value:null};for(var e=cs;i<n&&(e=ds(t,o,++i))===cs;);if(e!==cs||i===n){var s=ls.apply(null,t.slice(r,i));return r=i,{value:s,done:!1}}return{done:!0,value:null}}}},fs=function(e){for(var t,n=ps(e),i=[];!(t=n.next()).done;)t.value&&i.push(t.value.slice());return i},gs=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height=t+"px",i.style.display="block",e.body.appendChild(i),n.selectNode(i);var r=n.getBoundingClientRect(),o=Math.round(r.height);if(e.body.removeChild(i),o===t)return!0}}return!1},ms=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var i=t.firstChild,r=A(i.data).map(function(e){return c(e)}),o=0,s={},a=r.every(function(e,t){n.setStart(i,o),n.setEnd(i,o+e.length);var r=n.getBoundingClientRect();o+=e.length;var a=r.x>s.x||r.y>s.y;return s=r,0===t||a});return e.body.removeChild(t),a},vs=function(){return"undefined"!==typeof(new Image).crossOrigin},ys=function(){return"string"===typeof(new XMLHttpRequest).responseType},ws=function(e){var t=new Image,n=e.createElement("canvas"),i=n.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),n.toDataURL()}catch(kt){return!1}return!0},bs=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},xs=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,n,n);var r=new Image,o=t.toDataURL();r.src=o;var s=Bs(n,n,0,0,r);return i.fillStyle="red",i.fillRect(0,0,n,n),_s(s).then(function(t){i.drawImage(t,0,0);var r=i.getImageData(0,0,n,n).data;i.fillStyle="red",i.fillRect(0,0,n,n);var s=e.createElement("div");return s.style.backgroundImage="url("+o+")",s.style.height=n+"px",bs(r)?_s(Bs(n,n,0,0,s)):Promise.reject(!1)}).then(function(e){return i.drawImage(e,0,0),bs(i.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Bs=function(e,t,n,i,r){var o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return s.setAttributeNS(null,"width",e.toString()),s.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",i.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(a),a.appendChild(r),s},_s=function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){return t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},Cs={get SUPPORT_RANGE_BOUNDS(){var e=gs(document);return Object.defineProperty(Cs,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Cs.SUPPORT_RANGE_BOUNDS&&ms(document);return Object.defineProperty(Cs,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=ws(document);return Object.defineProperty(Cs,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?xs(document):Promise.resolve(!1);return Object.defineProperty(Cs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=vs();return Object.defineProperty(Cs,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=ys();return Object.defineProperty(Cs,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Cs,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(Cs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ss=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Es=function(e,t,n,i){var r=Us(t,n),o=[],a=0;return r.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(Cs.SUPPORT_RANGE_BOUNDS){var r=Ms(i,a,t.length).getClientRects();if(r.length>1){var l=Fs(t),A=0;l.forEach(function(t){o.push(new Ss(t,s.fromDOMRectList(e,Ms(i,A+a,t.length).getClientRects()))),A+=t.length})}else o.push(new Ss(t,s.fromDOMRectList(e,r)))}else{var c=i.splitText(t.length);o.push(new Ss(t,Ts(e,i))),i=c}else Cs.SUPPORT_RANGE_BOUNDS||(i=i.splitText(t.length));a+=t.length}),o},Ts=function(e,t){var n=t.ownerDocument;if(n){var i=n.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(i,t);var o=a(e,i);return i.firstChild&&r.replaceChild(i.firstChild,i),o}}return s.EMPTY},Ms=function(e,t,n){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var r=i.createRange();return r.setStart(e,t),r.setEnd(e,t+n),r},Fs=function(e){if(Cs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return fs(e)},Is=function(e,t){if(Cs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Rs(e,t)},Us=function(e,t){return 0!==t.letterSpacing?Fs(e):Is(e,t)},Ls=[32,160,4961,65792,65793,4153,4241],Rs=function(e,t){for(var n,i=ze(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),r=[],o=function(){if(n.value){var e=n.value.slice(),t=A(e),i="";t.forEach(function(e){-1===Ls.indexOf(e)?i+=c(e):(i.length&&r.push(i),r.push(c(e)),i="")}),i.length&&r.push(i)}};!(n=i.next()).done;)o();return r},Ps=function(){function e(e,t,n){this.text=Ns(t.data,n.textTransform),this.textBounds=Es(e,this.text,n,t)}return e}(),Ns=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(ks,Ds);case 2:return e.toUpperCase();default:return e}},ks=/(^|\s|:|-|\(|\))([a-z])/g,Ds=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Os=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return t(n,e),n}(Bo),Hs=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return t(n,e),n}(Bo),Qs=function(e){function n(t,n){var i=e.call(this,t,n)||this,r=new XMLSerializer,o=a(t,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return t(n,e),n}(Bo),zs=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.value=n.value,i}return t(n,e),n}(Bo),Gs=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.start=n.start,i.reversed="boolean"===typeof n.reversed&&!0===n.reversed,i}return t(n,e),n}(Bo),js=[{type:15,flags:0,unit:"px",number:3}],Vs=[{type:16,flags:0,number:50}],Ws=function(e){return e.width>e.height?new s(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new s(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Ks=function(e){var t=e.type===Js?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},qs="checkbox",Xs="radio",Js="password",Ys=707406591,Zs=function(e){function n(t,n){var i=e.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=Ks(n),i.type!==qs&&i.type!==Xs||(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=Ws(i.bounds)),i.type){case qs:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=js;break;case Xs:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Vs}return i}return t(n,e),n}(Bo),$s=function(e){function n(t,n){var i=e.call(this,t,n)||this,r=n.options[n.selectedIndex||0];return i.value=r&&r.text||"",i}return t(n,e),n}(Bo),ea=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.value=n.value,i}return t(n,e),n}(Bo),ta=function(e){function n(t,n){var i=e.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=oa(t,n.contentWindow.document.documentElement);var r=n.contentWindow.document.documentElement?ui(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hi.TRANSPARENT,o=n.contentWindow.document.body?ui(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):hi.TRANSPARENT;i.backgroundColor=ii(r)?ii(o)?i.styles.backgroundColor:o:r}}catch(kt){}return i}return t(n,e),n}(Bo),na=["OL","UL","MENU"],ia=function(e,t,n,i){for(var r=t.firstChild,o=void 0;r;r=o)if(o=r.nextSibling,la(r)&&r.data.trim().length>0)n.textNodes.push(new Ps(e,r,n.styles));else if(Aa(r))if(Sa(r)&&r.assignedNodes)r.assignedNodes().forEach(function(t){return ia(e,t,n,i)});else{var s=ra(e,r);s.styles.isVisible()&&(sa(r,s,i)?s.flags|=4:aa(s.styles)&&(s.flags|=2),-1!==na.indexOf(r.tagName)&&(s.flags|=8),n.elements.push(s),r.slot,r.shadowRoot?ia(e,r.shadowRoot,s,i):_a(r)||ga(r)||Ca(r)||ia(e,r,s,i))}},ra=function(e,t){return wa(t)?new Os(e,t):va(t)?new Hs(e,t):ga(t)?new Qs(e,t):ha(t)?new zs(e,t):da(t)?new Gs(e,t):pa(t)?new Zs(e,t):Ca(t)?new $s(e,t):_a(t)?new ea(e,t):ba(t)?new ta(e,t):new Bo(e,t)},oa=function(e,t){var n=ra(e,t);return n.flags|=4,ia(e,t,n,n),n},sa=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||ma(e)&&n.styles.isTransparent()},aa=function(e){return e.isPositioned()||e.isFloating()},la=function(e){return e.nodeType===Node.TEXT_NODE},Aa=function(e){return e.nodeType===Node.ELEMENT_NODE},ca=function(e){return Aa(e)&&"undefined"!==typeof e.style&&!ua(e)},ua=function(e){return"object"===typeof e.className},ha=function(e){return"LI"===e.tagName},da=function(e){return"OL"===e.tagName},pa=function(e){return"INPUT"===e.tagName},fa=function(e){return"HTML"===e.tagName},ga=function(e){return"svg"===e.tagName},ma=function(e){return"BODY"===e.tagName},va=function(e){return"CANVAS"===e.tagName},ya=function(e){return"VIDEO"===e.tagName},wa=function(e){return"IMG"===e.tagName},ba=function(e){return"IFRAME"===e.tagName},xa=function(e){return"STYLE"===e.tagName},Ba=function(e){return"SCRIPT"===e.tagName},_a=function(e){return"TEXTAREA"===e.tagName},Ca=function(e){return"SELECT"===e.tagName},Sa=function(e){return"SLOT"===e.tagName},Ea=function(e){return e.tagName.indexOf("-")>0},Ta=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,i=e.counterReset,r=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(r=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var o=[];return r&&i.forEach(function(e){var n=t.counters[e.counter];o.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),o},e}(),Ma={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Fa={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Ia={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},Ua={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},La=function(e,t,n,i,r,o){return e<t||e>n?Wa(e,r,o.length>0):i.integers.reduce(function(t,n,r){for(;e>=n;)e-=n,t+=i.values[r];return t},"")+o},Ra=function(e,t,n,i){var r="";do{n||e--,r=i(e)+r,e/=t}while(e*t>=t);return r},Pa=function(e,t,n,i,r){var o=n-t+1;return(e<0?"-":"")+(Ra(Math.abs(e),o,i,function(e){return c(Math.floor(e%o)+t)})+r)},Na=function(e,t,n){void 0===n&&(n=". ");var i=t.length;return Ra(Math.abs(e),i,!1,function(e){return t[Math.floor(e%i)]})+n},ka=1,Da=2,Oa=4,Ha=8,Qa=function(e,t,n,i,r,o){if(e<-9999||e>9999)return Wa(e,4,r.length>0);var s=Math.abs(e),a=r;if(0===s)return t[0]+a;for(var l=0;s>0&&l<=4;l++){var A=s%10;0===A&&ro(o,ka)&&""!==a?a=t[A]+a:A>1||1===A&&0===l||1===A&&1===l&&ro(o,Da)||1===A&&1===l&&ro(o,Oa)&&e>100||1===A&&l>1&&ro(o,Ha)?a=t[A]+(l>0?n[l-1]:"")+a:1===A&&l>0&&(a=n[l-1]+a),s=Math.floor(s/10)}return(e<0?i:"")+a},za="\u5341\u767e\u5343\u842c",Ga="\u62fe\u4f70\u4edf\u842c",ja="\u30de\u30a4\u30ca\u30b9",Va="\ub9c8\uc774\ub108\uc2a4",Wa=function(e,t,n){var i=n?". ":"",r=n?"\u3001":"",o=n?", ":"",s=n?" ":"";switch(t){case 0:return"\u2022"+s;case 1:return"\u25e6"+s;case 2:return"\u25fe"+s;case 5:var a=Pa(e,48,57,!0,i);return a.length<4?"0"+a:a;case 4:return Na(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",r);case 6:return La(e,1,3999,Ma,3,i).toLowerCase();case 7:return La(e,1,3999,Ma,3,i);case 8:return Pa(e,945,969,!1,i);case 9:return Pa(e,97,122,!1,i);case 10:return Pa(e,65,90,!1,i);case 11:return Pa(e,1632,1641,!0,i);case 12:case 49:return La(e,1,9999,Fa,3,i);case 35:return La(e,1,9999,Fa,3,i).toLowerCase();case 13:return Pa(e,2534,2543,!0,i);case 14:case 30:return Pa(e,6112,6121,!0,i);case 15:return Na(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",r);case 16:return Na(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",r);case 17:case 48:return Qa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",za,"\u8ca0",r,Da|Oa|Ha);case 47:return Qa(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Ga,"\u8ca0",r,ka|Da|Oa|Ha);case 42:return Qa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",za,"\u8d1f",r,Da|Oa|Ha);case 41:return Qa(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Ga,"\u8d1f",r,ka|Da|Oa|Ha);case 26:return Qa(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",ja,r,0);case 25:return Qa(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",ja,r,ka|Da|Oa);case 31:return Qa(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Va,o,ka|Da|Oa);case 33:return Qa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Va,o,0);case 32:return Qa(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Va,o,ka|Da|Oa);case 18:return Pa(e,2406,2415,!0,i);case 20:return La(e,1,19999,Ua,3,i);case 21:return Pa(e,2790,2799,!0,i);case 22:return Pa(e,2662,2671,!0,i);case 22:return La(e,1,10999,Ia,3,i);case 23:return Na(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Na(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Pa(e,3302,3311,!0,i);case 28:return Na(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",r);case 29:return Na(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",r);case 34:return Pa(e,3792,3801,!0,i);case 37:return Pa(e,6160,6169,!0,i);case 38:return Pa(e,4160,4169,!0,i);case 39:return Pa(e,2918,2927,!0,i);case 40:return Pa(e,1776,1785,!0,i);case 43:return Pa(e,3046,3055,!0,i);case 44:return Pa(e,3174,3183,!0,i);case 45:return Pa(e,3664,3673,!0,i);case 46:return Pa(e,3872,3881,!0,i);default:return Pa(e,48,57,!0,i)}},Ka="data-html2canvas-ignore",qa=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ta,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,o=Ja(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,l=o.contentWindow,A=l.document,c=$a(o).then(function(){return i(n,void 0,void 0,function(){var e,n;return r(this,function(i){switch(i.label){case 0:return this.scrolledElements.forEach(rl),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:i.sent(),i.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Za(A)]:[3,4];case 3:i.sent(),i.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(A,n)}).then(function(){return o})]:[2,o]}})})});return A.open(),A.write(nl(document.doctype)+"<html></html>"),il(this.referenceElement.ownerDocument,s,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},e.prototype.createElementClone=function(e){if(xo(e,2),va(e))return this.createCanvasClone(e);if(ya(e))return this.createVideoClone(e);if(xa(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return wa(t)&&(wa(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Ea(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(kt){if(this.context.logger.error("Unable to access cssRules property",kt),"SecurityError"!==kt.name)throw kt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(kt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var r=e.getContext("2d"),o=i.getContext("2d");if(o)if(!this.options.allowTaint&&r)o.putImageData(r.getImageData(0,0,e.width,e.height),0,0);else{var s=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(s){var a=s.getContextAttributes();!1===(null===a||void 0===a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return i}catch(kt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(kt){this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},e.prototype.appendChildNode=function(e,t,n){Aa(t)&&(Ba(t)||t.hasAttribute(Ka)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Aa(t)&&xa(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var i=this,r=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;r;r=r.nextSibling)if(Aa(r)&&Sa(r)&&"function"===typeof r.assignedNodes){var o=r.assignedNodes();o.length&&o.forEach(function(e){return i.appendChildNode(t,e,n)})}else this.appendChildNode(t,r,n)},e.prototype.cloneNode=function(e,t){if(la(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Aa(e)&&(ca(e)||ua(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var r=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),s=n.getComputedStyle(e,":after");this.referenceElement===e&&ca(i)&&(this.clonedReferenceElement=i),ma(i)&&cl(i);var a=this.counters.parse(new vo(this.context,r)),l=this.resolvePseudoContent(e,i,o,Wo.BEFORE);Ea(e)&&(t=!0),ya(e)||this.cloneChildNodes(e,i,t),l&&i.insertBefore(l,i.firstChild);var A=this.resolvePseudoContent(e,i,s,Wo.AFTER);return A&&i.appendChild(A),this.counters.pop(a),(r&&(this.options.copyStyles||ua(e))&&!ba(e)||t)&&tl(r,i),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(_a(e)||Ca(e))&&(_a(i)||Ca(i))&&(i.value=e.value),i}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,i){var r=this;if(n){var o=n.content,s=t.ownerDocument;if(s&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new vo(this.context,n));var a=new mo(this.context,n),l=s.createElement("html2canvaspseudoelement");tl(n,l),a.content.forEach(function(t){if(0===t.type)l.appendChild(s.createTextNode(t.value));else if(22===t.type){var n=s.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var i=t.values.filter(Ln);i.length&&l.appendChild(s.createTextNode(e.getAttribute(i[0].value)||""))}else if("counter"===t.name){var o=t.values.filter(kn),A=o[0],c=o[1];if(A&&Ln(A)){var u=r.counters.getCounterValue(A.value),h=c&&Ln(c)?_r.parse(r.context,c.value):3;l.appendChild(s.createTextNode(Wa(u,h,!1)))}}else if("counters"===t.name){var d=t.values.filter(kn),p=(A=d[0],d[1]);if(c=d[2],A&&Ln(A)){var f=r.counters.getCounterValues(A.value),g=c&&Ln(c)?_r.parse(r.context,c.value):3,m=p&&0===p.type?p.value:"",v=f.map(function(e){return Wa(e,g,!1)}).join(m);l.appendChild(s.createTextNode(v))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(s.createTextNode(co(a.quotes,r.quoteDepth++,!0)));break;case"close-quote":l.appendChild(s.createTextNode(co(a.quotes,--r.quoteDepth,!1)));break;default:l.appendChild(s.createTextNode(t.value))}}),l.className=al+" "+ll;var A=i===Wo.BEFORE?" "+al:" "+ll;return ua(t)?t.className.baseValue+=A:t.className+=A,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Wo||(Wo={}));var Xa,Ja=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Ka,"true"),e.body.appendChild(n),n},Ya=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Za=function(e){return Promise.all([].slice.call(e.images,0).map(Ya))},$a=function(e){return new Promise(function(t,n){var i=e.contentWindow;if(!i)return n("No window assigned for iframe");var r=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var n=setInterval(function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(n),t(e))},50)}})},el=["all","d","content"],tl=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e.item(n);-1===el.indexOf(i)&&t.style.setProperty(i,e.getPropertyValue(i))}return t},nl=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},il=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},rl=function(e){var t=e[0],n=e[1],i=e[2];t.scrollLeft=n,t.scrollTop=i},ol=":before",sl=":after",al="___html2canvas___pseudoelement_before",ll="___html2canvas___pseudoelement_after",Al='{\n    content: "" !important;\n    display: none !important;\n}',cl=function(e){ul(e,"."+al+ol+Al+"\n         ."+ll+sl+Al)},ul=function(e,t){var n=e.ownerDocument;if(n){var i=n.createElement("style");i.textContent=t,e.appendChild(i)}},hl=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),dl=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:wl(e)||ml(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,s=this;return r(this,function(r){switch(r.label){case 0:return t=hl.isSameOrigin(e),n=!vl(e)&&!0===this._options.useCORS&&Cs.SUPPORT_CORS_IMAGES&&!t,i=!vl(e)&&!t&&!wl(e)&&"string"===typeof this._options.proxy&&Cs.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||vl(e)||wl(e)||i||n?(o=e,i?[4,this.proxy(o)]:[3,2]):[2];case 1:o=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var i=new Image;i.onload=function(){return e(i)},i.onerror=t,(yl(o)||n)&&(i.crossOrigin="anonymous"),i.src=o,!0===i.complete&&setTimeout(function(){return e(i)},500),s._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,r.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(r,o){var s=Cs.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===s)r(a.response);else{var e=new FileReader;e.addEventListener("load",function(){return r(e.result)},!1),e.addEventListener("error",function(e){return o(e)},!1),e.readAsDataURL(a.response)}else o("Failed to proxy resource "+i+" with status code "+a.status)},a.onerror=o;var l=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+s),"text"!==s&&a instanceof XMLHttpRequest&&(a.responseType=s),t._options.imageTimeout){var A=t._options.imageTimeout;a.timeout=A,a.ontimeout=function(){return o("Timed out ("+A+"ms) proxying "+i)}}a.send()})},e}(),pl=/^data:image\/svg\+xml/i,fl=/^data:image\/.*;base64,/i,gl=/^data:image\/.*/i,ml=function(e){return Cs.SUPPORT_SVG_DRAWING||!bl(e)},vl=function(e){return gl.test(e)},yl=function(e){return fl.test(e)},wl=function(e){return"blob"===e.substr(0,4)},bl=function(e){return"svg"===e.substr(-3).toLowerCase()||pl.test(e)},xl=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Bl=function(e,t,n){return new xl(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},_l=function(){function e(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return e.prototype.subdivide=function(t,n){var i=Bl(this.start,this.startControl,t),r=Bl(this.startControl,this.endControl,t),o=Bl(this.endControl,this.end,t),s=Bl(i,r,t),a=Bl(r,o,t),l=Bl(s,a,t);return n?new e(this.start,i,s,l):new e(l,a,o,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cl=function(e){return 1===e.type},Sl=function(){function e(e){var t=e.styles,n=e.bounds,i=Wn(t.borderTopLeftRadius,n.width,n.height),r=i[0],o=i[1],s=Wn(t.borderTopRightRadius,n.width,n.height),a=s[0],l=s[1],A=Wn(t.borderBottomRightRadius,n.width,n.height),c=A[0],u=A[1],h=Wn(t.borderBottomLeftRadius,n.width,n.height),d=h[0],p=h[1],f=[];f.push((r+a)/n.width),f.push((d+c)/n.width),f.push((o+p)/n.height),f.push((l+u)/n.height);var g=Math.max.apply(Math,f);g>1&&(r/=g,o/=g,a/=g,l/=g,c/=g,u/=g,d/=g,p/=g);var m=n.width-a,v=n.height-u,y=n.width-c,w=n.height-p,b=t.borderTopWidth,x=t.borderRightWidth,B=t.borderBottomWidth,_=t.borderLeftWidth,C=Kn(t.paddingTop,e.bounds.width),S=Kn(t.paddingRight,e.bounds.width),E=Kn(t.paddingBottom,e.bounds.width),T=Kn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||o>0?El(n.left+_/3,n.top+b/3,r-_/3,o-b/3,Xa.TOP_LEFT):new xl(n.left+_/3,n.top+b/3),this.topRightBorderDoubleOuterBox=r>0||o>0?El(n.left+m,n.top+b/3,a-x/3,l-b/3,Xa.TOP_RIGHT):new xl(n.left+n.width-x/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?El(n.left+y,n.top+v,c-x/3,u-B/3,Xa.BOTTOM_RIGHT):new xl(n.left+n.width-x/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?El(n.left+_/3,n.top+w,d-_/3,p-B/3,Xa.BOTTOM_LEFT):new xl(n.left+_/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=r>0||o>0?El(n.left+2*_/3,n.top+2*b/3,r-2*_/3,o-2*b/3,Xa.TOP_LEFT):new xl(n.left+2*_/3,n.top+2*b/3),this.topRightBorderDoubleInnerBox=r>0||o>0?El(n.left+m,n.top+2*b/3,a-2*x/3,l-2*b/3,Xa.TOP_RIGHT):new xl(n.left+n.width-2*x/3,n.top+2*b/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?El(n.left+y,n.top+v,c-2*x/3,u-2*B/3,Xa.BOTTOM_RIGHT):new xl(n.left+n.width-2*x/3,n.top+n.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?El(n.left+2*_/3,n.top+w,d-2*_/3,p-2*B/3,Xa.BOTTOM_LEFT):new xl(n.left+2*_/3,n.top+n.height-2*B/3),this.topLeftBorderStroke=r>0||o>0?El(n.left+_/2,n.top+b/2,r-_/2,o-b/2,Xa.TOP_LEFT):new xl(n.left+_/2,n.top+b/2),this.topRightBorderStroke=r>0||o>0?El(n.left+m,n.top+b/2,a-x/2,l-b/2,Xa.TOP_RIGHT):new xl(n.left+n.width-x/2,n.top+b/2),this.bottomRightBorderStroke=c>0||u>0?El(n.left+y,n.top+v,c-x/2,u-B/2,Xa.BOTTOM_RIGHT):new xl(n.left+n.width-x/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=d>0||p>0?El(n.left+_/2,n.top+w,d-_/2,p-B/2,Xa.BOTTOM_LEFT):new xl(n.left+_/2,n.top+n.height-B/2),this.topLeftBorderBox=r>0||o>0?El(n.left,n.top,r,o,Xa.TOP_LEFT):new xl(n.left,n.top),this.topRightBorderBox=a>0||l>0?El(n.left+m,n.top,a,l,Xa.TOP_RIGHT):new xl(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||u>0?El(n.left+y,n.top+v,c,u,Xa.BOTTOM_RIGHT):new xl(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||p>0?El(n.left,n.top+w,d,p,Xa.BOTTOM_LEFT):new xl(n.left,n.top+n.height),this.topLeftPaddingBox=r>0||o>0?El(n.left+_,n.top+b,Math.max(0,r-_),Math.max(0,o-b),Xa.TOP_LEFT):new xl(n.left+_,n.top+b),this.topRightPaddingBox=a>0||l>0?El(n.left+Math.min(m,n.width-x),n.top+b,m>n.width+x?0:Math.max(0,a-x),Math.max(0,l-b),Xa.TOP_RIGHT):new xl(n.left+n.width-x,n.top+b),this.bottomRightPaddingBox=c>0||u>0?El(n.left+Math.min(y,n.width-_),n.top+Math.min(v,n.height-B),Math.max(0,c-x),Math.max(0,u-B),Xa.BOTTOM_RIGHT):new xl(n.left+n.width-x,n.top+n.height-B),this.bottomLeftPaddingBox=d>0||p>0?El(n.left+_,n.top+Math.min(w,n.height-B),Math.max(0,d-_),Math.max(0,p-B),Xa.BOTTOM_LEFT):new xl(n.left+_,n.top+n.height-B),this.topLeftContentBox=r>0||o>0?El(n.left+_+T,n.top+b+C,Math.max(0,r-(_+T)),Math.max(0,o-(b+C)),Xa.TOP_LEFT):new xl(n.left+_+T,n.top+b+C),this.topRightContentBox=a>0||l>0?El(n.left+Math.min(m,n.width+_+T),n.top+b+C,m>n.width+_+T?0:a-_+T,l-(b+C),Xa.TOP_RIGHT):new xl(n.left+n.width-(x+S),n.top+b+C),this.bottomRightContentBox=c>0||u>0?El(n.left+Math.min(y,n.width-(_+T)),n.top+Math.min(v,n.height+b+C),Math.max(0,c-(x+S)),u-(B+E),Xa.BOTTOM_RIGHT):new xl(n.left+n.width-(x+S),n.top+n.height-(B+E)),this.bottomLeftContentBox=d>0||p>0?El(n.left+_+T,n.top+w,Math.max(0,d-(_+T)),p-(B+E),Xa.BOTTOM_LEFT):new xl(n.left+_+T,n.top+n.height-(B+E))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Xa||(Xa={}));var El=function(e,t,n,i,r){var o=(Math.sqrt(2)-1)/3*4,s=n*o,a=i*o,l=e+n,A=t+i;switch(r){case Xa.TOP_LEFT:return new _l(new xl(e,A),new xl(e,A-a),new xl(l-s,t),new xl(l,t));case Xa.TOP_RIGHT:return new _l(new xl(e,t),new xl(e+s,t),new xl(l,A-a),new xl(l,A));case Xa.BOTTOM_RIGHT:return new _l(new xl(l,t),new xl(l,t+a),new xl(e+s,A),new xl(e,A));case Xa.BOTTOM_LEFT:default:return new _l(new xl(l,A),new xl(l-s,A),new xl(e,t+a),new xl(e,t))}},Tl=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Ml=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Fl=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Il=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Ul=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Ll=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Rl=function(e){return 0===e.type},Pl=function(e){return 1===e.type},Nl=function(e){return 2===e.type},kl=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Dl=function(e,t,n,i,r){return e.map(function(e,o){switch(o){case 0:return e.add(t,n);case 1:return e.add(t+i,n);case 2:return e.add(t+i,n+r);case 3:return e.add(t,n+r)}return e})},Ol=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Hl=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Sl(this.container),this.container.styles.opacity<1&&this.effects.push(new Ll(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new Il(n,i,r))}if(0!==this.container.styles.overflowX){var o=Tl(this.curves),s=Fl(this.curves);kl(o,s)?this.effects.push(new Ul(o,6)):(this.effects.push(new Ul(o,2)),this.effects.push(new Ul(s,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,i=this.effects.slice(0);n;){var r=n.effects.filter(function(e){return!Pl(e)});if(t||0!==n.container.styles.position||!n.parent){if(i.unshift.apply(i,r),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var o=Tl(n.curves),s=Fl(n.curves);kl(o,s)||i.unshift(new Ul(s,6))}}else i.unshift.apply(i,r);n=n.parent}return i.filter(function(t){return ro(t.target,e)})},e}(),Ql=function(e,t,n,i){e.container.elements.forEach(function(r){var o=ro(r.flags,4),s=ro(r.flags,2),a=new Hl(r,e);ro(r.styles.display,2048)&&i.push(a);var l=ro(r.flags,8)?[]:i;if(o||s){var A=o||r.styles.isPositioned()?n:t,c=new Ol(a);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var u=r.styles.zIndex.order;if(u<0){var h=0;A.negativeZIndex.some(function(e,t){return u>e.element.container.styles.zIndex.order?(h=t,!1):h>0}),A.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;A.positiveZIndex.some(function(e,t){return u>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0}),A.positiveZIndex.splice(d,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);Ql(a,c,o?c:n,l)}else r.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),Ql(a,t,n,l);ro(r.flags,8)&&zl(r,l)})},zl=function(e,t){for(var n=e instanceof Gs?e.start:1,i=e instanceof Gs&&e.reversed,r=0;r<t.length;r++){var o=t[r];o.container instanceof zs&&"number"===typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=Wa(n,o.container.styles.listStyleType,!0),n+=i?-1:1}},Gl=function(e){var t=new Hl(e,null),n=new Ol(t),i=[];return Ql(t,n,n,i),zl(t.container,i),n},jl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Vl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Wl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Kl=function(e,t){switch(t){case 0:return ql(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ql(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ql(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return ql(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ql=function(e,t){var n=[];return Cl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Xl=function(e,t,n,i){var r=[];return Cl(e)?r.push(e.subdivide(.5,!1)):r.push(e),Cl(n)?r.push(n.subdivide(.5,!0)):r.push(n),Cl(i)?r.push(i.subdivide(.5,!0).reverse()):r.push(i),Cl(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},Jl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Yl=function(e){var t=e.styles,n=e.bounds,i=Kn(t.paddingLeft,n.width),r=Kn(t.paddingRight,n.width),o=Kn(t.paddingTop,n.width),s=Kn(t.paddingBottom,n.width);return n.add(i+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+r),-(t.borderTopWidth+t.borderBottomWidth+o+s))},Zl=function(e,t){return 0===e?t.bounds:2===e?Yl(t):Jl(t)},$l=function(e,t){return 0===e?t.bounds:2===e?Yl(t):Jl(t)},eA=function(e,t,n){var i=Zl(rA(e.styles.backgroundOrigin,t),e),r=$l(rA(e.styles.backgroundClip,t),e),o=iA(rA(e.styles.backgroundSize,t),n,i),s=o[0],a=o[1],l=Wn(rA(e.styles.backgroundPosition,t),i.width-s,i.height-a);return[oA(rA(e.styles.backgroundRepeat,t),l,o,i,r),Math.round(i.left+l[0]),Math.round(i.top+l[1]),s,a]},tA=function(e){return Ln(e)&&e.value===Ni.AUTO},nA=function(e){return"number"===typeof e},iA=function(e,t,n){var i=t[0],r=t[1],o=t[2],s=e[0],a=e[1];if(!s)return[0,0];if(Qn(s)&&a&&Qn(a))return[Kn(s,n.width),Kn(a,n.height)];var l=nA(o);if(Ln(s)&&(s.value===Ni.CONTAIN||s.value===Ni.COVER))return nA(o)?n.width/n.height<o!==(s.value===Ni.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var A=nA(i),c=nA(r),u=A||c;if(tA(s)&&(!a||tA(a)))return A&&c?[i,r]:l||u?u&&l?[A?i:r*o,c?r:i/o]:[A?i:n.width,c?r:n.height]:[n.width,n.height];if(l){var h=0,d=0;return Qn(s)?h=Kn(s,n.width):Qn(a)&&(d=Kn(a,n.height)),tA(s)?h=d*o:a&&!tA(a)||(d=h/o),[h,d]}var p=null,f=null;if(Qn(s)?p=Kn(s,n.width):a&&Qn(a)&&(f=Kn(a,n.height)),null===p||a&&!tA(a)||(f=A&&c?p/i*r:n.height),null!==f&&tA(s)&&(p=A&&c?f/r*i:n.width),null!==p&&null!==f)return[p,f];throw new Error("Unable to calculate background-size for element")},rA=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},oA=function(e,t,n,i,r){var o=t[0],s=t[1],a=n[0],l=n[1];switch(e){case 2:return[new xl(Math.round(i.left),Math.round(i.top+s)),new xl(Math.round(i.left+i.width),Math.round(i.top+s)),new xl(Math.round(i.left+i.width),Math.round(l+i.top+s)),new xl(Math.round(i.left),Math.round(l+i.top+s))];case 3:return[new xl(Math.round(i.left+o),Math.round(i.top)),new xl(Math.round(i.left+o+a),Math.round(i.top)),new xl(Math.round(i.left+o+a),Math.round(i.height+i.top)),new xl(Math.round(i.left+o),Math.round(i.height+i.top))];case 1:return[new xl(Math.round(i.left+o),Math.round(i.top+s)),new xl(Math.round(i.left+o+a),Math.round(i.top+s)),new xl(Math.round(i.left+o+a),Math.round(i.top+s+l)),new xl(Math.round(i.left+o),Math.round(i.top+s+l))];default:return[new xl(Math.round(r.left),Math.round(r.top)),new xl(Math.round(r.left+r.width),Math.round(r.top)),new xl(Math.round(r.left+r.width),Math.round(r.height+r.top)),new xl(Math.round(r.left),Math.round(r.height+r.top))]}},sA="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",aA="Hidden Text",lA=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),r=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),i.src=sA,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(aA)),n.appendChild(r),n.appendChild(i);var s=i.offsetTop-r.offsetTop+2;n.removeChild(r),n.appendChild(this._document.createTextNode(aA)),n.style.lineHeight="normal",i.style.verticalAlign="super";var a=i.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:s,middle:a}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),AA=function(){function e(e,t){this.context=e,this.options=t}return e}(),cA=1e4,uA=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new lA(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Nl(e)&&(this.ctx.globalAlpha=e.opacity),Rl(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Pl(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return ro(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var i=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Fs(e.text).reduce(function(t,r){return i.ctx.fillText(r,t,e.bounds.top+n),t+i.ctx.measureText(r).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=gA(e.fontFamily).join(", "),i=In(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,i,n].join(" "),n,i]},n.prototype.renderTextNode=function(e,t){return i(this,void 0,void 0,function(){var n,i,o,s,a,l,A,c,u=this;return r(this,function(r){return n=this.createFontStyle(t),i=n[0],o=n[1],s=n[2],this.ctx.font=i,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(o,s),l=a.baseline,A=a.middle,c=t.paintOrder,e.textBounds.forEach(function(e){c.forEach(function(n){switch(n){case 0:u.ctx.fillStyle=ri(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,l);var i=t.textShadow;i.length&&e.text.trim().length&&(i.slice(0).reverse().forEach(function(n){u.ctx.shadowColor=ri(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,l)}),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=ri(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+A),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=ri(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var i=Yl(e),r=Fl(t);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return i(this,void 0,void 0,function(){var t,i,o,a,l,A,c,u,h,d,p,f,g,m,v,y,w,b;return r(this,function(r){switch(r.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,i=e.curves,o=t.styles,a=0,l=t.textNodes,r.label=1;case 1:return a<l.length?(A=l[a],[4,this.renderTextNode(A,o)]):[3,4];case 2:r.sent(),r.label=3;case 3:return a++,[3,1];case 4:if(!(t instanceof Os))return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return v=r.sent(),this.renderReplacedElement(t,i,v),[3,8];case 7:return r.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Hs&&this.renderReplacedElement(t,i,t.canvas),!(t instanceof Qs))return[3,12];r.label=9;case 9:return r.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return v=r.sent(),this.renderReplacedElement(t,i,v),[3,12];case 11:return r.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof ta&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:c=r.sent(),t.width&&t.height&&this.ctx.drawImage(c,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),r.label=14;case 14:if(t instanceof Zs&&(u=Math.min(t.bounds.width,t.bounds.height),t.type===qs?t.checked&&(this.ctx.save(),this.path([new xl(t.bounds.left+.39363*u,t.bounds.top+.79*u),new xl(t.bounds.left+.16*u,t.bounds.top+.5549*u),new xl(t.bounds.left+.27347*u,t.bounds.top+.44071*u),new xl(t.bounds.left+.39694*u,t.bounds.top+.5649*u),new xl(t.bounds.left+.72983*u,t.bounds.top+.23*u),new xl(t.bounds.left+.84*u,t.bounds.top+.34085*u),new xl(t.bounds.left+.39363*u,t.bounds.top+.79*u)]),this.ctx.fillStyle=ri(Ys),this.ctx.fill(),this.ctx.restore()):t.type===Xs&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+u/2,t.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=ri(Ys),this.ctx.fill(),this.ctx.restore())),hA(t)&&t.value.length){switch(h=this.createFontStyle(o),w=h[0],d=h[1],p=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=ri(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=pA(t.styles.textAlign),b=Yl(t),f=0,t.styles.textAlign){case 1:f+=b.width/2;break;case 2:f+=b.width}g=b.add(f,0,0,-b.height/2+1),this.ctx.save(),this.path([new xl(b.left,b.top),new xl(b.left+b.width,b.top),new xl(b.left+b.width,b.top+b.height),new xl(b.left,b.top+b.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ss(t.value,g),o.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ro(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(m=t.styles.listStyleImage).type)return[3,18];v=void 0,y=m.url,r.label=15;case 15:return r.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=r.sent(),this.ctx.drawImage(v,t.bounds.left-(v.width+10),t.bounds.top),[3,18];case 17:return r.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(w=this.createFontStyle(o)[0],this.ctx.font=w,this.ctx.fillStyle=ri(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",b=new s(t.bounds.left,t.bounds.top+Kn(t.styles.paddingTop,t.bounds.width),t.bounds.width,br(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ss(e.listValue,b),o.letterSpacing,br(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),r.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,s,a,l,A,c,u,h,d,p,f,g;return r(this,function(r){switch(r.label){case 0:return ro(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:r.sent(),t=0,n=e.negativeZIndex,r.label=2;case 2:return t<n.length?(g=n[t],[4,this.renderStack(g)]):[3,5];case 3:r.sent(),r.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:r.sent(),i=0,o=e.nonInlineLevel,r.label=7;case 7:return i<o.length?(g=o[i],[4,this.renderNode(g)]):[3,10];case 8:r.sent(),r.label=9;case 9:return i++,[3,7];case 10:s=0,a=e.nonPositionedFloats,r.label=11;case 11:return s<a.length?(g=a[s],[4,this.renderStack(g)]):[3,14];case 12:r.sent(),r.label=13;case 13:return s++,[3,11];case 14:l=0,A=e.nonPositionedInlineLevel,r.label=15;case 15:return l<A.length?(g=A[l],[4,this.renderStack(g)]):[3,18];case 16:r.sent(),r.label=17;case 17:return l++,[3,15];case 18:c=0,u=e.inlineLevel,r.label=19;case 19:return c<u.length?(g=u[c],[4,this.renderNode(g)]):[3,22];case 20:r.sent(),r.label=21;case 21:return c++,[3,19];case 22:h=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,r.label=23;case 23:return h<d.length?(g=d[h],[4,this.renderStack(g)]):[3,26];case 24:r.sent(),r.label=25;case 25:return h++,[3,23];case 26:p=0,f=e.positiveZIndex,r.label=27;case 27:return p<f.length?(g=f[p],[4,this.renderStack(g)]):[3,30];case 28:r.sent(),r.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var i=Cl(e)?e.start:e;0===n?t.ctx.moveTo(i.x,i.y):t.ctx.lineTo(i.x,i.y),Cl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,i){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},n.prototype.resizeImage=function(e,t,n){var i;if(e.width===t&&e.height===n)return e;var r=(null!==(i=this.canvas.ownerDocument)&&void 0!==i?i:document).createElement("canvas");return r.width=Math.max(1,t),r.height=Math.max(1,n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),r},n.prototype.renderBackgroundImage=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,s,a;return r(this,function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var o,s,a,l,A,c,u,h,d,p,f,g,m,v,y,w,b,x,B,_,C,S,E,T,M,F,I,U,L,R,P;return r(this,function(r){switch(r.label){case 0:if(0!==n.type)return[3,5];o=void 0,s=n.url,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.context.cache.match(s)];case 2:return o=r.sent(),[3,4];case 3:return r.sent(),i.context.logger.error("Error loading background-image "+s),[3,4];case 4:return o&&(a=eA(e,t,[o.width,o.height,o.width/o.height]),w=a[0],S=a[1],E=a[2],B=a[3],_=a[4],v=i.ctx.createPattern(i.resizeImage(o,B,_),"repeat"),i.renderRepeat(w,v,S,E)),[3,6];case 5:Ui(n)?(l=eA(e,t,[null,null,null]),w=l[0],S=l[1],E=l[2],B=l[3],_=l[4],A=vi(n.angle,B,_),c=A[0],u=A[1],h=A[2],d=A[3],p=A[4],(f=document.createElement("canvas")).width=B,f.height=_,g=f.getContext("2d"),m=g.createLinearGradient(u,d,h,p),gi(n.stops,c).forEach(function(e){return m.addColorStop(e.stop,ri(e.color))}),g.fillStyle=m,g.fillRect(0,0,B,_),B>0&&_>0&&(v=i.ctx.createPattern(f,"repeat"),i.renderRepeat(w,v,S,E))):Li(n)&&(y=eA(e,t,[null,null,null]),w=y[0],b=y[1],x=y[2],B=y[3],_=y[4],C=0===n.position.length?[jn]:n.position,S=Kn(C[0],B),E=Kn(C[C.length-1],_),T=bi(n,S,E,B,_),M=T[0],F=T[1],M>0&&F>0&&(I=i.ctx.createRadialGradient(b+S,x+E,0,b+S,x+E,M),gi(n.stops,2*M).forEach(function(e){return I.addColorStop(e.stop,ri(e.color))}),i.path(w),i.ctx.fillStyle=I,M!==F?(U=e.bounds.left+.5*e.bounds.width,L=e.bounds.top+.5*e.bounds.height,P=1/(R=F/M),i.ctx.save(),i.ctx.translate(U,L),i.ctx.transform(1,0,0,R,0,0),i.ctx.translate(-U,-L),i.ctx.fillRect(b,P*(x-L)+L,B,_*P),i.ctx.restore()):i.ctx.fill())),r.label=6;case 6:return t--,[2]}})},i=this,o=0,s=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return o<s.length?(a=s[o],[5,n(a)]):[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return i(this,void 0,void 0,function(){return r(this,function(i){return this.path(jl(n,t)),this.ctx.fillStyle=ri(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,o){return i(this,void 0,void 0,function(){var i,s;return r(this,function(r){switch(r.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,o)]:[3,2];case 1:return r.sent(),[2];case 2:return i=Vl(o,n),this.path(i),this.ctx.fillStyle=ri(e),this.ctx.fill(),s=Wl(o,n),this.path(s),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,s,a,l,A,c=this;return r(this,function(r){switch(r.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!ii(t.backgroundColor)||t.backgroundImage.length,i=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],o=dA(rA(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),ii(t.backgroundColor)||(this.ctx.fillStyle=ri(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:r.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){c.ctx.save();var n=Tl(e.curves),i=t.inset?0:cA,r=Dl(n,-i+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(c.path(n),c.ctx.clip(),c.mask(r)):(c.mask(n),c.ctx.clip(),c.path(r)),c.ctx.shadowOffsetX=t.offsetX.number+i,c.ctx.shadowOffsetY=t.offsetY.number,c.ctx.shadowColor=ri(t.color),c.ctx.shadowBlur=t.blur.number,c.ctx.fillStyle=t.inset?ri(t.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),r.label=2;case 2:s=0,a=0,l=i,r.label=3;case 3:return a<l.length?0!==(A=l[a]).style&&!ii(A.color)&&A.width>0?2!==A.style?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,s,e.curves,2)]:[3,11]:[3,13];case 4:return r.sent(),[3,11];case 5:return 3!==A.style?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,s,e.curves,3)];case 6:return r.sent(),[3,11];case 7:return 4!==A.style?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,s,e.curves)];case 8:return r.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,s,e.curves)];case 10:r.sent(),r.label=11;case 11:s++,r.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,o,s){return i(this,void 0,void 0,function(){var i,a,l,A,c,u,h,d,p,f,g,m,v,y,w,b;return r(this,function(r){return this.ctx.save(),i=Kl(o,n),a=jl(o,n),2===s&&(this.path(a),this.ctx.clip()),Cl(a[0])?(l=a[0].start.x,A=a[0].start.y):(l=a[0].x,A=a[0].y),Cl(a[1])?(c=a[1].end.x,u=a[1].end.y):(c=a[1].x,u=a[1].y),h=0===n||2===n?Math.abs(l-c):Math.abs(A-u),this.ctx.beginPath(),3===s?this.formatPath(i):this.formatPath(a.slice(0,2)),d=t<3?3*t:2*t,p=t<3?2*t:t,3===s&&(d=t,p=t),f=!0,h<=2*d?f=!1:h<=2*d+p?(d*=g=h/(2*d+p),p*=g):(m=Math.floor((h+p)/(d+p)),v=(h-m*d)/(m-1),p=(y=(h-(m+1)*d)/m)<=0||Math.abs(p-v)<Math.abs(p-y)?v:y),f&&(3===s?this.ctx.setLineDash([0,d+p]):this.ctx.setLineDash([d,p])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=ri(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(Cl(a[0])&&(w=a[3],b=a[0],this.ctx.beginPath(),this.formatPath([new xl(w.end.x,w.end.y),new xl(b.start.x,b.start.y)]),this.ctx.stroke()),Cl(a[1])&&(w=a[1],b=a[2],this.ctx.beginPath(),this.formatPath([new xl(w.end.x,w.end.y),new xl(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ri(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Gl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(AA),hA=function(e){return e instanceof ea||e instanceof $s||e instanceof Zs&&e.type!==Xs&&e.type!==qs},dA=function(e,t){switch(e){case 0:return Tl(t);case 2:return Ml(t);default:return Fl(t)}},pA=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},fA=["-apple-system","system-ui"],gA=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===fA.indexOf(e)}):e},mA=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return t(n,e),n.prototype.render=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return t=Bs(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,vA(t)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ri(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(AA),vA=function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},yA=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,o([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,o([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,o([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,o([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),wA=function(){function e(t,n){var i;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new yA({id:this.instanceName,enabled:t.logging}),this.cache=null!==(i=t.cache)&&void 0!==i?i:new dl(this,t)}return e.instanceCount=1,e}(),bA=function(e,t){return void 0===t&&(t={}),xA(e,t)};"undefined"!==typeof window&&hl.setContext(window);var xA=function(e,t){return i(void 0,void 0,void 0,function(){var i,o,A,c,u,h,d,p,f,g,m,v,y,w,b,x,B,_,C,S,E,T,M,F,I,U,L,R,P,N,k,D,O,H,Q,z,G,j;return r(this,function(r){switch(r.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(i=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(o=i.defaultView))throw new Error("Document is not attached to a Window");return A={allowTaint:null!==(T=t.allowTaint)&&void 0!==T&&T,imageTimeout:null!==(M=t.imageTimeout)&&void 0!==M?M:15e3,proxy:t.proxy,useCORS:null!==(F=t.useCORS)&&void 0!==F&&F},c=n({logging:null===(I=t.logging)||void 0===I||I,cache:t.cache},A),u={windowWidth:null!==(U=t.windowWidth)&&void 0!==U?U:o.innerWidth,windowHeight:null!==(L=t.windowHeight)&&void 0!==L?L:o.innerHeight,scrollX:null!==(R=t.scrollX)&&void 0!==R?R:o.pageXOffset,scrollY:null!==(P=t.scrollY)&&void 0!==P?P:o.pageYOffset},h=new s(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),d=new wA(c,h),p=null!==(N=t.foreignObjectRendering)&&void 0!==N&&N,f={allowTaint:null!==(k=t.allowTaint)&&void 0!==k&&k,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:p,copyStyles:p},d.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),g=new qa(d,e,f),(m=g.clonedReferenceElement)?[4,g.toIFrame(i,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return v=r.sent(),y=ma(m)||fa(m)?l(m.ownerDocument):a(d,m),w=y.width,b=y.height,x=y.left,B=y.top,_=BA(d,m,t.backgroundColor),C={canvas:t.canvas,backgroundColor:_,scale:null!==(O=null!==(D=t.scale)&&void 0!==D?D:o.devicePixelRatio)&&void 0!==O?O:1,x:(null!==(H=t.x)&&void 0!==H?H:0)+x,y:(null!==(Q=t.y)&&void 0!==Q?Q:0)+B,width:null!==(z=t.width)&&void 0!==z?z:Math.ceil(w),height:null!==(G=t.height)&&void 0!==G?G:Math.ceil(b)},p?(d.logger.debug("Document cloned, using foreign object rendering"),[4,new mA(d,C).render(m)]):[3,3];case 2:return S=r.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+x+","+B+" with size "+w+"x"+b+" using computed rendering"),d.logger.debug("Starting DOM parsing"),E=oa(d,m),_===E.styles.backgroundColor&&(E.styles.backgroundColor=hi.TRANSPARENT),d.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),[4,new uA(d,C).render(E)];case 4:S=r.sent(),r.label=5;case 5:return(null===(j=t.removeContainer)||void 0===j||j)&&(qa.destroy(v)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,S]}})})},BA=function(e,t,n){var i=t.ownerDocument,r=i.documentElement?ui(e,getComputedStyle(i.documentElement).backgroundColor):hi.TRANSPARENT,o=i.body?ui(e,getComputedStyle(i.body).backgroundColor):hi.TRANSPARENT,s="string"===typeof n?ui(e,n):null===n?hi.TRANSPARENT:4294967295;return t===i.documentElement?ii(r)?ii(o)?s:o:r:s};return bA}()},5252:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],A=a+1,c=e[A];if(0>o(l,n))A<r&&0>o(c,l)?(e[i]=c,e[A]=n,i=A):(e[i]=l,e[a]=n,i=a);else{if(!(A<r&&0>o(c,n)))break e;e[i]=c,e[A]=n,i=A}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var A=[],c=[],u=1,h=null,d=3,p=!1,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(A,t)}t=i(c)}}function x(e){if(g=!1,b(e),!f)if(null!==i(A))f=!0,_||(_=!0,B());else{var t=i(c);null!==t&&U(x,t.startTime-e)}}var B,_=!1,C=-1,S=5,E=-1;function T(){return!!m||!(t.unstable_now()-E<S)}function M(){if(m=!1,_){var e=t.unstable_now();E=e;var n=!0;try{e:{f=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=d;try{t:{for(b(e),h=i(A);null!==h&&!(h.expirationTime>e&&T());){var s=h.callback;if("function"===typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,b(e),n=!0;break t}h===i(A)&&r(A),b(e)}else r(A);h=i(A)}if(null!==h)n=!0;else{var l=i(c);null!==l&&U(x,l.startTime-e),n=!1}}break e}finally{h=null,d=o,p=!1}n=void 0}}finally{n?B():_=!1}}}if("function"===typeof w)B=function(){w(M)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,I=F.port2;F.port1.onmessage=M,B=function(){I.postMessage(null)}}else B=function(){v(M,0)};function U(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_requestPaint=function(){m=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===i(A)&&e===i(c)&&(g?(y(C),C=-1):g=!0,U(x,o-s))):(e.sortIndex=a,n(A,e),f||p||(f=!0,_||(_=!0,B()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},6672:(e,t,n)=>{"use strict";var i=n(5043);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=A(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=A(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=A(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=A(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},7004:(e,t,n)=>{"use strict";var i=n(8853),r=n(5043),o=n(7950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function A(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),b=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var M=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function U(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case B:return"Suspense";case _:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case b:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}var L=Array.isArray,R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},k=[],D=-1;function O(e){return{current:e}}function H(e){0>D||(e.current=k[D],k[D]=null,D--)}function Q(e,t){D++,k[D]=e.current,e.current=t}var z,G,j=O(null),V=O(null),W=O(null),K=O(null);function q(e,t){switch(Q(W,t),Q(V,e),Q(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?mu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vu(t=mu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(j),Q(j,e)}function X(){H(j),H(V),H(W)}function J(e){null!==e.memoizedState&&Q(K,e);var t=j.current,n=vu(t,e.type);t!==n&&(Q(V,e),Q(j,n))}function Y(e){V.current===e&&(H(j),H(V)),K.current===e&&(H(K),ch._currentValue=N)}function Z(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||"",G=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+z+e+G}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){i=o}e.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&i&&"string"===typeof a.stack)return[a.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split("\n"),A=a.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<A.length&&!A[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===A.length)for(i=l.length-1,r=A.length-1;1<=i&&0<=r&&l[i]!==A[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==A[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==A[r]){var c="\n"+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=i&&0<=r);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}var ie=Object.prototype.hasOwnProperty,re=i.unstable_scheduleCallback,oe=i.unstable_cancelCallback,se=i.unstable_shouldYield,ae=i.unstable_requestPaint,le=i.unstable_now,Ae=i.unstable_getCurrentPriorityLevel,ce=i.unstable_ImmediatePriority,ue=i.unstable_UserBlockingPriority,he=i.unstable_NormalPriority,de=i.unstable_LowPriority,pe=i.unstable_IdlePriority,fe=i.log,ge=i.unstable_setDisableYieldValue,me=null,ve=null;function ye(e){if("function"===typeof fe&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(me,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(be(e)/xe|0)|0},be=Math.log,xe=Math.LN2;var Be=256,_e=262144,Ce=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=134217727&i;return 0!==a?0!==(i=a&~o)?r=Se(i):0!==(s&=a)?r=Se(s):n||0!==(n=a&~e)&&(r=Se(n)):0!==(a=i&~o)?r=Se(a):0!==s?r=Se(s):n||0!==(n=i&~e)&&(r=Se(n)),0===r?0:0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:r}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Me(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Fe(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Ie(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ue(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Le(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-we(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|261930&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-we(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Pe(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Ne(n))&(e.suspendedLanes|t))?0:n}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ke(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function De(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:Sh(e.type)}function Oe(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var He=Math.random().toString(36).slice(2),Qe="__reactFiber$"+He,ze="__reactProps$"+He,Ge="__reactContainer$"+He,je="__reactEvents$"+He,Ve="__reactListeners$"+He,We="__reactHandles$"+He,Ke="__reactResources$"+He,qe="__reactMarker$"+He;function Xe(e){delete e[Qe],delete e[ze],delete e[je],delete e[Ve],delete e[We]}function Je(e){var t=e[Qe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ge]||n[Qe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Nu(e);null!==e;){if(n=e[Qe])return n;e=Nu(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[Qe]||e[Ge]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function $e(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[qe]=!0}var tt=new Set,nt={};function it(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},at={};function lt(e,t,n){if(r=t,ie.call(at,r)||!ie.call(st,r)&&(ot.test(r)?at[r]=!0:(st[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function At(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ht(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function mt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,i,r,o,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?wt(e,s,ut(t)):null!=n?wt(e,s,ut(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=o&&(e.defaultChecked=!!o),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function yt(e,t,n,i,r,o,s,a){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return void dt(e);n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),dt(e)}function wt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Bt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(s(92));if(L(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i),dt(e)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&St(e,r,i)}else for(var o in t)t.hasOwnProperty(o)&&St(e,o,t[o])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ft=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Ft.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ut(){}var Lt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Nt=null;function kt(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[ze]||null;if(!r)throw Error(s(90));vt(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&pt(i)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Ot(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Pt||null!==Nt)&&($A(),Pt&&(t=Pt,e=Nt,Nt=Pt=null,kt(t),e)))for(t=0;t<e.length;t++)kt(e[t])}}function Ht(e,t){var n=e.stateNode;if(null===n)return null;var i=n[ze]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Qt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Qt)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch(Yh){zt=!1}var jt=null,Vt=null,Wt=null;function Kt(){if(Wt)return Wt;var e,t,n=Vt,i=n.length,r="value"in jt?jt.value:jt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Wt=r.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Jt(){return!1}function Yt(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Xt:Jt,this.isPropagationStopped=Jt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Zt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Yt(tn),rn=d({},tn,{view:0,detail:0}),on=Yt(rn),sn=d({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),an=Yt(sn),ln=Yt(d({},sn,{dataTransfer:0})),An=Yt(d({},rn,{relatedTarget:0})),cn=Yt(d({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Yt(d({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Yt(d({},tn,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function mn(){return gn}var vn=Yt(d({},rn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Yt(d({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Yt(d({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),bn=Yt(d({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Yt(d({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Bn=Yt(d({},tn,{newState:0,oldState:0})),_n=[9,13,27,32],Cn=Qt&&"CompositionEvent"in window,Sn=null;Qt&&"documentMode"in document&&(Sn=document.documentMode);var En=Qt&&"TextEvent"in window&&!Sn,Tn=Qt&&(!Cn||Sn&&8<Sn&&11>=Sn),Mn=String.fromCharCode(32),Fn=!1;function In(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Nn(e,t,n,i){Pt?Nt?Nt.push(i):Nt=[i]:Pt=i,0<(t=iu(t,"onChange")).length&&(n=new nn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var kn=null,Dn=null;function On(e){Xc(e,0)}function Hn(e){if(pt(Ze(e)))return e}function Qn(e,t){if("change"===e)return t}var zn=!1;if(Qt){var Gn;if(Qt){var jn="oninput"in document;if(!jn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),jn="function"===typeof Vn.oninput}Gn=jn}else Gn=!1;zn=Gn&&(!document.documentMode||9<document.documentMode)}function Wn(){kn&&(kn.detachEvent("onpropertychange",Kn),Dn=kn=null)}function Kn(e){if("value"===e.propertyName&&Hn(Dn)){var t=[];Nn(t,Dn,e,Rt(e)),Ot(On,t)}}function qn(e,t,n){"focusin"===e?(Wn(),Dn=n,(kn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Wn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Dn)}function Jn(e,t){if("click"===e)return Hn(t)}function Yn(e,t){if("input"===e||"change"===e)return Hn(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(t,r)||!Zn(e[r],t[r]))return!1}return!0}function ei(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ti(e,t){var n,i=ei(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ei(i)}}function ni(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ni(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ii(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var oi=Qt&&"documentMode"in document&&11>=document.documentMode,si=null,ai=null,li=null,Ai=!1;function ci(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ai||null==si||si!==ft(i)||("selectionStart"in(i=si)&&ri(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},li&&$n(li,i)||(li=i,0<(i=iu(ai,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=si)))}function ui(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hi={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionrun:ui("Transition","TransitionRun"),transitionstart:ui("Transition","TransitionStart"),transitioncancel:ui("Transition","TransitionCancel"),transitionend:ui("Transition","TransitionEnd")},di={},pi={};function fi(e){if(di[e])return di[e];if(!hi[e])return e;var t,n=hi[e];for(t in n)if(n.hasOwnProperty(t)&&t in pi)return di[e]=n[t];return e}Qt&&(pi=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);var gi=fi("animationend"),mi=fi("animationiteration"),vi=fi("animationstart"),yi=fi("transitionrun"),wi=fi("transitionstart"),bi=fi("transitioncancel"),xi=fi("transitionend"),Bi=new Map,_i="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(e,t){Bi.set(e,t),it(t,[e])}_i.push("scrollEnd");var Si="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ei=[],Ti=0,Mi=0;function Fi(){for(var e=Ti,t=Mi=Ti=0;t<e;){var n=Ei[t];Ei[t++]=null;var i=Ei[t];Ei[t++]=null;var r=Ei[t];Ei[t++]=null;var o=Ei[t];if(Ei[t++]=null,null!==i&&null!==r){var s=i.pending;null===s?r.next=r:(r.next=s.next,s.next=r),i.pending=r}0!==o&&Ri(n,r,o)}}function Ii(e,t,n,i){Ei[Ti++]=e,Ei[Ti++]=t,Ei[Ti++]=n,Ei[Ti++]=i,Mi|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Ui(e,t,n,i){return Ii(e,t,n,i),Pi(e)}function Li(e,t){return Ii(e,null,null,t),Pi(e)}function Ri(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(i=o.alternate)&&(i.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(r=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,r&&null!==t&&(r=31-we(n),null===(i=(e=o.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),o):null}function Pi(e){if(50<jA)throw jA=0,VA=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ni={};function ki(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(e,t,n,i){return new ki(e,t,n,i)}function Oi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hi(e,t){var n=e.alternate;return null===n?((n=Di(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Qi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zi(e,t,n,i,r,o){var a=0;if(i=e,"function"===typeof e)Oi(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,j.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Di(31,n,t,r)).elementType=E,e.lanes=o,e;case m:return Gi(n.children,r,o,t);case v:a=8,r|=24;break;case y:return(e=Di(12,n,t,2|r)).elementType=y,e.lanes=o,e;case B:return(e=Di(13,n,t,r)).elementType=B,e.lanes=o,e;case _:return(e=Di(19,n,t,r)).elementType=_,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:a=10;break e;case w:a=9;break e;case x:a=11;break e;case C:a=14;break e;case S:a=16,i=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),i=null}return(t=Di(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Gi(e,t,n,i){return(e=Di(7,e,i,t)).lanes=n,e}function ji(e,t,n){return(e=Di(6,e,null,t)).lanes=n,e}function Vi(e){var t=Di(18,null,null,0);return t.stateNode=e,t}function Wi(e,t,n){return(t=Di(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ki=new WeakMap;function qi(e,t){if("object"===typeof e&&null!==e){var n=Ki.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Ki.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xi=[],Ji=0,Yi=null,Zi=0,$i=[],er=0,tr=null,nr=1,ir="";function rr(e,t){Xi[Ji++]=Zi,Xi[Ji++]=Yi,Yi=e,Zi=t}function or(e,t,n){$i[er++]=nr,$i[er++]=ir,$i[er++]=tr,tr=e;var i=nr;e=ir;var r=32-we(i)-1;i&=~(1<<r),n+=1;var o=32-we(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,nr=1<<32-we(t)+r|n<<r|i,ir=o+e}else nr=1<<o|n<<r|i,ir=e}function sr(e){null!==e.return&&(rr(e,1),or(e,1,0))}function ar(e){for(;e===Yi;)Yi=Xi[--Ji],Xi[Ji]=null,Zi=Xi[--Ji],Xi[Ji]=null;for(;e===tr;)tr=$i[--er],$i[er]=null,ir=$i[--er],$i[er]=null,nr=$i[--er],$i[er]=null}function lr(e,t){$i[er++]=nr,$i[er++]=ir,$i[er++]=tr,nr=t.id,ir=t.overflow,tr=e}var Ar=null,cr=null,ur=!1,hr=null,dr=!1,pr=Error(s(519));function fr(e){throw br(qi(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pr}function gr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Qe]=e,t[ze]=i,n){case"dialog":Jc("cancel",t),Jc("close",t);break;case"iframe":case"object":case"embed":Jc("load",t);break;case"video":case"audio":for(n=0;n<Kc.length;n++)Jc(Kc[n],t);break;case"source":Jc("error",t);break;case"img":case"image":case"link":Jc("error",t),Jc("load",t);break;case"details":Jc("toggle",t);break;case"input":Jc("invalid",t),yt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Jc("invalid",t);break;case"textarea":Jc("invalid",t),Bt(t,i.value,i.defaultValue,i.children)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Au(t.textContent,n)?(null!=i.popover&&(Jc("beforetoggle",t),Jc("toggle",t)),null!=i.onScroll&&Jc("scroll",t),null!=i.onScrollEnd&&Jc("scrollend",t),null!=i.onClick&&(t.onclick=Ut),t=!0):t=!1,t||fr(e,!0)}function mr(e){for(Ar=e.return;Ar;)switch(Ar.tag){case 5:case 31:case 13:return void(dr=!1);case 27:case 3:return void(dr=!0);default:Ar=Ar.return}}function vr(e){if(e!==Ar)return!1;if(!ur)return mr(e),ur=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yu(e.type,e.memoizedProps)),t=!t),t&&cr&&fr(e),mr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));cr=Pu(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));cr=Pu(e)}else 27===n?(n=cr,Su(e.type)?(e=Ru,Ru=null,cr=e):cr=n):cr=Ar?Lu(e.stateNode.nextSibling):null;return!0}function yr(){cr=Ar=null,ur=!1}function wr(){var e=hr;return null!==e&&(null===FA?FA=e:FA.push.apply(FA,e),hr=null),e}function br(e){null===hr?hr=[e]:hr.push(e)}var xr=O(null),Br=null,_r=null;function Cr(e,t,n){Q(xr,t._currentValue),t._currentValue=n}function Sr(e){e._currentValue=xr.current,H(xr)}function Er(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var o=r.dependencies;if(null!==o){var a=r.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=r;for(var A=0;A<t.length;A++)if(l.context===t[A]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Er(o.return,n,e),i||(a=null);break e}o=l.next}}else if(18===r.tag){if(null===(a=r.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Er(a,n,e),a=null}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===e){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function Mr(e,t,n,i){e=null;for(var r=t,o=!1;null!==r;){if(!o)if(0!==(524288&r.flags))o=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var a=r.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=r.type;Zn(r.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(r===K.current){if(null===(a=r.alternate))throw Error(s(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(ch):e=[ch])}r=r.return}null!==e&&Tr(t,e,n,i),t.flags|=262144}function Fr(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ir(e){Br=e,_r=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ur(e){return Rr(Br,e)}function Lr(e,t){return null===Br&&Ir(e),Rr(e,t)}function Rr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===_r){if(null===e)throw Error(s(308));_r=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _r=_r.next=t;return n}var Pr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Nr=i.unstable_scheduleCallback,kr=i.unstable_NormalPriority,Dr={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Or(){return{controller:new Pr,data:new Map,refCount:0}}function Hr(e){e.refCount--,0===e.refCount&&Nr(kr,function(){e.controller.abort()})}var Qr=null,zr=0,Gr=0,jr=null;function Vr(){if(0===--zr&&null!==Qr){null!==jr&&(jr.status="fulfilled");var e=Qr;Qr=null,Gr=0,jr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wr=R.S;R.S=function(e,t){LA=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Qr){var n=Qr=[];zr=0,Gr=zc(),jr={status:"pending",value:void 0,then:function(e){n.push(e)}}}zr++,t.then(Vr,Vr)}(0,t),null!==Wr&&Wr(e,t)};var Kr=O(null);function qr(){var e=Kr.current;return null!==e?e:pA.pooledCache}function Xr(e,t){Q(Kr,null===t?Kr.current:t.pool)}function Jr(){var e=qr();return null===e?null:{parent:Dr._currentValue,pool:e}}var Yr=Error(s(460)),Zr=Error(s(474)),$r=Error(s(542)),eo={then:function(){}};function to(e){return"fulfilled"===(e=e.status)||"rejected"===e}function no(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ut,Ut),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw so(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ut,Ut);else{if(null!==(e=pA)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw so(e=t.reason),e}throw ro=t,Yr}}function io(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ro=t,Yr;throw t}}var ro=null;function oo(){if(null===ro)throw Error(s(459));var e=ro;return ro=null,e}function so(e){if(e===Yr||e===$r)throw Error(s(483))}var ao=null,lo=0;function Ao(e){var t=lo;return lo+=1,null===ao&&(ao=[]),no(ao,e,t)}function co(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function uo(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ho(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Hi(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=ji(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function A(e,t,n,i){var o=n.type;return o===m?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===S&&io(o)===t.type)?(co(t=r(t,n.props),n),t.return=e,t):(co(t=zi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wi(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,o){return null===t||7!==t.tag?((t=Gi(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=ji(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return co(n=zi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Wi(t,e.mode,n)).return=e,t;case S:return h(e,t=io(t),n)}if(L(t)||F(t))return(t=Gi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ao(t),n);if(t.$$typeof===b)return h(e,Lr(e,t),n);uo(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===r?A(e,t,n,i):null;case g:return n.key===r?c(e,t,n,i):null;case S:return d(e,t,n=io(n),i)}if(L(n)||F(n))return null!==r?null:u(e,t,n,i,null);if("function"===typeof n.then)return d(e,t,Ao(n),i);if(n.$$typeof===b)return d(e,t,Lr(e,n),i);uo(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case f:return A(t,e=e.get(null===i.key?n:i.key)||null,i,r);case g:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case S:return p(e,t,n,i=io(i),r)}if(L(i)||F(i))return u(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return p(e,t,n,Ao(i),r);if(i.$$typeof===b)return p(e,t,n,Lr(t,i),r);uo(t,i)}return null}function v(l,A,c,u){if("object"===typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case f:e:{for(var y=c.key;null!==A;){if(A.key===y){if((y=c.type)===m){if(7===A.tag){n(l,A.sibling),(u=r(A,c.props.children)).return=l,l=u;break e}}else if(A.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===S&&io(y)===A.type){n(l,A.sibling),co(u=r(A,c.props),c),u.return=l,l=u;break e}n(l,A);break}t(l,A),A=A.sibling}c.type===m?((u=Gi(c.props.children,l.mode,u,c.key)).return=l,l=u):(co(u=zi(c.type,c.key,c.props,null,l.mode,u),c),u.return=l,l=u)}return a(l);case g:e:{for(y=c.key;null!==A;){if(A.key===y){if(4===A.tag&&A.stateNode.containerInfo===c.containerInfo&&A.stateNode.implementation===c.implementation){n(l,A.sibling),(u=r(A,c.children||[])).return=l,l=u;break e}n(l,A);break}t(l,A),A=A.sibling}(u=Wi(c,l.mode,u)).return=l,l=u}return a(l);case S:return v(l,A,c=io(c),u)}if(L(c))return function(r,s,a,l){for(var A=null,c=null,u=s,f=s=0,g=null;null!==u&&f<a.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var m=d(r,u,a[f],l);if(null===m){null===u&&(u=g);break}e&&u&&null===m.alternate&&t(r,u),s=o(m,s,f),null===c?A=m:c.sibling=m,c=m,u=g}if(f===a.length)return n(r,u),ur&&rr(r,f),A;if(null===u){for(;f<a.length;f++)null!==(u=h(r,a[f],l))&&(s=o(u,s,f),null===c?A=u:c.sibling=u,c=u);return ur&&rr(r,f),A}for(u=i(u);f<a.length;f++)null!==(g=p(u,r,f,a[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=o(g,s,f),null===c?A=g:c.sibling=g,c=g);return e&&u.forEach(function(e){return t(r,e)}),ur&&rr(r,f),A}(l,A,c,u);if(F(c)){if("function"!==typeof(y=F(c)))throw Error(s(150));return function(r,a,l,A){if(null==l)throw Error(s(151));for(var c=null,u=null,f=a,g=a=0,m=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(m=f,f=null):m=f.sibling;var y=d(r,f,v.value,A);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(r,f),a=o(y,a,g),null===u?c=y:u.sibling=y,u=y,f=m}if(v.done)return n(r,f),ur&&rr(r,g),c;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(r,v.value,A))&&(a=o(v,a,g),null===u?c=v:u.sibling=v,u=v);return ur&&rr(r,g),c}for(f=i(f);!v.done;g++,v=l.next())null!==(v=p(f,r,g,v.value,A))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),a=o(v,a,g),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(r,e)}),ur&&rr(r,g),c}(l,A,c=y.call(c),u)}if("function"===typeof c.then)return v(l,A,Ao(c),u);if(c.$$typeof===b)return v(l,A,Lr(l,c),u);uo(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==A&&6===A.tag?(n(l,A.sibling),(u=r(A,c)).return=l,l=u):(n(l,A),(u=ji(c,l.mode,u)).return=l,l=u),a(l)):n(l,A)}return function(e,t,n,i){try{lo=0;var r=v(e,t,n,i);return ao=null,r}catch(s){if(s===Yr||s===$r)throw s;var o=Di(29,s,null,e.mode);return o.lanes=i,o.return=e,o}}}var po=ho(!0),fo=ho(!1),go=!1;function mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&dA)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Pi(e),Ri(e,null,n),t}return Ii(e,i,t,n),Pi(e)}function bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Re(e,n)}}function xo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Bo=!1;function _o(){if(Bo){if(null!==jr)throw jr}}function Co(e,t,n,i){Bo=!1;var r=e.updateQueue;go=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,A=l.next;l.next=null,null===s?o=A:s.next=A,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=A:a.next=A,c.lastBaseUpdate=l))}if(null!==o){var u=r.baseState;for(s=0,c=A=l=null,a=o;;){var h=-536870913&a.lane,p=h!==a.lane;if(p?(gA&h)===h:(i&h)===h){0!==h&&h===Gr&&(Bo=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var f=e,g=a;h=t;var m=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(m,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(m,u,h):f)||void 0===h)break e;u=d({},u,h);break e;case 2:go=!0}}null!==(h=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[h]:p.push(h))}else p={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(A=c=p,l=u):c=c.next=p,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===c&&(l=u),r.baseState=l,r.firstBaseUpdate=A,r.lastBaseUpdate=c,null===o&&(r.shared.lanes=0),_A|=s,e.lanes=s,e.memoizedState=u}}function So(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Eo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)So(n[e],t)}var To=O(null),Mo=O(0);function Fo(e,t){Q(Mo,e=xA),Q(To,t),xA=e|t.baseLanes}function Io(){Q(Mo,xA),Q(To,To.current)}function Uo(){xA=Mo.current,H(To),H(Mo)}var Lo=O(null),Ro=null;function Po(e){var t=e.alternate;Q(Ho,1&Ho.current),Q(Lo,e),null===Ro&&(null===t||null!==To.current||null!==t.memoizedState)&&(Ro=e)}function No(e){Q(Ho,Ho.current),Q(Lo,e),null===Ro&&(Ro=e)}function ko(e){22===e.tag?(Q(Ho,Ho.current),Q(Lo,e),null===Ro&&(Ro=e)):Do()}function Do(){Q(Ho,Ho.current),Q(Lo,Lo.current)}function Oo(e){H(Lo),Ro===e&&(Ro=null),H(Ho)}var Ho=O(0);function Qo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Iu(n)||Uu(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zo=0,Go=null,jo=null,Vo=null,Wo=!1,Ko=!1,qo=!1,Xo=0,Jo=0,Yo=null,Zo=0;function $o(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ts(e,t,n,i,r,o){return zo=o,Go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?ga:ma,qo=!1,o=n(i,r),qo=!1,Ko&&(o=is(t,n,i,r)),ns(e),o}function ns(e){R.H=fa;var t=null!==jo&&null!==jo.next;if(zo=0,Vo=jo=Go=null,Wo=!1,Jo=0,Yo=null,t)throw Error(s(300));null===e||La||null!==(e=e.dependencies)&&Fr(e)&&(La=!0)}function is(e,t,n,i){Go=e;var r=0;do{if(Ko&&(Yo=null),Jo=0,Ko=!1,25<=r)throw Error(s(301));if(r+=1,Vo=jo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}R.H=va,o=t(n,i)}while(Ko);return o}function rs(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?cs(t):t,e=e.useState()[0],(null!==jo?jo.memoizedState:null)!==e&&(Go.flags|=1024),t}function os(){var e=0!==Xo;return Xo=0,e}function ss(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function as(e){if(Wo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wo=!1}zo=0,Vo=jo=Go=null,Ko=!1,Jo=Xo=0,Yo=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vo?Go.memoizedState=Vo=e:Vo=Vo.next=e,Vo}function As(){if(null===jo){var e=Go.alternate;e=null!==e?e.memoizedState:null}else e=jo.next;var t=null===Vo?Go.memoizedState:Vo.next;if(null!==t)Vo=t,jo=e;else{if(null===e){if(null===Go.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(jo=e).memoizedState,baseState:jo.baseState,baseQueue:jo.baseQueue,queue:jo.queue,next:null},null===Vo?Go.memoizedState=Vo=e:Vo=Vo.next=e}return Vo}function cs(e){var t=Jo;return Jo+=1,null===Yo&&(Yo=[]),e=no(Yo,e,t),t=Go,null===(null===Vo?t.memoizedState:Vo.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?ga:ma),e}function us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cs(e);if(e.$$typeof===b)return Ur(e)}throw Error(s(438,String(e)))}function hs(e){var t=null,n=Go.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Go.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Go.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=T;return t.index++,n}function ds(e,t){return"function"===typeof t?t(e):t}function ps(e){return fs(As(),jo,e)}function fs(e,t,n){var i=e.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=n;var r=e.baseQueue,o=i.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}t.baseQueue=r=o,i.pending=null}if(o=e.baseState,null===r)e.memoizedState=o;else{var l=a=null,A=null,c=t=r.next,u=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(gA&h)===h:(zo&h)===h){var d=c.revertLane;if(0===d)null!==A&&(A=A.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Gr&&(u=!0);else{if((zo&d)===d){c=c.next,d===Gr&&(u=!0);continue}h={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===A?(l=A=h,a=o):A=A.next=h,Go.lanes|=d,_A|=d}h=c.action,qo&&n(o,h),o=c.hasEagerState?c.eagerState:n(o,h)}else d={lane:h,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===A?(l=A=d,a=o):A=A.next=d,Go.lanes|=h,_A|=h;c=c.next}while(null!==c&&c!==t);if(null===A?a=o:A.next=l,!Zn(o,e.memoizedState)&&(La=!0,u&&null!==(n=jr)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=A,i.lastRenderedState=o}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function gs(e){var t=As(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);Zn(o,t.memoizedState)||(La=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function ms(e,t,n){var i=Go,r=As(),o=ur;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Zn((jo||r).memoizedState,n);if(a&&(r.memoizedState=n,La=!0),r=r.queue,zs(ws.bind(null,i,r,e),[e]),r.getSnapshot!==t||a||null!==Vo&&1&Vo.memoizedState.tag){if(i.flags|=2048,ks(9,{destroy:void 0},ys.bind(null,i,r,n,t),null),null===pA)throw Error(s(349));o||0!==(127&zo)||vs(i,t,n)}return n}function vs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Go.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ys(e,t,n,i){t.value=n,t.getSnapshot=i,bs(t)&&xs(e)}function ws(e,t,n){return n(function(){bs(t)&&xs(e)})}function bs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(i){return!0}}function xs(e){var t=Li(e,2);null!==t&&qA(t,e,2)}function Bs(e){var t=ls();if("function"===typeof e){var n=e;if(e=n(),qo){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:e},t}function _s(e,t,n,i){return e.baseState=n,fs(e,jo,"function"===typeof i?i:ds)}function Cs(e,t,n,i,r){if(ha(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==R.T?n(!0):o.isTransition=!1,i(o),null===(n=t.pending)?(o.next=t.pending=o,Ss(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Ss(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var o=R.T,s={};R.T=s;try{var a=n(r,i),l=R.S;null!==l&&l(s,a),Es(e,t,a)}catch(A){Ms(e,t,A)}finally{null!==o&&null!==s.types&&(o.types=s.types),R.T=o}}else try{Es(e,t,o=n(r,i))}catch(c){Ms(e,t,c)}}function Es(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ts(e,t,n)},function(n){return Ms(e,t,n)}):Ts(e,t,n)}function Ts(e,t,n){t.status="fulfilled",t.value=n,Fs(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ss(e,n)))}function Ms(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,Fs(t),t=t.next}while(t!==i)}e.action=null}function Fs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Is(e,t){return t}function Us(e,t){if(ur){var n=pA.formState;if(null!==n){e:{var i=Go;if(ur){if(cr){t:{for(var r=cr,o=dr;8!==r.nodeType;){if(!o){r=null;break t}if(null===(r=Lu(r.nextSibling))){r=null;break t}}r="F!"===(o=r.data)||"F"===o?r:null}if(r){cr=Lu(r.nextSibling),i="F!"===r.data;break e}}fr(i)}i=!1}i&&(t=n[0])}}return(n=ls()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:t},n.queue=i,n=Aa.bind(null,Go,i),i.dispatch=n,i=Bs(!1),o=ua.bind(null,Go,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=ls()).queue=r,n=Cs.bind(null,Go,r,o,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Ls(e){return Rs(As(),jo,e)}function Rs(e,t,n){if(t=fs(e,t,Is)[0],e=ps(ds)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=cs(t)}catch(s){if(s===Yr)throw $r;throw s}else i=t;var r=(t=As()).queue,o=r.dispatch;return n!==t.memoizedState&&(Go.flags|=2048,ks(9,{destroy:void 0},Ps.bind(null,r,n),null)),[i,o,e]}function Ps(e,t){e.action=t}function Ns(e){var t=As(),n=jo;if(null!==n)return Rs(t,n,e);As(),t=t.memoizedState;var i=(n=As()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ks(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=Go.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Go.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ds(){return As().memoizedState}function Os(e,t,n,i){var r=ls();Go.flags|=e,r.memoizedState=ks(1|t,{destroy:void 0},n,void 0===i?null:i)}function Hs(e,t,n,i){var r=As();i=void 0===i?null:i;var o=r.memoizedState.inst;null!==jo&&null!==i&&es(i,jo.memoizedState.deps)?r.memoizedState=ks(t,o,n,i):(Go.flags|=e,r.memoizedState=ks(1|t,o,n,i))}function Qs(e,t){Os(8390656,8,e,t)}function zs(e,t){Hs(2048,8,e,t)}function Gs(e){var t=As().memoizedState;return function(e){Go.flags|=4;var t=Go.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Go.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&dA))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function js(e,t){return Hs(4,2,e,t)}function Vs(e,t){return Hs(4,4,e,t)}function Ws(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ks(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4,4,Ws.bind(null,t,e),n)}function qs(){}function Xs(e,t){var n=As();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&es(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=As();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&es(t,i[1]))return i[0];if(i=e(),qo){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[i,t],i}function Ys(e,t,n){return void 0===n||0!==(1073741824&zo)&&0===(261930&gA)?e.memoizedState=t:(e.memoizedState=n,e=KA(),Go.lanes|=e,_A|=e,n)}function Zs(e,t,n,i){return Zn(n,t)?n:null!==To.current?(e=Ys(e,n,i),Zn(e,t)||(La=!0),e):0===(42&zo)||0!==(1073741824&zo)&&0===(261930&gA)?(La=!0,e.memoizedState=n):(e=KA(),Go.lanes|=e,_A|=e,t)}function $s(e,t,n,i,r){var o=P.p;P.p=0!==o&&8>o?o:8;var s=R.T,a={};R.T=a,ua(e,!1,t,n);try{var l=r(),A=R.S;if(null!==A&&A(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ca(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),WA());else ca(e,t,i,WA())}catch(c){ca(e,t,{then:function(){},status:"rejected",reason:c},WA())}finally{P.p=o,null!==s&&null!==a.types&&(s.types=a.types),R.T=s}}function ea(){}function ta(e,t,n,i){if(5!==e.tag)throw Error(s(476));var r=na(e).queue;$s(e,r,t,N,null===n?ea:function(){return ia(e),n(i)})}function na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:N},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ia(e){var t=na(e);null===t.next&&(t=e.alternate.memoizedState),ca(e,t.next.queue,{},WA())}function ra(){return Ur(ch)}function oa(){return As().memoizedState}function sa(){return As().memoizedState}function aa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=WA(),i=wo(t,e=yo(n),n);return null!==i&&(qA(i,t,n),bo(i,t,n)),t={cache:Or()},void(e.payload=t)}t=t.return}}function la(e,t,n){var i=WA();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ha(e)?da(t,n):null!==(n=Ui(e,t,n,i))&&(qA(n,e,i),pa(n,t,i))}function Aa(e,t,n){ca(e,t,n,WA())}function ca(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ha(e))da(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,Zn(a,s))return Ii(e,t,r,0),null===pA&&Fi(),!1}catch(l){}if(null!==(n=Ui(e,t,r,i)))return qA(n,e,i),pa(n,t,i),!0}return!1}function ua(e,t,n,i){if(i={lane:2,revertLane:zc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ha(e)){if(t)throw Error(s(479))}else null!==(t=Ui(e,n,i,2))&&qA(t,e,2)}function ha(e){var t=e.alternate;return e===Go||null!==t&&t===Go}function da(e,t){Ko=Wo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pa(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Re(e,n)}}var fa={readContext:Ur,use:us,useCallback:$o,useContext:$o,useEffect:$o,useImperativeHandle:$o,useLayoutEffect:$o,useInsertionEffect:$o,useMemo:$o,useReducer:$o,useRef:$o,useState:$o,useDebugValue:$o,useDeferredValue:$o,useTransition:$o,useSyncExternalStore:$o,useId:$o,useHostTransitionStatus:$o,useFormState:$o,useActionState:$o,useOptimistic:$o,useMemoCache:$o,useCacheRefresh:$o};fa.useEffectEvent=$o;var ga={readContext:Ur,use:us,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:Ur,useEffect:Qs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Os(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Os(4194308,4,e,t)},useInsertionEffect:function(e,t){Os(4,2,e,t)},useMemo:function(e,t){var n=ls();t=void 0===t?null:t;var i=e();if(qo){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ls();if(void 0!==n){var r=n(t);if(qo){ye(!0);try{n(t)}finally{ye(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=la.bind(null,Go,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ls().memoizedState=e},useState:function(e){var t=(e=Bs(e)).queue,n=Aa.bind(null,Go,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qs,useDeferredValue:function(e,t){return Ys(ls(),e,t)},useTransition:function(){var e=Bs(!1);return e=$s.bind(null,Go,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Go,r=ls();if(ur){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===pA)throw Error(s(349));0!==(127&gA)||vs(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Qs(ws.bind(null,i,o,e),[e]),i.flags|=2048,ks(9,{destroy:void 0},ys.bind(null,i,o,n,t),null),n},useId:function(){var e=ls(),t=pA.identifierPrefix;if(ur){var n=ir;t="_"+t+"R_"+(n=(nr&~(1<<32-we(nr)-1)).toString(32)+n),0<(n=Xo++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Zo++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ra,useFormState:Us,useActionState:Us,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ua.bind(null,Go,!0,n),n.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return ls().memoizedState=aa.bind(null,Go)},useEffectEvent:function(e){var t=ls(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&dA))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},ma={readContext:Ur,use:us,useCallback:Xs,useContext:Ur,useEffect:zs,useImperativeHandle:Ks,useInsertionEffect:js,useLayoutEffect:Vs,useMemo:Js,useReducer:ps,useRef:Ds,useState:function(){return ps(ds)},useDebugValue:qs,useDeferredValue:function(e,t){return Zs(As(),jo.memoizedState,e,t)},useTransition:function(){var e=ps(ds)[0],t=As().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:ms,useId:oa,useHostTransitionStatus:ra,useFormState:Ls,useActionState:Ls,useOptimistic:function(e,t){return _s(As(),0,e,t)},useMemoCache:hs,useCacheRefresh:sa};ma.useEffectEvent=Gs;var va={readContext:Ur,use:us,useCallback:Xs,useContext:Ur,useEffect:zs,useImperativeHandle:Ks,useInsertionEffect:js,useLayoutEffect:Vs,useMemo:Js,useReducer:gs,useRef:Ds,useState:function(){return gs(ds)},useDebugValue:qs,useDeferredValue:function(e,t){var n=As();return null===jo?Ys(n,e,t):Zs(n,jo.memoizedState,e,t)},useTransition:function(){var e=gs(ds)[0],t=As().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:ms,useId:oa,useHostTransitionStatus:ra,useFormState:Ns,useActionState:Ns,useOptimistic:function(e,t){var n=As();return null!==jo?_s(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hs,useCacheRefresh:sa};function ya(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}va.useEffectEvent=Gs;var wa={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=WA(),r=yo(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=wo(e,r,i))&&(qA(t,e,i),bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=WA(),r=yo(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=wo(e,r,i))&&(qA(t,e,i),bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=WA(),i=yo(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=wo(e,i,n))&&(qA(t,e,n),bo(t,e,n))}};function ba(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,i)||!$n(r,o))}function xa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ba(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=d({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function _a(e){Si(e)}function Ca(e){console.error(e)}function Sa(e){Si(e)}function Ea(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ta(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Ma(e,t,n){return(n=yo(n)).tag=3,n.payload={element:null},n.callback=function(){Ea(e,t)},n}function Fa(e){return(e=yo(e)).tag=3,e}function Ia(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var o=i.value;e.payload=function(){return r(o)},e.callback=function(){Ta(t,n,i)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Ta(t,n,i),"function"!==typeof r&&(null===NA?NA=new Set([this]):NA.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Ua=Error(s(461)),La=!1;function Ra(e,t,n,i){t.child=null===e?fo(t,null,n,i):po(t,e.child,n,i)}function Pa(e,t,n,i,r){n=n.render;var o=t.ref;if("ref"in i){var s={};for(var a in i)"ref"!==a&&(s[a]=i[a])}else s=i;return Ir(t),i=ts(e,t,n,s,o,r),a=os(),null===e||La?(ur&&a&&sr(t),t.flags|=1,Ra(e,t,i,r),t.child):(ss(e,t,r),rl(e,t,r))}function Na(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Oi(o)||void 0!==o.defaultProps||null!==n.compare?((e=zi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ka(e,t,o,i,r))}if(o=e.child,!ol(e,r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(s,i)&&e.ref===t.ref)return rl(e,t,r)}return t.flags|=1,(e=Hi(o,i)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if($n(o,i)&&e.ref===t.ref){if(La=!1,t.pendingProps=i=o,!ol(e,r))return t.lanes=e.lanes,rl(e,t,r);0!==(131072&e.flags)&&(La=!0)}}return ja(e,t,n,i,r)}function Da(e,t,n,i){var r=i.children,o=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(0!==(128&t.flags)){if(o=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~o}else i=0,t.child=null;return Ha(e,t,o,n,i)}if(0===(536870912&n))return i=t.lanes=536870912,Ha(e,t,null!==o?o.baseLanes|n:n,n,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xr(0,null!==o?o.cachePool:null),null!==o?Fo(t,o):Io(),ko(t)}else null!==o?(Xr(0,o.cachePool),Fo(t,o),Do(),t.memoizedState=null):(null!==e&&Xr(0,null),Io(),Do());return Ra(e,t,r,n),t.child}function Oa(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ha(e,t,n,i,r){var o=qr();return o=null===o?null:{parent:Dr._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Xr(0,null),Io(),ko(t),null!==e&&Mr(e,t,i,!0),t.childLanes=r,null}function Qa(e,t){return(t=$a({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function za(e,t,n){return po(t,e.child,null,n),(e=Qa(t,t.pendingProps)).flags|=2,Oo(t),t.memoizedState=null,e}function Ga(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function ja(e,t,n,i,r){return Ir(t),n=ts(e,t,n,i,void 0,r),i=os(),null===e||La?(ur&&i&&sr(t),t.flags|=1,Ra(e,t,n,r),t.child):(ss(e,t,r),rl(e,t,r))}function Va(e,t,n,i,r,o){return Ir(t),t.updateQueue=null,n=is(t,i,n,r),ns(e),i=os(),null===e||La?(ur&&i&&sr(t),t.flags|=1,Ra(e,t,n,o),t.child):(ss(e,t,o),rl(e,t,o))}function Wa(e,t,n,i,r){if(Ir(t),null===t.stateNode){var o=Ni,s=n.contextType;"object"===typeof s&&null!==s&&(o=Ur(s)),o=new n(i,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=wa,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=i,o.state=t.memoizedState,o.refs={},mo(t),s=n.contextType,o.context="object"===typeof s&&null!==s?Ur(s):Ni,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(ya(t,n,s,i),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&wa.enqueueReplaceState(o,o.state,null),Co(t,i,o,r),_o(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=Ba(n,a);o.props=l;var A=o.context,c=n.contextType;s=Ni,"object"===typeof c&&null!==c&&(s=Ur(c));var u=n.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||A!==s)&&xa(t,o,i,s),go=!1;var h=t.memoizedState;o.state=h,Co(t,i,o,r),_o(),A=t.memoizedState,a||h!==A||go?("function"===typeof u&&(ya(t,n,u,i),A=t.memoizedState),(l=go||ba(t,n,l,i,h,A,s))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=A),o.props=i,o.state=A,o.context=s,i=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,vo(e,t),c=Ba(n,s=t.memoizedProps),o.props=c,u=t.pendingProps,h=o.context,A=n.contextType,l=Ni,"object"===typeof A&&null!==A&&(l=Ur(A)),(A="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==u||h!==l)&&xa(t,o,i,l),go=!1,h=t.memoizedState,o.state=h,Co(t,i,o,r),_o();var d=t.memoizedState;s!==u||h!==d||go||null!==e&&null!==e.dependencies&&Fr(e.dependencies)?("function"===typeof a&&(ya(t,n,a,i),d=t.memoizedState),(c=go||ba(t,n,c,i,h,d,l)||null!==e&&null!==e.dependencies&&Fr(e.dependencies))?(A||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,d,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,d,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),o.props=i,o.state=d,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,Ga(e,t),i=0!==(128&t.flags),o||i?(o=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&i?(t.child=po(t,e.child,null,r),t.child=po(t,null,n,r)):Ra(e,t,n,r),t.memoizedState=o.state,e=t.child):e=rl(e,t,r),e}function Ka(e,t,n,i){return yr(),t.flags|=256,Ra(e,t,n,i),t.child}var qa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xa(e){return{baseLanes:e,cachePool:Jr()}}function Ja(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=EA),e}function Ya(e,t,n){var i,r=t.pendingProps,o=!1,a=0!==(128&t.flags);if((i=a)||(i=(null===e||null!==e.memoizedState)&&0!==(2&Ho.current)),i&&(o=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(ur){if(o?Po(t):Do(),(e=cr)?null!==(e=null!==(e=Fu(e,dr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Vi(e)).return=t,t.child=n,Ar=t,cr=null):e=null,null===e)throw fr(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,o?(Do(),l=$a({mode:"hidden",children:l},o=t.mode),r=Gi(r,o,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Xa(n),r.childLanes=Ja(e,i,n),t.memoizedState=qa,Oa(null,r)):(Po(t),Za(t,l))}var A=e.memoizedState;if(null!==A&&null!==(l=A.dehydrated)){if(a)256&t.flags?(Po(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Do(),t.child=e.child,t.flags|=128,t=null):(Do(),l=r.fallback,o=t.mode,r=$a({mode:"visible",children:r.children},o),(l=Gi(l,o,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,po(t,e.child,null,n),(r=t.child).memoizedState=Xa(n),r.childLanes=Ja(e,i,n),t.memoizedState=qa,t=Oa(null,r));else if(Po(t),Uu(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var c=i.dgst;i=c,(r=Error(s(419))).stack="",r.digest=i,br({value:r,source:null,stack:null}),t=el(e,t,n)}else if(La||Mr(e,t,n,!1),i=0!==(n&e.childLanes),La||i){if(null!==(i=pA)&&(0!==(r=Pe(i,n))&&r!==A.retryLane))throw A.retryLane=r,Li(e,r),qA(i,e,r),Ua;Iu(l)||sc(),t=el(e,t,n)}else Iu(l)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,cr=Lu(l.nextSibling),Ar=t,ur=!0,hr=null,dr=!1,null!==e&&lr(t,e),(t=Za(t,r.children)).flags|=4096);return t}return o?(Do(),l=r.fallback,o=t.mode,c=(A=e.child).sibling,(r=Hi(A,{mode:"hidden",children:r.children})).subtreeFlags=65011712&A.subtreeFlags,null!==c?l=Hi(c,l):(l=Gi(l,o,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,Oa(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Xa(n):(null!==(o=l.cachePool)?(A=Dr._currentValue,o=o.parent!==A?{parent:A,pool:A}:o):o=Jr(),l={baseLanes:l.baseLanes|n,cachePool:o}),r.memoizedState=l,r.childLanes=Ja(e,i,n),t.memoizedState=qa,Oa(e.child,r)):(Po(t),e=(n=e.child).sibling,(n=Hi(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Za(e,t){return(t=$a({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $a(e,t){return(e=Di(22,e,null,t)).lanes=0,e}function el(e,t,n){return po(t,e.child,null,n),(e=Za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Er(e.return,t,n)}function nl(e,t,n,i,r,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.treeForkCount=o)}function il(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;i=i.children;var s=Ho.current,a=0!==(2&s);if(a?(s=1&s|2,t.flags|=128):s&=1,Q(Ho,s),Ra(e,t,i,n),i=ur?Zi:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Qo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),nl(t,!1,r,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Qo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}nl(t,!0,n,null,o,i);break;case"together":nl(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function rl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_A|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Mr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Hi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Fr(e))}function sl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)La=!0;else{if(!ol(e,n)&&0===(128&t.flags))return La=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),Cr(0,Dr,e.memoizedState.cache),yr();break;case 27:case 5:J(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:Cr(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,No(t),null;break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Po(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ya(e,t,n):(Po(t),null!==(e=rl(e,t,n))?e.sibling:null);Po(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Mr(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return il(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Q(Ho,Ho.current),i)break;return null;case 22:return t.lanes=0,Da(e,t,n,t.pendingProps);case 24:Cr(0,Dr,e.memoizedState.cache)}return rl(e,t,n)}(e,t,n);La=0!==(131072&e.flags)}else La=!1,ur&&0!==(1048576&t.flags)&&or(t,Zi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=io(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===x){t.tag=11,t=Pa(null,t,e,i,n);break e}if(r===C){t.tag=14,t=Na(null,t,e,i,n);break e}}throw t=U(e)||e,Error(s(306,t,""))}Oi(e)?(i=Ba(e,i),t.tag=1,t=Wa(null,t,e,i,n)):(t.tag=0,t=ja(null,t,e,i,n))}return t;case 0:return ja(e,t,t.type,t.pendingProps,n);case 1:return Wa(e,t,i=t.type,r=Ba(i,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(s(387));i=t.pendingProps;var o=t.memoizedState;r=o.element,vo(e,t),Co(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Cr(0,Dr,i),i!==o.cache&&Tr(t,[Dr],n,!0),_o(),i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ka(e,t,i,n);break e}if(i!==r){br(r=qi(Error(s(424)),t)),t=Ka(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(cr=Lu(e.firstChild),Ar=t,ur=!0,hr=null,dr=!0,n=fo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(yr(),i===r){t=rl(e,t,n);break e}Ra(e,t,i,n)}t=t.child}return t;case 26:return Ga(e,t),null===e?(n=Vu(t.type,null,t.pendingProps,null))?t.memoizedState=n:ur||(n=t.type,e=t.pendingProps,(i=gu(W.current).createElement(n))[Qe]=t,i[ze]=e,hu(i,n,e),et(i),t.stateNode=i):t.memoizedState=Vu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&ur&&(i=t.stateNode=ku(t.type,t.pendingProps,W.current),Ar=t,dr=!0,r=cr,Su(t.type)?(Ru=r,cr=Lu(i.firstChild)):cr=r),Ra(e,t,t.pendingProps.children,n),Ga(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ur&&((r=i=cr)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===o)return e}if(null===(e=Lu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,dr))?(t.stateNode=i,Ar=t,cr=Lu(i.firstChild),dr=!1,r=!0):r=!1),r||fr(t)),J(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,i=o.children,yu(r,o)?i=null:null!==a&&yu(r,a)&&(t.flags|=32),null!==t.memoizedState&&(r=ts(e,t,rs,null,null,n),ch._currentValue=r),Ga(e,t),Ra(e,t,i,n),t.child;case 6:return null===e&&ur&&((e=n=cr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}(n,t.pendingProps,dr))?(t.stateNode=n,Ar=t,cr=null,e=!0):e=!1),e||fr(t)),null;case 13:return Ya(e,t,n);case 4:return q(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=po(t,null,i,n):Ra(e,t,i,n),t.child;case 11:return Pa(e,t,t.type,t.pendingProps,n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Cr(0,t.type,i.value),Ra(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ir(t),i=i(r=Ur(r)),t.flags|=1,Ra(e,t,i,n),t.child;case 14:return Na(e,t,t.type,t.pendingProps,n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,r=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ur){if("hidden"===i.mode)return e=Qa(t,i),t.lanes=536870912,Oa(null,e);if(No(t),(e=cr)?null!==(e=null!==(e=Fu(e,dr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Vi(e)).return=t,t.child=n,Ar=t,cr=null):e=null,null===e)throw fr(t);return t.lanes=536870912,null}return Qa(t,i)}var o=e.memoizedState;if(null!==o){var a=o.dehydrated;if(No(t),r)if(256&t.flags)t.flags&=-257,t=za(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(La||Mr(e,t,n,!1),r=0!==(n&e.childLanes),La||r){if(null!==(i=pA)&&0!==(a=Pe(i,n))&&a!==o.retryLane)throw o.retryLane=a,Li(e,a),qA(i,e,a),Ua;sc(),t=za(e,t,n)}else e=o.treeContext,cr=Lu(a.nextSibling),Ar=t,ur=!0,hr=null,dr=!1,null!==e&&lr(t,e),(t=Qa(t,i)).flags|=4096;return t}return(e=Hi(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Da(e,t,n,t.pendingProps);case 24:return Ir(t),i=Ur(Dr),null===e?(null===(r=qr())&&(r=pA,o=Or(),r.pooledCache=o,o.refCount++,null!==o&&(r.pooledCacheLanes|=n),r=o),t.memoizedState={parent:i,cache:r},mo(t),Cr(0,Dr,r)):(0!==(e.lanes&n)&&(vo(e,t),Co(t,null,null,n),_o()),r=e.memoizedState,o=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Cr(0,Dr,i)):(i=o.cache,Cr(0,Dr,i),i!==r.cache&&Tr(t,[Dr],n,!0))),Ra(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function al(e){e.flags|=4}function ll(e,t,n,i,r){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!ic())throw ro=eo,Zr;e.flags|=8192}}else e.flags&=-16777217}function Al(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rh(t)){if(!ic())throw ro=eo,Zr;e.flags|=8192}}function cl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Fe():536870912,e.lanes|=t,TA|=t)}function ul(e,t){if(!ur)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function dl(e,t,n){var i=t.pendingProps;switch(ar(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Sr(Dr),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vr(t)?al(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,wr())),hl(t),null;case 26:var r=t.type,o=t.memoizedState;return null===e?(al(t),null!==o?(hl(t),Al(t,o)):(hl(t),ll(t,r,0,0,n))):o?o!==e.memoizedState?(al(t),hl(t),Al(t,o)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==i&&al(t),hl(t),ll(t,r,0,0,n)),null;case 27:if(Y(t),n=W.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return hl(t),null}e=j.current,vr(t)?gr(t):(e=ku(r,i,n),t.stateNode=e,al(t))}return hl(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return hl(t),null}if(o=j.current,vr(t))gr(t);else{var a=gu(W.current);switch(o){case 1:o=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(o=a.createElement("div")).innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o="string"===typeof i.is?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o="string"===typeof i.is?a.createElement(r,{is:i.is}):a.createElement(r)}}o[Qe]=t,o[ze]=i;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)o.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=o;e:switch(hu(o,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&al(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(e=W.current,vr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=Ar))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Qe]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Au(e.nodeValue,n)))||fr(t,!0)}else(e=gu(e).createTextNode(i))[Qe]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=vr(t),null!==n){if(null===e){if(!i)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Qe]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=wr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Oo(t),t):(Oo(t),null);if(0!==(128&t.flags))throw Error(s(558))}return hl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=vr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[Qe]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),r=!1}else r=wr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Oo(t),t):(Oo(t),null)}return Oo(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool),o=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(o=i.memoizedState.cachePool.pool),o!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),cl(t,t.updateQueue),hl(t),null);case 4:return X(),null===e&&$c(t.stateNode.containerInfo),hl(t),null;case 10:return Sr(t.type),hl(t),null;case 19:if(H(Ho),null===(i=t.memoizedState))return hl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)ul(i,!1);else{if(0!==BA||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=Qo(e))){for(t.flags|=128,ul(i,!1),e=o.updateQueue,t.updateQueue=e,cl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Qi(n,e),n=n.sibling;return Q(Ho,1&Ho.current|2),ur&&rr(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&le()>RA&&(t.flags|=128,r=!0,ul(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Qo(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,cl(t,e),ul(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!ur)return hl(t),null}else 2*le()-i.renderingStartTime>RA&&536870912!==n&&(t.flags|=128,r=!0,ul(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,n=Ho.current,Q(Ho,r?1&n|2:1&n),ur&&rr(t,i.treeForkCount),e):(hl(t),null);case 22:case 23:return Oo(t),Uo(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&cl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&H(Kr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Sr(Dr),hl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function pl(e,t){switch(ar(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Sr(Dr),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Oo(t),null===t.alternate)throw Error(s(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Oo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return H(Ho),null;case 4:return X(),null;case 10:return Sr(t.type),null;case 22:case 23:return Oo(t),Uo(),null!==e&&H(Kr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Sr(Dr),null;default:return null}}function fl(e,t){switch(ar(t),t.tag){case 3:Sr(Dr),X();break;case 26:case 27:case 5:Y(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Oo(t);break;case 13:Oo(t);break;case 19:H(Ho);break;case 10:Sr(t.type);break;case 22:case 23:Oo(t),Uo(),null!==e&&H(Kr);break;case 24:Sr(Dr)}}function gl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var o=n.create,s=n.inst;i=o(),s.destroy=i}n=n.next}while(n!==r)}}catch(a){Bc(t,t.return,a)}}function ml(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var o=r.next;i=o;do{if((i.tag&e)===e){var s=i.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,r=t;var l=n,A=a;try{A()}catch(c){Bc(r,l,c)}}}i=i.next}while(i!==o)}}catch(c){Bc(t,t.return,c)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Eo(t,n)}catch(i){Bc(e,e.return,i)}}}function yl(e,t,n){n.props=Ba(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Bc(e,t,i)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(r){Bc(e,t,r)}}function bl(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){Bc(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){Bc(e,t,o)}else n.current=null}function xl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Bc(e,e.return,r)}}function Bl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,a=null,l=null,A=null,c=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":A=h;default:i.hasOwnProperty(p)||cu(e,t,p,null,i,h)}}for(var d in i){var p=i[d];if(h=n[d],i.hasOwnProperty(d)&&(null!=p||null!=h))switch(d){case"type":o=p;break;case"name":r=p;break;case"checked":c=p;break;case"defaultChecked":u=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&cu(e,t,d,p,i,h)}}return void vt(e,a,l,A,c,u,o,r);case"select":for(o in p=a=l=d=null,n)if(A=n[o],n.hasOwnProperty(o)&&null!=A)switch(o){case"value":break;case"multiple":p=A;default:i.hasOwnProperty(o)||cu(e,t,o,null,i,A)}for(r in i)if(o=i[r],A=n[r],i.hasOwnProperty(r)&&(null!=o||null!=A))switch(r){case"value":d=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==A&&cu(e,t,r,o,i,A)}return t=l,n=a,i=p,void(null!=d?bt(e,!!n,d,!1):!!i!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=d=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:cu(e,t,l,null,i,r)}for(a in i)if(r=i[a],o=n[a],i.hasOwnProperty(a)&&(null!=r||null!=o))switch(a){case"value":d=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==o&&cu(e,t,a,r,i,o)}return void xt(e,d,p);case"option":for(var f in n)if(d=n[f],n.hasOwnProperty(f)&&null!=d&&!i.hasOwnProperty(f))if("selected"===f)e.selected=!1;else cu(e,t,f,null,i,d);for(A in i)if(d=i[A],p=n[A],i.hasOwnProperty(A)&&d!==p&&(null!=d||null!=p))if("selected"===A)e.selected=d&&"function"!==typeof d&&"symbol"!==typeof d;else cu(e,t,A,d,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)d=n[g],n.hasOwnProperty(g)&&null!=d&&!i.hasOwnProperty(g)&&cu(e,t,g,null,i,d);for(c in i)if(d=i[c],p=n[c],i.hasOwnProperty(c)&&d!==p&&(null!=d||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:cu(e,t,c,d,i,p)}return;default:if(Tt(t)){for(var m in n)d=n[m],n.hasOwnProperty(m)&&void 0!==d&&!i.hasOwnProperty(m)&&uu(e,t,m,void 0,i,d);for(u in i)d=i[u],p=n[u],!i.hasOwnProperty(u)||d===p||void 0===d&&void 0===p||uu(e,t,u,d,i,p);return}}for(var v in n)d=n[v],n.hasOwnProperty(v)&&null!=d&&!i.hasOwnProperty(v)&&cu(e,t,v,null,i,d);for(h in i)d=i[h],p=n[h],!i.hasOwnProperty(h)||d===p||null==d&&null==p||cu(e,t,h,d,i,p)}(i,e.type,n,t),i[ze]=t}catch(r){Bc(e,e.return,r)}}function _l(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Su(e.type)||4===e.tag}function Cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_l(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Su(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Sl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ut));else if(4!==i&&(27===i&&Su(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Sl(e,t,n),e=e.sibling;null!==e;)Sl(e,t,n),e=e.sibling}function El(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&Su(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);hu(t,i,n),t[Qe]=e,t[ze]=n}catch(o){Bc(e,e.return,o)}}var Ml=!1,Fl=!1,Il=!1,Ul="function"===typeof WeakSet?WeakSet:Set,Ll=null;function Rl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ql(e,n),4&i&&gl(5,n);break;case 1:if(ql(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Bc(n,n.return,s)}else{var r=Ba(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Bc(n,n.return,a)}}64&i&&vl(n),512&i&&wl(n,n.return);break;case 3:if(ql(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Eo(e,t)}catch(s){Bc(n,n.return,s)}}break;case 27:null===t&&4&i&&Tl(n);case 26:case 5:ql(e,n),null===t&&4&i&&xl(n),512&i&&wl(n,n.return);break;case 12:ql(e,n);break;case 31:ql(e,n),4&i&&Hl(e,n);break;case 13:ql(e,n),4&i&&Ql(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=Ec.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||Ml)){t=null!==t&&null!==t.memoizedState||Fl,r=Ml;var o=Fl;Ml=i,(Fl=t)&&!o?Jl(e,n,0!==(8772&n.subtreeFlags)):ql(e,n),Ml=r,Fl=o}break;case 30:break;default:ql(e,n)}}function Pl(e){var t=e.alternate;null!==t&&(e.alternate=null,Pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,kl=!1;function Dl(e,t,n){for(n=n.child;null!==n;)Ol(e,t,n),n=n.sibling}function Ol(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(me,n)}catch(o){}switch(n.tag){case 26:Fl||bl(n,t),Dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Fl||bl(n,t);var i=Nl,r=kl;Su(n.type)&&(Nl=n.stateNode,kl=!1),Dl(e,t,n),Du(n.stateNode),Nl=i,kl=r;break;case 5:Fl||bl(n,t);case 6:if(i=Nl,r=kl,Nl=null,Dl(e,t,n),kl=r,null!==(Nl=i))if(kl)try{(9===Nl.nodeType?Nl.body:"HTML"===Nl.nodeName?Nl.ownerDocument.body:Nl).removeChild(n.stateNode)}catch(s){Bc(n,t,s)}else try{Nl.removeChild(n.stateNode)}catch(s){Bc(n,t,s)}break;case 18:null!==Nl&&(kl?(Eu(9===(e=Nl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),jh(e)):Eu(Nl,n.stateNode));break;case 4:i=Nl,r=kl,Nl=n.stateNode.containerInfo,kl=!0,Dl(e,t,n),Nl=i,kl=r;break;case 0:case 11:case 14:case 15:ml(2,n,t),Fl||ml(4,n,t),Dl(e,t,n);break;case 1:Fl||(bl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&yl(n,t,i)),Dl(e,t,n);break;case 21:Dl(e,t,n);break;case 22:Fl=(i=Fl)||null!==n.memoizedState,Dl(e,t,n),Fl=i;break;default:Dl(e,t,n)}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{jh(e)}catch(n){Bc(t,t.return,n)}}}function Ql(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{jh(e)}catch(n){Bc(t,t.return,n)}}function zl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ul),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ul),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var i=Tc.bind(null,e,t);t.then(i,i)}})}function Gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Su(l.type)){Nl=l.stateNode,kl=!1;break e}break;case 5:Nl=l.stateNode,kl=!1;break e;case 3:case 4:Nl=l.stateNode.containerInfo,kl=!0;break e}l=l.return}if(null===Nl)throw Error(s(160));Ol(o,a,r),Nl=null,kl=!1,null!==(o=r.alternate)&&(o.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Vl(t,e),t=t.sibling}var jl=null;function Vl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gl(t,e),Wl(e),4&i&&(ml(3,e,e.return),gl(3,e),ml(5,e,e.return));break;case 1:Gl(t,e),Wl(e),512&i&&(Fl||null===n||bl(n,n.return)),64&i&&Ml&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=jl;if(Gl(t,e),Wl(e),512&i&&(Fl||null===n||bl(n,n.return)),4&i){var o=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(o=r.getElementsByTagName("title")[0])||o[qe]||o[Qe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=r.createElement(i),r.head.insertBefore(o,r.querySelector("head > title"))),hu(o,i,n),o[Qe]=e,et(o),i=o;break e;case"link":var a=nh("link","href",r).get(i+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}hu(o=r.createElement(i),i,n),r.head.appendChild(o);break;case"meta":if(a=nh("meta","content",r).get(i+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}hu(o=r.createElement(i),i,n),r.head.appendChild(o);break;default:throw Error(s(468,i))}o[Qe]=e,et(o),i=o}e.stateNode=i}else ih(r,e.type,e.stateNode);else e.stateNode=Yu(r,i,e.memoizedProps);else o!==i?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===i?ih(r,e.type,e.stateNode):Yu(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&Bl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Gl(t,e),Wl(e),512&i&&(Fl||null===n||bl(n,n.return)),null!==n&&4&i&&Bl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Gl(t,e),Wl(e),512&i&&(Fl||null===n||bl(n,n.return)),32&e.flags){r=e.stateNode;try{_t(r,"")}catch(f){Bc(e,e.return,f)}}4&i&&null!=e.stateNode&&Bl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(Il=!0);break;case 6:if(Gl(t,e),Wl(e),4&i){if(null===e.stateNode)throw Error(s(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(f){Bc(e,e.return,f)}}break;case 3:if(th=null,r=jl,jl=Qu(t.containerInfo),Gl(t,e),jl=r,Wl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{jh(t.containerInfo)}catch(f){Bc(e,e.return,f)}Il&&(Il=!1,Kl(e));break;case 4:i=jl,jl=Qu(e.stateNode.containerInfo),Gl(t,e),Wl(e),jl=i;break;case 12:default:Gl(t,e),Wl(e);break;case 31:case 19:Gl(t,e),Wl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,zl(e,i)));break;case 13:Gl(t,e),Wl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(UA=le()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,zl(e,i)));break;case 22:r=null!==e.memoizedState;var A=null!==n&&null!==n.memoizedState,c=Ml,u=Fl;if(Ml=c||r,Fl=u||A,Gl(t,e),Fl=u,Ml=c,Wl(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||A||Ml||Fl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){A=n=t;try{if(o=A.stateNode,r)"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=A.stateNode;var h=A.memoizedProps.style,d=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==d||"boolean"===typeof d?"":(""+d).trim()}}catch(f){Bc(A,A.return,f)}}}else if(6===t.tag){if(null===n){A=t;try{A.stateNode.nodeValue=r?"":A.memoizedProps}catch(f){Bc(A,A.return,f)}}}else if(18===t.tag){if(null===n){A=t;try{var p=A.stateNode;r?Tu(p,!0):Tu(A.stateNode,!1)}catch(f){Bc(A,A.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,zl(e,n))));case 30:case 21:}}function Wl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(_l(i)){n=i;break}i=i.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var r=n.stateNode;El(e,Cl(e),r);break;case 5:var o=n.stateNode;32&n.flags&&(_t(o,""),n.flags&=-33),El(e,Cl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;Sl(e,Cl(e),a);break;default:throw Error(s(161))}}catch(l){Bc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Rl(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ml(4,t,t.return),Xl(t);break;case 1:bl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&yl(t,t.return,n),Xl(t);break;case 27:Du(t.stateNode);case 26:case 5:bl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:Jl(r,o,n),gl(4,o);break;case 1:if(Jl(r,o,n),"function"===typeof(r=(i=o).stateNode).componentDidMount)try{r.componentDidMount()}catch(A){Bc(i,i.return,A)}if(null!==(r=(i=o).updateQueue)){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)So(l[r],a)}catch(A){Bc(i,i.return,A)}}n&&64&s&&vl(o),wl(o,o.return);break;case 27:Tl(o);case 26:case 5:Jl(r,o,n),n&&null===i&&4&s&&xl(o),wl(o,o.return);break;case 12:Jl(r,o,n);break;case 31:Jl(r,o,n),n&&4&s&&Hl(r,o);break;case 13:Jl(r,o,n),n&&4&s&&Ql(r,o);break;case 22:null===o.memoizedState&&Jl(r,o,n),wl(o,o.return);break;case 30:break;default:Jl(r,o,n)}t=t.sibling}}function Yl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Hr(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hr(e))}function $l(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)eA(e,t,n,i),t=t.sibling}function eA(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,i),2048&r&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,i);break;case 3:$l(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hr(e)));break;case 12:if(2048&r){$l(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Bc(t,t.return,l)}}else $l(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,s=t.alternate,null!==t.memoizedState?2&o._visibility?$l(e,t,n,i):nA(e,t):2&o._visibility?$l(e,t,n,i):(o._visibility|=2,tA(e,t,n,i,0!==(10256&t.subtreeFlags)||!1)),2048&r&&Yl(s,t);break;case 24:$l(e,t,n,i),2048&r&&Zl(t.alternate,t)}}function tA(e,t,n,i,r){for(r=r&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var o=e,s=t,a=n,l=i,A=s.flags;switch(s.tag){case 0:case 11:case 15:tA(o,s,a,l,r),gl(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?2&c._visibility?tA(o,s,a,l,r):nA(o,s):(c._visibility|=2,tA(o,s,a,l,r)),r&&2048&A&&Yl(s.alternate,s);break;case 24:tA(o,s,a,l,r),r&&2048&A&&Zl(s.alternate,s);break;default:tA(o,s,a,l,r)}t=t.sibling}}function nA(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:nA(n,i),2048&r&&Yl(i.alternate,i);break;case 24:nA(n,i),2048&r&&Zl(i.alternate,i);break;default:nA(n,i)}t=t.sibling}}var iA=8192;function rA(e,t,n){if(e.subtreeFlags&iA)for(e=e.child;null!==e;)oA(e,t,n),e=e.sibling}function oA(e,t,n){switch(e.tag){case 26:rA(e,t,n),e.flags&iA&&null!==e.memoizedState&&function(e,t,n,i){if("stylesheet"===n.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var r=Wu(i.href),o=t.querySelector(Ku(r));if(o)return null!==(t=o._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,void et(o);o=t.ownerDocument||t,i=qu(i),(r=Ou.get(r))&&$u(i,r),et(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hu(o,"link",i),n.instance=o}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,jl,e.memoizedState,e.memoizedProps);break;case 5:default:rA(e,t,n);break;case 3:case 4:var i=jl;jl=Qu(e.stateNode.containerInfo),rA(e,t,n),jl=i;break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=iA,iA=16777216,rA(e,t,n),iA=i):rA(e,t,n))}}function sA(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function aA(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Ll=i,cA(i,e)}sA(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lA(e),e=e.sibling}function lA(e){switch(e.tag){case 0:case 11:case 15:aA(e),2048&e.flags&&ml(9,e,e.return);break;case 3:case 12:default:aA(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,AA(e)):aA(e)}}function AA(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Ll=i,cA(i,e)}sA(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ml(8,t,t.return),AA(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,AA(t));break;default:AA(t)}e=e.sibling}}function cA(e,t){for(;null!==Ll;){var n=Ll;switch(n.tag){case 0:case 11:case 15:ml(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Hr(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Ll=i;else e:for(n=e;null!==Ll;){var r=(i=Ll).sibling,o=i.return;if(Pl(i),i===n){Ll=null;break e}if(null!==r){r.return=o,Ll=r;break e}Ll=o}}}var uA={getCacheForType:function(e){var t=Ur(Dr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ur(Dr).controller.signal}},hA="function"===typeof WeakMap?WeakMap:Map,dA=0,pA=null,fA=null,gA=0,mA=0,vA=null,yA=!1,wA=!1,bA=!1,xA=0,BA=0,_A=0,CA=0,SA=0,EA=0,TA=0,MA=null,FA=null,IA=!1,UA=0,LA=0,RA=1/0,PA=null,NA=null,kA=0,DA=null,OA=null,HA=0,QA=0,zA=null,GA=null,jA=0,VA=null;function WA(){return 0!==(2&dA)&&0!==gA?gA&-gA:null!==R.T?zc():De()}function KA(){if(0===EA)if(0===(536870912&gA)||ur){var e=_e;0===(3932160&(_e<<=1))&&(_e=262144),EA=e}else EA=536870912;return null!==(e=Lo.current)&&(e.flags|=32),EA}function qA(e,t,n){(e!==pA||2!==mA&&9!==mA)&&null===e.cancelPendingCommit||(tc(e,0),ZA(e,gA,EA,!1)),Ue(e,n),0!==(2&dA)&&e===pA||(e===pA&&(0===(2&dA)&&(CA|=n),4===BA&&ZA(e,gA,EA,!1)),Pc(e))}function XA(e,t,n){if(0!==(6&dA))throw Error(s(327));for(var i=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),r=i?function(e,t){var n=dA;dA|=2;var i=rc(),r=oc();pA!==e||gA!==t?(PA=null,RA=le()+500,tc(e,t)):wA=Te(e,t);e:for(;;)try{if(0!==mA&&null!==fA){t=fA;var o=vA;t:switch(mA){case 1:mA=0,vA=null,hc(e,t,o,1);break;case 2:case 9:if(to(o)){mA=0,vA=null,uc(t);break}t=function(){2!==mA&&9!==mA||pA!==e||(mA=7),Pc(e)},o.then(t,t);break e;case 3:mA=7;break e;case 4:mA=5;break e;case 7:to(o)?(mA=0,vA=null,uc(t)):(mA=0,vA=null,hc(e,t,o,7));break;case 5:var a=null;switch(fA.tag){case 26:a=fA.memoizedState;case 5:case 27:var l=fA;if(a?rh(a):l.stateNode.complete){mA=0,vA=null;var A=l.sibling;if(null!==A)fA=A;else{var c=l.return;null!==c?(fA=c,dc(c)):fA=null}break t}}mA=0,vA=null,hc(e,t,o,5);break;case 6:mA=0,vA=null,hc(e,t,o,6);break;case 8:ec(),BA=6;break e;default:throw Error(s(462))}}Ac();break}catch(u){nc(e,u)}return _r=Br=null,R.H=i,R.A=r,dA=n,null!==fA?0:(pA=null,gA=0,Fi(),BA)}(e,t):ac(e,t,!0),o=i;;){if(0===r){wA&&!i&&ZA(e,t,0,!1);break}if(n=e.current.alternate,!o||YA(n)){if(2===r){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;r=MA;var A=l.current.memoizedState.isDehydrated;if(A&&(tc(l,a).flags|=256),2!==(a=ac(l,a,!1))){if(bA&&!A){l.errorRecoveryDisabledLanes|=o,CA|=o,r=4;break e}o=FA,FA=r,null!==o&&(null===FA?FA=o:FA.push.apply(FA,o))}r=a}if(o=!1,2!==r)continue}}if(1===r){tc(e,0),ZA(e,t,0,!0);break}e:{switch(i=e,o=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:ZA(i,t,EA,!yA);break e;case 2:FA=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=UA+300-le())){if(ZA(i,t,EA,!yA),0!==Ee(i,0,!0))break e;HA=t,i.timeoutHandle=bu(JA.bind(null,i,n,FA,PA,IA,t,EA,CA,TA,yA,o,"Throttled",-0,0),r)}else JA(i,n,FA,PA,IA,t,EA,CA,TA,yA,o,null,-0,0)}break}r=ac(e,t,!1),o=!1}Pc(e)}function JA(e,t,n,i,r,o,s,a,l,A,c,u,h,d){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){oA(t,o,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ut});var p=(62914560&o)===o?UA-le():(4194048&o)===o?LA-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===oh&&(oh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],o=r.transferSize,s=r.initiatorType,a=r.duration;if(o&&a&&du(s)){for(s=0,a=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],A=l.startTime;if(A>a)break;var c=l.transferSize,u=l.initiatorType;c&&du(u)&&(s+=c*((l=l.responseEnd)<a?1:(a-A)/(l-A)))}if(--i,t+=8*(o+s)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>oh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}(u,p)))return HA=o,e.cancelPendingCommit=p(fc.bind(null,e,t,o,n,i,r,s,a,l,c,u,null,h,d)),void ZA(e,o,s,!A)}fc(e,t,o,n,i,r,s,a,l)}function YA(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Zn(o(),r))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ZA(e,t,n,i){t&=~SA,t&=~CA,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var o=31-we(r),s=1<<o;i[o]=-1,r&=~s}0!==n&&Le(e,n,t)}function $A(){return 0!==(6&dA)||(Nc(0,!1),!1)}function ec(){if(null!==fA){if(0===mA)var e=fA.return;else _r=Br=null,as(e=fA),ao=null,lo=0,e=fA;for(;null!==e;)fl(e.alternate,e),e=e.return;fA=null}}function tc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,xu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),HA=0,ec(),pA=e,fA=n=Hi(e.current,null),gA=t,mA=0,vA=null,yA=!1,wA=Te(e,t),bA=!1,TA=EA=SA=CA=_A=BA=0,FA=MA=null,IA=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-we(i),o=1<<r;t|=e[r],i&=~o}return xA=t,Fi(),n}function nc(e,t){Go=null,R.H=fa,t===Yr||t===$r?(t=oo(),mA=3):t===Zr?(t=oo(),mA=4):mA=t===Ua?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vA=t,null===fA&&(BA=1,Ea(e,qi(t,e.current)))}function ic(){var e=Lo.current;return null===e||((4194048&gA)===gA?null===Ro:((62914560&gA)===gA||0!==(536870912&gA))&&e===Ro)}function rc(){var e=R.H;return R.H=fa,null===e?fa:e}function oc(){var e=R.A;return R.A=uA,e}function sc(){BA=4,yA||(4194048&gA)!==gA&&null!==Lo.current||(wA=!0),0===(134217727&_A)&&0===(134217727&CA)||null===pA||ZA(pA,gA,EA,!1)}function ac(e,t,n){var i=dA;dA|=2;var r=rc(),o=oc();pA===e&&gA===t||(PA=null,tc(e,t)),t=!1;var s=BA;e:for(;;)try{if(0!==mA&&null!==fA){var a=fA,l=vA;switch(mA){case 8:ec(),s=6;break e;case 3:case 2:case 9:case 6:null===Lo.current&&(t=!0);var A=mA;if(mA=0,vA=null,hc(e,a,l,A),n&&wA){s=0;break e}break;default:A=mA,mA=0,vA=null,hc(e,a,l,A)}}lc(),s=BA;break}catch(c){nc(e,c)}return t&&e.shellSuspendCounter++,_r=Br=null,dA=i,R.H=r,R.A=o,null===fA&&(pA=null,gA=0,Fi()),s}function lc(){for(;null!==fA;)cc(fA)}function Ac(){for(;null!==fA&&!se();)cc(fA)}function cc(e){var t=sl(e.alternate,e,xA);e.memoizedProps=e.pendingProps,null===t?dc(e):fA=t}function uc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Va(n,t,t.pendingProps,t.type,void 0,gA);break;case 11:t=Va(n,t,t.pendingProps,t.type.render,t.ref,gA);break;case 5:as(t);default:fl(n,t),t=sl(n,t=fA=Qi(t,xA),xA)}e.memoizedProps=e.pendingProps,null===t?dc(e):fA=t}function hc(e,t,n,i){_r=Br=null,as(t),ao=null,lo=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Mr(t,n,r,!0),null!==(n=Lo.current)){switch(n.tag){case 31:case 13:return null===Ro?sc():null===n.alternate&&0===BA&&(BA=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===eo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),_c(e,i,r)),!1;case 22:return n.flags|=65536,i===eo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),_c(e,i,r)),!1}throw Error(s(435,n.tag))}return _c(e,i,r),sc(),!1}if(ur)return null!==(t=Lo.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==pr&&br(qi(e=Error(s(422),{cause:i}),n))):(i!==pr&&br(qi(t=Error(s(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=qi(i,n),xo(e,r=Ma(e.stateNode,i,r)),4!==BA&&(BA=2)),!1;var o=Error(s(520),{cause:i});if(o=qi(o,n),null===MA?MA=[o]:MA.push(o),4!==BA&&(BA=2),null===t)return!0;i=qi(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,xo(n,e=Ma(n.stateNode,i,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===NA||!NA.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,Ia(r=Fa(r),e,n,i),xo(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,gA))return BA=1,Ea(e,qi(n,e.current)),void(fA=null)}catch(o){if(null!==r)throw fA=r,o;return BA=1,Ea(e,qi(n,e.current)),void(fA=null)}32768&t.flags?(ur||1===i?e=!0:wA||0!==(536870912&gA)?e=!1:(yA=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=Lo.current)&&13===i.tag&&(i.flags|=16384))),pc(t,e)):dc(t)}function dc(e){var t=e;do{if(0!==(32768&t.flags))return void pc(t,yA);e=t.return;var n=dl(t.alternate,t,xA);if(null!==n)return void(fA=n);if(null!==(t=t.sibling))return void(fA=t);fA=t=e}while(null!==t);0===BA&&(BA=5)}function pc(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(fA=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(fA=e);fA=e=n}while(null!==e);BA=6,fA=null}function fc(e,t,n,i,r,o,a,l,A){e.cancelPendingCommit=null;do{wc()}while(0!==kA);if(0!==(6&dA))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,n,i,r,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,A=e.hiddenUpdates;for(n=s&~n;0<n;){var c=31-we(n),u=1<<c;a[c]=0,l[c]=-1;var h=A[c];if(null!==h)for(A[c]=null,c=0;c<h.length;c++){var d=h[c];null!==d&&(d.lane&=-536870913)}n&=~u}0!==i&&Le(e,i,0),0!==o&&0===r&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,n,o|=Mi,a,l,A),e===pA&&(fA=pA=null,gA=0),OA=t,DA=e,HA=n,QA=o,zA=r,GA=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,re(he,function(){return bc(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=R.T,R.T=null,r=P.p,P.p=2,a=dA,dA|=4;try{!function(e,t){if(e=e.containerInfo,pu=yh,ri(e=ii(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var a=0,l=-1,A=-1,c=0,u=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==o||0!==i&&3!==h.nodeType||(A=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===r&&(l=a),d===o&&++u===i&&(A=a),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===l||-1===A?null:{start:l,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(fu={focusedElem:e,selectionRange:n},yh=!1,Ll=t;null!==Ll;)if(e=(t=Ll).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ll=e;else for(;null!==Ll;){switch(o=(t=Ll).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,r=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var f=Ba(n.type,r);e=i.getSnapshotBeforeUpdate(f,o),i.__reactInternalSnapshotBeforeUpdate=e}catch(m){Bc(n,n.return,m)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Mu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Ll=e;break}Ll=t.return}}(e,t)}finally{dA=a,P.p=r,R.T=i}}kA=1,gc(),mc(),vc()}}function gc(){if(1===kA){kA=0;var e=DA,t=OA,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var i=P.p;P.p=2;var r=dA;dA|=4;try{Vl(t,e);var o=fu,s=ii(e.containerInfo),a=o.focusedElem,l=o.selectionRange;if(s!==a&&a&&a.ownerDocument&&ni(a.ownerDocument.documentElement,a)){if(null!==l&&ri(a)){var A=l.start,c=l.end;if(void 0===c&&(c=A),"selectionStart"in a)a.selectionStart=A,a.selectionEnd=Math.min(c,a.value.length);else{var u=a.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var d=h.getSelection(),p=a.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!d.extend&&f>g&&(s=g,g=f,f=s);var m=ti(a,f),v=ti(a,g);if(m&&v&&(1!==d.rangeCount||d.anchorNode!==m.node||d.anchorOffset!==m.offset||d.focusNode!==v.node||d.focusOffset!==v.offset)){var y=u.createRange();y.setStart(m.node,m.offset),d.removeAllRanges(),f>g?(d.addRange(y),d.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),d.addRange(y))}}}}for(u=[],d=a;d=d.parentNode;)1===d.nodeType&&u.push({element:d,left:d.scrollLeft,top:d.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<u.length;a++){var w=u[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}yh=!!pu,fu=pu=null}finally{dA=r,P.p=i,R.T=n}}e.current=t,kA=2}}function mc(){if(2===kA){kA=0;var e=DA,t=OA,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var i=P.p;P.p=2;var r=dA;dA|=4;try{Rl(e,t.alternate,t)}finally{dA=r,P.p=i,R.T=n}}kA=3}}function vc(){if(4===kA||3===kA){kA=0,ae();var e=DA,t=OA,n=HA,i=GA;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kA=5:(kA=0,OA=DA=null,yc(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(NA=null),ke(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(me,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=R.T,r=P.p,P.p=2,R.T=null;try{for(var o=e.onRecoverableError,s=0;s<i.length;s++){var a=i[s];o(a.value,{componentStack:a.stack})}}finally{R.T=t,P.p=r}}0!==(3&HA)&&wc(),Pc(e),r=e.pendingLanes,0!==(261930&n)&&0!==(42&r)?e===VA?jA++:(jA=0,VA=e):jA=0,Nc(0,!1)}}function yc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Hr(t)))}function wc(){return gc(),mc(),vc(),bc()}function bc(){if(5!==kA)return!1;var e=DA,t=QA;QA=0;var n=ke(HA),i=R.T,r=P.p;try{P.p=32>n?32:n,R.T=null,n=zA,zA=null;var o=DA,a=HA;if(kA=0,OA=DA=null,HA=0,0!==(6&dA))throw Error(s(331));var l=dA;if(dA|=4,lA(o.current),eA(o,o.current,a,n),dA=l,Nc(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(me,o)}catch(A){}return!0}finally{P.p=r,R.T=i,yc(e,t)}}function xc(e,t,n){t=qi(n,t),null!==(e=wo(e,t=Ma(e.stateNode,t,2),2))&&(Ue(e,2),Pc(e))}function Bc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===NA||!NA.has(i))){e=qi(n,e),null!==(i=wo(t,n=Fa(2),2))&&(Ia(n,i,t,e),Ue(i,2),Pc(i));break}}t=t.return}}function _c(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new hA;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(bA=!0,r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pA===e&&(gA&n)===n&&(4===BA||3===BA&&(62914560&gA)===gA&&300>le()-UA?0===(2&dA)&&tc(e,0):SA|=n,TA===gA&&(TA=0)),Pc(e)}function Sc(e,t){0===t&&(t=Fe()),null!==(e=Li(e,t))&&(Ue(e,t),Pc(e))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==i&&i.delete(t),Sc(e,n)}var Mc=null,Fc=null,Ic=!1,Uc=!1,Lc=!1,Rc=0;function Pc(e){e!==Fc&&null===e.next&&(null===Fc?Mc=Fc=e:Fc=Fc.next=e),Uc=!0,Ic||(Ic=!0,_u(function(){0!==(6&dA)?re(ce,kc):Dc()}))}function Nc(e,t){if(!Lc&&Uc){Lc=!0;do{for(var n=!1,i=Mc;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var o=0;else{var s=i.suspendedLanes,a=i.pingedLanes;o=(1<<31-we(42|e)+1)-1,o=201326741&(o&=r&~(s&~a))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Qc(i,o))}else o=gA,0===(3&(o=Ee(i,i===pA?o:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Te(i,o)||(n=!0,Qc(i,o));i=i.next}}while(n);Lc=!1}}function kc(){Dc()}function Dc(){Uc=Ic=!1;var e=0;0!==Rc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wu&&(wu=e,!0);return wu=null,!1}()&&(e=Rc);for(var t=le(),n=null,i=Mc;null!==i;){var r=i.next,o=Oc(i,t);0===o?(i.next=null,null===n?Mc=r:n.next=r,null===r&&(Fc=n)):(n=i,(0!==e||0!==(3&o))&&(Uc=!0)),i=r}0!==kA&&5!==kA||Nc(e,!1),0!==Rc&&(Rc=0)}function Oc(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-we(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=Me(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=gA,n=Ee(e,e===(t=pA)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===mA||9===mA)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&oe(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&oe(i),ke(n)){case 2:case 8:n=ue;break;case 32:default:n=he;break;case 268435456:n=pe}return i=Hc.bind(null,e),n=re(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&oe(i),e.callbackPriority=2,e.callbackNode=null,2}function Hc(e,t){if(0!==kA&&5!==kA)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=gA;return 0===(i=Ee(e,e===pA?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(XA(e,i,t),Oc(e,le()),null!=e.callbackNode&&e.callbackNode===n?Hc.bind(null,e):null)}function Qc(e,t){if(wc())return null;XA(e,t,!0)}function zc(){if(0===Rc){var e=Gr;0===e&&(e=Be,0===(261888&(Be<<=1))&&(Be=256)),Rc=e}return Rc}function Gc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function jc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Vc=0;Vc<_i.length;Vc++){var Wc=_i[Vc];Ci(Wc.toLowerCase(),"on"+(Wc[0].toUpperCase()+Wc.slice(1)))}Ci(gi,"onAnimationEnd"),Ci(mi,"onAnimationIteration"),Ci(vi,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(yi,"onTransitionRun"),Ci(wi,"onTransitionStart"),Ci(bi,"onTransitionCancel"),Ci(xi,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kc));function Xc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,A=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;o=a,r.currentTarget=A;try{o(r)}catch(c){Si(c)}r.currentTarget=null,o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,A=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;o=a,r.currentTarget=A;try{o(r)}catch(c){Si(c)}r.currentTarget=null,o=l}}}}function Jc(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var i=e+"__bubble";n.has(i)||(eu(t,e,2,!1),n.add(i))}function Yc(e,t,n){var i=0;t&&(i|=4),eu(n,e,i,t)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function $c(e){if(!e[Zc]){e[Zc]=!0,tt.forEach(function(t){"selectionchange"!==t&&(qc.has(t)||Yc(t,!1,e),Yc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zc]||(t[Zc]=!0,Yc("selectionchange",!1,t))}}function eu(e,t,n,i){switch(Sh(t)){case 2:var r=wh;break;case 8:r=bh;break;default:r=xh}n=r.bind(null,t,n,e),r=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function tu(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r)break;if(4===s)for(s=i.return;null!==s;){var A=s.tag;if((3===A||4===A)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==a;){if(null===(s=Je(a)))return;if(5===(A=s.tag)||6===A||26===A||27===A){i=o=s;continue e}a=a.parentNode}}i=i.return}Ot(function(){var i=o,r=Rt(n),s=[];e:{var a=Bi.get(e);if(void 0!==a){var A=nn,c=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":A=vn;break;case"focusin":c="focus",A=An;break;case"focusout":c="blur",A=An;break;case"beforeblur":case"afterblur":A=An;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=wn;break;case gi:case mi:case vi:A=cn;break;case xi:A=bn;break;case"scroll":case"scrollend":A=on;break;case"wheel":A=xn;break;case"copy":case"cut":case"paste":A=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=yn;break;case"toggle":case"beforetoggle":A=Bn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=i;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===d||null!=(g=Ht(f,d))&&u.push(nu(f,g,p)),h)break;f=f.return}0<u.length&&(a=new A(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(A="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Lt||!(c=n.relatedTarget||n.fromElement)||!Je(c)&&!c[Ge])&&(A||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,A?(A=i,null!==(c=(c=n.relatedTarget||n.toElement)?Je(c):null)&&(h=l(c),u=c.tag,c!==h||5!==u&&27!==u&&6!==u)&&(c=null)):(A=null,c=i),A!==c)){if(u=an,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=yn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==A?a:Ze(A),p=null==c?a:Ze(c),(a=new u(g,f+"leave",A,n,r)).target=h,a.relatedTarget=p,g=null,Je(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,g=u),h=g,A&&c)e:{for(u=ru,f=c,p=0,g=d=A;g;g=u(g))p++;g=0;for(var m=f;m;m=u(m))g++;for(;0<p-g;)d=u(d),p--;for(;0<g-p;)f=u(f),g--;for(;p--;){if(d===f||null!==f&&d===f.alternate){u=d;break e}d=u(d),f=u(f)}u=null}else u=null;null!==A&&ou(s,a,A,u,!1),null!==c&&null!==h&&ou(s,h,c,u,!0)}if("select"===(A=(a=i?Ze(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===A&&"file"===a.type)var v=Qn;else if(Pn(a))if(zn)v=Yn;else{v=Xn;var y=qn}else!(A=a.nodeName)||"input"!==A.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?i&&Tt(i.elementType)&&(v=Qn):v=Jn;switch(v&&(v=v(e,i))?Nn(s,v,n,r):(y&&y(e,a,i),"focusout"===e&&i&&"number"===a.type&&null!=i.memoizedProps.value&&wt(a,"number",a.value)),y=i?Ze(i):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(si=y,ai=i,li=null);break;case"focusout":li=ai=si=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,ci(s,n,r);break;case"selectionchange":if(oi)break;case"keydown":case"keyup":ci(s,n,r)}var w;if(Cn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ln?In(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Tn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ln&&(w=Kt()):(Vt="value"in(jt=r)?jt.value:jt.textContent,Ln=!0)),0<(y=iu(i,b)).length&&(b=new hn(b,e,null,n,r),s.push({event:b,listeners:y}),w?b.data=w:null!==(w=Un(n))&&(b.data=w))),(w=En?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!Cn&&In(e,t)?(e=Kt(),Wt=Vt=jt=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=iu(i,"onBeforeInput")).length&&(y=new hn("onBeforeInput","beforeinput",null,n,r),s.push({event:y,listeners:b}),y.data=w)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var o=Gc((r[ze]||null).action),s=i.submitter;s&&null!==(t=(t=s[ze]||null)?Gc(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new nn("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==Rc){var e=s?jc(r,s):new FormData(r);ta(n,{pending:!0,data:e,method:r.method,action:o},null,e)}}else"function"===typeof o&&(a.preventDefault(),e=s?jc(r,s):new FormData(r),ta(n,{pending:!0,data:e,method:r.method,action:o},o,e))},currentTarget:r}]})}}(s,e,i,n,r)}Xc(s,t)})}function nu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function iu(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===o||(null!=(r=Ht(e,n))&&i.unshift(nu(e,r,o)),null!=(r=Ht(e,t))&&i.push(nu(e,r,o))),3===e.tag)return i;e=e.return}return[]}function ru(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ou(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,A=a.stateNode;if(a=a.tag,null!==l&&l===i)break;5!==a&&26!==a&&27!==a||null===A||(l=A,r?null!=(A=Ht(n,o))&&s.unshift(nu(n,A,l)):r||null!=(A=Ht(n,o))&&s.push(nu(n,A,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var su=/\r\n?/g,au=/\u0000|\uFFFD/g;function lu(e){return("string"===typeof e?e:""+e).replace(su,"\n").replace(au,"")}function Au(e,t){return t=lu(t),lu(e)===t}function cu(e,t,n,i,r,o){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||_t(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&_t(e,""+i);break;case"className":At(e,"class",i);break;case"tabIndex":At(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":At(e,n,i);break;case"style":Et(e,i,o);break;case"data":if("object"!==t){At(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=It(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&cu(e,t,"name",r.name,r,null),cu(e,t,"formEncType",r.formEncType,r,null),cu(e,t,"formMethod",r.formMethod,r,null),cu(e,t,"formTarget",r.formTarget,r,null)):(cu(e,t,"encType",r.encType,r,null),cu(e,t,"method",r.method,r,null),cu(e,t,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=It(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Ut);break;case"onScroll":null!=i&&Jc("scroll",e);break;case"onScrollEnd":null!=i&&Jc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=It(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Jc("beforetoggle",e),Jc("toggle",e),lt(e,"popover",i);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":lt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Mt.get(n)||n,i)}}function uu(e,t,n,i,r,o){switch(n){case"style":Et(e,i,o);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof i?_t(e,i):("number"===typeof i||"bigint"===typeof i)&&_t(e,""+i);break;case"onScroll":null!=i&&Jc("scroll",e);break;case"onScrollEnd":null!=i&&Jc("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(o=null!=(o=e[ze]||null)?o[n]:null)&&e.removeEventListener(t,o,r),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):lt(e,n,i):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function hu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jc("error",e),Jc("load",e);var i,r=!1,o=!1;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(null!=a)switch(i){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:cu(e,t,i,a,n,null)}}return o&&cu(e,t,"srcSet",n.srcSet,n,null),void(r&&cu(e,t,"src",n.src,n,null));case"input":Jc("invalid",e);var l=i=a=o=null,A=null,c=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(null!=u)switch(r){case"name":o=u;break;case"type":a=u;break;case"checked":A=u;break;case"defaultChecked":c=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(s(137,t));break;default:cu(e,t,r,u,n,null)}}return void yt(e,i,l,A,c,a,o,!1);case"select":for(o in Jc("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:cu(e,t,o,l,n,null)}return t=i,n=a,e.multiple=!!r,void(null!=t?bt(e,!!r,t,!1):null!=n&&bt(e,!!r,n,!0));case"textarea":for(a in Jc("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:cu(e,t,a,l,n,null)}return void Bt(e,r,o,i);case"option":for(A in n)if(n.hasOwnProperty(A)&&null!=(r=n[A]))if("selected"===A)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else cu(e,t,A,r,n,null);return;case"dialog":Jc("beforetoggle",e),Jc("toggle",e),Jc("cancel",e),Jc("close",e);break;case"iframe":case"object":Jc("load",e);break;case"video":case"audio":for(r=0;r<Kc.length;r++)Jc(Kc[r],e);break;case"image":Jc("error",e),Jc("load",e);break;case"details":Jc("toggle",e);break;case"embed":case"source":case"link":Jc("error",e),Jc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:cu(e,t,c,r,n,null)}return;default:if(Tt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(r=n[u])&&uu(e,t,u,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&cu(e,t,l,r,n,null))}function du(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pu=null,fu=null;function gu(e){return 9===e.nodeType?e:e.ownerDocument}function mu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wu=null;var bu="function"===typeof setTimeout?setTimeout:void 0,xu="function"===typeof clearTimeout?clearTimeout:void 0,Bu="function"===typeof Promise?Promise:void 0,_u="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Bu?function(e){return Bu.resolve(null).then(e).catch(Cu)}:bu;function Cu(e){setTimeout(function(){throw e})}function Su(e){return"head"===e}function Eu(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===i)return e.removeChild(r),void jh(t);i--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)i++;else if("html"===n)Du(e.ownerDocument.documentElement);else if("head"===n){Du(n=e.ownerDocument.head);for(var o=n.firstChild;o;){var s=o.nextSibling,a=o.nodeName;o[qe]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=s}}else"body"===n&&Du(e.ownerDocument.body);n=r}while(n);jh(t)}function Tu(e,t){var n=e;e=0;do{var i=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=i}while(n)}function Mu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Mu(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Fu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}function Iu(e){return"$?"===e.data||"$~"===e.data}function Uu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ru=null;function Pu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Lu(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Nu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function ku(e,t,n){switch(t=gu(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Du(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Ou=new Map,Hu=new Set;function Qu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var zu=P.d;P.d={f:function(){var e=zu.f(),t=$A();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?ia(t):zu.r(e)},D:function(e){zu.D(e),ju("dns-prefetch",e,null)},C:function(e,t){zu.C(e,t),ju("preconnect",e,t)},L:function(e,t,n){zu.L(e,t,n);var i=Gu;if(i&&e&&t){var r='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+mt(n.imageSizes)+'"]')):r+='[href="'+mt(e)+'"]';var o=r;switch(t){case"style":o=Wu(e);break;case"script":o=Xu(e)}Ou.has(o)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ou.set(o,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Ku(o))||"script"===t&&i.querySelector(Ju(o))||(hu(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}},m:function(e,t){zu.m(e,t);var n=Gu;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+mt(i)+'"][href="'+mt(e)+'"]',o=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Xu(e)}if(!Ou.has(o)&&(e=d({rel:"modulepreload",href:e},t),Ou.set(o,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ju(o)))return}hu(i=n.createElement("link"),"link",e),et(i),n.head.appendChild(i)}}},X:function(e,t){zu.X(e,t);var n=Gu;if(n&&e){var i=$e(n).hoistableScripts,r=Xu(e),o=i.get(r);o||((o=n.querySelector(Ju(r)))||(e=d({src:e,async:!0},t),(t=Ou.get(r))&&eh(e,t),et(o=n.createElement("script")),hu(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}},S:function(e,t,n){zu.S(e,t,n);var i=Gu;if(i&&e){var r=$e(i).hoistableStyles,o=Wu(e);t=t||"default";var s=r.get(o);if(!s){var a={loading:0,preload:null};if(s=i.querySelector(Ku(o)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ou.get(o))&&$u(e,n);var l=s=i.createElement("link");et(l),hu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Zu(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:a},r.set(o,s)}}},M:function(e,t){zu.M(e,t);var n=Gu;if(n&&e){var i=$e(n).hoistableScripts,r=Xu(e),o=i.get(r);o||((o=n.querySelector(Ju(r)))||(e=d({src:e,async:!0,type:"module"},t),(t=Ou.get(r))&&eh(e,t),et(o=n.createElement("script")),hu(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}};var Gu="undefined"===typeof document?null:document;function ju(e,t,n){var i=Gu;if(i&&"string"===typeof t&&t){var r=mt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Hu.has(r)||(Hu.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(hu(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}}function Vu(e,t,n,i){var r,o,a,l,A=(A=W.current)?Qu(A):null;if(!A)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Wu(n.href),(i=(n=$e(A).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Wu(n.href);var c=$e(A).hoistableStyles,u=c.get(e);if(u||(A=A.ownerDocument||A,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=A.querySelector(Ku(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Ou.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ou.set(e,n),c||(r=A,o=e,a=n,l=u.state,r.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=r.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),hu(o,"link",a),et(o),r.head.appendChild(o))))),t&&null===i)throw Error(s(528,""));return u}if(t&&null!==i)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xu(n),(i=(n=$e(A).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Wu(e){return'href="'+mt(e)+'"'}function Ku(e){return'link[rel="stylesheet"]['+e+"]"}function qu(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Xu(e){return'[src="'+mt(e)+'"]'}function Ju(e){return"script[async]"+e}function Yu(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(i)return t.instance=i,et(i),i;var r=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(i=(e.ownerDocument||e).createElement("style")),hu(i,"style",r),Zu(i,n.precedence,e),t.instance=i;case"stylesheet":r=Wu(n.href);var o=e.querySelector(Ku(r));if(o)return t.state.loading|=4,t.instance=o,et(o),o;i=qu(n),(r=Ou.get(r))&&$u(i,r),et(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hu(o,"link",i),t.state.loading|=4,Zu(o,n.precedence,e),t.instance=o;case"script":return o=Xu(n.src),(r=e.querySelector(Ju(o)))?(t.instance=r,et(r),r):(i=n,(r=Ou.get(o))&&eh(i=d({},n),r),et(r=(e=e.ownerDocument||e).createElement("script")),hu(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Zu(i,n.precedence,e));return t.instance}function Zu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,o=r,s=0;s<i.length;s++){var a=i[s];if(a.dataset.precedence===t)o=a;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $u(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var i=new Map,r=th=new Map;r.set(n,i)}else(i=(r=th).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[qe]||o[Qe]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=i.get(s);a?a.push(o):i.set(s,[o])}}return i}function ih(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function rh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var oh=0;function sh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ah=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ah=new Map,t.forEach(Ah,e),ah=null,sh.call(e))}function Ah(e,t){if(!(4&t.state.loading)){var n=ah.get(e);if(n)var i=n.get(null);else{n=new Map,ah.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var s=r[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}s=(r=t.instance).getAttribute("data-precedence"),(o=n.get(s)||i)===i&&n.set(null,r),n.set(s,r),this.count++,i=sh.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),o?o.parentNode.insertBefore(r,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var ch={$$typeof:b,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function uh(e,t,n,i,r,o,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.hiddenUpdates=Ie(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,i,r,o,s,a,l,A,c,u){return e=new uh(e,t,n,s,l,A,c,u,a),t=1,!0===o&&(t|=24),o=Di(3,null,null,t),e.current=o,o.stateNode=e,(t=Or()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},mo(o),e}function dh(e){return e?e=Ni:Ni}function ph(e,t,n,i,r,o){r=dh(r),null===i.context?i.context=r:i.pendingContext=r,(i=yo(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(i.callback=o),null!==(n=wo(e,i,t))&&(qA(n,0,t),bo(n,e,t))}function fh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function mh(e){if(13===e.tag||31===e.tag){var t=Li(e,67108864);null!==t&&qA(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=WA(),n=Li(e,t=Ne(t));null!==n&&qA(n,0,t),gh(e,t)}}var yh=!0;function wh(e,t,n,i){var r=R.T;R.T=null;var o=P.p;try{P.p=2,xh(e,t,n,i)}finally{P.p=o,R.T=r}}function bh(e,t,n,i){var r=R.T;R.T=null;var o=P.p;try{P.p=8,xh(e,t,n,i)}finally{P.p=o,R.T=r}}function xh(e,t,n,i){if(yh){var r=Bh(i);if(null===r)tu(e,t,i,_h,n),Ph(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Th=Nh(Th,e,t,n,i,r),!0;case"dragenter":return Mh=Nh(Mh,e,t,n,i,r),!0;case"mouseover":return Fh=Nh(Fh,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ih.set(o,Nh(Ih.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Uh.set(o,Nh(Uh.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Ph(e,i),4&t&&-1<Rh.indexOf(e)){for(;null!==r;){var o=Ye(r);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=Se(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-we(s);a.entanglements[1]|=l,s&=~l}Pc(o),0===(6&dA)&&(RA=le()+500,Nc(0,!1))}}break;case 31:case 13:null!==(a=Li(o,2))&&qA(a,0,2),$A(),gh(o,2)}if(null===(o=Bh(i))&&tu(e,t,i,_h,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else tu(e,t,i,null,n)}}function Bh(e){return Ch(e=Rt(e))}var _h=null;function Ch(e){if(_h=null,null!==(e=Je(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=A(t)))return e;e=null}else if(31===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _h=e,null}function Sh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case ce:return 2;case ue:return 8;case he:case de:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Eh=!1,Th=null,Mh=null,Fh=null,Ih=new Map,Uh=new Map,Lh=[],Rh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ph(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":Mh=null;break;case"mouseover":case"mouseout":Fh=null;break;case"pointerover":case"pointerout":Ih.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(t.pointerId)}}function Nh(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=Ye(t))&&mh(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function kh(e){var t=Je(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=A(n)))return e.blockedOn=t,void Oe(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=c(n)))return e.blockedOn=t,void Oe(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bh(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&mh(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Lt=i,n.target.dispatchEvent(i),Lt=null,t.shift()}return!0}function Oh(e,t,n){Dh(e)&&n.delete(t)}function Hh(){Eh=!1,null!==Th&&Dh(Th)&&(Th=null),null!==Mh&&Dh(Mh)&&(Mh=null),null!==Fh&&Dh(Fh)&&(Fh=null),Ih.forEach(Oh),Uh.forEach(Oh)}function Qh(e,t){e.blockedOn===t&&(e.blockedOn=null,Eh||(Eh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Hh)))}var zh=null;function Gh(e){zh!==e&&(zh=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zh===e&&(zh=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!==typeof i){if(null===Ch(i||n))continue;break}var o=Ye(n);null!==o&&(e.splice(t,3),t-=3,ta(o,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function jh(e){function t(t){return Qh(t,e)}null!==Th&&Qh(Th,e),null!==Mh&&Qh(Mh,e),null!==Fh&&Qh(Fh,e),Ih.forEach(t),Uh.forEach(t);for(var n=0;n<Lh.length;n++){var i=Lh[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Lh.length&&null===(n=Lh[0]).blockedOn;)kh(n),null===n.blockedOn&&Lh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],s=r[ze]||null;if("function"===typeof o)s||Gh(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(r=o,s=o[ze]||null)a=s.formAction;else if(null!==Ch(r))continue}else a=s.action;"function"===typeof a?n[i+1]=a:(n.splice(i,3),i-=3),Gh(n)}}}function Vh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Wh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=Wh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ph(t.current,WA(),e,t,null,null)},Kh.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),$A(),t[Ge]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lh.length&&0!==t&&t<Lh[n].priority;n++);Lh.splice(n,0,e),0===n&&kh(e)}};var qh=r.version;if("19.2.0"!==qh)throw Error(s(527,qh,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return u(r),e;if(o===i)return u(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,A=r.child;A;){if(A===n){a=!0,n=r,i=o;break}if(A===i){a=!0,i=r,n=o;break}A=A.sibling}if(!a){for(A=o.child;A;){if(A===n){a=!0,n=o,i=r;break}if(A===i){a=!0,i=o,n=r;break}A=A.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{me=Jh.inject(Xh),ve=Jh}catch(Zh){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,i="",r=_a,o=Ca,l=Sa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,i,null,r,o,l,Vh),e[Ge]=t.current,$c(e),new Wh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var i=!1,r="",o=_a,l=Ca,A=Sa,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(A=n.onRecoverableError),void 0!==n.formState&&(c=n.formState)),(t=hh(e,1,!0,t,0,i,r,c,o,l,A,Vh)).context=dh(null),n=t.current,(r=yo(i=Ne(i=WA()))).callback=null,wo(n,r,i),n=i,t.current.lanes=n,Ue(t,n),Pc(t),e[Ge]=t.current,$c(e),new Kh(t)},t.version="19.2.0"},7205:(e,t,n)=>{"use strict";e.exports=n(5252)},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8513:(e,t,n)=>{"use strict";e.exports=n(9388)},8784:(e,t,n)=>{"use strict";e.exports=n(3179)},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},9388:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],A=a+1,c=e[A];if(0>o(l,n))A<r&&0>o(c,l)?(e[i]=c,e[A]=n,i=A):(e[i]=l,e[a]=n,i=a);else{if(!(A<r&&0>o(c,n)))break e;e[i]=c,e[A]=n,i=A}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var A=[],c=[],u=1,h=null,d=3,p=!1,f=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(A,t)}t=i(c)}}function b(e){if(g=!1,w(e),!f)if(null!==i(A))f=!0,I();else{var t=i(c);null!==t&&U(b,t.startTime-e)}}var x,B=!1,_=-1,C=5,S=-1;function E(){return!(t.unstable_now()-S<C)}function T(){if(B){var e=t.unstable_now();S=e;var n=!0;try{e:{f=!1,g&&(g=!1,v(_),_=-1),p=!0;var o=d;try{t:{for(w(e),h=i(A);null!==h&&!(h.expirationTime>e&&E());){var s=h.callback;if("function"===typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,w(e),n=!0;break t}h===i(A)&&r(A),w(e)}else r(A);h=i(A)}if(null!==h)n=!0;else{var l=i(c);null!==l&&U(b,l.startTime-e),n=!1}}break e}finally{h=null,d=o,p=!1}n=void 0}}finally{n?x():B=!1}}}if("function"===typeof y)x=function(){y(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,F=M.port2;M.port1.onmessage=T,x=function(){F.postMessage(null)}}else x=function(){m(T,0)};function I(){B||(B=!0,x())}function U(e,n){_=m(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,I())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(A)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===i(A)&&e===i(c)&&(g?(v(_),_=-1):g=!0,U(b,o-s))):(e.sortIndex=a,n(A,e),f||p||(f=!0,I())),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9717:(e,t,n)=>{"use strict";var i=n(5043),r=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,a=i.useRef,l=i.useEffect,A=i.useMemo,c=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=A(function(){function e(e){if(!l){if(l=!0,s=e,e=i(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=i(e);return void 0!==r&&r(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,A=void 0===n?null:n;return[function(){return e(t())},null===A?void 0:function(){return e(A())}]},[t,n,i,r]);var d=s(e,u[0],u[1]);return l(function(){h.hasValue=!0,h.value=d},[d]),c(d),d}},9820:function(e,t){var n,i,r,o;function s(e){return new s.Viewer(e)}!function(e){e.version={versionStr:"4.1.1",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("1",10)};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"===typeof e&&"setInterval"in e},e.type=function(e){return null===e||void 0===e?String(e):t[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==s.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in t)n=r;return void 0===n||i.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=function(){var t=document.createElement("canvas");return!(!e.isFunction(t.getContext)||!t.getContext("2d"))}(),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(n){t=!0}return t},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var t=0;if(e.supportsAddEventListener)try{var n={get capture(){return t++,!1},get once(){return t++,!1},get passive(){return t++,!1}};window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(i){t=0}return t>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(n,1)/i}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(s),function(e){e.extend=function(){var t,n,i,r,o,a,l=arguments[0]||{},A=arguments.length,c=!1,u=1;for("boolean"===typeof l&&(c=l,l=arguments[1]||{},u=2),"object"===typeof l||s.isFunction(l)||(l={}),A===u&&(l=this,--u);u<A;u++)if(null!==(t=arguments[u])||void 0!==t)for(n in t){var h=Object.getOwnPropertyDescriptor(t,n);void 0!==h?h.get||h.set?Object.defineProperty(l,n,h):l!==(r=h.value)&&(c&&r&&(s.isPlainObject(r)||(o=s.isArray(r)))?(i=l[n],o?(o=!1,a=i&&s.isArray(i)?i:[]):a=i&&s.isPlainObject(i)?i:{},l[n]=s.extend(c,a,r)):void 0!==r&&(l[n]=r)):e.console.warn('Could not copy inherited property "'+n+'".')}return l};e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!==typeof navigator)return!1;var e=navigator.userAgent;return"string"===typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(t){return e._viewers.get(this.getElement(t))},getElement:function(e){return"string"===typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(t){var n,i,o=new e.Point;for(i=r(t=e.getElement(t),n="fixed"===e.getElementStyle(t).position);i;)o.x+=t.offsetLeft,o.y+=t.offsetTop,n&&(o=o.plus(e.getPageScroll())),i=r(t=i,n="fixed"===e.getElementStyle(t).position);return o},getElementOffset:function(t){var n,i,r=(t=e.getElement(t))&&t.ownerDocument,o={top:0,left:0};return r?(n=r.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=r===r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new e.Point(o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0),o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0))):new e.Point},getElementSize:function(t){return t=e.getElement(t),new e.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return(t=e.getElement(t)).currentStyle}:function(t){return t=e.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var n={};return e.getCssPropertyWithVendorPrefix=function(t){if(void 0!==n[t])return n[t];var i=document.createElement("div").style,r=null;if(void 0!==i[t])r=t;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],s=e.capitalizeFirstLetter(t),a=0;a<o.length;a++){var l=o[a]+s;if(void 0!==i[l]){r=l;break}}return n[t]=r,r},e.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(t,n){t=e.getElement(t);var i=e.getElementOffset(t),r=e.getElementSize(t);return n.x>=i.x&&n.x<i.x+r.x&&n.y<i.y+r.y&&n.y>=i.y},getMousePosition:function(t){if("number"===typeof t.pageX)e.getMousePosition=function(t){var n=new e.Point;return n.x=t.pageX,n.y=t.pageY,n};else{if("number"!==typeof t.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(t){var n=new e.Point;return n.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,n}}return e.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},n=document.body||{};if("number"===typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(n.scrollLeft||n.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!t.scrollLeft&&!t.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(t){if("undefined"!==typeof window.scrollTo)e.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var n=e.getPageScroll();if(n.x===t.x&&n.y===t.y)return;document.body.scrollLeft=t.x,document.body.scrollTop=t.y;var i=e.getPageScroll();if(i.x!==n.x&&i.y!==n.y)return void(e.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,(i=e.getPageScroll()).x!==n.x&&i.y!==n.y)return void(e.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});e.setPageScroll=function(e){}}e.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},n=document.body||{};if("number"===typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!n.clientWidth&&!n.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(t){t=e.getElement(t);var n=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(n[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(n[1].style,{display:"table-row"}),e.extend(n[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),n[0].appendChild(n[1]),n[1].appendChild(n[2]),n[2].appendChild(t),n[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?e.now=Date.now:e.now=function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(t){var n=e.makeNeutralElement("img");return n.src=t,n},setElementOpacity:function(t,n,i){var r;t=e.getElement(t),i&&!e.Browser.alpha&&(n=Math.round(n)),e.Browser.opacity?t.style.opacity=n<1?n:"":n<1?(r="alpha(opacity="+Math.round(100*n)+")",t.style.filter=r):t.style.filter=""},setElementTouchActionNone:function(t){"undefined"!==typeof(t=e.getElement(t)).style.touchAction?t.style.touchAction="none":"undefined"!==typeof t.style.msTouchAction&&(t.style.msTouchAction="none")},setElementPointerEvents:function(t,n){"undefined"!==typeof(t=e.getElement(t)).style&&"undefined"!==typeof t.style.pointerEvents&&(t.style.pointerEvents=n)},setElementPointerEventsNone:function(t){e.setElementPointerEvents(t,"none")},addClass:function(t,n){(t=e.getElement(t)).className?-1===(" "+t.className+" ").indexOf(" "+n+" ")&&(t.className+=" "+n):t.className=n},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var i,r,o=n||0;if(!e)throw new TypeError;if(0===(r=e.length)||o>=r)return-1;for(o<0&&(o=r-Math.abs(o)),i=o;i<r;i++)if(e[i]===t)return i;return-1},this.indexOf(e,t,n)},removeClass:function(t,n){var i,r,o=[];for(i=(t=e.getElement(t)).className.split(/\s+/),r=0;r<i.length;r++)i[r]&&i[r]!==n&&o.push(i[r]);t.className=o.join(" ")},normalizeEventListenerOptions:function(t){return"undefined"!==typeof t?"boolean"===typeof t?e.supportsEventListenerOptions?{capture:t}:t:e.supportsEventListenerOptions?t:"undefined"!==typeof t.capture&&t.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(t,n,i,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).addEventListener(n,i,r)};if(document.documentElement.attachEvent&&document.attachEvent)return function(t,n,i){(t=e.getElement(t)).attachEvent("on"+n,i)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(t,n,i,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).removeEventListener(n,i,r)};if(document.documentElement.detachEvent&&document.detachEvent)return function(t,n,i){(t=e.getElement(t)).detachEvent("on"+n,i)};throw new Error("No known event model.")}(),cancelEvent:function(e){e.preventDefault()},eventIsCanceled:function(e){return e.defaultPrevented},stopEvent:function(e){e.stopPropagation()},createCallback:function(e,t){var n,i=[];for(n=2;n<arguments.length;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;n<arguments.length;n++)r.push(arguments[n]);return t.apply(e,r)}},getUrlParameter:function(e){var t=i[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(t){var n;try{n=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(i){n=!1}if(n)window.XMLHttpRequest?e.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:e.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");e.createAjaxRequest=function(){return new XMLHttpRequest}}return e.createAjaxRequest(t)},makeAjaxRequest:function(t,n,i){var r,o,s,a;e.isPlainObject(t)&&(n=t.success,i=t.error,r=t.withCredentials,o=t.headers,s=t.responseType||null,a=t.postData||null,t=t.url);var l=e.getUrlProtocol(t),A=e.createAjaxRequest("file:"===l);if(!e.isFunction(n))throw new Error("makeAjaxRequest requires a success callback");A.onreadystatechange=function(){4===A.readyState&&(A.onreadystatechange=function(){},A.status>=200&&A.status<300||0===A.status&&"http:"!==l&&"https:"!==l?n(A):e.isFunction(i)?i(A):e.console.error("AJAX request returned %d: %s",A.status,t))};var c=a?"POST":"GET";try{if(A.open(c,t,!0),s&&(A.responseType=s),o)for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&A.setRequestHeader(u,o[u]);r&&(A.withCredentials=!0),A.send(a)}catch(h){e.console.error("%s while making AJAX request: %s",h.name,h.message),A.onreadystatechange=function(){},e.isFunction(i)&&i(A,h)}return A},jsonp:function(t){var n,i=t.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=t.callbackName||"openseadragon"+e.now(),s=window[o],a="$1"+o+"$2",l=t.param||"callback",A=t.callback;i=i.replace(/(=)\?(&|$)|\?\?/i,a),i+=(/\?/.test(i)?"&":"?")+l+"="+o,window[o]=function(t){if(s)window[o]=s;else try{delete window[o]}catch(n){}A&&e.isFunction(A)&&A(t)},n=document.createElement("script"),void 0===t.async&&!1===t.async||(n.async="async"),t.scriptCharset&&(n.charset=t.scriptCharset),n.src=i,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=void 0)},r.insertBefore(n,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(window.DOMParser)e.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");e.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return e.parseXml(t)},parseJSON:function(t){return e.parseJSON=window.JSON.parse,e.parseJSON(t)},imageFormatSupported:function(e){return!!n[(e=e||"").toLowerCase()]},setImageFormatsSupported:function(t){e.extend(n,t)}});var t=function(e){};e.console=window.console||{log:t,debug:t,info:t,warn:t,error:t,assert:t},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var n={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},i={};function r(e,t){return t&&e!==document.body?document.body:e.offsetParent}!function(){var t=navigator.appVersion,n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(n.substring(n.indexOf("Edge")+5))):n.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(n.substring(n.indexOf("Edg")+4))):n.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0?(e.Browser.vendor=n.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(t)}var r,o,s,a=window.location.search.substring(1).split("&");for(s=0;s<a.length;s++)if((o=(r=a[s]).indexOf("="))>0){var l=r.substring(0,o),A=r.substring(o+1);try{i[l]=decodeURIComponent(A)}catch(c){e.console.error("Ignoring malformed URL parameter: %s=%s",l,A)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")}(),function(t){var n=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,i=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;if(n&&i)e.requestAnimationFrame=function(){return n.apply(t,arguments)},e.cancelAnimationFrame=function(){return i.apply(t,arguments)};else{var r,o=[],s=[],a=0;e.requestAnimationFrame=function(t){return o.push([++a,t]),r||(r=setInterval(function(){if(o.length){var t=e.now(),n=s;for(s=o,o=n;s.length;)s.shift()[1](t)}else clearInterval(r),r=void 0},20)),a},e.cancelAnimationFrame=function(e){var t,n;for(t=0,n=o.length;t<n;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,n=s.length;t<n;t+=1)if(s[t][0]===e)return void s.splice(t,1)}}}(window)}(s),i=[],void 0===(r="function"===typeof(n=function(){return s})?n.apply(t,i):n)||(e.exports=r),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(e){return e.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(s),(o=s).EventSource=function(){this.events={}},o.EventSource.prototype={addOnceHandler:function(e,t,n,i,r){var o=this;i=i||1;var s=0,a=function(n){return++s===i&&o.removeHandler(e,a),t(n)};this.addHandler(e,a,n,r)},addHandler:function(e,t,n,i){var r=this.events[e];if(r||(this.events[e]=r=[]),t&&o.isFunction(t)){var s=r.length,a={handler:t,userData:n||null,priority:i||0};for(r[s]=a;s>0&&r[s-1].priority<r[s].priority;)r[s]=r[s-1],r[s-1]=a,s--}},removeHandler:function(e,t){var n,i=this.events[e],r=[];if(i&&o.isArray(i)){for(n=0;n<i.length;n++)i[n].handler!==t&&r.push(i[n]);this.events[e]=r}},numberOfHandlers:function(e){var t=this.events[e];return t?t.length:0},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var i,r=t.length;for(i=0;i<r;i++)t[i]&&(n.eventSource=e,n.userData=t[i].userData,t[i].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);if(n)return n(this,t||{})}},function(e){var t=[],n={};e.MouseTracker=function(i){t.push(this);var r=arguments;e.isPlainObject(i)||(i={element:r[0],clickTimeThreshold:r[1],clickDistThreshold:r[2]}),this.hash=Math.random(),this.element=e.getElement(i.element),this.clickTimeThreshold=i.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=i.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=i.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=i.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=i.userData||null,this.stopDelay=i.stopDelay||50,this.preProcessEventHandler=i.preProcessEventHandler||null,this.contextMenuHandler=i.contextMenuHandler||null,this.enterHandler=i.enterHandler||null,this.leaveHandler=i.leaveHandler||null,this.exitHandler=i.exitHandler||null,this.overHandler=i.overHandler||null,this.outHandler=i.outHandler||null,this.pressHandler=i.pressHandler||null,this.nonPrimaryPressHandler=i.nonPrimaryPressHandler||null,this.releaseHandler=i.releaseHandler||null,this.nonPrimaryReleaseHandler=i.nonPrimaryReleaseHandler||null,this.moveHandler=i.moveHandler||null,this.scrollHandler=i.scrollHandler||null,this.clickHandler=i.clickHandler||null,this.dblClickHandler=i.dblClickHandler||null,this.dragHandler=i.dragHandler||null,this.dragEndHandler=i.dragEndHandler||null,this.pinchHandler=i.pinchHandler||null,this.stopHandler=i.stopHandler||null,this.keyDownHandler=i.keyDownHandler||null,this.keyUpHandler=i.keyUpHandler||null,this.keyHandler=i.keyHandler||null,this.focusHandler=i.focusHandler||null,this.blurHandler=i.blurHandler||null;var o=this;n[this.hash]={click:function(t){!function(t,n){var i={originalEvent:n,eventType:"click",pointerType:"mouse",isEmulated:!1};M(t,i),i.preventDefault&&!i.defaultPrevented&&e.cancelEvent(n);i.stopPropagation&&e.stopEvent(n)}(o,t)},dblclick:function(t){!function(t,n){var i={originalEvent:n,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};M(t,i),i.preventDefault&&!i.defaultPrevented&&e.cancelEvent(n);i.stopPropagation&&e.stopEvent(n)}(o,t)},keydown:function(t){!function(t,n){var i=null,r={originalEvent:n,eventType:"keydown",pointerType:"",isEmulated:!1};M(t,r),!t.keyDownHandler||r.preventGesture||r.defaultPrevented||(i={eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.keyDownHandler(i));(i&&i.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(n);r.stopPropagation&&e.stopEvent(n)}(o,t)},keyup:function(t){!function(t,n){var i=null,r={originalEvent:n,eventType:"keyup",pointerType:"",isEmulated:!1};M(t,r),!t.keyUpHandler||r.preventGesture||r.defaultPrevented||(i={eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.keyUpHandler(i));(i&&i.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(n);r.stopPropagation&&e.stopEvent(n)}(o,t)},keypress:function(t){!function(t,n){var i=null,r={originalEvent:n,eventType:"keypress",pointerType:"",isEmulated:!1};M(t,r),!t.keyHandler||r.preventGesture||r.defaultPrevented||(i={eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.keyHandler(i));(i&&i.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(n);r.stopPropagation&&e.stopEvent(n)}(o,t)},focus:function(e){!function(e,t){var n={originalEvent:t,eventType:"focus",pointerType:"",isEmulated:!1};M(e,n),e.focusHandler&&!n.preventGesture&&e.focusHandler({eventSource:e,originalEvent:t,userData:e.userData})}(o,e)},blur:function(e){!function(e,t){var n={originalEvent:t,eventType:"blur",pointerType:"",isEmulated:!1};M(e,n),e.blurHandler&&!n.preventGesture&&e.blurHandler({eventSource:e,originalEvent:t,userData:e.userData})}(o,e)},contextmenu:function(t){!function(t,n){var i=null,r={originalEvent:n,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};M(t,r),!t.contextMenuHandler||r.preventGesture||r.defaultPrevented||(i={eventSource:t,position:p(h(n),t.element),originalEvent:r.originalEvent,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.contextMenuHandler(i));(i&&i.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(n);r.stopPropagation&&e.stopEvent(n)}(o,t)},wheel:function(e){!function(e,t){m(e,t,t)}(o,e)},mousewheel:function(e){g(o,e)},DOMMouseScroll:function(e){g(o,e)},MozMousePixelScroll:function(e){g(o,e)},losecapture:function(t){!function(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse"},r={originalEvent:n,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};M(t,r),n.target===t.element&&F(t,i,!1);r.stopPropagation&&e.stopEvent(n)}(o,t)},mouseenter:function(e){v(o,e)},mouseleave:function(e){y(o,e)},mouseover:function(e){w(o,e)},mouseout:function(e){b(o,e)},mousedown:function(e){x(o,e)},mouseup:function(e){B(o,e)},mousemove:function(e){C(o,e)},touchstart:function(t){!function(t,n){var i,r,o,s=n.changedTouches.length,a=t.getActivePointersListByType("touch");i=e.now(),a.getLength()>n.touches.length-s&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var l={originalEvent:n,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(M(t,l),r=0;r<s;r++)I(t,l,o={id:n.changedTouches[r].identifier,type:"touch",isPrimary:0===a.getLength(),currentPos:h(n.changedTouches[r]),currentTime:i}),L(t,l,o,0),F(t,o,!0);l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(n);l.stopPropagation&&e.stopEvent(n)}(o,t)},touchend:function(t){!function(t,n){var i,r,o,s=n.changedTouches.length;i=e.now();var a={originalEvent:n,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(M(t,a),r=0;r<s;r++)R(t,a,o={id:n.changedTouches[r].identifier,type:"touch",currentPos:h(n.changedTouches[r]),currentTime:i},0),F(t,o,!1),U(t,a,o);a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(n);a.stopPropagation&&e.stopEvent(n)}(o,t)},touchmove:function(t){!function(t,n){var i,r,o=n.changedTouches.length;i=e.now();var s={originalEvent:n,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(M(t,s),r=0;r<o;r++)P(t,s,{id:n.changedTouches[r].identifier,type:"touch",currentPos:h(n.changedTouches[r]),currentTime:i});s.preventDefault&&!s.defaultPrevented&&e.cancelEvent(n);s.stopPropagation&&e.stopEvent(n)}(o,t)},touchcancel:function(t){!function(t,n){var i,r=n.changedTouches.length,o={originalEvent:n,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(M(t,o),i=0;i<r;i++)N(t,o,{id:n.changedTouches[i].identifier,type:"touch"});o.stopPropagation&&e.stopEvent(n)}(o,t)},gesturestart:function(t){!function(t,n){e.eventIsCanceled(n)||n.preventDefault()}(0,t)},gesturechange:function(t){!function(t,n){e.eventIsCanceled(n)||n.preventDefault()}(0,t)},gotpointercapture:function(t){!function(t,n){var i={originalEvent:n,eventType:"gotpointercapture",pointerType:c(n),isEmulated:!1};M(t,i),n.target===t.element&&F(t,{id:n.pointerId,type:c(n)},!0);i.stopPropagation&&e.stopEvent(n)}(o,t)},lostpointercapture:function(t){!function(t,n){var i={originalEvent:n,eventType:"lostpointercapture",pointerType:c(n),isEmulated:!1};M(t,i),n.target===t.element&&F(t,{id:n.pointerId,type:c(n)},!1);i.stopPropagation&&e.stopEvent(n)}(o,t)},pointerenter:function(e){v(o,e)},pointerleave:function(e){y(o,e)},pointerover:function(e){w(o,e)},pointerout:function(e){b(o,e)},pointerdown:function(e){x(o,e)},pointerup:function(e){B(o,e)},pointermove:function(e){C(o,e)},pointercancel:function(t){!function(t,n){var i={id:n.pointerId,type:c(n)},r={originalEvent:n,eventType:"pointercancel",pointerType:i.type,isEmulated:!1};M(t,r),N(t,r,i),r.stopPropagation&&e.stopEvent(n)}(o,t)},pointerupcaptured:function(t){!function(t,n){var i=t.getActivePointersListByType(c(n));i.getById(n.pointerId)&&_(t,n);e.stopEvent(n)}(o,t)},pointermovecaptured:function(t){!function(t,n){var i=t.getActivePointersListByType(c(n));i.getById(n.pointerId)&&S(t,n);e.stopEvent(n)}(o,t)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),i.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(s(this),this.element=null,e=0;e<t.length;e++)if(t[e]===this){t.splice(e,1);break}n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(t){return t?function(t){var i,r,s=n[t.hash];if(!s.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)i=e.MouseTracker.subscribeEvents[r],e.addEvent(t.element,i,s[i],i===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});o(t),s.tracking=!0}}(this):s(this),this},getActivePointersListByType:function(t){var i,r,o=n[this.hash],s=o.activePointersLists.length;for(i=0;i<s;i++)if(o.activePointersLists[i].type===t)return o.activePointersLists[i];return r=new e.MouseTracker.GesturePointList(t),o.activePointersLists.push(r),r},getActivePointerCount:function(){var e,t=n[this.hash],i=t.activePointersLists.length,r=0;for(e=0;e<i;e++)r+=t.activePointersLists[e].getLength();return r},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var i=function(){try{return window.self!==window.top}catch(e){return!0}}();function r(e){try{return e.addEventListener&&e.removeEventListener}catch(t){return!1}}function o(e){var t,i,r,o,s,a=n[e.hash],l=a.activePointersLists.length;for(t=0;t<l;t++)if((r=a.activePointersLists[t]).getLength()>0){for(s=[],o=r.asArray(),i=0;i<o.length;i++)s.push(o[i]);for(i=0;i<s.length;i++)T(e,r,s[i])}for(t=0;t<l;t++)a.activePointersLists.pop();a.sentDragEvent=!1}function s(t){var i,r,s=n[t.hash];if(s.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)i=e.MouseTracker.subscribeEvents[r],e.removeEvent(t.element,i,s[i],!1);o(t),s.tracking=!1}}function a(e,t){var i=n[e.hash];if("pointerevent"===t)return{upName:"pointerup",upHandler:i.pointerupcaptured,moveName:"pointermove",moveHandler:i.pointermovecaptured};if("mouse"===t)return{upName:"pointerup",upHandler:i.pointerupcaptured,moveName:"pointermove",moveHandler:i.pointermovecaptured};if("touch"===t)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function l(t,n){var o,s;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(s=t.getActivePointersListByType(n.type).getById(n.id))||!s.captured)return;try{t.element.releasePointerCapture(n.id)}catch(l){}}else t.element.releaseCapture();else o=a(t,e.MouseTracker.havePointerEvents?"pointerevent":n.type),i&&r(window.top)&&e.removeEvent(window.top,o.upName,o.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0);F(t,n,!1)}function A(t){return e.MouseTracker.havePointerEvents?t.pointerId:e.MouseTracker.mousePointerId}function c(t){return e.MouseTracker.havePointerEvents?t.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function u(t){return!e.MouseTracker.havePointerEvents||t.isPrimary}function h(t){return e.getMousePosition(t)}function d(e,t){return p(h(e),t)}function p(t,n){var i=e.getElementOffset(n);return t.minus(i)}function f(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function g(t,n){var i={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"===n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"===e.MouseTracker.wheelEventName?i.deltaY=-n.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:i.deltaY=n.detail,m(t,i,n)}function m(t,n,i){var r,o,s=null;r=n.deltaY<0?1:-1,M(t,o={originalEvent:n,eventType:"wheel",pointerType:"mouse",isEmulated:n!==i}),!t.scrollHandler||o.preventGesture||o.defaultPrevented||(s={eventSource:t,pointerType:"mouse",position:d(n,t.element),scroll:r,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefault:o.preventDefault||o.defaultPrevented,userData:t.userData},t.scrollHandler(s)),o.stopPropagation&&e.stopEvent(i),(s&&s.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(i)}function v(t,n){var i={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()},r={originalEvent:n,eventType:"pointerenter",pointerType:i.type,isEmulated:!1};M(t,r),I(t,r,i)}function y(t,n){var i={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()},r={originalEvent:n,eventType:"pointerleave",pointerType:i.type,isEmulated:!1};M(t,r),U(t,r,i)}function w(t,n){var i={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()},r={originalEvent:n,eventType:"pointerover",pointerType:i.type,isEmulated:!1};M(t,r),function(e,t,n){var i,r;i=e.getActivePointersListByType(n.type),r=i.getById(n.id),r?n=r:(n.captured=!1,n.insideElementPressed=!1);e.overHandler&&e.overHandler({eventSource:e,pointerType:n.type,position:p(n.currentPos,e.element),buttons:i.buttons,pointers:e.getActivePointerCount(),insideElementPressed:n.insideElementPressed,buttonDownAny:0!==i.buttons,isTouchEvent:"touch"===n.type,originalEvent:t.originalEvent,userData:e.userData})}(t,r,i),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(n),r.stopPropagation&&e.stopEvent(n)}function b(t,n){var i={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()},r={originalEvent:n,eventType:"pointerout",pointerType:i.type,isEmulated:!1};M(t,r),function(e,t,n){var i,r;i=e.getActivePointersListByType(n.type),r=i.getById(n.id),r?n=r:(n.captured=!1,n.insideElementPressed=!1);e.outHandler&&e.outHandler({eventSource:e,pointerType:n.type,position:n.currentPos&&p(n.currentPos,e.element),buttons:i.buttons,pointers:e.getActivePointerCount(),insideElementPressed:n.insideElementPressed,buttonDownAny:0!==i.buttons,isTouchEvent:"touch"===n.type,originalEvent:t.originalEvent,userData:e.userData})}(t,r,i),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(n),r.stopPropagation&&e.stopEvent(n)}function x(t,n){var o={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()},s=e.MouseTracker.havePointerEvents&&"touch"===o.type&&e.Browser.vendor!==e.BROWSERS.IE,l={originalEvent:n,eventType:"pointerdown",pointerType:o.type,isEmulated:!1};M(t,l),L(t,l,o,n.button),l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(n),l.stopPropagation&&e.stopEvent(n),l.shouldCapture&&(s?F(t,o,!0):function(t,n){var o;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{t.element.setPointerCapture(n.id)}catch(s){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else t.element.setCapture(!0);else o=a(t,e.MouseTracker.havePointerEvents?"pointerevent":n.type),i&&r(window.top)&&e.addEvent(window.top,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0);F(t,n,!0)}(t,o))}function B(e,t){_(e,t)}function _(t,n){var i,r={originalEvent:n,eventType:"pointerup",pointerType:(i={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()}).type,isEmulated:!1};M(t,r),R(t,r,i,n.button),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(n),r.stopPropagation&&e.stopEvent(n),r.shouldReleaseCapture&&(n.target===t.element?l(t,i):F(t,i,!1))}function C(e,t){S(e,t)}function S(t,n){var i={id:A(n),type:c(n),isPrimary:u(n),currentPos:h(n),currentTime:e.now()},r={originalEvent:n,eventType:"pointermove",pointerType:i.type,isEmulated:!1};M(t,r),P(t,r,i),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(n),r.stopPropagation&&e.stopEvent(n)}function E(e,t){return t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function T(t,n,i){var r,o=n.getById(i.id);return o?(o.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),l(t,o)),n.removeContact(),r=n.removeById(i.id)):r=n.getLength(),r}function M(t,n){n.eventSource=t,n.eventPhase=n.originalEvent&&"undefined"!==typeof n.originalEvent.eventPhase?n.originalEvent.eventPhase:0,n.defaultPrevented=e.eventIsCanceled(n.originalEvent),n.shouldCapture=!1,n.shouldReleaseCapture=!1,n.userData=t.userData,function(e,t){switch(t.eventType){case"pointermove":case"pointerdown":case"pointerup":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"wheel":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasScrollHandler,t.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":t.isStoppable=!0,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"click":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.clickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;case"dblclick":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.dblClickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;default:t.isStoppable=!1,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1}}(t,n),t.preProcessEventHandler&&t.preProcessEventHandler(n)}function F(t,n,i){var r=t.getActivePointersListByType(n.type),o=r.getById(n.id);o?i&&!o.captured?(o.captured=!0,r.captureCount++):!i&&o.captured&&(o.captured=!1,r.captureCount--,r.captureCount<0&&(r.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function I(e,t,n){var i,r=e.getActivePointersListByType(n.type);(i=r.getById(n.id))?(i.insideElement=!0,i.lastPos=i.currentPos,i.lastTime=i.currentTime,i.currentPos=n.currentPos,i.currentTime=n.currentTime,n=i):(n.captured=!1,n.insideElementPressed=!1,n.insideElement=!0,E(r,n)),e.enterHandler&&e.enterHandler({eventSource:e,pointerType:n.type,position:p(n.currentPos,e.element),buttons:r.buttons,pointers:e.getActivePointerCount(),insideElementPressed:n.insideElementPressed,buttonDownAny:0!==r.buttons,isTouchEvent:"touch"===n.type,originalEvent:t.originalEvent,userData:e.userData})}function U(e,t,n){var i,r,o=e.getActivePointersListByType(n.type);(i=o.getById(n.id))?(i.captured?(i.insideElement=!1,i.lastPos=i.currentPos,i.lastTime=i.currentTime,i.currentPos=n.currentPos,i.currentTime=n.currentTime):T(e,o,i),n=i):(n.captured=!1,n.insideElementPressed=!1),(e.leaveHandler||e.exitHandler)&&(r={eventSource:e,pointerType:n.type,position:n.currentPos&&p(n.currentPos,e.element),buttons:o.buttons,pointers:e.getActivePointerCount(),insideElementPressed:n.insideElementPressed,buttonDownAny:0!==o.buttons,isTouchEvent:"touch"===n.type,originalEvent:t.originalEvent,userData:e.userData},e.leaveHandler&&e.leaveHandler(r),e.exitHandler&&e.exitHandler(r))}function L(t,i,r,o){var s,a=n[t.hash],l=t.getActivePointersListByType(r.type);if("undefined"!==typeof i.originalEvent.buttons?l.buttons=i.originalEvent.buttons:0===o?l.buttons|=1:1===o?l.buttons|=4:2===o?l.buttons|=2:3===o?l.buttons|=8:4===o?l.buttons|=16:5===o&&(l.buttons|=32),0!==o)return i.shouldCapture=!1,i.shouldReleaseCapture=!1,void(!t.nonPrimaryPressHandler||i.preventGesture||i.defaultPrevented||(i.preventDefault=!0,t.nonPrimaryPressHandler({eventSource:t,pointerType:r.type,position:p(r.currentPos,t.element),button:o,buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:t.userData})));(s=l.getById(r.id))?(s.insideElementPressed=!0,s.insideElement=!0,s.originalTarget=i.originalEvent.target,s.contactPos=r.currentPos,s.contactTime=r.currentTime,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=r.currentPos,s.currentTime=r.currentTime,r=s):(r.captured=!1,r.insideElementPressed=!0,r.insideElement=!0,r.originalTarget=i.originalEvent.target,E(l,r)),l.addContact(),i.preventGesture||i.defaultPrevented?(i.shouldCapture=!1,i.shouldReleaseCapture=!1):(i.shouldCapture=!0,i.shouldReleaseCapture=!1,i.preventDefault=!0,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,r),1===l.contacts?t.pressHandler&&!i.preventGesture&&t.pressHandler({eventSource:t,pointerType:r.type,position:p(r.contactPos,t.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:t.userData}):2===l.contacts&&t.pinchHandler&&"touch"===r.type&&(a.pinchGPoints=l.asArray(),a.lastPinchDist=a.currentPinchDist=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos),a.lastPinchCenter=a.currentPinchCenter=f(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos)))}function R(t,i,r,o){var s,a,l,A,c=n[t.hash],u=t.getActivePointersListByType(r.type),h=!1;if("undefined"!==typeof i.originalEvent.buttons?u.buttons=i.originalEvent.buttons:0===o?u.buttons^=-2:1===o?u.buttons^=-5:2===o?u.buttons^=-3:3===o?u.buttons^=-9:4===o?u.buttons^=-17:5===o&&(u.buttons^=-33),i.shouldCapture=!1,0!==o)return i.shouldReleaseCapture=!1,void(!t.nonPrimaryReleaseHandler||i.preventGesture||i.defaultPrevented||(i.preventDefault=!0,t.nonPrimaryReleaseHandler({eventSource:t,pointerType:r.type,position:p(r.currentPos,t.element),button:o,buttons:u.buttons,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:t.userData})));(l=u.getById(r.id))?(u.removeContact(),l.captured&&(h=!0),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=r.currentPos,l.currentTime=r.currentTime,l.insideElement||T(t,u,l),s=l.currentPos,a=l.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,E(u,r),l=r),i.preventGesture||i.defaultPrevented||(h?(i.shouldReleaseCapture=!0,i.preventDefault=!0,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,l),0===u.contacts?(t.releaseHandler&&s&&t.releaseHandler({eventSource:t,pointerType:l.type,position:p(s,t.element),buttons:u.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:i.originalEvent,userData:t.userData}),t.dragEndHandler&&c.sentDragEvent&&t.dragEndHandler({eventSource:t,pointerType:l.type,position:p(l.currentPos,t.element),speed:l.speed,direction:l.direction,shift:i.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:i.originalEvent,userData:t.userData}),c.sentDragEvent=!1,(t.clickHandler||t.dblClickHandler)&&l.insideElement&&(A=a-l.contactTime<=t.clickTimeThreshold&&l.contactPos.distanceTo(s)<=t.clickDistThreshold,t.clickHandler&&t.clickHandler({eventSource:t,pointerType:l.type,position:p(l.currentPos,t.element),quick:A,shift:i.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:i.originalEvent,originalTarget:l.originalTarget,userData:t.userData}),t.dblClickHandler&&A&&(u.clicks++,1===u.clicks?(c.lastClickPos=s,c.dblClickTimeOut=setTimeout(function(){u.clicks=0},t.dblClickTimeThreshold)):2===u.clicks&&(clearTimeout(c.dblClickTimeOut),u.clicks=0,c.lastClickPos.distanceTo(s)<=t.dblClickDistThreshold&&t.dblClickHandler({eventSource:t,pointerType:l.type,position:p(l.currentPos,t.element),shift:i.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:i.originalEvent,userData:t.userData}),c.lastClickPos=null)))):2===u.contacts&&t.pinchHandler&&"touch"===l.type&&(c.pinchGPoints=u.asArray(),c.lastPinchDist=c.currentPinchDist=c.pinchGPoints[0].currentPos.distanceTo(c.pinchGPoints[1].currentPos),c.lastPinchCenter=c.currentPinchCenter=f(c.pinchGPoints[0].currentPos,c.pinchGPoints[1].currentPos))):(i.shouldReleaseCapture=!1,t.releaseHandler&&s&&(t.releaseHandler({eventSource:t,pointerType:l.type,position:p(s,t.element),buttons:u.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:i.originalEvent,userData:t.userData}),i.preventDefault=!0)))}function P(e,t,i){var r,o,s,a=n[e.hash],l=e.getActivePointersListByType(i.type);"undefined"!==typeof t.originalEvent.buttons&&(l.buttons=t.originalEvent.buttons),(r=l.getById(i.id))&&(r.lastPos=r.currentPos,r.lastTime=r.currentTime,r.currentPos=i.currentPos,r.currentTime=i.currentTime,t.shouldCapture=!1,t.shouldReleaseCapture=!1,e.stopHandler&&"mouse"===i.type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout(function(){!function(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:d(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,userData:e.userData})}(e,t.originalEvent,i.type)},e.stopDelay)),0===l.contacts?e.moveHandler&&e.moveHandler({eventSource:e,pointerType:i.type,position:p(i.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData}):1===l.contacts?(e.moveHandler&&(r=l.asArray()[0],e.moveHandler({eventSource:e,pointerType:r.type,position:p(r.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:t.originalEvent,userData:e.userData})),!e.dragHandler||t.preventGesture||t.defaultPrevented||(s=(r=l.asArray()[0]).currentPos.minus(r.lastPos),e.dragHandler({eventSource:e,pointerType:r.type,position:p(r.currentPos,e.element),buttons:l.buttons,delta:s,speed:r.speed,direction:r.direction,shift:t.originalEvent.shiftKey,isTouchEvent:"touch"===r.type,originalEvent:t.originalEvent,userData:e.userData}),t.preventDefault=!0,a.sentDragEvent=!0)):2===l.contacts&&(e.moveHandler&&(o=l.asArray(),e.moveHandler({eventSource:e,pointerType:o[0].type,position:p(f(o[0].currentPos,o[1].currentPos),e.element),buttons:l.buttons,isTouchEvent:"touch"===o[0].type,originalEvent:t.originalEvent,userData:e.userData})),!e.pinchHandler||"touch"!==i.type||t.preventGesture||t.defaultPrevented||(s=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos))!==a.currentPinchDist&&(a.lastPinchDist=a.currentPinchDist,a.currentPinchDist=s,a.lastPinchCenter=a.currentPinchCenter,a.currentPinchCenter=f(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos),e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:a.pinchGPoints,lastCenter:p(a.lastPinchCenter,e.element),center:p(a.currentPinchCenter,e.element),lastDistance:a.lastPinchDist,distance:a.currentPinchDist,shift:t.originalEvent.shiftKey,originalEvent:t.originalEvent,userData:e.userData}),t.preventDefault=!0)))}function N(e,t,n){var i,r=e.getActivePointersListByType(n.type);(i=r.getById(n.id))&&T(e,r,i)}e.MouseTracker.gesturePointVelocityTracker=function(){var t=[],n=0,i=0,r=function(e,t){return e.hash.toString()+t.type+t.id.toString()},o=function(){var n,r,o,s,a,l,A=t.length,c=e.now();for(s=c-i,i=c,n=0;n<A;n++)(o=(r=t[n]).gPoint).direction=Math.atan2(o.currentPos.y-r.lastPos.y,o.currentPos.x-r.lastPos.x),a=r.lastPos.distanceTo(o.currentPos),r.lastPos=o.currentPos,l=1e3*a/(s+1),o.speed=.75*l+.25*o.speed};return{addPoint:function(s,a){var l=r(s,a);t.push({guid:l,gPoint:a,lastPos:a.currentPos}),1===t.length&&(i=e.now(),n=window.setInterval(o,50))},removePoint:function(e,i){var o,s=r(e,i),a=t.length;for(o=0;o<a;o++)if(t[o].guid===s){t.splice(o,1),0===--a&&window.clearInterval(n);break}}}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var t=document.createElement("div");return e.isFunction(t.setPointerCapture)&&e.isFunction(t.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(s),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,i){var r=t.parentNode;"number"===typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer="undefined"===typeof n.attachToViewer||n.attachToViewer,this.autoFade="undefined"===typeof n.autoFade||n.autoFade,this.element=t,this.anchor=n.anchor,this.container=i,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"===typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"===typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"===typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"===typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(s),function(e){function t(e,t){var n,i=e.controls;for(n=i.length-1;n>=0;n--)if(i[n].element===t)return n;return-1}e.ControlDock=function(t){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<r.length;i++)n=r[i],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,i){var r=null;if(!(t(this,n=e.getElement(n))>=0)){switch(i.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:default:case e.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){var i=t(this,n=e.getElement(n));return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(s),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(s),function(e){var t={},n=1;function i(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function r(t,n){if(n instanceof e.Overlay)return n;var i=null;if(n.element)i=e.getElement(n.element);else{var r=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(i=e.getElement(n.id))||((i=document.createElement("a")).href="#/overlay/"+r),i.id=r,e.addClass(i,n.className?n.className:"openseadragon-overlay")}var o=n.location,s=n.width,a=n.height;if(!o){var l=n.x,A=n.y;if(void 0!==n.px){var c=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,s||0,a||0));l=c.x,A=c.y,s=void 0!==s?c.width:void 0,a=void 0!==a?c.height:void 0}o=new e.Point(l,A)}var u=n.placement;return u&&"string"===e.type(u)&&(u=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:i,location:o,placement:u,onDraw:n.onDraw,checkResize:n.checkResize,width:s,height:a,rotationMode:n.rotationMode})}function o(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function s(t,n){return e.requestAnimationFrame(function(){n(t)})}function a(t){e.requestAnimationFrame(function(){!function(t){var n,i;if(t.controlsShouldFade){for(n=1-(e.now()-t.controlsFadeBeginTime)/t.controlsFadeLength,n=Math.min(1,n),n=Math.max(0,n),i=t.controls.length-1;i>=0;i--)t.controls[i].autoFade&&t.controls[i].setOpacity(n);n>0&&a(t)}}(t)})}function l(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout(function(){a(t)},t.controlsFadeDelay))}function A(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function c(){A(this)}function u(){l(this)}function h(e){var t={tracker:e.eventSource,position:e.position,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.raiseEvent("canvas-contextmenu",t),e.preventDefault=t.preventDefault}function d(t){var n={originalEvent:t.originalEvent,preventDefaultAction:!1,preventVerticalPan:t.preventVerticalPan||!this.panVertical,preventHorizontalPan:t.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)t.preventDefault=!1;else switch(t.keyCode){case 38:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 40:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 37:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 39:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 87:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 83:n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 65:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 68:n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 82:t.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),t.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:t.preventDefault=!1}}function p(e){var t={originalEvent:e.originalEvent};this.raiseEvent("canvas-key-press",t)}function f(n){var i;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(n.position.x=this.viewport.getContainerSize().x-n.position.x);var r={tracker:n.eventSource,position:n.position,quick:n.quick,shift:n.shift,originalEvent:n.originalEvent,originalTarget:n.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",r),!r.preventDefaultAction&&this.viewport&&n.quick&&(!0===(i=this.gestureSettingsByDeviceType(n.pointerType)).clickToZoom&&(this.viewport.zoomBy(n.shift?1/this.zoomPerClick:this.zoomPerClick,i.zoomToRefPoint?this.viewport.pointFromPixel(n.position,!0):null),this.viewport.applyConstraints()),i.dblClickDragToZoom&&(!0===t[this.hash].draggingToZoom?(t[this.hash].lastClickTime=null,t[this.hash].draggingToZoom=!1):t[this.hash].lastClickTime=e.now()))}function g(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function m(e){var n,i={tracker:e.eventSource,pointerType:e.pointerType,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",i),n=this.gestureSettingsByDeviceType(e.pointerType),!i.preventDefaultAction&&this.viewport)if(n.dblClickDragToZoom&&t[this.hash].draggingToZoom){var r=Math.pow(this.zoomPerDblClickDrag,e.delta.y/50);this.viewport.zoomBy(r)}else if(n.dragToPan&&!t[this.hash].draggingToZoom){if(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var o=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=o.x,this.viewport.centerSpringY.target.value+=o.y;var s=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=o.x,this.viewport.centerSpringY.target.value-=o.y,s.xConstrained&&(e.delta.x=0),s.yConstrained&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),n.flickEnabled&&!this.constrainDuringPan)}}function v(n){var i,r={tracker:n.eventSource,pointerType:n.pointerType,position:n.position,speed:n.speed,direction:n.direction,shift:n.shift,originalEvent:n.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",r),i=this.gestureSettingsByDeviceType(n.pointerType),!r.preventDefaultAction&&this.viewport){if(!t[this.hash].draggingToZoom&&i.flickEnabled&&n.speed>=i.flickMinSpeed){var o=0;this.panHorizontal&&(o=i.flickMomentum*n.speed*Math.cos(n.direction));var s=0;this.panVertical&&(s=i.flickMomentum*n.speed*Math.sin(n.direction));var a=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),l=this.viewport.pointFromPixel(new e.Point(a.x-o,a.y-s));this.viewport.panTo(l,!1)}this.viewport.applyConstraints()}i.dblClickDragToZoom&&!0===t[this.hash].draggingToZoom&&(t[this.hash].draggingToZoom=!1)}function y(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function b(n){if(this.raiseEvent("canvas-press",{tracker:n.eventSource,pointerType:n.pointerType,position:n.position,insideElementPressed:n.insideElementPressed,insideElementReleased:n.insideElementReleased,originalEvent:n.originalEvent}),this.gestureSettingsByDeviceType(n.pointerType).dblClickDragToZoom){var i=t[this.hash].lastClickTime,r=e.now();if(null===i)return;r-i<this.dblClickTimeThreshold&&(t[this.hash].draggingToZoom=!0),t[this.hash].lastClickTime=null}}function x(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function B(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function _(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function C(e){var t,n,i,r={tracker:e.eventSource,pointerType:e.pointerType,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",r),this.viewport&&(!(t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom||r.preventDefaultPanAction&&r.preventDefaultZoomAction||(n=this.viewport.pointFromPixel(e.center,!0),t.zoomToRefPoint&&!r.preventDefaultPanAction&&(i=this.viewport.pointFromPixel(e.lastCenter,!0).minus(n),this.panHorizontal||(i.x=0),this.panVertical||(i.y=0),this.viewport.panBy(i,!0)),r.preventDefaultZoomAction||this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),this.viewport.applyConstraints()),t.pinchRotate&&!r.preventDefaultRotateAction)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),s=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);n=this.viewport.pointFromPixel(e.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(o-s)*(180/Math.PI),n,!0)}}function S(e){this.raiseEvent("canvas-focus",{tracker:e.eventSource,originalEvent:e.originalEvent})}function E(e){this.raiseEvent("canvas-blur",{tracker:e.eventSource,originalEvent:e.originalEvent})}function T(t){var n,i,r,o;(o=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=o,n={tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",n),!n.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),(i=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(r,i.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())),t.preventDefault=n.preventDefault):t.preventDefault=!0}function M(e){t[this.hash].mouseInside=!0,A(this),this.raiseEvent("container-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function F(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||l(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function I(n){!function(n){if(n._opening||!t[n.hash])return;if(n.autoResize||t[n.hash].forceResize){var r;if(n._autoResizePolling){r=i(n.container);var o=t[n.hash].prevContainerSize;r.equals(o)||(t[n.hash].needsResize=!0)}t[n.hash].needsResize&&function(n,i){var r,o=n.viewport,s=o.getZoom(),a=o.getCenter();if(o.resize(i,n.preserveImageSizeOnResize),o.panTo(a,!0),n.preserveImageSizeOnResize)r=t[n.hash].prevContainerSize.x/i.x;else{var l=new e.Point(0,0),A=new e.Point(t[n.hash].prevContainerSize.x,t[n.hash].prevContainerSize.y).distanceTo(l);r=new e.Point(i.x,i.y).distanceTo(l)/A*t[n.hash].prevContainerSize.x/i.x}o.zoomTo(s*r,null,!0),t[n.hash].prevContainerSize=i,t[n.hash].forceRedraw=!0,t[n.hash].needsResize=!1,t[n.hash].forceResize=!1}(n,r||i(n.container))}var s=n.viewport.update(),a=n.world.update()||s;s&&n.raiseEvent("viewport-change");n.referenceStrip&&(a=n.referenceStrip.update(n.viewport)||a);var c=t[n.hash].animating;!c&&a&&(n.raiseEvent("animation-start"),A(n));var u=c&&!a;u&&(t[n.hash].animating=!1);(a||u||t[n.hash].forceRedraw||n.world.needsDraw())&&(!function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(n),n._drawOverlays(),n.navigator&&n.navigator.update(n.viewport),t[n.hash].forceRedraw=!1,a&&n.raiseEvent("animation"));u&&(n.raiseEvent("animation-finish"),t[n.hash].mouseInside||l(n));t[n.hash].animating=a}(n),n.isOpen()?n._updateRequestId=s(n,I):n._updateRequestId=!1}function U(e,t){return e?e+t:t}function L(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,N(this)}function R(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,N(this)}function P(){t[this.hash].zooming=!1}function N(t){e.requestAnimationFrame(e.delegate(t,k))}function k(){var n,i,r;t[this.hash].zooming&&this.viewport&&(i=(n=e.now())-t[this.hash].lastZoomTime,r=Math.pow(t[this.hash].zoomFactor,i/1e3),this.viewport.zoomBy(r),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=n,N(this))}function D(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function O(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function H(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Q(){this.viewport&&this.viewport.goHome()}function z(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function G(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e+=this.rotationIncrement:e-=this.rotationIncrement,this.viewport.setRotation(e)}}function j(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e-=this.rotationIncrement:e+=this.rotationIncrement,this.viewport.setRotation(e)}}function V(){this.viewport.toggleFlip()}e.Viewer=function(r){var o,a,A=arguments,c=this;if(e.isPlainObject(r)||(r={id:A[0],xmlPath:A.length>1?A[1]:void 0,prefixUrl:A.length>2?A[2]:void 0,controls:A.length>3?A[3]:void 0,overlays:A.length>4?A[4]:void 0}),r.config&&(e.extend(!0,r,r.config),delete r.config),e.extend(!0,this,{id:r.id,hash:r.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,r),"undefined"===typeof this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for("undefined"!==typeof t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);c._showMessage(n)}),e.ControlDock.call(this,r),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(a=this.canvas.style).width="100%",a.height="100%",a.overflow="hidden",a.position="absolute",a.top="0px",a.left="0px",e.setElementTouchActionNone(this.canvas),""!==r.tabIndex&&(this.canvas.tabIndex=void 0===r.tabIndex?0:r.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,h),keyDownHandler:e.delegate(this,d),keyHandler:e.delegate(this,p),clickHandler:e.delegate(this,f),dblClickHandler:e.delegate(this,g),dragHandler:e.delegate(this,m),dragEndHandler:e.delegate(this,v),enterHandler:e.delegate(this,y),leaveHandler:e.delegate(this,w),pressHandler:e.delegate(this,b),releaseHandler:e.delegate(this,x),nonPrimaryPressHandler:e.delegate(this,B),nonPrimaryReleaseHandler:e.delegate(this,_),scrollHandler:e.delegate(this,T),pinchHandler:e.delegate(this,C),focusHandler:e.delegate(this,S),blurHandler:e.delegate(this,E)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,M),leaveHandler:e.delegate(this,F)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=i(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){t[c.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(e){c.source=c.world.getItemAt(0).source,t[c.hash].forceRedraw=!0,c._updateRequestId||(c._updateRequestId=s(c,I))}),this.world.addHandler("remove-item",function(e){c.world.getItemCount()?c.source=c.world.getItemAt(0).source:c.source=null,t[c.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(e){c.viewport&&c.viewport._setContentBounds(c.world.getHomeBounds(),c.world.getContentFactor())}),this.world.addHandler("item-index-change",function(e){c.source=c.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:r.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(o=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(o=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),o=0;o<this.customControls.length;o++)this.addControl(this.customControls[o].id,{anchor:this.customControls[o].anchor});e.requestAnimationFrame(function(){l(c)}),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(t,n){var i=this;if(this.close(),!t)return this;if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),"undefined"===typeof n||isNaN(n)||(this.initialPage=n),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(t)||(t=[t]),!t.length)return this;this._opening=!0;for(var o,s=t.length,a=0,l=0,A=function(){if(a+l===s)if(a){!i._firstOpen&&i.preserveViewport||(i.viewport.goHome(!0),i.viewport.update()),i._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),i.overlays&&!i.preserveOverlays)for(var n=0;n<i.overlays.length;n++)i.currentOverlays[n]=r(i,i.overlays[n]);i._drawOverlays(),i._opening=!1,i.raiseEvent("open",{source:e})}else i._opening=!1,i.raiseEvent("open-failed",o)},c=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var n=t.success;t.success=function(e){if(a++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)i.addOverlay(t.tileSource.overlays[r]);n&&n(e),A()};var r=t.error;t.error=function(e){l++,o||(o=e),r&&r(e),A()},i.addTiledImage(t)},u=0;u<t.length;u++)c(t[u]);return this},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),t[this.navigator.hash]=null,delete t[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?A(this):l(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},setAjaxHeaders:function(t,n){if(null===t&&(t={}),e.isPlainObject(t)){if(void 0===n&&(n=!0),this.ajaxHeaders=t,n){for(var i=0;i<this.world.getItemCount();i++)this.world.getItemAt(i)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var r in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[r].setAjaxHeaders(this.ajaxHeaders,!0)}}else console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},addButton:function(e){this.buttonGroup.addButton(e)},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(n){var i,r,o=document.body,s=o.style,a=document.documentElement.style,l=this;if(n===this.isFullPage())return this;var A={fullPage:n,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",A),A.preventDefaultAction)return this;if(n){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=s.margin,this.docMargin=a.margin,s.margin="0",a.margin="0",this.bodyPadding=s.padding,this.docPadding=a.padding,s.padding="0",a.padding="0",this.bodyWidth=s.width,this.docWidth=a.width,s.width="100%",a.width="100%",this.bodyHeight=s.height,this.docHeight=a.height,s.height="100%",a.height="100%",this.bodyDisplay=s.display,s.display="block",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,i=o.childNodes.length,r=0;r<i;r++)this.previousBody.push(o.childNodes[0]),o.removeChild(o.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,o.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),o.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,M)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,s.margin=this.bodyMargin,a.margin=this.docMargin,s.padding=this.bodyPadding,a.padding=this.docPadding,s.width=this.bodyWidth,a.width=this.docWidth,s.height=this.bodyHeight,a.height=this.docHeight,s.display=this.bodyDisplay,o.removeChild(this.element),i=this.previousBody.length,r=0;r<i;r++)o.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(o.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var c=0,u=function(){e.setPageScroll(l.pageScroll);var t=e.getPageScroll();++c<10&&(t.x!==l.pageScroll.x||t.y!==l.pageScroll.y)&&e.requestAnimationFrame(u)};e.requestAnimationFrame(u),t[this.hash].fullPage=!1,e.delegate(this,F)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:n}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var i={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",i),i.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&setTimeout(function(){n.navigator.update(n.viewport)}),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var n=this;t.replace&&(t.replaceItem=n.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(t.ajaxHeaders)||(t.ajaxHeaders={});var i={options:t};function r(e){for(var r=0;r<n._loadQueue.length;r++)if(n._loadQueue[r]===i){n._loadQueue.splice(r,1);break}0===n._loadQueue.length&&o(i),n.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function o(e){n.collectionMode&&(n.world.arrange({immediately:e.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}function s(){for(var t,i,r;n._loadQueue.length&&(t=n._loadQueue[0]).tileSource;){if(n._loadQueue.splice(0,1),t.options.replace){var s=n.world.getIndexOfItem(t.options.replaceItem);-1!==s&&(t.options.index=s),n.world.removeItem(t.options.replaceItem)}i=new e.TiledImage({viewer:n,source:t.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,flipped:t.options.flipped,compositeOperation:t.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:n.debugMode,subPixelRoundingForTransparency:n.subPixelRoundingForTransparency}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.navigator&&(r=e.extend({},t.options,{replace:!1,originalTiledImage:i,tileSource:t.tileSource}),n.navigator.addTiledImage(r)),n.world.addItem(i,{index:t.options.index}),0===n._loadQueue.length&&o(t),1!==n.world.getItemCount()||n.preserveViewport||n.viewport.goHome(!0),t.options.success&&t.options.success({item:i})}}e.isArray(t.tileSource)?setTimeout(function(){r({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})}):(this._loadQueue.push(i),function(t,n,i,r,o){var s=t;if("string"===e.type(n))if(n.match(/^\s*<.*>\s*$/))n=e.parseXml(n);else if(n.match(/^\s*[{[].*[}\]]\s*$/))try{var a=e.parseJSON(n);n=a}catch(A){}function l(e,t){e.ready?r(e):(e.addHandler("ready",function(){r(e)}),e.addHandler("open-failed",function(e){o({message:e.message,source:t})}))}setTimeout(function(){if("string"===e.type(n))(n=new e.TileSource({url:n,crossOriginPolicy:void 0!==i.crossOriginPolicy?i.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:i.ajaxHeaders?i.ajaxHeaders:t.ajaxHeaders,splitHashDataForPost:t.splitHashDataForPost,useCanvas:t.useCanvas,success:function(e){r(e.tileSource)}})).addHandler("open-failed",function(e){o(e)});else if(e.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===i.crossOriginPolicy&&void 0===t.crossOriginPolicy||(n.crossOriginPolicy=void 0!==i.crossOriginPolicy?i.crossOriginPolicy:t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var a=new e.TileSource(n);a.getTileUrl=n.getTileUrl,r(a)}else{var A=e.TileSource.determineType(s,n);if(!A)return void o({message:"Unable to load TileSource",source:n});var c=A.prototype.configure.apply(s,[n]);l(new A(c),n)}else l(n,n)})}(this,t.tileSource,t,function(e){i.tileSource=e,s()},function(e){e.options=t,r(e),s()}))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var i=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(i),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},forceResize:function(){t[this.hash].needsResize=!0,t[this.hash].forceResize=!0},bindSequenceControls:function(){var t=e.delegate(this,c),n=e.delegate(this,u),i=e.delegate(this,this.goToNextPage),r=e.delegate(this,this.goToPreviousPage),o=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:U(this.prefixUrl,o.previous.REST),srcGroup:U(this.prefixUrl,o.previous.GROUP),srcHover:U(this.prefixUrl,o.previous.HOVER),srcDown:U(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:U(this.prefixUrl,o.next.REST),srcGroup:U(this.prefixUrl,o.next.GROUP),srcHover:U(this.prefixUrl,o.next.HOVER),srcDown:U(this.prefixUrl,o.next.DOWN),onRelease:i,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,L),n=e.delegate(this,P),i=e.delegate(this,D),r=e.delegate(this,R),o=e.delegate(this,O),s=e.delegate(this,Q),a=e.delegate(this,z),l=e.delegate(this,G),A=e.delegate(this,j),h=e.delegate(this,V),d=e.delegate(this,c),p=e.delegate(this,u),f=this.navImages,g=[],m=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(m=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:U(this.prefixUrl,f.zoomIn.REST),srcGroup:U(this.prefixUrl,f.zoomIn.GROUP),srcHover:U(this.prefixUrl,f.zoomIn.HOVER),srcDown:U(this.prefixUrl,f.zoomIn.DOWN),onPress:t,onRelease:n,onClick:i,onEnter:t,onExit:n,onFocus:d,onBlur:p})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:U(this.prefixUrl,f.zoomOut.REST),srcGroup:U(this.prefixUrl,f.zoomOut.GROUP),srcHover:U(this.prefixUrl,f.zoomOut.HOVER),srcDown:U(this.prefixUrl,f.zoomOut.DOWN),onPress:r,onRelease:n,onClick:o,onEnter:r,onExit:n,onFocus:d,onBlur:p}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:U(this.prefixUrl,f.home.REST),srcGroup:U(this.prefixUrl,f.home.GROUP),srcHover:U(this.prefixUrl,f.home.HOVER),srcDown:U(this.prefixUrl,f.home.DOWN),onRelease:s,onFocus:d,onBlur:p})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:U(this.prefixUrl,f.fullpage.REST),srcGroup:U(this.prefixUrl,f.fullpage.GROUP),srcHover:U(this.prefixUrl,f.fullpage.HOVER),srcDown:U(this.prefixUrl,f.fullpage.DOWN),onRelease:a,onFocus:d,onBlur:p})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:U(this.prefixUrl,f.rotateleft.REST),srcGroup:U(this.prefixUrl,f.rotateleft.GROUP),srcHover:U(this.prefixUrl,f.rotateleft.HOVER),srcDown:U(this.prefixUrl,f.rotateleft.DOWN),onRelease:l,onFocus:d,onBlur:p})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:U(this.prefixUrl,f.rotateright.REST),srcGroup:U(this.prefixUrl,f.rotateright.GROUP),srcHover:U(this.prefixUrl,f.rotateright.HOVER),srcDown:U(this.prefixUrl,f.rotateright.DOWN),onRelease:A,onFocus:d,onBlur:p}))),this.showFlipControl&&g.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:U(this.prefixUrl,f.flip.REST),srcGroup:U(this.prefixUrl,f.flip.GROUP),srcHover:U(this.prefixUrl,f.flip.HOVER),srcDown:U(this.prefixUrl,f.flip.DOWN),onRelease:h,onFocus:d,onBlur:p})),m?(this.buttonGroup=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,H)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=g),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,n,i,s){var a;if(a=e.isPlainObject(t)?t:{element:t,location:n,placement:i,onDraw:s},t=e.getElement(a.element),o(this.currentOverlays,t)>=0)return this;var l=r(this,a);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(n,i,r){var s;return n=e.getElement(n),(s=o(this.currentOverlays,n))>=0&&(this.currentOverlays[s].update(i,r),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:n,location:i,placement:r})),this},removeOverlay:function(n){var i;return n=e.getElement(n),(i=o(this.currentOverlays,n))>=0&&(this.currentOverlays[i].destroy(),this.currentOverlays.splice(i,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:n})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),(n=o(this.currentOverlays,t))>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var t=e.pixelDensityRatio,n=e.getCurrentPixelDensityRatio();t!==n&&(e.pixelDensityRatio=n,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)},goToNextPage:function(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)},isAnimating:function(){return t[this.hash].animating}})}(s),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function n(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function i(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){var t={tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.viewer.raiseEvent("navigator-scroll",t),e.preventDefault=t.preventDefault}function o(e,t){s(e,"rotate("+t+"deg)")}function s(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(s){var a,l,A,c,u=s.viewer,h=this;function d(e,t){o(h.displayRegionContainer,e),o(h.displayRegion,-e),h.viewport.setRotation(e,t)}(s.element||s.id?(s.element?(s.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),s.element.id?s.id=s.element.id:s.id="navigator-"+e.now(),this.element=s.element):this.element=document.getElementById(s.id),s.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),s.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"===s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===s.position&&(s.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",(s=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:s.animationTime,autoResize:!1,minZoomImageRatio:1,background:s.background,opacity:s.opacity,borderColor:s.borderColor,displayRegionColor:s.displayRegionColor})).minPixelRatio=this.minPixelRatio=u.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!==e.ControlAnchor.NONE&&(A=this.element.style,c=this.borderWidth,A.margin="0px",A.border=c+"px solid "+s.borderColor,A.padding="0px",A.background=s.background,A.opacity=s.opacity,A.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+s.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default",e.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),u.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!==e.ControlAnchor.NONE,s.width&&s.height?(this.setWidth(s.width),this.setHeight(s.height)):this._resizeWithViewer&&(a=e.getElementSize(u.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a,l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate)&&(d(s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0,!0),s.viewer.addHandler("rotate",function(e){d(e.degrees,e.immediately)}));this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,i),scrollHandler:e.delegate(this,r),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){h.viewport&&h.viewport.goHome(!0)}),u.world.addHandler("item-index-change",function(e){window.setTimeout(function(){var t=h.world.getItemAt(e.previousIndex);h.world.setItemIndex(t,e.newIndex)},1)}),u.world.addHandler("remove-item",function(e){var t=e.item,n=h._getMatchingItem(t);n&&h.world.removeItem(n)}),this.update(u.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},setWidth:function(e){this.width=e,this.element.style.width="number"===typeof e?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(e){this.height=e,this.element.style.height="number"===typeof e?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){s(this.displayRegion,e),s(this.canvas,e),s(this.element,e)},update:function(t){var n,i,r,s,a,l;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(i=n.x*this.sizeRatio,r=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=i*r),this.updateSize()),t&&this.viewport){if(s=t.getBoundsNoRotate(!0),a=this.viewport.pixelFromPointNoRotate(s.getTopLeft(),!1),l=this.viewport.pixelFromPointNoRotate(s.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var A=t.getRotation(!0);o(this.displayRegion,-A)}var c=this.displayRegion.style;c.display=this.world.getItemCount()?"block":"none",c.top=a.y.toFixed(2)+"px",c.left=a.x.toFixed(2)+"px";var u=l.x-a.x,h=l.y-a.y;c.width=Math.round(Math.max(u,0))+"px",c.height=Math.round(Math.max(h,0))+"px"}},addTiledImage:function(t){var n=this,i=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;function r(){n._matchBounds(t,i)}t._originalForNavigator=i,n._matchBounds(t,i,!0),n._matchOpacity(t,i),n._matchCompositeOperation(t,i),i.addHandler("bounds-change",r),i.addHandler("clip-change",r),i.addHandler("opacity-change",function(){n._matchOpacity(t,i)}),i.addHandler("composite-operation-change",function(){n._matchCompositeOperation(t,i)})}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),i=0;i<n;i++)if((t=this.world.getItemAt(i))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var i=t.getBoundsNoRotate();e.setPosition(i.getTopLeft(),n),e.setWidth(i.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip()),e.setFlip(t.getFlip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(s),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var i,r=n.split("."),o=null,s=arguments,a=t;for(i=0;i<r.length-1;i++)a=a[r[i]]||{};return"string"!==typeof(o=a[r[i]])&&(e.console.error("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<s.length?s[t]:""})},setString:function(e,n){var i,r=e.split("."),o=t;for(i=0;i<r.length-1;i++)o[r[i]]||(o[r[i]]={}),o=o[r[i]];o[r[i]]=n}})}(s),function(e){e.Point=function(e,t){this.x="number"===typeof e?e:0,this.y="number"===typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){var i,r;if(n=n||new e.Point(0,0),t%90===0){switch(e.positiveModulo(t,360)){case 0:i=1,r=0;break;case 90:i=0,r=1;break;case 180:i=-1,r=0;break;case 270:i=0,r=-1}}else{var o=t*Math.PI/180;i=Math.cos(o),r=Math.sin(o)}var s=i*(this.x-n.x)-r*(this.y-n.y)+n.x,a=r*(this.x-n.x)+i*(this.y-n.y)+n.y;return new e.Point(s,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(s),function(e){e.TileSource=function(t,n,i,r,o,s){var a,l,A=this,c=arguments;if(a=e.isPlainObject(t)?t:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",function(e){A.success(e)}),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},setMaxLevel:function(e){this.maxLevel=e,this._memoizeLevelScale()},getLevelScale:function(e){return this._memoizeLevelScale(),this.getLevelScale(e)},_memoizeLevelScale:function(){var e,t={};for(e=0;e<=this.maxLevel;e++)t[e]=1/Math.pow(2,this.maxLevel-e);this.getLevelScale=function(e){return t[e]}},getNumTiles:function(t){var n=this.getLevelScale(t),i=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(i,r)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),i=1/n.x*e.pixelDensityRatio,r=1/n.y*e.pixelDensityRatio;return new e.Point(i,r)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,n){var i=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;e.console.assert(i,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(t),o=n.x*r,s=n.y*r,a=Math.floor(o/this.getTileWidth(t)),l=Math.floor(s/this.getTileHeight(t));n.x>=1&&(a=this.getNumTiles(t).x-1);return n.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(a,l)},getTileBounds:function(t,n,i,r){var o=this.dimensions.times(this.getLevelScale(t)),s=this.getTileWidth(t),a=this.getTileHeight(t),l=0===n?0:s*n-this.tileOverlap,A=0===i?0:a*i-this.tileOverlap,c=s+(0===n?1:2)*this.tileOverlap,u=a+(0===i?1:2)*this.tileOverlap,h=1/o.x;return c=Math.min(c,o.x-l),u=Math.min(u,o.y-A),r?new e.Rect(0,0,c,u):new e.Rect(l*h,A*h,c*h,u*h)},getImageInfo:function(t){var n,i,r,o,s,a,l,A=this;t&&(l=(a=(s=t.split("/"))[s.length-1]).lastIndexOf("."))>-1&&(s[s.length-1]=a.slice(0,l));var c=null;if(this.splitHashDataForPost){var u=t.indexOf("#");-1!==u&&(c=t.substring(u+1),t=t.substr(0,u))}i=function(n){"string"===typeof n&&(n=e.parseXml(n));var i=e.TileSource.determineType(A,n,t);i?(void 0===(o=i.prototype.configure.apply(A,[n,t,c])).ajaxWithCredentials&&(o.ajaxWithCredentials=A.ajaxWithCredentials),r=new i(o),A.ready=!0,A.raiseEvent("ready",{tileSource:r})):A.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(n=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:n,callback:i})):e.makeAjaxRequest({url:t,postData:c,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var n=function(t){var n,i,r=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw n=404===(o=t.status)?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,n));if(r.match(/^\s*<.*/))try{i=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(s){i=t.responseText}else if(r.match(/\s*[{[].*/))try{i=e.parseJSON(r)}catch(s){i=r}else i=r;return i}(t);i(n)},error:function(n,i){var r;try{r="HTTP "+n.status+" attempting to load TileSource: "+t}catch(o){r=("undefined"!==typeof i&&i.toString?i.toString():"Unknown error")+" attempting to load TileSource: "+t}e.console.error(r),A.raiseEvent("open-failed",{message:r,source:t,postData:c})}})},supports:function(e,t){return!1},configure:function(e,t,n){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},getTilePostData:function(e,t,n){return null},getTileAjaxHeaders:function(e,t,n){return{}},getTileHashKey:function(e,t,n,i,r,o){function s(e){return r?e+"+"+JSON.stringify(r):e}return s("string"!==typeof i?e+"/"+t+"_"+n:i)},tileExists:function(e,t,n){var i=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<i.x&&n<i.y},hasTransparency:function(e,t,n,i){return!!e||t.match(".png")},downloadTileStart:function(t){var n=t.userData,i=new Image;n.image=i,n.request=null;var r=function(e){i?(i.onload=i.onerror=i.onabort=null,t.finish(e?null:i,n.request,e)):t.finish(null,n.request,"Image load failed: undefined Image instance.")};i.onload=function(){r()},i.onabort=i.onerror=function(){r("Image load aborted.")},t.loadWithAjax?n.request=e.makeAjaxRequest({url:t.src,withCredentials:t.ajaxWithCredentials,headers:t.ajaxHeaders,responseType:"arraybuffer",postData:t.postData,success:function(e){var t;try{t=new window.Blob([e.response])}catch(s){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===s.name&&n){var o=new n;o.append(e.response),t=o.getBlob()}}0===t.size?r("Empty image response."):i.src=(window.URL||window.webkitURL).createObjectURL(t)},error:function(e){r("Image load aborted - XHR error")}}):(!1!==t.crossOriginPolicy&&(i.crossOrigin=t.crossOriginPolicy),i.src=t.src)},downloadTileAbort:function(e){e.userData.request&&e.userData.request.abort();var t=e.userData.image;e.userData.image&&(t.onload=t.onerror=t.onabort=null)},createTileCache:function(e,t,n){e._data=t},destroyTileCache:function(e){e._data=null,e._renderedContext=null},getTileCacheData:function(e){return e._data},getTileCacheDataAsImage:function(e){return e._data},getTileCacheDataAsContext2D:function(e){if(!e._renderedContext){var t=document.createElement("canvas");t.width=e._data.width,t.height=e._data.height,e._renderedContext=t.getContext("2d"),e._renderedContext.drawImage(e._data,0,0),e._data=null}return e._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,i){var r;for(r in s)if(r.match(/.+TileSource$/)&&e.isFunction(s[r])&&e.isFunction(s[r].prototype.supports)&&s[r].prototype.supports.call(t,n,i))return s[r];return e.console.error("No TileSource was able to open %s %s",i,n),null}}(s),function(e){function t(t,n){var i,r,o=n.Image,s=o.Url,a=o.Format,l=o.Size,A=o.DisplayRect||[],c=parseInt(l.Width,10),u=parseInt(l.Height,10),h=parseInt(o.TileSize,10),d=parseInt(o.Overlap,10),p=[];for(r=0;r<A.length;r++)i=A[r].Rect,p.push(new e.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return e.extend(!0,{width:c,height:u,tileSize:h,tileOverlap:d,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:p},n)}e.DziTileSource=function(t,n,i,r,o,s,a,l,A){var c,u,h,d;if(d=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=d.tilesUrl,this.fileFormat=d.fileFormat,this.displayRects=d.displayRects,this.displayRects)for(c=this.displayRects.length-1;c>=0;c--)for(h=(u=this.displayRects[c]).minLevel;h<=u.maxLevel;h++)this._levelRects[h]||(this._levelRects[h]=[]),this._levelRects[h].push(u);e.TileSource.apply(this,[d])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!==e.documentElement.localName&&"Image"!==e.documentElement.tagName||(n=e.documentElement.namespaceURI)),-1!==(n=(n||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(n,i,r){var o;return o=e.isPlainObject(n)?t(this,n):function(n,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s,a,l,A=i.documentElement,c=A.localName||A.tagName,u=i.documentElement.namespaceURI,h=null,d=[];if("Image"===c)try{if(void 0===(a=A.getElementsByTagName("Size")[0])&&(a=A.getElementsByTagNameNS(u,"Size")[0]),h={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:A.getAttribute("Url"),Format:A.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(A.getAttribute("Overlap"),10),TileSize:parseInt(A.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(h.Image.Format))throw new Error(e.getString("Errors.ImageFormat",h.Image.Format.toUpperCase()));for(void 0===(r=A.getElementsByTagName("DisplayRect"))&&(r=A.getElementsByTagNameNS(u,"DisplayRect")[0]),l=0;l<r.length;l++)void 0===(s=(o=r[l]).getElementsByTagName("Rect")[0])&&(s=o.getElementsByTagNameNS(u,"Rect")[0]),d.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return d.length&&(h.Image.DisplayRect=d),t(n,h)}catch(f){throw f instanceof Error?f:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===c)throw new Error(e.getString("Errors.Dzc"));if("Error"===c){var p=A.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(p)}}throw new Error(e.getString("Errors.Dzi"))}(this,n),i&&!o.tilesUrl&&(o.tilesUrl=i.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),-1!==i.search(/\.(dzi|xml|js)\?/)?o.queryParams=i.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var i,r,o,s,a,l,A,c=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!c||!c.length)return!0;for(A=c.length-1;A>=0;A--)if(!(e<(i=c[A]).minLevel||e>i.maxLevel)&&(r=this.getLevelScale(e),o=i.x*r,s=i.y*r,a=o+i.width*r,l=s+i.height*r,o=Math.floor(o/this._tileWidth),s=Math.floor(s/this._tileWidth),a=Math.ceil(a/this._tileWidth),l=Math.ceil(l/this._tileWidth),o<=t&&t<a&&s<=n&&n<l))return!0;return!1}})}(s),function(e){function t(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,n=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),i=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(i=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(i=-1!==e.extraFeatures.indexOf("sizeByWh")),!n||i}function n(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e._id+"/full/"+e.sizes[n].width+","+(3===e.version?e.sizes[n].height:"")+"/0/default."+e.tileFormat,width:e.sizes[n].width,height:e.sizes[n].height});return t.sort(function(e,t){return e.width-t.width})}function i(t,n,r){var o,s;if(3===t.nodeType&&r)(s=t.nodeValue.trim()).match(/^\d*$/)&&(s=Number(s)),n[r]?(e.isArray(n[r])||(n[r]=[n[r]]),n[r].push(s)):n[r]=s;else if(1===t.nodeType)for(o=0;o<t.childNodes.length;o++)i(t.childNodes[o],n,t.nodeName)}e.IIIFTileSource=function(i){if(e.extend(!0,this,i),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(i.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=i.version,this.tile_width&&this.tile_height)i.tileWidth=this.tile_width,i.tileHeight=this.tile_height;else if(this.tile_width)i.tileSize=this.tile_width;else if(this.tile_height)i.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)i.tileWidth=this.tiles[0].width,i.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var r=0;r<this.tiles.length;r++)for(var o=0;o<this.tiles[r].scaleFactors.length;o++){var s=this.tiles[r].scaleFactors[o];this.scale_factors.push(s),i.tileSizePerScaleFactor[s]={width:this.tiles[r].width,height:this.tiles[r].height||this.tiles[r].width}}}else if(t(i)){for(var a=Math.min(this.height,this.width),l=[256,512,1024],A=[],c=0;c<l.length;c++)l[c]<=a&&A.push(l[c]);A.length>0?i.tileSize=Math.max.apply(null,A):i.tileSize=a}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,i.levels=n(this),e.extend(!0,i,{width:i.levels[i.levels.length-1].width,height:i.levels[i.levels.length-1].height,tileSize:Math.max(i.height,i.width),tileOverlap:0,minLevel:0,maxLevel:i.levels.length-1}),this.levels=i.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!i.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var u=Math.max.apply(null,this.scale_factors);i.maxLevel=Math.round(Math.log(u)*Math.LOG2E)}else i.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));if(this.sizes){var h=this.sizes.length;h!==i.maxLevel&&h!==i.maxLevel+1||(this.levelSizes=this.sizes.slice().sort(function(e,t){return e.width-t.width}),h===i.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}e.TileSource.apply(this,[i])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!(!e.protocol||"http://iiif.io/api/image"!==e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!==e["@context"]&&"http://iiif.io/api/image/1/context.json"!==e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!==e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!==e.documentElement.namespaceURI))))},configure:function(t,n,r){if(e.isPlainObject(t)){if(t["@context"]){var o=t["@context"];if(Array.isArray(o))for(var a=0;a<o.length;a++)if("string"===typeof o[a]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(o[a])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===o[a])){o=o[a];break}switch(o){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":t.version=1;break;case"http://iiif.io/api/image/2/context.json":t.version=2;break;case"http://iiif.io/api/image/3/context.json":t.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=n.replace("/info.json",""),t.version=1;if(t.preferredFormats)for(var l=0;l<t.preferredFormats.length;l++)if(s.imageFormatSupported(t.preferredFormats[l])){t.tileFormat=t.preferredFormats[l];break}return t}var A=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var n=t.documentElement,r=n.tagName,o=null;if("info"===r)try{return i(n,o={}),o}catch(s){throw s instanceof Error?s:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(t);return A["@context"]="http://iiif.io/api/image/1.0/context.json",A["@id"]=n.replace("/info.xml",""),A.version=1,A},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){if(this.emulateLegacyImagePyramid)return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0);if(this.levelSizes){var n=this.levelSizes[t],i=Math.ceil(n.width/this.getTileWidth(t)),r=Math.ceil(n.height/this.getTileHeight(t));return new e.Point(i,r)}return e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){var i=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;e.console.assert(i,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.levelSizes[t].width,o=n.x*r,s=n.y*r,a=Math.floor(o/this.getTileWidth(t)),l=Math.floor(s/this.getTileHeight(t));n.x>=1&&(a=this.getNumTiles(t).x-1);return n.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(a,l)}return e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}var r,o,s,a,l,A,c,u,h,d,p,f,g,m,v,y=Math.pow(.5,this.maxLevel-e);return this.levelSizes?(r=this.levelSizes[e].width,o=this.levelSizes[e].height):(r=Math.ceil(this.width*y),o=Math.ceil(this.height*y)),s=this.getTileWidth(e),a=this.getTileHeight(e),l=Math.round(s/y),A=Math.round(a/y),v=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,r<s&&o<a?(f=2===this.version&&r===this.width?"full":3===this.version&&r===this.width&&o===this.height?"max":3===this.version?r+","+o:r+",",c="full"):(u=t*l,h=n*A,d=Math.min(l,this.width-u),p=Math.min(A,this.height-h),c=0===t&&0===n&&d===this.width&&p===this.height?"full":[u,h,d,p].join(","),g=Math.min(s,r-t*s),m=Math.min(a,o-n*a),f=2===this.version&&g===this.width?"full":3===this.version&&g===this.width&&m===this.height?"max":3===this.version?g+","+m:g+","),[this._id,c,f,"0",v].join("/")},__testonly__:{canBeTiled:t,constructLevels:n}})}(s),function(e){e.OsmTileSource=function(t,n,i,r,o){var s;(s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,e.TileSource.apply(this,[s])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"===e.type},configure:function(e,t,n){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(s),function(e){e.TmsTileSource=function(t,n,i,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l=256*Math.ceil(s.width/256),A=256*Math.ceil(s.height/256);a=l>A?l/256:A/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=l,s.height=A,e.TileSource.apply(this,[s])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"===e.type},configure:function(e,t,n){return e},getTileUrl:function(e,t,n){var i=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(i-n)+".png"}})}(s),function(e){e.ZoomifyTileSource=function(e){"undefined"===typeof e.tileSize&&(e.tileSize=256),"undefined"===typeof e.fileFormat&&(e.fileFormat="jpg",this.fileFormat=e.fileFormat);var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,s.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var i=0,r={},o=0;o<e;o++)i+=(r=this.gridSize[o]).x*r.y;return i+=(r=this.gridSize[e]).x*n+t},supports:function(e,t){return e.type&&"zoomifytileservice"===e.type},configure:function(e,t,n){return e},getTileUrl:function(e,t,n){var i,r=this._calculateAbsoluteTileNumber(e,t,n);return i=Math.floor(r/256),this.tilesUrl+"TileGroup"+i+"/"+e+"-"+t+"-"+n+"."+this.fileFormat}})}(s),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var n,i,r;e.isArray(t)&&(n={type:"legacy-image-pyramid",levels:t}),n.levels=function(t){var n,i,r=[];for(i=0;i<t.length;i++)(n=t[i]).height&&n.width&&n.url?r.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return r.sort(function(e,t){return e.height-t.height})}(n.levels),n.levels.length>0?(i=n.levels[n.levels.length-1].width,r=n.levels[n.levels.length-1].height):(i=0,r=0,e.console.error("No supported image formats found")),e.extend(!0,n,{width:i,height:r,tileSize:Math.max(r,i),tileOverlap:0,minLevel:0,maxLevel:n.levels.length>0?n.levels.length-1:0}),e.TileSource.apply(this,[n]),this.levels=n.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"===e.type||e.documentElement&&"legacy-image-pyramid"===e.documentElement.getAttribute("type")},configure:function(n,i,r){return e.isPlainObject(n)?t(this,n):function(n,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s=i.documentElement,a=s.tagName,l=null,A=[];if("image"===a)try{for(l={type:s.getAttribute("type"),levels:[]},A=s.getElementsByTagName("level"),o=0;o<A.length;o++)r=A[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return t(n,l)}catch(c){throw c instanceof Error?c:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===a)throw new Error("Error: "+i)}throw new Error("Unknown element "+a)}(this,n)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}})}(s),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t,n){return e},getImageInfo:function(t){var n=this._image=new Image,i=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",function(){i.width=n.naturalWidth,i.height=n.naturalHeight,i.aspectRatio=i.width/i.height,i.dimensions=new e.Point(i.width,i.height),i._tileWidth=i.width,i._tileHeight=i.height,i.tileOverlap=0,i.minLevel=0,i.levels=i._buildLevels(),i.maxLevel=i.levels.length-1,i.ready=!0,i.raiseEvent("ready",{tileSource:i})}),e.addEvent(n,"error",function(){i.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})}),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i},getContext2D:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].context2D),i},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var t=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=this._image.naturalWidth,i=this._image.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=n,r.height=i,o.drawImage(this._image,0,0,n,i),t[0].context2D=o,delete this._image,e.isCanvasTainted(r))return t;for(;n>=2&&i>=2;){n=Math.floor(n/2),i=Math.floor(i/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n,s.height=i,a.drawImage(r,0,0,n,i),t.splice(0,0,{context2D:a,width:n,height:i}),r=s,o=a}return t},_freeupCanvasMemory:function(){for(var e=0;e<this.levels.length;e++)this.levels[e].context2D&&(this.levels[e].context2D.canvas.height=0,this.levels[e].context2D.canvas.width=0)}})}(s),function(e){e.TileSourceCollection=function(t,n,i,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(s),function(e){function t(n){e.requestAnimationFrame(function(){!function(n){var i;n.shouldFade&&(i=1-(e.now()-n.fadeBeginTime)/n.fadeLength,i=Math.min(1,i),i=Math.max(0,i),n.imgGroup&&e.setElementOpacity(n.imgGroup,i,!0),i>0&&t(n))}(n)})}function n(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState===e.ButtonState.REST&&(!function(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState===e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState===e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function i(n,i){n.element.disabled||(i<=e.ButtonState.HOVER&&n.currentState===e.ButtonState.DOWN&&(n.imgDown&&(n.imgDown.style.visibility="hidden"),n.currentState=e.ButtonState.HOVER),i<=e.ButtonState.GROUP&&n.currentState===e.ButtonState.HOVER&&(n.imgHover&&(n.imgHover.style.visibility="hidden"),n.currentState=e.ButtonState.GROUP),i<=e.ButtonState.REST&&n.currentState===e.ButtonState.GROUP&&(!function(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout(function(){t(n)},n.fadeDelay)}(n),n.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var r=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(n(r,e.ButtonState.DOWN),r.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||n(r,e.ButtonState.HOVER)},focusHandler:function(e){r.tracker.enterHandler(e),r.raiseEvent("focus",{originalEvent:e.originalEvent})},leaveHandler:function(t){i(r,e.ButtonState.GROUP),t.insideElementPressed&&r.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){r.tracker.leaveHandler(e),r.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){n(r,e.ButtonState.DOWN),r.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(i(r,e.ButtonState.HOVER),r.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?i(r,e.ButtonState.GROUP):n(r,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&r.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){13===e.keyCode?(r.raiseEvent("click",{originalEvent:e.originalEvent}),r.raiseEvent("release",{originalEvent:e.originalEvent}),e.preventDefault=!0):e.preventDefault=!1}}),i(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){n(this,e.ButtonState.GROUP)},notifyGroupExit:function(){i(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(s),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,i=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",n=0;n<i.length;n++)this.element.appendChild(i[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},leaveHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(e){this.buttons.push(e),this.element.appendChild(e.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var e=this.buttons.pop();this.element.removeChild(e.element),e.destroy()}this.tracker.destroy(),this.element=null}}}(s),function(e){e.Rect=function(t,n,i,r,o){var s,a;this.x="number"===typeof t?t:0,this.y="number"===typeof n?n:0,this.width="number"===typeof i?i:0,this.height="number"===typeof r?r:0,this.degrees="number"===typeof o?o:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(s=this.getTopRight(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(s=this.getBottomRight(),this.x=s.x,this.y=s.y,this.degrees-=180):this.degrees>=90&&(s=this.getBottomLeft(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(t,n,i){var r=t.distanceTo(n),o=t.distanceTo(i),s=n.minus(t),a=Math.atan(s.y/s.x);return s.x<0?a+=Math.PI:s.y<0&&(a+=2*Math.PI),new e.Rect(t.x,t.y,r,o,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),i=t.getBoundingBox(),r=Math.min(n.x,i.x),o=Math.min(n.y,i.y),s=Math.max(n.x+n.width,i.x+i.width),a=Math.max(n.y+n.height,i.y+i.height);return new e.Rect(r,o,s-r,a-o)},intersection:function(t){var n=1e-10,i=[],r=this.getTopLeft();t.containsPoint(r,n)&&i.push(r);var o=this.getTopRight();t.containsPoint(o,n)&&i.push(o);var s=this.getBottomLeft();t.containsPoint(s,n)&&i.push(s);var a=this.getBottomRight();t.containsPoint(a,n)&&i.push(a);var l=t.getTopLeft();this.containsPoint(l,n)&&i.push(l);var A=t.getTopRight();this.containsPoint(A,n)&&i.push(A);var c=t.getBottomLeft();this.containsPoint(c,n)&&i.push(c);var u=t.getBottomRight();this.containsPoint(u,n)&&i.push(u);for(var h=this._getSegments(),d=t._getSegments(),p=0;p<h.length;p++)for(var f=h[p],g=0;g<d.length;g++){var m=d[g],v=y(f[0],f[1],m[0],m[1]);v&&i.push(v)}function y(t,i,r,o){var s=i.minus(t),a=o.minus(r),l=-a.x*s.y+s.x*a.y;if(0===l)return null;var A=(s.x*(t.y-r.y)-s.y*(t.x-r.x))/l,c=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/l;return-1e-10<=A&&A<=1-n&&-1e-10<=c&&c<=1-n?new e.Point(t.x+c*s.x,t.y+c*s.y):null}if(0===i.length)return null;for(var w=i[0].x,b=i[0].x,x=i[0].y,B=i[0].y,_=1;_<i.length;_++){var C=i[_];C.x<w&&(w=C.x),C.x>b&&(b=C.x),C.y<x&&(x=C.y),C.y>B&&(B=C.y)}return new e.Rect(w,x,b-w,B-x)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),i=this.getBottomRight();return[[e,t],[t,i],[i,n],[n,e]]},rotate:function(t,n){if(0===(t=e.positiveModulo(t,360)))return this.clone();n=n||this.getCenter();var i=this.getTopLeft().rotate(t,n),r=this.getTopRight().rotate(t,n).minus(i);r=r.apply(function(e){return Math.abs(e)<1e-15?0:e});var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new e.Rect(i.x,i.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),i=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(t.x,n.x,i.x,r.x),s=Math.max(t.x,n.x,i.x,r.x),a=Math.min(t.y,n.y,i.y,r.y),l=Math.max(t.y,n.y,i.y,r.y);return new e.Rect(o,a,s-o,l-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),i=Math.floor(t.y),r=Math.ceil(t.width+t.x-n),o=Math.ceil(t.height+t.y-i);return new e.Rect(n,i,r,o)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),i=this.getTopRight(),r=this.getBottomLeft(),o=i.minus(n),s=r.minus(n);return(e.x-n.x)*o.x+(e.y-n.y)*o.y>=-t&&(e.x-i.x)*o.x+(e.y-i.y)*o.y<=t&&(e.x-n.x)*s.x+(e.y-n.y)*s.y>=-t&&(e.x-r.x)*s.x+(e.y-r.y)*s.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(s),function(e){var t={};function n(e){var t;e.quick&&(t="horizontal"===this.scroll?Math.floor(e.position.x/(this.panelWidth+4)):Math.floor(e.position.y/this.panelHeight),this.viewer.goToPage(t));this.element.focus()}function i(t){if(this.dragging=!0,this.element){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-t.delta.x>0?n>-(r-a.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",o(this,a.x,n+2*t.delta.x)):-t.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*t.delta.x+"px",o(this,a.x,n+2*t.delta.x)):-t.delta.y>0?i>-(s-a.y)&&(this.element.style.marginTop=i+2*t.delta.y+"px",o(this,a.y,i+2*t.delta.y)):-t.delta.y<0&&i<0&&(this.element.style.marginTop=i+2*t.delta.y+"px",o(this,a.y,i+2*t.delta.y))}}function r(t){if(this.element){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?t.scroll>0?n>-(r-a.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",o(this,a.x,n-60*t.scroll)):t.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*t.scroll+"px",o(this,a.x,n-60*t.scroll)):t.scroll<0?i>a.y-s&&(this.element.style.marginTop=i+60*t.scroll+"px",o(this,a.y,i+60*t.scroll)):t.scroll>0&&i<0&&(this.element.style.marginTop=i+60*t.scroll+"px",o(this,a.y,i+60*t.scroll)),t.preventDefault=!0}}function o(t,n,i){var r,o,s,a,l,A;for(r="horizontal"===t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(n/r)+5,l=o=(o=(s=Math.ceil((Math.abs(i)+n)/r)+1)-o)<0?0:o;l<s&&l<t.panels.length;l++)if(!(A=t.panels[l]).activePanel){var c,u=t.viewer.tileSources[l];c=u.referenceStripThumbnailUrl?{type:"image",url:u.referenceStripThumbnailUrl}:u,a=new e.Viewer({id:A.id,tileSources:[c],element:A,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,useCanvas:t.useCanvas}),e.setElementPointerEventsNone(a.canvas),e.setElementPointerEventsNone(a.container),a.innerTracker.setTracking(!1),a.outerTracker.setTracking(!1),t.miniViewers[A.id]=a,A.activePanel=!0}}function s(e){var t=e.eventSource.element;"horizontal"===this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px"}function a(t){var n=t.eventSource.element;"horizontal"===this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px"}function l(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 38:case 39:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 40:case 37:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}function A(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 61:case 48:case 119:case 87:case 100:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 45:case 115:case 83:case 97:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}e.ReferenceStrip=function(c){var u,h,d,p=c.viewer,f=e.getElementSize(p.element);for(c.id||(c.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=c.id,this.element.className="referencestrip"),c=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},c,{element:this.element}),e.extend(this,c),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(h=this.element.style).marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=p,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,n),dragHandler:e.delegate(this,i),scrollHandler:e.delegate(this,r),enterHandler:e.delegate(this,s),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,l),keyHandler:e.delegate(this,A),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),c.width&&c.height?(this.element.style.width=c.width+"px",this.element.style.height=c.height+"px",p.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===c.scroll?(this.element.style.width=f.x*c.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=f.y*c.sizeRatio+"px",p.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*c.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=f.x*c.sizeRatio+"px",p.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},d=0;d<p.tileSources.length;d++)(u=e.makeNeutralElement("div")).id=this.element.id+"-"+d,u.style.width=this.panelWidth+"px",u.style.height=this.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",e.setElementTouchActionNone(u),e.setElementPointerEventsNone(u),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);o(this,"vertical"===this.scroll?f.y:f.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(t){var n,i=this.element.querySelector("#"+this.element.id+"-"+t),r=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),A=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==i&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=i,this.currentSelected.style.background="#999","horizontal"===this.scroll?(n=Number(t)*(this.panelWidth+3))>A+r.x-this.panelWidth?(n=Math.min(n,a-r.x),this.element.style.marginLeft=-n+"px",o(this,r.x,-n)):n<A&&(n=Math.max(0,n-r.x/2),this.element.style.marginLeft=-n+"px",o(this,r.x,-n)):(n=Number(t)*(this.panelHeight+3))>c+r.y-this.panelHeight?(n=Math.min(n,l-r.y),this.element.style.marginTop=-n+"px",o(this,r.y,-n)):n<c&&(n=Math.max(0,n-r.y/2),this.element.style.marginTop=-n+"px",o(this,r.y,-n)),this.currentPage=t,s.call(this,{eventSource:this.tracker}))},update:function(){return!!t[this.id].animating},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(s),function(e){e.DisplayRect=function(t,n,i,r,o,s){e.Rect.apply(this,[t,n,i,r]),this.minLevel=o,this.maxLevel=s},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(s),function(e){e.Spring=function(t){var n=arguments;"object"!==typeof t&&(t={initial:n.length&&"number"===typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"===typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"===typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"===typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var t,n;this.current.time=e.now(),this._exponential?(t=this.start._logValue,n=this.target._logValue):(t=this.start.value,n=this.target.value);var i,r,o=this.current.time>=this.target.time?n:t+(n-t)*(i=this.springStiffness,r=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(i*-r))/(1-Math.exp(-i))),s=this.current.value;return this._exponential?this.current.value=Math.exp(o):this.current.value=o,s!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(s),function(e){e.ImageJob=function(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},t),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var e=this,t=this.abort;this.jobId=window.setTimeout(function(){e.finish(null,null,"Image load exceeded timeout ("+e.timeout+" ms)")},this.timeout),this.abort=function(){e.source.downloadTileAbort(e),"function"===typeof t&&t()},this.source.downloadTileStart(this)},finish:function(e,t,n){this.data=e,this.request=t,this.errorMsg=n,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(t){if(!t.source){e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var n=e.TileSource.prototype;t.source={downloadTileStart:n.downloadTileStart,downloadTileAbort:n.downloadTileAbort}}var i=this,r={src:t.src,tile:t.tile||{},source:t.source,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,postData:t.postData,callback:function(e){!function(e,t,n){""!==t.errorMsg&&(null===t.data||void 0===t.data)&&t.tries<1+e.tileRetryMax&&e.failedTiles.push(t);var i;e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&((i=e.jobQueue.shift()).start(),e.jobsInProgress++);e.tileRetryMax>0&&0===e.jobQueue.length&&(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.failedTiles.length>0&&(i=e.failedTiles.shift(),setTimeout(function(){i.start()},e.tileRetryDelay),e.jobsInProgress++);n(t.data,t.errorMsg,t.request)}(i,e,t.callback)},abort:t.abort,timeout:this.timeout},o=new e.ImageJob(r);!this.jobLimit||this.jobsInProgress<this.jobLimit?(o.start(),this.jobsInProgress++):this.jobQueue.push(o)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"===typeof t.abort&&t.abort()}this.jobQueue=[]}}}(s),function(e){e.Tile=function(t,n,i,r,o,s,a,l,A,c,u,h){this.level=t,this.x=n,this.y=i,this.bounds=r,this.sourceBounds=c,this.exists=o,this._url=s,this.postData=u,this.context2D=a,this.loadWithAjax=l,this.ajaxHeaders=A,void 0===h&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),h=e.TileSource.prototype.getTileHashKey(t,n,i,s,A,u)),this.cacheKey=h,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(t){if(this.cacheImageRecord)if(this.loaded){if(!this.element){var n=this.getImage();if(!n)return;this.element=e.makeNeutralElement("div"),this.imgElement=n.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==t&&t.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)}else e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());else e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return"function"===typeof this._url?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(t,n,i,r,o,s){var a,l,A,c=this.position.times(e.pixelDensityRatio),u=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(a=this.getCanvasContext(),this.loaded&&a?(t.save(),t.globalAlpha=this.opacity,"number"===typeof i&&1!==i&&(c=c.times(i),u=u.times(i)),r instanceof e.Point&&(c=c.plus(r)),1===t.globalAlpha&&this.hasTransparency&&(o&&(c.x=Math.round(c.x),c.y=Math.round(c.y),u.x=Math.round(u.x),u.y=Math.round(u.y)),t.clearRect(c.x,c.y,u.x,u.y)),n({context:t,tile:this,rendered:a}),this.sourceBounds?(l=Math.min(this.sourceBounds.width,a.canvas.width),A=Math.min(this.sourceBounds.height,a.canvas.height)):(l=a.canvas.width,A=a.canvas.height),t.translate(c.x+u.x/2,0),this.flipped&&t.scale(-1,1),t.drawImage(a.canvas,0,0,l,A,-u.x/2,c.y,u.x,u.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,i){var r=Math.max(1,Math.ceil((i.x-n.x)/2)),o=Math.max(1,Math.ceil((i.y-n.y)/2));return new e.Point(r,o).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply(function(e){return e%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(s),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,i){var r;r=e.isPlainObject(t)?t:{element:t,location:n,placement:i},this.element=r.element,this.style=r.element.style,this._init(r)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var i=e.Placement.properties[this.placement];i&&(i.isHorizontallyCentered?t.x-=n.x/2:i.isRight&&(t.x-=n.x),i.isVerticallyCentered?t.y-=n.y/2:i.isBottom&&(t.y-=n.y))},destroy:function(){var t=this.element,n=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(n.display="none",document.body.appendChild(t))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var i=e.getCssPropertyWithVendorPrefix("transformOrigin"),r=e.getCssPropertyWithVendorPrefix("transform");i&&r&&(n[i]="",n[r]="")},drawHTML:function(t,n){var i=this.element;i.parentNode!==t&&(i.prevElementParent=i.parentNode,i.prevNextSibling=i.nextSibling,t.appendChild(i),this.style.position="absolute",this.size=e.getElementSize(i));var r=this._getOverlayPositionAndSize(n),o=r.position,s=this.size=r.size,a=r.rotate;if(this.onDraw)this.onDraw(o,s,this.element);else{var l=this.style;l.left=o.x+"px",l.top=o.y+"px",null!==this.width&&(l.width=s.x+"px"),null!==this.height&&(l.height=s.y+"px");var A=e.getCssPropertyWithVendorPrefix("transformOrigin"),c=e.getCssPropertyWithVendorPrefix("transform");A&&c&&(a?(l[A]=this._getTransformOrigin(),l[c]="rotate("+a+"deg)"):(l[A]="",l[c]="")),l.display="block"}},_getOverlayPositionAndSize:function(t){var n=t.pixelFromPoint(this.location,!0),i=this._getSizeInPixels(t);this.adjust(n,i);var r=0;if(t.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new e.Rect(n.x,n.y,i.x,i.y),s=this._getBoundingBox(o,t.getRotation(!0));n=s.getTopLeft(),i=s.getSize()}else r=t.getRotation(!0);return{position:n,size:i,rotate:r}},_getSizeInPixels:function(t){var n=this.size.x,i=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=r.x),null!==this.height&&(i=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=e.getElementSize(this.element);null===this.width&&(n=o.x),null===this.height&&(i=o.y)}return new e.Point(n,i)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),i=e.Placement.properties[this.placement];return i&&(i.isHorizontallyCentered?n.x+=t.width/2:i.isRight&&(n.x+=t.width),i.isVerticallyCentered?n.y+=t.height/2:i.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n?(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom"),t):t},update:function(t,n){var i=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:i.location||this.location,placement:void 0!==i.placement?i.placement:this.placement,onDraw:i.onDraw||this.onDraw,checkResize:i.checkResize||this.checkResize,width:void 0!==i.width?i.width:this.width,height:void 0!==i.height?i.height:this.height,rotationMode:i.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,i=this.height;if(null===n||null===i){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=r.x),null===i&&(i=r.y)}var o=this.location.clone();return this.adjust(o,new e.Point(n,i)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,n,i))},_adjustBoundsForRotation:function(t,n){if(!t||0===t.getRotation(!0)||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var i=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(i.position.x,i.position.y,i.size.x,i.size.y))}return n.rotate(-t.getRotation(!0),this._getPlacementPoint(n))}}}(s),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"===typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var i=this._calculateCanvasSize();this.canvas.width=i.x,this.canvas.height=i.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(t,n,i,r){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,i,r),this},updateOverlay:function(t,n,i){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,i),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(t){var n=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},clipWithPolygons:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),e.forEach(function(e){e.forEach(function(e,t){n[0===t?"moveTo":"lineTo"](e.x,e.y)})}),n.clip()}},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,i=0;i<n.getItemCount();i++)n.getItemAt(i).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,i=0;i<t.getItemCount();i++){var r=t.getItemAt(i).getOpacity();r>n&&(n=r)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!==e.x||this.canvas.height!==e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var i=n.canvas;n.clearRect(0,0,i.width,i.height)}}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),i=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},drawTile:function(t,n,i,r,o,s,a){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var l=this._getContext(i);r=r||1,t.drawCanvas(l,n,r,o,s,a)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var i=this;this.viewer.addHandler("rotate",function e(){if(0!==i.viewport.getRotation()){i.viewer.removeHandler("rotate",e);var t=i._calculateSketchCanvasSize();i.sketchCanvas.width=t.x,i.sketchCanvas.height=t.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var i=this._getContext(n);i.save(),i.fillStyle=t,i.fillRect(e.x,e.y,e.width,e.height),i.restore()}},blendSketch:function(t,n,i,r){var o=t;if(e.isPlainObject(o)||(o={opacity:t,scale:n,translate:i,compositeOperation:r}),this.useCanvas&&this.sketchCanvas){t=o.opacity,r=o.compositeOperation;var s=o.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),s)s.x<0&&(s.width+=s.x,s.x=0),s.x+s.width>this.canvas.width&&(s.width=this.canvas.width-s.x),s.y<0&&(s.height+=s.y,s.y=0),s.y+s.height>this.canvas.height&&(s.height=this.canvas.height-s.y),this.context.drawImage(this.sketchCanvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height);else{n=o.scale||1;var a=(i=o.translate)instanceof e.Point?i:new e.Point(0,0),l=0,A=0;if(i){var c=this.sketchCanvas.width-this.canvas.width,u=this.sketchCanvas.height-this.canvas.height;l=Math.round(c/2),A=Math.round(u/2)}this.context.drawImage(this.sketchCanvas,a.x-l*n,a.y-A*n,(this.canvas.width+2*l)*n,(this.canvas.height+2*A)*n,-l,-A,this.canvas.width+2*l,this.canvas.height+2*A)}this.context.restore()}},drawDebugInfo:function(t,n,i,r){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",s.strokeStyle=this.debugGridColor[o],s.fillStyle=this.debugGridColor[o],this.viewport.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),r.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0)}),r.viewport.getRotation(!0)%360===0&&r.getRotation(!0)%360===0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),s.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var a=(t.position.x+t.size.x/2)*e.pixelDensityRatio,l=(t.position.y+t.size.y/2)*e.pixelDensityRatio;s.translate(a,l),s.rotate(Math.PI/180*-this.viewport.getRotation(!0)),s.translate(-a,-l),0===t.x&&0===t.y&&(s.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),s.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),s.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),s.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),s.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),s.fillText("Order: "+i+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),s.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),s.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),r.getRotation(!0)%360!==0&&this._restoreRotationChanges(),r.viewport.getRotation(!0)%360===0&&r.getRotation(!0)%360===0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),s.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},setImageSmoothingEnabled:function(e){this.useCanvas&&(this._imageSmoothingEnabled=e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var n=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(t.useSketch);i.save(),i.translate(n.x,n.y),this.viewer.viewport.flipped?(i.rotate(Math.PI/180*-t.degrees),i.scale(-1,1)):i.rotate(Math.PI/180*t.degrees),i.translate(-n.x,-n.y)},_flip:function(t){var n=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(t.useSketch);i.translate(n.x,0),i.scale(-1,1),i.translate(-n.x,0)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*t),y:Math.round(n.y*t)}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(s),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,t.initialDegrees=t.degrees,delete t.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:t.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(t){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(t)},resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-i/2,n,i)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation(e))},getBoundsNoRotate:function(t){var n=this.getCenter(t),i=1/this.getZoom(t),r=i/this.getAspectRatio();return new e.Rect(n.x-i/2,n.y-r/2,i,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(e),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,i,r,o,s,a,l=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),A=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?l:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),o=(r=1/(i=this.getZoom()))/this.getAspectRatio(),s=new e.Rect(l.x-r/2,l.y-o/2,r,o),a=this._pixelFromPoint(this.zoomPoint,s).minus(n).rotate(-this.getRotation(!0)).divide(this._containerInnerSize.x*i),A.plus(a)):A},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var t=this.viewportToViewerElementRectangle(e).getBoundingBox(),n=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),i=!1,r=!1;if(this.wrapHorizontal);else{var o,s,a,l=t.x+t.width,A=n.x+n.width;o=t.width>n.width?this.visibilityRatio*n.width:this.visibilityRatio*t.width,s=n.x-l+o,a=A-t.x-o,o>n.width?(t.x+=(s+a)/2,i=!0):a<0?(t.x+=a,i=!0):s>0&&(t.x+=s,i=!0)}if(this.wrapVertical);else{var c,u,h,d=t.y+t.height,p=n.y+n.height;c=t.height>n.height?this.visibilityRatio*n.height:this.visibilityRatio*t.height,u=n.y-d+c,h=p-t.y-c,c>n.height?(t.y+=(u+h)/2,r=!0):h<0?(t.y+=h,r=!0):u>0&&(t.y+=u,r=!0)}var f=i||r,g=f?this.viewerElementToViewportRectangle(t):e.clone();return g.xConstrained=i,g.yConstrained=r,g.constraintApplied=f,g},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var i=this.getConstrainedBounds(!1);return i.constraintApplied&&(this.fitBounds(i,e),this._raiseConstraintsEvent(e)),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){var i=(n=n||{}).immediately||!1,r=n.constraints||!1,o=this.getAspectRatio(),s=t.getCenter(),a=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=o?a.height=a.width/o:a.width=a.height*o,a.x=s.x-a.width/2,a.y=s.y-a.height/2;var l=1/a.width;if(i)return this.panTo(s,!0),this.zoomTo(l,null,!0),r&&this.applyConstraints(!0),this;var A=this.getCenter(!0),c=this.getZoom(!0);this.panTo(A,!0),this.zoomTo(c,null,!0);var u=this.getBounds(),h=this.getZoom();if(0===h||Math.abs(l/h-1)<1e-8)return this.zoomTo(l,null,!0),this.panTo(s,i),r&&this.applyConstraints(!1),this;if(r){this.panTo(s,!1),l=this._applyZoomConstraints(l),this.zoomTo(l,null,!1);var d=this.getConstrainedBounds();this.panTo(A,!0),this.zoomTo(c,null,!0),this.fitBounds(d)}else{var p=a.rotate(-this.getRotation()).getTopLeft().times(l).minus(u.getTopLeft().times(h)).divide(l-h);this.zoomTo(l,p,i)}return this},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,n){var i=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,i){var r=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this._adjustCenterSpringsForZoomPoint(function(){r.zoomSpring.resetTo(t)}):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:i}),this},setRotation:function(e,t){return this.rotateTo(e,null,t)},getRotation:function(e){return e?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(e,t,n){return this.rotateTo(e,t,n)},rotateTo:function(t,n,i){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===t&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i)if(this.rotationPivot){if(!(t-this._oldDegrees))return this.rotationPivot=null,this;this._rotateAboutPivot(t)}else this.degreesSpring.resetTo(t);else{var r=e.positiveModulo(this.degreesSpring.current.value,360),o=e.positiveModulo(t,360),s=o-r;s>180?o-=360:s<-180&&(o+=360);var a=r-o;this.degreesSpring.resetTo(t+a),this.degreesSpring.springTo(t)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t,immediately:!!i,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(e,t,n){return this.rotateTo(this.degreesSpring.target.value+e,t,n)},resize:function(e,t){var n,i=this.getBoundsNoRotate(),r=i;this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,r.width=i.width*n,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t});var o=this.fitBounds(r,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:e,maintain:t}),o},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint(function(){e.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,t},_rotateAboutPivot:function(e){var t=!0===e,n=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),t?this.degreesSpring.update():this.degreesSpring.resetTo(e);var i=this.degreesSpring.current.value-this._oldDegrees,r=n.rotate(-1*i).times(-1);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y)},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var n=this.pixelFromPoint(this.zoomPoint,!0).minus(t),i=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation(t)),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation(t))},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(!0),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var i=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/i.width).plus(i.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(t),this.getCenter(t))},_viewportToImageDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/i,n*this._contentSizeNoRotate.x/i)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===i){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,n,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*i,n/this._contentSizeNoRotate.x*i)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===i){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,n,!0)}}var r=this._imageToViewportDelta(t,n);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(t,n,i,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,n,i,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===s){return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,n,i,r,!0)}}var a=this.imageToViewportCoordinates(o.x,o.y),l=this._imageToViewportDelta(o.width,o.height);return new e.Rect(a.x,a.y,l.x,l.y,o.degrees)},viewportToImageRectangle:function(t,n,i,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,n,i,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===s){return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,n,i,r,!0)}}var a=this.viewportToImageCoordinates(o.x,o.y),l=this._viewportToImageDelta(o.width,o.height);return new e.Rect(a.x,a.y,l.x,l.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}}var i=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/i*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this}}}(s),function(e){e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var i=t.x||0;delete t.x;var r=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var o=1;t.width?(o=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(o=t.height/this.normHeight,delete t.height);var a=t.fitBounds;delete t.fitBounds;var l=t.fitBoundsPlacement||s.Placement.CENTER;delete t.fitBoundsPlacement;var A=t.degrees||0;delete t.degrees;var c=t.ajaxHeaders;delete t.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:A,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),a&&this.fitBounds(a,l,!0),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))},this._ownAjaxHeaders={},this.setAjaxHeaders(c,!1)},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),n=this._scaleSpring.update(),i=this._degreesSpring.update();return!!(e||t||n||i)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var n=this.getBoundsNoRotate(t);if(this._clip){var i=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,r=this._clip.times(i);n=new e.Rect(n.x+r.x,n.y+r.y,r.width,r.height)}return n.rotate(this.getRotation(t),this._getRotationPoint(t))},getTileBounds:function(e,t,n){var i=this.source.getNumTiles(e),r=(i.x+t%i.x)%i.x,o=(i.y+n%i.y)%i.y,s=this.source.getTileBounds(e,r,o);return this.getFlip()&&(s.x=1-s.x-s.width),s.x+=(t-r)/i.x,s.y+=this._worldHeightCurrent/this._worldWidthCurrent*((n-o)/i.y),s},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var t=this.imageToWindowCoordinates(new e.Point(0,0)),n=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(n.x-t.x,n.y-t.y)},_viewportToImageDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),n*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,n,i){var r;return t instanceof e.Point?(i=n,r=t):r=new e.Point(t,n),r=r.rotate(-this.getRotation(i),this._getRotationPoint(i)),i?this._viewportToImageDelta(r.x-this._xSpring.current.value,r.y-this._ySpring.current.value):this._viewportToImageDelta(r.x-this._xSpring.target.value,r.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,n/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,n,i){t instanceof e.Point&&(i=n,n=t.y,t=t.x);var r=this._imageToViewportDelta(t,n);return i?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r.rotate(this.getRotation(i),this._getRotationPoint(i))},imageToViewportRectangle:function(t,n,i,r,o){var s=t;s instanceof e.Rect?o=n:s=new e.Rect(t,n,i,r);var a=this.imageToViewportCoordinates(s.getTopLeft(),o),l=this._imageToViewportDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees+this.getRotation(o))},viewportToImageRectangle:function(t,n,i,r,o){var s=t;t instanceof e.Rect?o=n:s=new e.Rect(t,n,i,r);var a=this.viewportToImageCoordinates(s.getTopLeft(),o),l=this._viewportToImageDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(s.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(s.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var n=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/n,(t.y-this._ySpring.current.value)/n,t.width/n,t.height/n,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){var n=function(t){return t.map(function(t){try{if(function(t){return t instanceof e.Point||"number"===typeof t.x&&"number"===typeof t.y}(t))return{x:t.x,y:t.y};throw new Error}catch(n){throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map(function(e){return n(e)})}catch(i){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(i),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(t,n,i){n=n||e.Placement.CENTER;var r=e.Placement.properties[n],o=this.contentAspectX,s=0,a=0,l=1,A=1;if(this._clip&&(o=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,A=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(s=this._clip.x/this._clip.height*t.height,a=this._clip.y/this._clip.height*t.height):(s=this._clip.x/this._clip.width*t.width,a=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o){var c=t.height/A,u=0;r.isHorizontallyCentered?u=(t.width-t.height*o)/2:r.isRight&&(u=t.width-t.height*o),this.setPosition(new e.Point(t.x-s+u,t.y-a),i),this.setHeight(c,i)}else{var h=t.width/l,d=0;r.isVerticallyCentered?d=(t.height-t.width/o)/2:r.isBottom&&(d=t.height-t.width/o),this.setPosition(new e.Point(t.x-s,t.y-a+d),i),this.setWidth(h,i)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(e){this.flipped=!!e,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(t,n){null===t&&(t={}),e.isPlainObject(t)?(this._ownAjaxHeaders=t,this._updateAjaxHeaders(n)):console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},_updateAjaxHeaders:function(t){if(void 0===t&&(t=!0),e.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,t){var n,i,r,o;for(var s in this.tilesMatrix)for(var a in n=this.source.getNumTiles(s),this.tilesMatrix[s])for(var l in i=(n.x+a%n.x)%n.x,this.tilesMatrix[s][a])if(r=(n.y+l%n.y)%n.y,(o=this.tilesMatrix[s][a][l]).loadWithAjax=this.loadTilesWithAjax,o.loadWithAjax){var A=this.source.getTileAjaxHeaders(s,i,r);o.ajaxHeaders=e.extend({},this.ajaxHeaders,A)}else o.ajaxHeaders=null;for(var c=0;c<this._imageLoader.jobQueue.length;c++){var u=this._imageLoader.jobQueue[c];u.loadWithAjax=u.tile.loadWithAjax,u.ajaxHeaders=u.tile.loadWithAjax?u.tile.ajaxHeaders:null}}},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),{lowestLevel:e=Math.min(e,n),highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var t=this.viewport,n=this._viewportToTiledImageRectangle(t.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var i=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(n=n.intersection(i)))return}for(var r=this._getLevelsInterval(),o=r.lowestLevel,s=r.highestLevel,a=null,l=!1,A=e.now(),c=s;c>=o;c--){var u=!1,h=t.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(c),!0).x*this._scaleSpring.current.value;if(c===o||!l&&h>=this.minPixelRatio)u=!0,l=!0;else if(!l)continue;var d=t.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(c),!1).x*this._scaleSpring.current.value,p=t.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,f=this.immediateRender?1:p,g=Math.min(1,(h-.5)/.5),m=f/Math.abs(f-d);if(a=this._updateLevel(l,u,c,g,m,n,A,a),this._providesCoverage(this.coverage,c))break}this._drawTiles(this.lastDrawn),a&&!a.context2D?(this._loadTile(a,A),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,n,i){var r,o,s,a;this.wrapHorizontal?(r=e.positiveModulo(n.x,1),o=e.positiveModulo(i.x,1)):(r=Math.max(0,n.x),o=Math.min(1,i.x));var l=1/this.source.aspectRatio;this.wrapVertical?(s=e.positiveModulo(n.y,l),a=e.positiveModulo(i.y,l)):(s=Math.max(0,n.y),a=Math.min(l,i.y));var A=this.source.getTileAtPoint(t,new e.Point(r,s)),c=this.source.getTileAtPoint(t,new e.Point(o,a)),u=this.source.getNumTiles(t);return this.wrapHorizontal&&(A.x+=u.x*Math.floor(n.x),c.x+=u.x*Math.floor(i.x)),this.wrapVertical&&(A.y+=u.y*Math.floor(n.y/l),c.y+=u.y*Math.floor(i.y/l)),{topLeft:A,bottomRight:c}},_updateLevel:function(e,t,n,i,r,o,s,a){var l=o.getBoundingBox().getTopLeft(),A=o.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:e,level:n,opacity:i,visibility:r,drawArea:o,topleft:l,bottomright:A,currenttime:s,best:a}),this._resetCoverage(this.coverage,n),this._resetCoverage(this.loadingCoverage,n);var c=this._getCornerTiles(n,l,A),u=c.topLeft,h=c.bottomRight,d=this.source.getNumTiles(n),p=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(h.x+=1,this.wrapHorizontal||(h.x=Math.min(h.x,d.x-1)));for(var f=u.x;f<=h.x;f++)for(var g=u.y;g<=h.y;g++){var m;if(this.getFlip()){var v=(d.x+f%d.x)%d.x;m=f+d.x-v-v-1}else m=f;null!==o.intersection(this.getTileBounds(n,m,g))&&(a=this._updateTile(t,e,m,g,n,i,r,p,d,s,a))}return a},_updateTile:function(e,t,n,i,r,o,s,a,l,A,c){var u=this._getTile(n,i,r,A,l,this._worldWidthCurrent,this._worldHeightCurrent),h=t;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:u}),this._setCoverage(this.coverage,r,n,i,!1);var d=u.loaded||u.loading||this._isCovered(this.loadingCoverage,r,n,i);if(this._setCoverage(this.loadingCoverage,r,n,i,d),!u.exists)return c;if(e&&!h&&(this._isCovered(this.coverage,r,n,i)?this._setCoverage(this.coverage,r,n,i,!0):h=!0),!h)return c;if(this._positionTile(u,this.source.tileOverlap,this.viewport,a,s),!u.loaded)if(u.context2D)this._setTileLoaded(u);else{var p=this._tileCache.getImageRecord(u.cacheKey);p&&this._setTileLoaded(u,p.getData())}u.loaded?this._blendTile(u,n,i,r,o,A)&&(this._needsDraw=!0):u.loading?this._tilesLoading++:d||(c=this._compareTiles(c,u));return c},_getTile:function(t,n,i,r,o,s,a){var l,A,c,u,h,d,p,f,g,m,v=this.tilesMatrix,y=this.source;return v[i]||(v[i]={}),v[i][t]||(v[i][t]={}),v[i][t][n]&&!v[i][t][n].flipped===!this.flipped||(l=(o.x+t%o.x)%o.x,A=(o.y+n%o.y)%o.y,c=this.getTileBounds(i,t,n),u=y.getTileBounds(i,l,A,!0),h=y.tileExists(i,l,A),d=y.getTileUrl(i,l,A),p=y.getTilePostData(i,l,A),this.loadTilesWithAjax?(f=y.getTileAjaxHeaders(i,l,A),e.isPlainObject(this.ajaxHeaders)&&(f=e.extend({},this.ajaxHeaders,f))):f=null,g=y.getContext2D?y.getContext2D(i,l,A):void 0,m=new e.Tile(i,t,n,c,h,d,g,this.loadTilesWithAjax,f,u,p,y.getTileHashKey(i,l,A,d,f,p)),this.getFlip()?0===l&&(m.isRightMost=!0):l===o.x-1&&(m.isRightMost=!0),A===o.y-1&&(m.isBottomMost=!0),m.flipped=this.flipped,v[i][t][n]=m),(m=v[i][t][n]).lastTouchTime=r,m},_loadTile:function(e,t){var n=this;e.loading=!0,this._imageLoader.addJob({src:e.getUrl(),tile:e,source:this.source,postData:e.postData,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(i,r,o){n._onTileLoad(e,t,i,r,o)},abort:function(){e.loading=!1}})},_onTileLoad:function(t,n,i,r,o){if(!i)return e.console.error("Tile %s failed to load: %s - error: %s",t,t.getUrl(),r),this.viewer.raiseEvent("tile-load-failed",{tile:t,tiledImage:this,time:n,message:r,tileRequest:o}),t.loading=!1,void(t.exists=!1);if(t.exists=!0,n<this.lastResetTime)return e.console.warn("Ignoring tile %s loaded before reset: %s",t,t.getUrl()),void(t.loading=!1);var s=this,a=function(){var e=s.source.getClosestLevel();s._setTileLoaded(t,i,e,o)};this._midDraw?window.setTimeout(a,1):a()},_setTileLoaded:function(t,n,i,r){var o=0,s=!1,a=this;function l(){return s&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),o++,A}function A(){0===--o&&(t.loading=!1,t.loaded=!0,t.hasTransparency=a.source.hasTransparency(t.context2D,t.getUrl(),t.ajaxHeaders,t.postData),t.context2D||a._tileCache.cacheTile({data:n,tile:t,cutoff:i,tiledImage:a}),a._needsDraw=!0)}var c=l();this.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:this,tileRequest:r,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),n},data:n,getCompletionCallback:l}),s=!0,c()},_positionTile:function(t,n,i,r,o){var s=t.bounds.getTopLeft();s.x*=this._scaleSpring.current.value,s.y*=this._scaleSpring.current.value,s.x+=this._xSpring.current.value,s.y+=this._ySpring.current.value;var a=t.bounds.getSize();a.x*=this._scaleSpring.current.value,a.y*=this._scaleSpring.current.value;var l=i.pixelFromPointNoRotate(s,!0),A=i.pixelFromPointNoRotate(s,!1),c=i.deltaPixelsFromPointsNoRotate(a,!0),u=i.deltaPixelsFromPointsNoRotate(a,!1),h=A.plus(u.divide(2)),d=r.squaredDistanceTo(h);n||(c=c.plus(new e.Point(1,1))),t.isRightMost&&this.wrapHorizontal&&(c.x+=.75),t.isBottomMost&&this.wrapVertical&&(c.y+=.75),t.position=l,t.size=c,t.squaredDistance=d,t.visibility=o},_blendTile:function(e,t,n,i,r,o){var s,a,l=1e3*this.blendTime;if(e.blendStart||(e.blendStart=o),s=o-e.blendStart,a=l?Math.min(1,s/l):1,this.alwaysBlend&&(a*=r),e.opacity=a,this.lastDrawn.push(e),1===a)this._setCoverage(this.coverage,i,t,n,!0),this._hasOpaqueTile=!0;else if(s<l)return!0;return!1},_compareTiles:function(e,t){return e?t.visibility>e.visibility||t.visibility===e.visibility&&t.squaredDistance<e.squaredDistance?t:e:t},_drawTiles:function(r){if(0!==this.opacity&&(0!==r.length||this.placeholderFillStyle)){var o,s,a,l=r[0];l&&(o=this.opacity<1||this.compositeOperation&&"source-over"!==this.compositeOperation||!this._isBottomItem()&&this.source.hasTransparency(l.context2D,l.getUrl(),l.ajaxHeaders,l.postData));var A,c=this.viewport.getZoom(!0),u=this.viewportToImageZoom(c);r.length>1&&u>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360===0&&e.supportsCanvas&&this.viewer.useCanvas&&(o=!0,s=l.getScaleForEdgeSmoothing(),a=l.getTranslationForEdgeSmoothing(s,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0))),o&&(s||(A=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0||(A.x=this._drawer.viewer.container.clientWidth-(A.x+A.width))),A=A.times(e.pixelDensityRatio)),this._drawer._clear(!0,A)),s||(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:o}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:o}),this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var h=!1;if(this._clip){this._drawer.saveContext(o);var d=this.imageToViewportRectangle(this._clip,!0);d=d.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var p=this._drawer.viewportToDrawerRectangle(d);s&&(p=p.times(s)),a&&(p=p.translate(a)),this._drawer.setClip(p,o),h=!0}if(this._croppingPolygons){var f=this;this._drawer.saveContext(o);try{var g=this._croppingPolygons.map(function(e){return e.map(function(e){var t=f.imageToViewportCoordinates(e.x,e.y,!0).rotate(-f.getRotation(!0),f._getRotationPoint(!0)),n=f._drawer.viewportCoordToDrawerCoord(t);return s&&(n=n.times(s)),a&&(n=n.plus(a)),n})});this._drawer.clipWithPolygons(g,o)}catch(x){e.console.error(x)}h=!0}if(this.placeholderFillStyle&&!1===this._hasOpaqueTile){var m=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));s&&(m=m.times(s)),a&&(m=m.translate(a));var v=null;v="function"===typeof this.placeholderFillStyle?this.placeholderFillStyle(this,this._drawer.context):this.placeholderFillStyle,this._drawer.drawRectangle(m,v,o)}var y=function(r){if("number"===typeof r)return i(r);if(!r||!e.Browser)return t;var o=r[e.Browser.vendor];n(o)&&(o=r["*"]);return i(o)}(this.subPixelRoundingForTransparency),w=!1;if(y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)w=!0;else if(y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){w=!(this.viewer&&this.viewer.isAnimating())}for(var b=r.length-1;b>=0;b--)l=r[b],this._drawer.drawTile(l,this._drawingHandler,o,s,a,w,this.source),l.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:l});h&&this._drawer.restoreContext(o),s||(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(o),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(o)),o&&(s&&(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:s,translate:a,compositeOperation:this.compositeOperation,bounds:A}),s&&(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1))),s||this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(r)}},_drawDebugInfo:function(t){if(this.debugMode)for(var n=t.length-1;n>=0;n--){var i=t[n];try{this._drawer.drawDebugInfo(i,t.length,n,this)}catch(r){e.console.error(r)}}},_providesCoverage:function(e,t,n,i){var r,o,s,a;if(!e[t])return!1;if(void 0===n||void 0===i){for(s in r=e[t])if(Object.prototype.hasOwnProperty.call(r,s))for(a in o=r[s])if(Object.prototype.hasOwnProperty.call(o,a)&&!o[a])return!1;return!0}return void 0===e[t][n]||void 0===e[t][n][i]||!0===e[t][n][i]},_isCovered:function(e,t,n,i){return void 0===n||void 0===i?this._providesCoverage(e,t+1):this._providesCoverage(e,t+1,2*n,2*i)&&this._providesCoverage(e,t+1,2*n,2*i+1)&&this._providesCoverage(e,t+1,2*n+1,2*i)&&this._providesCoverage(e,t+1,2*n+1,2*i+1)},_setCoverage:function(t,n,i,r,o){t[n]?(t[n][i]||(t[n][i]={}),t[n][i][r]=o):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)},_resetCoverage:function(e,t){e[t]={}}});var t=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function n(t){return t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function i(e){return n(e)?t:e}}(s),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},n=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.data,"[ImageRecord] options.data is required"),this._tiles=[],t.create.apply(null,[this,t.data,t.ownerTile]),this._destroyImplementation=t.destroy.bind(null,this),this.getImage=t.getImage.bind(null,this),this.getData=t.getData.bind(null,this),this.getRenderedContext=t.getRenderedContext.bind(null,this)};n.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(i){e.console.assert(i,"[TileCache.cacheTile] options is required"),e.console.assert(i.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(i.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(i.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=i.cutoff||0,o=this._tilesLoaded.length,s=this._imagesLoaded[i.tile.cacheKey];if(s||(i.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),i.data=i.image),e.console.assert(i.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),s=this._imagesLoaded[i.tile.cacheKey]=new n({data:i.data,ownerTile:i.tile,create:i.tiledImage.source.createTileCache,destroy:i.tiledImage.source.destroyTileCache,getImage:i.tiledImage.source.getTileCacheDataAsImage,getData:i.tiledImage.source.getTileCacheData,getRenderedContext:i.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),s.addTile(i.tile),i.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,l,A,c,u,h,d=null,p=-1,f=null,g=this._tilesLoaded.length-1;g>=0;g--)(a=(h=this._tilesLoaded[g]).tile).level<=r||a.beingDrawn||(d?(c=a.lastTouchTime,l=d.lastTouchTime,u=a.level,A=d.level,(c<l||c===l&&u>A)&&(d=a,p=g,f=h)):(d=a,p=g,f=h));d&&p>=0&&(this._unloadTile(f),o=p)}this._tilesLoaded[o]=new t({tile:i.tile,tiledImage:i.tiledImage})},clearTilesFor:function(t){var n;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var i=0;i<this._tilesLoaded.length;++i)(n=this._tilesLoaded[i]).tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(i,1),i--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,i=t.tiledImage;n.unload(),n.cacheImageRecord=null;var r=this._imagesLoaded[n.cacheKey];r.removeTile(n),r.getTileCount()||(r.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),i.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:i})}}}(s),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(n=n||{}).index){var i=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(i,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:i,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var n,i=(t=t||{}).immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,s=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=a+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);n=!t.rows&&s?s:Math.ceil(this._items.length/o);var A,c,u,h,d,p=0,f=0;this.setAutoRefigureSizes(!1);for(var g=0;g<this._items.length;g++)g&&g%n===0&&("horizontal"===r?(f+=l,p=0):(p+=l,f=0)),h=(u=(c=(A=this._items[g]).getBounds()).width>c.height?a:a*(c.width/c.height))*(c.height/c.width),d=new e.Point(p+(a-u)/2,f+(a-h)/2),A.setPosition(d,i),A.setWidth(u,i),"horizontal"===r?p+=l:f+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,i=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var s=r.getClippedBounds().getBoundingBox(),a=s.x,l=s.y,A=s.x+s.width,c=s.y+s.height,u=1;u<this._items.length;u++)o=(r=this._items[u]).getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),s=r.getClippedBounds().getBoundingBox(),a=Math.min(a,s.x),l=Math.min(l,s.y),A=Math.max(A,s.x+s.width),c=Math.max(c,s.y+s.height);this._homeBounds=new e.Rect(a,l,A-a,c-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===i&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(s)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>i[e]);return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{453:"99386831",455:"3856bed6",977:"5d779bd3"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="space-viewer:";n.l=(i,r,o,s)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==o)for(var A=document.getElementsByTagName("script"),c=0;c<A.length;c++){var u=A[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=i),e[i]=[r];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(d);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(e=>e(n)),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,o,s=i[0],a=i[1],l=i[2],A=0;if(s.some(t=>0!==e[t])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);A<s.length;A++)o=s[A],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkspace_viewer=self.webpackChunkspace_viewer||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>Fn,AddEquation:()=>qt,AddOperation:()=>Cn,AdditiveAnimationBlendMode:()=>dr,AdditiveBlending:()=>jt,AgXToneMapping:()=>Un,AlphaFormat:()=>pi,AlwaysCompare:()=>Yr,AlwaysDepth:()=>gn,AlwaysStencilFunc:()=>Gr,AmbientLight:()=>gd,AnimationAction:()=>ap,AnimationClip:()=>Dh,AnimationLoader:()=>Kh,AnimationMixer:()=>Ap,AnimationObjectGroup:()=>sp,AnimationUtils:()=>Ch,ArcCurve:()=>Xc,ArrayCamera:()=>kd,ArrowHelper:()=>uf,AttachedBindMode:()=>Rn,Audio:()=>Vd,AudioAnalyser:()=>Yd,AudioContext:()=>Id,AudioListener:()=>jd,AudioLoader:()=>Ud,AxesHelper:()=>hf,BackSide:()=>Ht,BasicDepthPacking:()=>mr,BasicShadowMap:()=>Pt,BatchedMesh:()=>oc,Bone:()=>gA,BooleanKeyframeTrack:()=>Ih,Box2:()=>Sp,Box3:()=>ls,Box3Helper:()=>sf,BoxGeometry:()=>ml,BoxHelper:()=>of,BufferAttribute:()=>Ha,BufferGeometry:()=>il,BufferGeometryLoader:()=>Bd,ByteType:()=>ni,Cache:()=>Hh,Camera:()=>Bl,CameraHelper:()=>tf,CanvasTexture:()=>Lc,CapsuleGeometry:()=>Nc,CatmullRomCurve3:()=>tu,CineonToneMapping:()=>Mn,CircleGeometry:()=>kc,ClampToEdgeWrapping:()=>Gn,Clock:()=>Dd,Color:()=>Ea,ColorKeyframeTrack:()=>Uh,ColorManagement:()=>jo,CompressedArrayTexture:()=>Ic,CompressedCubeTexture:()=>Uc,CompressedTexture:()=>Fc,CompressedTextureLoader:()=>qh,ConeGeometry:()=>Oc,ConstantAlphaFactor:()=>dn,ConstantColorFactor:()=>un,Controls:()=>pf,CubeCamera:()=>Ml,CubeReflectionMapping:()=>kn,CubeRefractionMapping:()=>Dn,CubeTexture:()=>Fl,CubeTextureLoader:()=>Yh,CubeUVReflectionMapping:()=>Qn,CubicBezierCurve:()=>ou,CubicBezierCurve3:()=>su,CubicInterpolant:()=>Eh,CullFaceBack:()=>Ut,CullFaceFront:()=>Lt,CullFaceFrontBack:()=>Rt,CullFaceNone:()=>It,Curve:()=>Kc,CurvePath:()=>du,CustomBlending:()=>Kt,CustomToneMapping:()=>In,CylinderGeometry:()=>Dc,Cylindrical:()=>Bp,Data3DTexture:()=>ss,DataArrayTexture:()=>rs,DataTexture:()=>mA,DataTextureLoader:()=>Zh,DataUtils:()=>Na,DecrementStencilOp:()=>Ur,DecrementWrapStencilOp:()=>Rr,DefaultLoadingManager:()=>zh,DepthFormat:()=>mi,DepthStencilFormat:()=>vi,DepthTexture:()=>Rc,DetachedBindMode:()=>Pn,DirectionalLight:()=>fd,DirectionalLightHelper:()=>Zp,DiscreteInterpolant:()=>Mh,DodecahedronGeometry:()=>Qc,DoubleSide:()=>Qt,DstAlphaFactor:()=>sn,DstColorFactor:()=>ln,DynamicCopyUsage:()=>oo,DynamicDrawUsage:()=>$r,DynamicReadUsage:()=>no,EdgesGeometry:()=>Wc,EllipseCurve:()=>qc,EqualCompare:()=>Wr,EqualDepth:()=>yn,EqualStencilFunc:()=>Dr,EquirectangularReflectionMapping:()=>On,EquirectangularRefractionMapping:()=>Hn,Euler:()=>Vs,EventDispatcher:()=>fo,ExternalTexture:()=>Pc,ExtrudeGeometry:()=>Wu,FileLoader:()=>Wh,Float16BufferAttribute:()=>qa,Float32BufferAttribute:()=>Xa,FloatType:()=>ai,Fog:()=>Nl,FogExp2:()=>Pl,FramebufferTexture:()=>Mc,FrontSide:()=>Ot,Frustum:()=>kA,FrustumArray:()=>HA,GLBufferAttribute:()=>fp,GLSL1:()=>ao,GLSL3:()=>lo,GreaterCompare:()=>qr,GreaterDepth:()=>bn,GreaterEqualCompare:()=>Jr,GreaterEqualDepth:()=>wn,GreaterEqualStencilFunc:()=>zr,GreaterStencilFunc:()=>Hr,GridHelper:()=>Kp,Group:()=>Ul,HalfFloatType:()=>li,HemisphereLight:()=>td,HemisphereLightHelper:()=>Wp,IcosahedronGeometry:()=>qu,ImageBitmapLoader:()=>Md,ImageLoader:()=>Jh,ImageUtils:()=>qo,IncrementStencilOp:()=>Ir,IncrementWrapStencilOp:()=>Lr,InstancedBufferAttribute:()=>bA,InstancedBufferGeometry:()=>xd,InstancedInterleavedBuffer:()=>pp,InstancedMesh:()=>MA,Int16BufferAttribute:()=>ja,Int32BufferAttribute:()=>Wa,Int8BufferAttribute:()=>Qa,IntType:()=>oi,InterleavedBuffer:()=>Dl,InterleavedBufferAttribute:()=>Hl,Interpolant:()=>Sh,InterpolateDiscrete:()=>sr,InterpolateLinear:()=>ar,InterpolateSmooth:()=>lr,InterpolationSamplingMode:()=>po,InterpolationSamplingType:()=>ho,InvertStencilOp:()=>Pr,KeepStencilOp:()=>Mr,KeyframeTrack:()=>Fh,LOD:()=>oA,LatheGeometry:()=>Xu,Layers:()=>Ws,LessCompare:()=>Vr,LessDepth:()=>mn,LessEqualCompare:()=>Kr,LessEqualDepth:()=>vn,LessEqualStencilFunc:()=>Or,LessStencilFunc:()=>kr,Light:()=>ed,LightProbe:()=>yd,Line:()=>pc,Line3:()=>Rp,LineBasicMaterial:()=>sc,LineCurve:()=>au,LineCurve3:()=>lu,LineDashedMaterial:()=>yh,LineLoop:()=>yc,LineSegments:()=>vc,LinearFilter:()=>Jn,LinearInterpolant:()=>Th,LinearMipMapLinearFilter:()=>ei,LinearMipMapNearestFilter:()=>Zn,LinearMipmapLinearFilter:()=>$n,LinearMipmapNearestFilter:()=>Yn,LinearSRGBColorSpace:()=>Cr,LinearToneMapping:()=>En,LinearTransfer:()=>Sr,Loader:()=>Gh,LoaderUtils:()=>bd,LoadingManager:()=>Qh,LoopOnce:()=>ir,LoopPingPong:()=>or,LoopRepeat:()=>rr,MOUSE:()=>Mt,Material:()=>Fa,MaterialLoader:()=>wd,MathUtils:()=>So,Matrix2:()=>_p,Matrix3:()=>Uo,Matrix4:()=>Ps,MaxEquation:()=>Zt,Mesh:()=>fl,MeshBasicMaterial:()=>Ia,MeshDepthMaterial:()=>gh,MeshDistanceMaterial:()=>mh,MeshLambertMaterial:()=>fh,MeshMatcapMaterial:()=>vh,MeshNormalMaterial:()=>ph,MeshPhongMaterial:()=>hh,MeshPhysicalMaterial:()=>uh,MeshStandardMaterial:()=>ch,MeshToonMaterial:()=>dh,MinEquation:()=>Yt,MirroredRepeatWrapping:()=>jn,MixOperation:()=>_n,MultiplyBlending:()=>Wt,MultiplyOperation:()=>Bn,NearestFilter:()=>Vn,NearestMipMapLinearFilter:()=>Xn,NearestMipMapNearestFilter:()=>Kn,NearestMipmapLinearFilter:()=>qn,NearestMipmapNearestFilter:()=>Wn,NeutralToneMapping:()=>Ln,NeverCompare:()=>jr,NeverDepth:()=>fn,NeverStencilFunc:()=>Nr,NoBlending:()=>zt,NoColorSpace:()=>Br,NoToneMapping:()=>Sn,NormalAnimationBlendMode:()=>hr,NormalBlending:()=>Gt,NotEqualCompare:()=>Xr,NotEqualDepth:()=>xn,NotEqualStencilFunc:()=>Qr,NumberKeyframeTrack:()=>Lh,Object3D:()=>la,ObjectLoader:()=>_d,ObjectSpaceNormalMap:()=>xr,OctahedronGeometry:()=>Ju,OneFactor:()=>en,OneMinusConstantAlphaFactor:()=>pn,OneMinusConstantColorFactor:()=>hn,OneMinusDstAlphaFactor:()=>an,OneMinusDstColorFactor:()=>An,OneMinusSrcAlphaFactor:()=>on,OneMinusSrcColorFactor:()=>nn,OrthographicCamera:()=>dd,PCFShadowMap:()=>Nt,PCFSoftShadowMap:()=>kt,PMREMGenerator:()=>Gf,Path:()=>pu,PerspectiveCamera:()=>El,Plane:()=>LA,PlaneGeometry:()=>Yu,PlaneHelper:()=>af,PointLight:()=>hd,PointLightHelper:()=>zp,Points:()=>Cc,PointsMaterial:()=>wc,PolarGridHelper:()=>qp,PolyhedronGeometry:()=>Hc,PositionalAudio:()=>Jd,PropertyBinding:()=>op,PropertyMixer:()=>Zd,QuadraticBezierCurve:()=>Au,QuadraticBezierCurve3:()=>cu,Quaternion:()=>To,QuaternionKeyframeTrack:()=>Ph,QuaternionLinearInterpolant:()=>Rh,RED_GREEN_RGTC2_Format:()=>tr,RED_RGTC1_Format:()=>$i,REVISION:()=>Tt,RGBADepthPacking:()=>vr,RGBAFormat:()=>gi,RGBAIntegerFormat:()=>_i,RGBA_ASTC_10x10_Format:()=>Ki,RGBA_ASTC_10x5_Format:()=>ji,RGBA_ASTC_10x6_Format:()=>Vi,RGBA_ASTC_10x8_Format:()=>Wi,RGBA_ASTC_12x10_Format:()=>qi,RGBA_ASTC_12x12_Format:()=>Xi,RGBA_ASTC_4x4_Format:()=>Ni,RGBA_ASTC_5x4_Format:()=>ki,RGBA_ASTC_5x5_Format:()=>Di,RGBA_ASTC_6x5_Format:()=>Oi,RGBA_ASTC_6x6_Format:()=>Hi,RGBA_ASTC_8x5_Format:()=>Qi,RGBA_ASTC_8x6_Format:()=>zi,RGBA_ASTC_8x8_Format:()=>Gi,RGBA_BPTC_Format:()=>Ji,RGBA_ETC2_EAC_Format:()=>Pi,RGBA_PVRTC_2BPPV1_Format:()=>Ui,RGBA_PVRTC_4BPPV1_Format:()=>Ii,RGBA_S3TC_DXT1_Format:()=>Si,RGBA_S3TC_DXT3_Format:()=>Ei,RGBA_S3TC_DXT5_Format:()=>Ti,RGBDepthPacking:()=>yr,RGBFormat:()=>fi,RGBIntegerFormat:()=>Bi,RGB_BPTC_SIGNED_Format:()=>Yi,RGB_BPTC_UNSIGNED_Format:()=>Zi,RGB_ETC1_Format:()=>Li,RGB_ETC2_Format:()=>Ri,RGB_PVRTC_2BPPV1_Format:()=>Fi,RGB_PVRTC_4BPPV1_Format:()=>Mi,RGB_S3TC_DXT1_Format:()=>Ci,RGDepthPacking:()=>wr,RGFormat:()=>bi,RGIntegerFormat:()=>xi,RawShaderMaterial:()=>Ah,Ray:()=>Rs,Raycaster:()=>mp,RectAreaLight:()=>md,RedFormat:()=>yi,RedIntegerFormat:()=>wi,ReinhardToneMapping:()=>Tn,RenderTarget:()=>ns,RenderTarget3D:()=>cp,RepeatWrapping:()=>zn,ReplaceStencilOp:()=>Fr,ReverseSubtractEquation:()=>Jt,RingGeometry:()=>Zu,SIGNED_RED_GREEN_RGTC2_Format:()=>nr,SIGNED_RED_RGTC1_Format:()=>er,SRGBColorSpace:()=>_r,SRGBTransfer:()=>Er,Scene:()=>kl,ShaderChunk:()=>yf,ShaderLib:()=>bf,ShaderMaterial:()=>xl,ShadowMaterial:()=>lh,Shape:()=>fu,ShapeGeometry:()=>$u,ShapePath:()=>df,ShapeUtils:()=>Gu,ShortType:()=>ii,Skeleton:()=>wA,SkeletonHelper:()=>Hp,SkinnedMesh:()=>fA,Source:()=>Jo,Sphere:()=>Ss,SphereGeometry:()=>eh,Spherical:()=>xp,SphericalHarmonics3:()=>vd,SplineCurve:()=>uu,SpotLight:()=>ad,SpotLightHelper:()=>Np,Sprite:()=>tA,SpriteMaterial:()=>Ql,SrcAlphaFactor:()=>rn,SrcAlphaSaturateFactor:()=>cn,SrcColorFactor:()=>tn,StaticCopyUsage:()=>ro,StaticDrawUsage:()=>Zr,StaticReadUsage:()=>to,StereoCamera:()=>Nd,StreamCopyUsage:()=>so,StreamDrawUsage:()=>eo,StreamReadUsage:()=>io,StringKeyframeTrack:()=>Nh,SubtractEquation:()=>Xt,SubtractiveBlending:()=>Vt,TOUCH:()=>Ft,TangentSpaceNormalMap:()=>br,TetrahedronGeometry:()=>th,Texture:()=>es,TextureLoader:()=>$h,TextureUtils:()=>gf,Timer:()=>wp,TimestampQuery:()=>uo,TorusGeometry:()=>nh,TorusKnotGeometry:()=>ih,Triangle:()=>xa,TriangleFanDrawMode:()=>gr,TriangleStripDrawMode:()=>fr,TrianglesDrawMode:()=>pr,TubeGeometry:()=>rh,UVMapping:()=>Nn,Uint16BufferAttribute:()=>Va,Uint32BufferAttribute:()=>Ka,Uint8BufferAttribute:()=>za,Uint8ClampedBufferAttribute:()=>Ga,Uniform:()=>up,UniformsGroup:()=>dp,UniformsLib:()=>wf,UniformsUtils:()=>bl,UnsignedByteType:()=>ti,UnsignedInt101111Type:()=>di,UnsignedInt248Type:()=>ui,UnsignedInt5999Type:()=>hi,UnsignedIntType:()=>si,UnsignedShort4444Type:()=>Ai,UnsignedShort5551Type:()=>ci,UnsignedShortType:()=>ri,VSMShadowMap:()=>Dt,Vector2:()=>Eo,Vector3:()=>Mo,Vector4:()=>ts,VectorKeyframeTrack:()=>kh,VideoFrameTexture:()=>Tc,VideoTexture:()=>Ec,WebGL3DRenderTarget:()=>as,WebGLArrayRenderTarget:()=>os,WebGLCoordinateSystem:()=>Ao,WebGLCubeRenderTarget:()=>Il,WebGLRenderTarget:()=>is,WebGLRenderer:()=>Zm,WebGLUtils:()=>Vm,WebGPUCoordinateSystem:()=>co,WebXRController:()=>Rl,WireframeGeometry:()=>oh,WrapAroundEnding:()=>ur,ZeroCurvatureEnding:()=>Ar,ZeroFactor:()=>$t,ZeroSlopeEnding:()=>cr,ZeroStencilOp:()=>Tr,createCanvasElement:()=>Do});var t={};n.r(t),n.d(t,{Decoder:()=>qF,Encoder:()=>WF,PacketType:()=>VF,protocol:()=>jF});var i=n(5043),r=n.t(i,2),o=n(4391);function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var a=n(4980);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=["sri"],u=["page"],h=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function m(){return _(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return b("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:x(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return A(A({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?B(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function x(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function B(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function _(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:o=!1}=i,s=r.history,a="POP",l=null,c=u();function u(){return(s.state||{idx:null}).idx}function h(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function d(e){return C(e)}null==c&&(c=0,s.replaceState(A(A({},s.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(r,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(g,h),l=e,()=>{r.removeEventListener(g,h),l=null}},createHref:e=>t(r,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let i=b(p.location,e,t);n&&n(i,e),c=u()+1;let A=w(i,c),h=p.createHref(i);try{s.pushState(A,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;r.location.assign(h)}o&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let i=b(p.location,e,t);n&&n(i,e),c=u();let r=w(i,c),A=p.createHref(i);s.replaceState(r,"",A),o&&l&&l({action:a,location:p.location,delta:0})},go:e=>s.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:x(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function S(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,i){let r=z(("string"===typeof t?B(t):t).pathname||"/",n);if(null==r)return null;let o=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=Q(r);s=D(o[a],e,i)}return s}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&s)return;v(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let A=K([i,l.relativePath]),c=n.concat(l);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(A,'".')),T(e.children,t,c,A,s)),(null!=e.path||e.index)&&t.push({path:A,score:k(A,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of M(e.path))o(e,t,!0,i);else o(e,t)}),t}function M(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let s=M(i.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),r&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var F=/^:[\w-]+$/,I=3,U=2,L=1,R=10,P=-2,N=e=>"*"===e;function k(e,t){let n=e.split("/"),i=n.length;return n.some(N)&&(i+=P),t&&(i+=U),n.filter(e=>!N(e)).reduce((e,t)=>e+(F.test(t)?I:""===t?L:R),i)}function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},o="/",s=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,A="/"===o?t:t.slice(o.length)||"/",c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},A),u=e.route;if(!c&&l&&n&&!i[i.length-1].route.index&&(c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},A)),!c)return null;Object.assign(r,c.params),s.push({params:r,pathname:K([o,c.pathname]),pathnameBase:q(K([o,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(o=K([o,c.pathnameBase]))}return s}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=H(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1),l=i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function Q(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function G(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function V(e){let t=j(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function W(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=B(e):(i=A({},e),v(!i.pathname||!i.pathname.includes("?"),G("?","pathname","search",i)),v(!i.pathname||!i.pathname.includes("#"),G("#","pathname","hash",i)),v(!i.search||!i.search.includes("#"),G("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?B(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:X(i),hash:J(r)}}(i,o),c=a&&"/"!==a&&a.endsWith("/"),u=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var K=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],$=(new Set(Z),["GET",...Z]);new Set($),Symbol("ResetLoaderData");var ee=i.createContext(null);ee.displayName="DataRouter";var te=i.createContext(null);te.displayName="DataRouterState";var ne=i.createContext(!1);var ie=i.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var re=i.createContext(new Map);re.displayName="Fetchers";var oe=i.createContext(null);oe.displayName="Await";var se=i.createContext(null);se.displayName="Navigation";var ae=i.createContext(null);ae.displayName="Location";var le=i.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var Ae=i.createContext(null);Ae.displayName="RouteError";function ce(){return null!=i.useContext(ae)}function ue(){return v(ce(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(ae).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function de(e){i.useContext(se).static||i.useLayoutEffect(e)}function pe(){let{isDataRoute:e}=i.useContext(le);return e?function(){let{router:e}=_e("useNavigate"),t=Se("useNavigate"),n=i.useRef(!1);de(()=>{n.current=!0});let r=i.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(n.current,he),n.current&&("number"===typeof i?e.navigate(i):await e.navigate(i,A({fromRouteId:t},r)))},[e,t]);return r}():function(){v(ce(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(ee),{basename:t,navigator:n}=i.useContext(se),{matches:r}=i.useContext(le),{pathname:o}=ue(),s=JSON.stringify(V(r)),a=i.useRef(!1);de(()=>{a.current=!0});let l=i.useCallback(function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(a.current,he),!a.current)return;if("number"===typeof i)return void n.go(i);let l=W(i,JSON.parse(s),o,"path"===r.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:K([t,l.pathname])),(r.replace?n.replace:n.push)(l,r.state,r)},[t,n,s,o,e]);return l}()}i.createContext(null);function fe(){let{matches:e}=i.useContext(le),t=e[e.length-1];return t?t.params:{}}function ge(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(le),{pathname:r}=ue(),o=JSON.stringify(V(n));return i.useMemo(()=>W(e,JSON.parse(o),r,"path"===t),[e,o,r,t])}function me(e,t,n,r,o){v(ce(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=i.useContext(se),{matches:a}=i.useContext(le),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",d=l&&l.route;{let e=d&&d.path||"";Me(u,!d||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=ue();if(t){var g;let e="string"===typeof t?B(t):t;v("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let m=p.pathname||"/",w=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=S(e,{pathname:w});y(d||null!=b,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),y(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=xe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:K([h,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:K([h,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,r,o);return t&&x?i.createElement(ae.Provider,{value:{location:A({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},x):x}function ve(){let e=Ee(),t=Y(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:s},"ErrorBoundary")," or"," ",i.createElement("code",{style:s},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,a)}var ye=i.createElement(ve,null),we=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?i.createElement(le.Provider,{value:this.props.routeContext},i.createElement(Ae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function be(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(ee);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(le.Provider,{value:t},r)}function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=o.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let a=!1,l=-1;if(n)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=i),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){a=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((e,A,c)=>{let u,h=!1,d=null,p=null;n&&(u=s&&A.route.id?s[A.route.id]:void 0,d=A.route.errorElement||ye,a&&(l<0&&0===c?(Me("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===c&&(h=!0,p=A.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,c+1)),g=()=>{let t;return t=u?d:h?p:A.route.Component?i.createElement(A.route.Component,null):A.route.element?A.route.element:e,i.createElement(be,{match:A,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(A.route.ErrorBoundary||A.route.errorElement||0===c)?i.createElement(we,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:r}):g()},null)}function Be(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _e(e){let t=i.useContext(ee);return v(t,Be(e)),t}function Ce(e){let t=i.useContext(te);return v(t,Be(e)),t}function Se(e){let t=function(e){let t=i.useContext(le);return v(t,Be(e)),t}(e),n=t.matches[t.matches.length-1];return v(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ee(){var e;let t=i.useContext(Ae),n=Ce("useRouteError"),r=Se("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var Te={};function Me(e,t,n){t||Te[e]||(Te[e]=!0,y(!1,n))}var Fe={};function Ie(e,t){e||Fe[t]||(Fe[t]=!0,console.warn(t))}i.memo(function(e){let{routes:t,future:n,state:i,unstable_onError:r}=e;return me(t,void 0,i,r,n)});function Ue(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:t="/",children:n=null,location:r,navigationType:o="POP",navigator:s,static:a=!1}=e;v(!ce(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),A=i.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);"string"===typeof r&&(r=B(r));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:p="default"}=r,f=i.useMemo(()=>{let e=z(c,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:d,key:p},navigationType:o}},[l,c,u,h,d,p,o]);return y(null!=f,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(c).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:i.createElement(se.Provider,{value:A},i.createElement(ae.Provider,{children:n,value:f}))}function Re(e){let{children:t,location:n}=e;return me(Pe(t),n)}i.Component;function Pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Pe(e.props.children,o));v(e.type===Ue,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Pe(e.props.children,o)),n.push(s)}),n}var Ne="get",ke="application/x-www-form-urlencoded";function De(e){return null!=e&&"string"===typeof e.tagName}var Oe=null;var He=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qe(e){return null==e||He.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ke,'"')),null)}function ze(e,t){let n,i,r,o,s;if(De(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");i=s?z(s,t):null,n=e.getAttribute("method")||Ne,r=Qe(e.getAttribute("enctype"))||ke,o=new FormData(e)}else if(function(e){return De(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return De(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(i=a?z(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Ne,r=Qe(e.getAttribute("formenctype"))||Qe(s.getAttribute("enctype"))||ke,o=new FormData(s,e),!function(){if(null===Oe)try{new FormData(document.createElement("form"),0),Oe=!1}catch(e){Oe=!0}return Oe}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,i)}}else{if(De(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ne,i=null,r=ke,s=e}var a;return o&&"text/plain"===r&&(s=o,o=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ge(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function je(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.".concat(n):t&&"/"===z(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function Ve(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function We(e){return null!=e&&"string"===typeof e.page}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function qe(e,t,n,i,r,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>s(e,t)||a(e,t)):"data"===o?t.filter((t,o)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){var A;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(A=n[0])||void 0===A?void 0:A.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Xe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function Je(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!We(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(o)||(n.add(o),e.push({key:o,link:r})),e},[])}function Ye(e,t){return"lazy"===e.mode&&!0===t}function Ze(){let e=i.useContext(ee);return Ge(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $e(){let e=i.useContext(te);return Ge(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var et=i.createContext(void 0);function tt(){let e=i.useContext(et);return Ge(e,"You must render this element inside a <HydratedRouter> element"),e}function nt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function it(e,t,n){if(n&&!at)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}et.displayName="FrameworkContext";function rt(e){let{page:t}=e,n=s(e,u),{router:r}=Ze(),o=i.useMemo(()=>S(r.routes,t,r.basename),[r.routes,t,r.basename]);return o?i.createElement(st,A({page:t,matches:o},n)):null}function ot(e){let{manifest:t,routeModules:n}=tt(),[r,o]=i.useState([]);return i.useEffect(()=>{let i=!1;return async function(e,t,n){return Je((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await Ve(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?A(A({},e),{},{rel:"prefetch",as:"style"}):A(A({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{i||o(e)}),()=>{i=!0}},[e,t,n]),r}function st(e){let{page:t,matches:n}=e,r=s(e,h),o=ue(),{manifest:a,routeModules:l}=tt(),{basename:c}=Ze(),{loaderData:u,matches:d}=$e(),p=i.useMemo(()=>qe(t,n,d,a,o,"data"),[t,n,d,a,o]),f=i.useMemo(()=>qe(t,n,d,a,o,"assets"),[t,n,d,a,o]),g=i.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,i=!1;if(n.forEach(t=>{var n;let r=a.routes[t.route.id];r&&r.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||r.hasClientLoader?i=!0:e.add(t.route.id))}),0===e.size)return[];let r=je(t,c,"data");return i&&e.size>0&&r.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[c,u,o,a,p,n,t,l]),m=i.useMemo(()=>Xe(f,a),[f,a]),v=ot(f);return i.createElement(i.Fragment,null,g.map(e=>i.createElement("link",A({key:e,rel:"prefetch",as:"fetch",href:e},r))),m.map(e=>i.createElement("link",A({key:e,rel:"modulepreload",href:e},r))),v.map(e=>{let{key:t,link:n}=e;return i.createElement("link",A({key:t,nonce:r.nonce},n))}))}var at=!1;function lt(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:o,routeDiscovery:a,ssr:l}=tt(),{router:u,static:h,staticContext:d}=Ze(),{matches:p}=$e(),f=i.useContext(ne),g=Ye(a,l);o&&(o.didRenderScripts=!0);let m=it(p,null,r);i.useEffect(()=>{0},[]);let v=i.useMemo(()=>{var r;if(f)return null;let o=d?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=h?"".concat(null!==t.hmr&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(m.map((e,n)=>{let i="route".concat(n),r=t.routes[e.route.id];Ge(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:s,clientMiddlewareModule:a,hydrateFallbackModule:l,module:A}=r,c=[...o?[{module:o,varName:"".concat(i,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(i,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:A,varName:"".concat(i,"_main")}];return 1===c.length?"import * as ".concat(i," from ").concat(JSON.stringify(A),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=s(e,c),r=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(o.pop();o.length>0;)a.push("/".concat(o.join("/"))),o.pop();a.forEach(e=>{let n=S(t.routes,e,t.basename);n&&n.forEach(e=>r.add(e.route.id))});let l=[...r].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return A(A({},i),{},{routes:l,sri:!!n||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(m.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return i.createElement(i.Fragment,null,i.createElement("script",A(A({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),i.createElement("script",A(A({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),y=at||f?[]:(t.entry.imports.concat(Xe(m,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let b="object"===typeof t.sri?t.sri:{};return Ie(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),at||f?null:i.createElement(i.Fragment,null,"object"===typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,g?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:b[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:b[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:b[t],suppressHydrationWarning:!0})),v)}function At(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}i.Component;function ct(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,o=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Y(t))return i.createElement(ut,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),o);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return i.createElement(ut,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),o)}function ut(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:o,children:s}=e,{routeModules:a}=tt();return null!==a.root&&void 0!==t&&t.Layout&&!o?s:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,n)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,r?i.createElement(lt,null):null)))}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.9.3")}catch(EI){}function dt(e){let{basename:t,children:n,window:r}=e,o=i.useRef();null==o.current&&(o.current=m({window:r,v5Compat:!0}));let s=o.current,[a,l]=i.useState({action:s.action,location:s.location}),A=i.useCallback(e=>{i.startTransition(()=>l(e))},[l]);return i.useLayoutEffect(()=>s.listen(A),[s,A]),i.createElement(Le,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=i.forwardRef(function(e,t){let n,{onClick:r,discover:o="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:h,target:p,to:f,preventScrollReset:g,viewTransition:m}=e,w=s(e,d),{basename:b}=i.useContext(se),B="string"===typeof f&&pt.test(f),_=!1;if("string"===typeof f&&B&&(n=f,ht))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=z(t.pathname,b);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:_=!0}catch(EI){y(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(ce(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(se),{hash:o,pathname:s,search:a}=ge(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:K([n,s])),r.createHref({pathname:l,search:a,hash:o})}(f,{relative:l}),[S,E,T]=function(e,t){let n=i.useContext(et),[r,o]=i.useState(!1),[s,a]=i.useState(!1),{onFocus:l,onBlur:A,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,d=i.useRef(null);i.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return d.current&&e.observe(d.current),()=>{e.disconnect()}}},[e]),i.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{o(!0)},f=()=>{o(!1),a(!1)};return n?"intent"!==e?[s,d,{}]:[s,d,{onFocus:nt(l,p),onBlur:nt(A,f),onMouseEnter:nt(c,p),onMouseLeave:nt(u,f),onTouchStart:nt(h,p)}]:[!1,d,{}]}(a,w),M=function(e){let{target:t,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=pe(),A=ue(),c=ge(e,{relative:s});return i.useCallback(i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:x(A)===x(c);l(e,{replace:t,state:r,preventScrollReset:o,relative:s,viewTransition:a})}},[A,l,c,n,r,t,e,o,s,a])}(f,{replace:u,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:m});let F=i.createElement("a",A(A(A({},w),T),{},{href:n||C,onClick:_||c?r:function(e){r&&r(e),e.defaultPrevented||M(e)},ref:At(t,E),target:p,"data-discover":B||"render"!==o?void 0:"true"}));return S&&!B?i.createElement(i.Fragment,null,F,i.createElement(rt,{page:C})):F});ft.displayName="Link",i.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:o="",end:a=!1,style:l,to:c,viewTransition:u,children:h}=e,d=s(e,p),f=ge(c,{relative:d.relative}),g=ue(),m=i.useContext(te),{navigator:y,basename:w}=i.useContext(se),b=null!=m&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext(ie);v(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vt("useViewTransitionState"),o=ge(e,{relative:t});if(!n.isTransitioning)return!1;let s=z(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=z(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=O(o.pathname,a)||null!=O(o.pathname,s)}(f)&&!0===u,x=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,B=g.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(B=B.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&w&&(_=z(_,w)||_);const C="/"!==x&&x.endsWith("/")?x.length-1:x.length;let S,E=B===x||!a&&B.startsWith(x)&&"/"===B.charAt(C),T=null!=_&&(_===x||!a&&_.startsWith(x)&&"/"===_.charAt(x.length)),M={isActive:E,isPending:T,isTransitioning:b},F=E?n:void 0;S="function"===typeof o?o(M):[o,E?"active":null,T?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof l?l(M):l;return i.createElement(ft,A(A({},d),{},{"aria-current":F,className:S,ref:t,style:I,to:c,viewTransition:u}),"function"===typeof h?h(M):h)}).displayName="NavLink";var gt=i.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:o,reloadDocument:a,replace:l,state:c,method:u=Ne,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:m}=e,y=s(e,f),w=bt(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(se),r=i.useContext(le);v(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s=A({},ge(e||".",{relative:t})),a=ue();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:K([n,s.pathname]));return x(s)}(h,{relative:p}),B="get"===u.toLowerCase()?"get":"post",_="string"===typeof h&&pt.test(h);return i.createElement("form",A(A({ref:t,method:B,action:b,onSubmit:a?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;w(t||e.currentTarget,{fetcherKey:r,method:n,navigate:o,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:m})}},y),{},{"data-discover":_||"render"!==n?void 0:"true"}))});function mt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function vt(e){let t=i.useContext(ee);return v(t,mt(e)),t}gt.displayName="Form";var yt=0,wt=()=>"__".concat(String(++yt),"__");function bt(){let{router:e}=vt("useSubmit"),{basename:t}=i.useContext(se),n=Se("useRouteId");return i.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:a,formData:l,body:A}=ze(i,t);if(!1===r.navigate){let t=r.fetcherKey||wt();await e.fetch(t,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:l,body:A,formMethod:r.method||s,formEncType:r.encType||a,flushSync:r.flushSync})}else await e.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:l,body:A,formMethod:r.method||s,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}var xt=n(579);let Bt;const _t=()=>{const e=pe();(0,i.useEffect)(()=>(document.body.style.background="linear-gradient(to right, #09162a, #0d284d, #113b72, #194f99)",function(){const e=200;for(let t=0;t<e;t++){const e=document.createElement("div");e.classList.add("backgroundStar");const t=Math.random()*window.innerWidth-20,n=Math.random()*document.documentElement.scrollHeight-20;e.style.left=t+"px",e.style.top=n+"px",e.style.animationDelay=5*Math.random()+"s",document.body.appendChild(e)}}(),Bt=setInterval(()=>{Math.random()>.75&&function(){const e=document.createElement("div");e.classList.add("shootingStar");let t=Math.random()>.5?window.innerWidth-100:100,n=Math.random()*(document.documentElement.scrollHeight/2);e.style.left=t+"px",e.style.top=n+"px",t>window.innerWidth/2?(e.style.animation="shootingLeft 1.5s linear forwards",e.classList.add("left")):(e.style.animation="shootingRight 1.5s linear forwards",e.classList.add("right")),document.body.appendChild(e),e.addEventListener("animationend",()=>{e.parentNode&&e.parentNode.removeChild(e)})}()},3e3),()=>{!function(){clearInterval(Bt);document.querySelectorAll(".shootingStar").forEach(e=>{e.parentNode&&(e.style.animation="none",e.parentNode.removeChild(e))})}(),document.querySelectorAll(".backgroundStar").forEach(e=>{document.body.removeChild(e)})}),[]);return(0,xt.jsxs)("div",{className:"home-container",children:[(0,xt.jsx)("h1",{className:"pageTitle",children:"AstroScope"}),(0,xt.jsxs)("section",{className:"tiles",children:[(0,xt.jsx)("h2",{className:"sectionHeader",children:"2D"}),(0,xt.jsxs)("div",{className:"tileContainer",children:[(0,xt.jsxs)("div",{className:"tile",children:[(0,xt.jsx)("span",{className:"tile-title",children:"The Galaxy"}),(0,xt.jsx)("button",{className:"launch-button",onClick:()=>e("/Viewer/1"),children:"Launch"})]}),(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})})]}),(0,xt.jsxs)("div",{className:"tileContainer",children:[(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})}),(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})})]}),(0,xt.jsxs)("div",{className:"tileContainer",children:[(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})}),(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})})]})]}),(0,xt.jsxs)("section",{className:"tiles",children:[(0,xt.jsx)("h2",{className:"sectionHeader",children:"2D and 3D"}),(0,xt.jsxs)("div",{className:"tileContainer",children:[(0,xt.jsxs)("div",{className:"tile",children:[(0,xt.jsx)("span",{className:"tile-title",children:"The Moon"}),(0,xt.jsx)("button",{className:"launch-button",onClick:()=>e("/Viewer/2"),children:"Launch"})]}),(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})})]}),(0,xt.jsxs)("div",{className:"tileContainer",children:[(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})}),(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})})]}),(0,xt.jsxs)("div",{className:"tileContainer",children:[(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})}),(0,xt.jsx)("div",{className:"tile",children:(0,xt.jsx)("span",{className:"tile-title",children:"Coming soon..."})})]})]})]})};var Ct=n(9820),St=n.n(Ct);var Et=n(7205);const Tt="180",Mt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ft={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},It=0,Ut=1,Lt=2,Rt=3,Pt=0,Nt=1,kt=2,Dt=3,Ot=0,Ht=1,Qt=2,zt=0,Gt=1,jt=2,Vt=3,Wt=4,Kt=5,qt=100,Xt=101,Jt=102,Yt=103,Zt=104,$t=200,en=201,tn=202,nn=203,rn=204,on=205,sn=206,an=207,ln=208,An=209,cn=210,un=211,hn=212,dn=213,pn=214,fn=0,gn=1,mn=2,vn=3,yn=4,wn=5,bn=6,xn=7,Bn=0,_n=1,Cn=2,Sn=0,En=1,Tn=2,Mn=3,Fn=4,In=5,Un=6,Ln=7,Rn="attached",Pn="detached",Nn=300,kn=301,Dn=302,On=303,Hn=304,Qn=306,zn=1e3,Gn=1001,jn=1002,Vn=1003,Wn=1004,Kn=1004,qn=1005,Xn=1005,Jn=1006,Yn=1007,Zn=1007,$n=1008,ei=1008,ti=1009,ni=1010,ii=1011,ri=1012,oi=1013,si=1014,ai=1015,li=1016,Ai=1017,ci=1018,ui=1020,hi=35902,di=35899,pi=1021,fi=1022,gi=1023,mi=1026,vi=1027,yi=1028,wi=1029,bi=1030,xi=1031,Bi=1032,_i=1033,Ci=33776,Si=33777,Ei=33778,Ti=33779,Mi=35840,Fi=35841,Ii=35842,Ui=35843,Li=36196,Ri=37492,Pi=37496,Ni=37808,ki=37809,Di=37810,Oi=37811,Hi=37812,Qi=37813,zi=37814,Gi=37815,ji=37816,Vi=37817,Wi=37818,Ki=37819,qi=37820,Xi=37821,Ji=36492,Yi=36494,Zi=36495,$i=36283,er=36284,tr=36285,nr=36286,ir=2200,rr=2201,or=2202,sr=2300,ar=2301,lr=2302,Ar=2400,cr=2401,ur=2402,hr=2500,dr=2501,pr=0,fr=1,gr=2,mr=3200,vr=3201,yr=3202,wr=3203,br=0,xr=1,Br="",_r="srgb",Cr="srgb-linear",Sr="linear",Er="srgb",Tr=0,Mr=7680,Fr=7681,Ir=7682,Ur=7683,Lr=34055,Rr=34056,Pr=5386,Nr=512,kr=513,Dr=514,Or=515,Hr=516,Qr=517,zr=518,Gr=519,jr=512,Vr=513,Wr=514,Kr=515,qr=516,Xr=517,Jr=518,Yr=519,Zr=35044,$r=35048,eo=35040,to=35045,no=35049,io=35041,ro=35046,oo=35050,so=35042,ao="100",lo="300 es",Ao=2e3,co=2001,uo={COMPUTE:"compute",RENDER:"render"},ho={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},po={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class fo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const go=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mo=1234567;const vo=Math.PI/180,yo=180/Math.PI;function wo(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(go[255&e]+go[e>>8&255]+go[e>>16&255]+go[e>>24&255]+"-"+go[255&t]+go[t>>8&255]+"-"+go[t>>16&15|64]+go[t>>24&255]+"-"+go[63&n|128]+go[n>>8&255]+"-"+go[n>>16&255]+go[n>>24&255]+go[255&i]+go[i>>8&255]+go[i>>16&255]+go[i>>24&255]).toLowerCase()}function bo(e,t,n){return Math.max(t,Math.min(n,e))}function xo(e,t){return(e%t+t)%t}function Bo(e,t,n){return(1-n)*e+n*t}function _o(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Co(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const So={DEG2RAD:vo,RAD2DEG:yo,generateUUID:wo,clamp:bo,euclideanModulo:xo,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Bo,damp:function(e,t,n,i){return Bo(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(xo(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(mo=e);let t=mo+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*vo},radToDeg:function(e){return e*yo},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),A=o((t+i)/2),c=s((t+i)/2),u=o((t-i)/2),h=s((t-i)/2),d=o((i-t)/2),p=s((i-t)/2);switch(r){case"XYX":e.set(a*c,l*u,l*h,a*A);break;case"YZY":e.set(l*h,a*c,l*u,a*A);break;case"ZXZ":e.set(l*u,l*h,a*c,a*A);break;case"XZX":e.set(a*c,l*p,l*d,a*A);break;case"YXY":e.set(l*d,a*c,l*p,a*A);break;case"ZYZ":e.set(l*p,l*d,a*c,a*A);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Co,denormalize:_o};class Eo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Eo.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=bo(this.x,e.x,t.x),this.y=bo(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=bo(this.x,e,t),this.y=bo(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(bo(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bo(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class To{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],l=n[i+1],A=n[i+2],c=n[i+3];const u=r[o+0],h=r[o+1],d=r[o+2],p=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=A,void(e[t+3]=c);if(1===s)return e[t+0]=u,e[t+1]=h,e[t+2]=d,void(e[t+3]=p);if(c!==p||a!==u||l!==h||A!==d){let e=1-s;const t=a*u+l*h+A*d+c*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*n;if(a=a*e+u*r,l=l*e+h*r,A=A*e+d*r,c=c*e+p*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+A*A+c*c);a*=e,l*=e,A*=e,c*=e}}e[t]=a,e[t+1]=l,e[t+2]=A,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,i,r,o){const s=n[i],a=n[i+1],l=n[i+2],A=n[i+3],c=r[o],u=r[o+1],h=r[o+2],d=r[o+3];return e[t]=s*d+A*c+a*h-l*u,e[t+1]=a*d+A*u+l*c-s*h,e[t+2]=l*d+A*h+s*u-a*c,e[t+3]=A*d-s*c-a*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),A=s(i/2),c=s(r/2),u=a(n/2),h=a(i/2),d=a(r/2);switch(o){case"XYZ":this._x=u*A*c+l*h*d,this._y=l*h*c-u*A*d,this._z=l*A*d+u*h*c,this._w=l*A*c-u*h*d;break;case"YXZ":this._x=u*A*c+l*h*d,this._y=l*h*c-u*A*d,this._z=l*A*d-u*h*c,this._w=l*A*c+u*h*d;break;case"ZXY":this._x=u*A*c-l*h*d,this._y=l*h*c+u*A*d,this._z=l*A*d+u*h*c,this._w=l*A*c-u*h*d;break;case"ZYX":this._x=u*A*c-l*h*d,this._y=l*h*c+u*A*d,this._z=l*A*d-u*h*c,this._w=l*A*c+u*h*d;break;case"YZX":this._x=u*A*c+l*h*d,this._y=l*h*c+u*A*d,this._z=l*A*d-u*h*c,this._w=l*A*c-u*h*d;break;case"XZY":this._x=u*A*c-l*h*d,this._y=l*h*c-u*A*d,this._z=l*A*d+u*h*c,this._w=l*A*c+u*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],A=t[6],c=t[10],u=n+s+c;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(A-a)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>s&&n>c){const e=2*Math.sqrt(1+n-s-c);this._w=(A-a)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(s>c){const e=2*Math.sqrt(1+s-n-c);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(a+A)/e}else{const e=2*Math.sqrt(1+c-n-s);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(a+A)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bo(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,A=t._w;return this._x=n*A+o*s+i*l-r*a,this._y=i*A+o*a+r*s-n*l,this._z=r*A+o*l+n*a-i*s,this._w=o*A-n*s-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(a),A=Math.atan2(l,s),c=Math.sin((1-t)*A)/l,u=Math.sin(t*A)/l;return this._w=o*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Mo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Mo.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Io.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Io.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=2*(o*i-s*n),A=2*(s*t-r*i),c=2*(r*n-o*t);return this.x=t+a*l+o*c-s*A,this.y=n+a*A+s*l-r*c,this.z=i+a*c+r*A-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=bo(this.x,e.x,t.x),this.y=bo(this.y,e.y,t.y),this.z=bo(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=bo(this.x,e,t),this.y=bo(this.y,e,t),this.z=bo(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(bo(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Fo.copy(this).projectOnVector(e),this.sub(Fo)}reflect(e){return this.sub(Fo.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bo(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Fo=new Mo,Io=new To;class Uo{constructor(e,t,n,i,r,o,s,a,l){Uo.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,l)}set(e,t,n,i,r,o,s,a,l){const A=this.elements;return A[0]=e,A[1]=i,A[2]=s,A[3]=t,A[4]=r,A[5]=a,A[6]=n,A[7]=o,A[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],A=n[4],c=n[7],u=n[2],h=n[5],d=n[8],p=i[0],f=i[3],g=i[6],m=i[1],v=i[4],y=i[7],w=i[2],b=i[5],x=i[8];return r[0]=o*p+s*m+a*w,r[3]=o*f+s*v+a*b,r[6]=o*g+s*y+a*x,r[1]=l*p+A*m+c*w,r[4]=l*f+A*v+c*b,r[7]=l*g+A*y+c*x,r[2]=u*p+h*m+d*w,r[5]=u*f+h*v+d*b,r[8]=u*g+h*y+d*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],A=e[8];return t*o*A-t*s*l-n*r*A+n*s*a+i*r*l-i*o*a}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],A=e[8],c=A*o-s*l,u=s*a-A*r,h=l*r-o*a,d=t*c+n*u+i*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return e[0]=c*p,e[1]=(i*l-A*n)*p,e[2]=(s*n-i*o)*p,e[3]=u*p,e[4]=(A*t-i*a)*p,e[5]=(i*r-s*t)*p,e[6]=h*p,e[7]=(n*a-l*t)*p,e[8]=(o*t-n*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,s){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-i*l,i*a,-i*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Lo.makeScale(e,t)),this}rotate(e){return this.premultiply(Lo.makeRotation(-e)),this}translate(e,t){return this.premultiply(Lo.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Lo=new Uo;function Ro(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Po={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function No(e,t){return new Po[e](t)}function ko(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Do(){const e=ko("canvas");return e.style.display="block",e}const Oo={};function Ho(e){e in Oo||(Oo[e]=!0,console.warn(e))}const Qo=(new Uo).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),zo=(new Uo).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Go(){const e={enabled:!0,workingColorSpace:Cr,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===Er&&(e.r=Vo(e.r),e.g=Vo(e.g),e.b=Vo(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Er&&(e.r=Wo(e.r),e.g=Wo(e.g),e.b=Wo(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Br?Sr:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return Ho("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return Ho("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return e.define({[Cr]:{primaries:t,whitePoint:i,transfer:Sr,toXYZ:Qo,fromXYZ:zo,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:_r},outputColorSpaceConfig:{drawingBufferColorSpace:_r}},[_r]:{primaries:t,whitePoint:i,transfer:Er,toXYZ:Qo,fromXYZ:zo,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:_r}}}),e}const jo=Go();function Vo(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Wo(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Ko;class qo{static getDataURL(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ko&&(Ko=ko("canvas")),Ko.width=e.width,Ko.height=e.height;const n=Ko.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ko}return t.toDataURL(n)}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=ko("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Vo(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Vo(t[e]/255)):t[e]=Vo(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Xo=0;class Jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Xo++}),this.uuid=wo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Yo(i[t].image)):e.push(Yo(i[t]))}else e=Yo(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Yo(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?qo.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Zo=0;const $o=new Mo;class es extends fo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:es.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gn,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gn,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jn,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$n,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gi,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ti,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:es.DEFAULT_ANISOTROPY,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Br;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Zo++}),this.uuid=wo(),this.name="",this.source=new Jo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Eo(0,0),this.repeat=new Eo(1,1),this.center=new Eo(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Uo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=A,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize($o).x}get height(){return this.source.getSize($o).y}get depth(){return this.source.getSize($o).z}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Texture.setValues(): parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n:console.warn("THREE.Texture.setValues(): property '".concat(t,"' does not exist."))}}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Nn)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zn:e.x=e.x-Math.floor(e.x);break;case Gn:e.x=e.x<0?0:1;break;case jn:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case zn:e.y=e.y-Math.floor(e.y);break;case Gn:e.y=e.y<0?0:1;break;case jn:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}es.DEFAULT_IMAGE=null,es.DEFAULT_MAPPING=Nn,es.DEFAULT_ANISOTROPY=1;class ts{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ts.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,s=.1,a=e.elements,l=a[0],A=a[4],c=a[8],u=a[1],h=a[5],d=a[9],p=a[2],f=a[6],g=a[10];if(Math.abs(A-u)<o&&Math.abs(c-p)<o&&Math.abs(d-f)<o){if(Math.abs(A+u)<s&&Math.abs(c+p)<s&&Math.abs(d+f)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(h+1)/2,m=(g+1)/2,v=(A+u)/4,y=(c+p)/4,w=(d+f)/4;return e>a&&e>m?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=v/n,r=y/n):a>m?a<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=v/i,r=w/i):m<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(m),n=y/r,i=w/r),this.set(n,i,r,t),this}let m=Math.sqrt((f-d)*(f-d)+(c-p)*(c-p)+(u-A)*(u-A));return Math.abs(m)<.001&&(m=1),this.x=(f-d)/m,this.y=(c-p)/m,this.z=(u-A)/m,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=bo(this.x,e.x,t.x),this.y=bo(this.y,e.y,t.y),this.z=bo(this.z,e.z,t.z),this.w=bo(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=bo(this.x,e,t),this.y=bo(this.y,e,t),this.z=bo(this.z,e,t),this.w=bo(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(bo(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ns extends fo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new ts(0,0,e,t),this.scissorTest=!1,this.viewport=new ts(0,0,e,t);const i={width:e,height:t,depth:n.depth},r=new es(i);this.textures=[];const o=n.count;for(let s=0;s<o;s++)this.textures[s]=r.clone(),this.textures[s].isRenderTargetTexture=!0,this.textures[s].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={minFilter:Jn,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++){this.textures[n].setValues(t)}}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new Jo(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class is extends ns{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class rs extends es{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=Gn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class os extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new rs(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class ss extends es{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=Gn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class as extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ss(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(cs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(cs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=cs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,cs):cs.fromBufferAttribute(i,t),cs.applyMatrix4(e.matrixWorld),this.expandByPoint(cs);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),us.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),us.copy(n.boundingBox)),us.applyMatrix4(e.matrixWorld),this.union(us)}const i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,cs),cs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vs),ys.subVectors(this.max,vs),hs.subVectors(e.a,vs),ds.subVectors(e.b,vs),ps.subVectors(e.c,vs),fs.subVectors(ds,hs),gs.subVectors(ps,ds),ms.subVectors(hs,ps);let t=[0,-fs.z,fs.y,0,-gs.z,gs.y,0,-ms.z,ms.y,fs.z,0,-fs.x,gs.z,0,-gs.x,ms.z,0,-ms.x,-fs.y,fs.x,0,-gs.y,gs.x,0,-ms.y,ms.x,0];return!!xs(t,hs,ds,ps,ys)&&(t=[1,0,0,0,1,0,0,0,1],!!xs(t,hs,ds,ps,ys)&&(ws.crossVectors(fs,gs),t=[ws.x,ws.y,ws.z],xs(t,hs,ds,ps,ys)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,cs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(cs).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(As[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),As[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),As[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),As[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),As[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),As[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),As[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),As[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(As)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const As=[new Mo,new Mo,new Mo,new Mo,new Mo,new Mo,new Mo,new Mo],cs=new Mo,us=new ls,hs=new Mo,ds=new Mo,ps=new Mo,fs=new Mo,gs=new Mo,ms=new Mo,vs=new Mo,ys=new Mo,ws=new Mo,bs=new Mo;function xs(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){bs.fromArray(e,o);const s=r.x*Math.abs(bs.x)+r.y*Math.abs(bs.y)+r.z*Math.abs(bs.z),a=t.dot(bs),l=n.dot(bs),A=i.dot(bs);if(Math.max(-Math.max(a,l,A),Math.min(a,l,A))>s)return!1}return!0}const Bs=new ls,_s=new Mo,Cs=new Mo;class Ss{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Bs.setFromPoints(e).getCenter(n);let i=0;for(let r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_s.subVectors(e,this.center);const t=_s.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(_s,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Cs.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_s.copy(e.center).add(Cs)),this.expandByPoint(_s.copy(e.center).sub(Cs))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Es=new Mo,Ts=new Mo,Ms=new Mo,Fs=new Mo,Is=new Mo,Us=new Mo,Ls=new Mo;class Rs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Es)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Es.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Es.copy(this.origin).addScaledVector(this.direction,t),Es.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Ts.copy(e).add(t).multiplyScalar(.5),Ms.copy(t).sub(e).normalize(),Fs.copy(this.origin).sub(Ts);const r=.5*e.distanceTo(t),o=-this.direction.dot(Ms),s=Fs.dot(this.direction),a=-Fs.dot(Ms),l=Fs.lengthSq(),A=Math.abs(1-o*o);let c,u,h,d;if(A>0)if(c=o*a-s,u=o*s-a,d=r*A,c>=0)if(u>=-d)if(u<=d){const e=1/A;c*=e,u*=e,h=c*(c+o*u+2*s)+u*(o*c+u+2*a)+l}else u=r,c=Math.max(0,-(o*u+s)),h=-c*c+u*(u+2*a)+l;else u=-r,c=Math.max(0,-(o*u+s)),h=-c*c+u*(u+2*a)+l;else u<=-d?(c=Math.max(0,-(-o*r+s)),u=c>0?-r:Math.min(Math.max(-r,-a),r),h=-c*c+u*(u+2*a)+l):u<=d?(c=0,u=Math.min(Math.max(-r,-a),r),h=u*(u+2*a)+l):(c=Math.max(0,-(o*r+s)),u=c>0?r:Math.min(Math.max(-r,-a),r),h=-c*c+u*(u+2*a)+l);else u=o>0?-r:r,c=Math.max(0,-(o*u+s)),h=-c*c+u*(u+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(Ts).addScaledVector(Ms,u),h}intersectSphere(e,t){Es.subVectors(e.center,this.origin);const n=Es.dot(this.direction),i=Es.dot(Es)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,s,a;const l=1/this.direction.x,A=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),A>=0?(r=(e.min.y-u.y)*A,o=(e.max.y-u.y)*A):(r=(e.max.y-u.y)*A,o=(e.min.y-u.y)*A),n>o||r>i?null:((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),c>=0?(s=(e.min.z-u.z)*c,a=(e.max.z-u.z)*c):(s=(e.max.z-u.z)*c,a=(e.min.z-u.z)*c),n>a||s>i?null:((s>n||n!==n)&&(n=s),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Es)}intersectTriangle(e,t,n,i,r){Is.subVectors(t,e),Us.subVectors(n,e),Ls.crossVectors(Is,Us);let o,s=this.direction.dot(Ls);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Fs.subVectors(this.origin,e);const a=o*this.direction.dot(Us.crossVectors(Fs,Us));if(a<0)return null;const l=o*this.direction.dot(Is.cross(Fs));if(l<0)return null;if(a+l>s)return null;const A=-o*Fs.dot(Ls);return A<0?null:this.at(A/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ps{constructor(e,t,n,i,r,o,s,a,l,A,c,u,h,d,p,f){Ps.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,l,A,c,u,h,d,p,f)}set(e,t,n,i,r,o,s,a,l,A,c,u,h,d,p,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=A,g[10]=c,g[14]=u,g[3]=h,g[7]=d,g[11]=p,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ps).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ns.setFromMatrixColumn(e,0).length(),r=1/Ns.setFromMatrixColumn(e,1).length(),o=1/Ns.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),A=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){const e=o*A,n=o*c,i=s*A,r=s*c;t[0]=a*A,t[4]=-a*c,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*A,n=a*c,i=l*A,r=l*c;t[0]=e+r*s,t[4]=i*s-n,t[8]=o*l,t[1]=o*c,t[5]=o*A,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*A,n=a*c,i=l*A,r=l*c;t[0]=e-r*s,t[4]=-o*c,t[8]=i+n*s,t[1]=n+i*s,t[5]=o*A,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*A,n=o*c,i=s*A,r=s*c;t[0]=a*A,t[4]=i*l-n,t[8]=e*l+r,t[1]=a*c,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*A,t[4]=r-e*c,t[8]=i*c+n,t[1]=c,t[5]=o*A,t[9]=-s*A,t[2]=-l*A,t[6]=n*c+i,t[10]=e-r*c}else if("XZY"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*A,t[4]=-c,t[8]=l*A,t[1]=e*c+r,t[5]=o*A,t[9]=n*c-i,t[2]=i*c-n,t[6]=s*A,t[10]=r*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ds,e,Os)}lookAt(e,t,n){const i=this.elements;return zs.subVectors(e,t),0===zs.lengthSq()&&(zs.z=1),zs.normalize(),Hs.crossVectors(n,zs),0===Hs.lengthSq()&&(1===Math.abs(n.z)?zs.x+=1e-4:zs.z+=1e-4,zs.normalize(),Hs.crossVectors(n,zs)),Hs.normalize(),Qs.crossVectors(zs,Hs),i[0]=Hs.x,i[4]=Qs.x,i[8]=zs.x,i[1]=Hs.y,i[5]=Qs.y,i[9]=zs.y,i[2]=Hs.z,i[6]=Qs.z,i[10]=zs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],A=n[1],c=n[5],u=n[9],h=n[13],d=n[2],p=n[6],f=n[10],g=n[14],m=n[3],v=n[7],y=n[11],w=n[15],b=i[0],x=i[4],B=i[8],_=i[12],C=i[1],S=i[5],E=i[9],T=i[13],M=i[2],F=i[6],I=i[10],U=i[14],L=i[3],R=i[7],P=i[11],N=i[15];return r[0]=o*b+s*C+a*M+l*L,r[4]=o*x+s*S+a*F+l*R,r[8]=o*B+s*E+a*I+l*P,r[12]=o*_+s*T+a*U+l*N,r[1]=A*b+c*C+u*M+h*L,r[5]=A*x+c*S+u*F+h*R,r[9]=A*B+c*E+u*I+h*P,r[13]=A*_+c*T+u*U+h*N,r[2]=d*b+p*C+f*M+g*L,r[6]=d*x+p*S+f*F+g*R,r[10]=d*B+p*E+f*I+g*P,r[14]=d*_+p*T+f*U+g*N,r[3]=m*b+v*C+y*M+w*L,r[7]=m*x+v*S+y*F+w*R,r[11]=m*B+v*E+y*I+w*P,r[15]=m*_+v*T+y*U+w*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],A=e[2],c=e[6],u=e[10],h=e[14];return e[3]*(+r*a*c-i*l*c-r*s*u+n*l*u+i*s*h-n*a*h)+e[7]*(+t*a*h-t*l*u+r*o*u-i*o*h+i*l*A-r*a*A)+e[11]*(+t*l*c-t*s*h-r*o*c+n*o*h+r*s*A-n*l*A)+e[15]*(-i*s*A-t*a*c+t*s*u+i*o*c-n*o*u+n*a*A)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],A=e[8],c=e[9],u=e[10],h=e[11],d=e[12],p=e[13],f=e[14],g=e[15],m=c*f*l-p*u*l+p*a*h-s*f*h-c*a*g+s*u*g,v=d*u*l-A*f*l-d*a*h+o*f*h+A*a*g-o*u*g,y=A*p*l-d*c*l+d*s*h-o*p*h-A*s*g+o*c*g,w=d*c*a-A*p*a-d*s*u+o*p*u+A*s*f-o*c*f,b=t*m+n*v+i*y+r*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=m*x,e[1]=(p*u*r-c*f*r-p*i*h+n*f*h+c*i*g-n*u*g)*x,e[2]=(s*f*r-p*a*r+p*i*l-n*f*l-s*i*g+n*a*g)*x,e[3]=(c*a*r-s*u*r-c*i*l+n*u*l+s*i*h-n*a*h)*x,e[4]=v*x,e[5]=(A*f*r-d*u*r+d*i*h-t*f*h-A*i*g+t*u*g)*x,e[6]=(d*a*r-o*f*r-d*i*l+t*f*l+o*i*g-t*a*g)*x,e[7]=(o*u*r-A*a*r+A*i*l-t*u*l-o*i*h+t*a*h)*x,e[8]=y*x,e[9]=(d*c*r-A*p*r-d*n*h+t*p*h+A*n*g-t*c*g)*x,e[10]=(o*p*r-d*s*r+d*n*l-t*p*l-o*n*g+t*s*g)*x,e[11]=(A*s*r-o*c*r-A*n*l+t*c*l+o*n*h-t*s*h)*x,e[12]=w*x,e[13]=(A*p*i-d*c*i+d*n*u-t*p*u-A*n*f+t*c*f)*x,e[14]=(d*s*i-o*p*i-d*n*a+t*p*a+o*n*f-t*s*f)*x,e[15]=(o*c*i-A*s*i+A*n*a-t*c*a-o*n*u+t*s*u)*x,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,A=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,A*s+n,A*a-i*o,0,l*a-i*s,A*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,A=o+o,c=s+s,u=r*l,h=r*A,d=r*c,p=o*A,f=o*c,g=s*c,m=a*l,v=a*A,y=a*c,w=n.x,b=n.y,x=n.z;return i[0]=(1-(p+g))*w,i[1]=(h+y)*w,i[2]=(d-v)*w,i[3]=0,i[4]=(h-y)*b,i[5]=(1-(u+g))*b,i[6]=(f+m)*b,i[7]=0,i[8]=(d+v)*x,i[9]=(f-m)*x,i[10]=(1-(u+p))*x,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Ns.set(i[0],i[1],i[2]).length();const o=Ns.set(i[4],i[5],i[6]).length(),s=Ns.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],ks.copy(this);const a=1/r,l=1/o,A=1/s;return ks.elements[0]*=a,ks.elements[1]*=a,ks.elements[2]*=a,ks.elements[4]*=l,ks.elements[5]*=l,ks.elements[6]*=l,ks.elements[8]*=A,ks.elements[9]*=A,ks.elements[10]*=A,t.setFromRotationMatrix(ks),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ao,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.elements,A=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),h=(n+i)/(n-i);let d,p;if(a)d=r/(o-r),p=o*r/(o-r);else if(s===Ao)d=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(s!==co)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-o/(o-r),p=-o*r/(o-r)}return l[0]=A,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ao,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.elements,A=2/(t-e),c=2/(n-i),u=-(t+e)/(t-e),h=-(n+i)/(n-i);let d,p;if(a)d=1/(o-r),p=o/(o-r);else if(s===Ao)d=-2/(o-r),p=-(o+r)/(o-r);else{if(s!==co)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);d=-1/(o-r),p=-r/(o-r)}return l[0]=A,l[4]=0,l[8]=0,l[12]=u,l[1]=0,l[5]=c,l[9]=0,l[13]=h,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ns=new Mo,ks=new Ps,Ds=new Mo(0,0,0),Os=new Mo(1,1,1),Hs=new Mo,Qs=new Mo,zs=new Mo,Gs=new Ps,js=new To;class Vs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Vs.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],o=i[4],s=i[8],a=i[1],l=i[5],A=i[9],c=i[2],u=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(bo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-A,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-bo(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(bo(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-bo(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(bo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-A,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-bo(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-A,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Gs.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Gs,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return js.setFromEuler(this),this.setFromQuaternion(js,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Vs.DEFAULT_ORDER="XYZ";class Ws{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let Ks=0;const qs=new Mo,Xs=new To,Js=new Ps,Ys=new Mo,Zs=new Mo,$s=new Mo,ea=new To,ta=new Mo(1,0,0),na=new Mo(0,1,0),ia=new Mo(0,0,1),ra={type:"added"},oa={type:"removed"},sa={type:"childadded",child:null},aa={type:"childremoved",child:null};class la extends fo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ks++}),this.uuid=wo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=la.DEFAULT_UP.clone();const e=new Mo,t=new Vs,n=new To,i=new Mo(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ps},normalMatrix:{value:new Uo}}),this.matrix=new Ps,this.matrixWorld=new Ps,this.matrixAutoUpdate=la.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=la.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ws,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Xs.setFromAxisAngle(e,t),this.quaternion.multiply(Xs),this}rotateOnWorldAxis(e,t){return Xs.setFromAxisAngle(e,t),this.quaternion.premultiply(Xs),this}rotateX(e){return this.rotateOnAxis(ta,e)}rotateY(e){return this.rotateOnAxis(na,e)}rotateZ(e){return this.rotateOnAxis(ia,e)}translateOnAxis(e,t){return qs.copy(e).applyQuaternion(this.quaternion),this.position.add(qs.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ta,e)}translateY(e){return this.translateOnAxis(na,e)}translateZ(e){return this.translateOnAxis(ia,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Js.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Ys.copy(e):Ys.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Zs.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Js.lookAt(Zs,Ys,this.up):Js.lookAt(Ys,Zs,this.up),this.quaternion.setFromRotationMatrix(Js),i&&(Js.extractRotation(i.matrixWorld),Xs.setFromRotationMatrix(Js),this.quaternion.premultiply(Xs.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ra),sa.child=e,this.dispatchEvent(sa),sa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oa),aa.child=e,this.dispatchEvent(aa),aa.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Js.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Js.multiply(e.parent.matrixWorld)),e.applyMatrix4(Js),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ra),sa.child=e,this.dispatchEvent(sa),sa.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zs,e,$s),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zs,ea,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(e=>A(A({},e),{},{boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(e=>A({},e)),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),A=o(e.animations),c=o(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),A.length>0&&(n.animations=A),c.length>0&&(n.nodes=c)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}la.DEFAULT_UP=new Mo(0,1,0),la.DEFAULT_MATRIX_AUTO_UPDATE=!0,la.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Aa=new Mo,ca=new Mo,ua=new Mo,ha=new Mo,da=new Mo,pa=new Mo,fa=new Mo,ga=new Mo,ma=new Mo,va=new Mo,ya=new ts,wa=new ts,ba=new ts;class xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mo;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Aa.subVectors(e,t),i.cross(Aa);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Aa.subVectors(i,t),ca.subVectors(n,t),ua.subVectors(e,t);const o=Aa.dot(Aa),s=Aa.dot(ca),a=Aa.dot(ua),l=ca.dot(ca),A=ca.dot(ua),c=o*l-s*s;if(0===c)return r.set(0,0,0),null;const u=1/c,h=(l*a-s*A)*u,d=(o*A-s*a)*u;return r.set(1-h-d,d,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,ha)&&(ha.x>=0&&ha.y>=0&&ha.x+ha.y<=1)}static getInterpolation(e,t,n,i,r,o,s,a){return null===this.getBarycoord(e,t,n,i,ha)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,ha.x),a.addScaledVector(o,ha.y),a.addScaledVector(s,ha.z),a)}static getInterpolatedAttribute(e,t,n,i,r,o){return ya.setScalar(0),wa.setScalar(0),ba.setScalar(0),ya.fromBufferAttribute(e,t),wa.fromBufferAttribute(e,n),ba.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(ya,r.x),o.addScaledVector(wa,r.y),o.addScaledVector(ba,r.z),o}static isFrontFacing(e,t,n,i){return Aa.subVectors(n,t),ca.subVectors(e,t),Aa.cross(ca).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Aa.subVectors(this.c,this.b),ca.subVectors(this.a,this.b),.5*Aa.cross(ca).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return xa.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return xa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let o,s;da.subVectors(i,n),pa.subVectors(r,n),ga.subVectors(e,n);const a=da.dot(ga),l=pa.dot(ga);if(a<=0&&l<=0)return t.copy(n);ma.subVectors(e,i);const A=da.dot(ma),c=pa.dot(ma);if(A>=0&&c<=A)return t.copy(i);const u=a*c-A*l;if(u<=0&&a>=0&&A<=0)return o=a/(a-A),t.copy(n).addScaledVector(da,o);va.subVectors(e,r);const h=da.dot(va),d=pa.dot(va);if(d>=0&&h<=d)return t.copy(r);const p=h*l-a*d;if(p<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(n).addScaledVector(pa,s);const f=A*d-h*c;if(f<=0&&c-A>=0&&h-d>=0)return fa.subVectors(r,i),s=(c-A)/(c-A+(h-d)),t.copy(i).addScaledVector(fa,s);const g=1/(f+p+u);return o=p*g,s=u*g,t.copy(n).addScaledVector(da,o).addScaledVector(pa,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_a={h:0,s:0,l:0},Ca={h:0,s:0,l:0};function Sa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Ea{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,jo.colorSpaceToWorking(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jo.workingColorSpace;return this.r=e,this.g=t,this.b=n,jo.colorSpaceToWorking(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jo.workingColorSpace;if(e=xo(e,1),t=bo(t,0,1),n=bo(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Sa(r,i,e+1/3),this.g=Sa(r,i,e),this.b=Sa(r,i,e-1/3)}return jo.colorSpaceToWorking(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],s=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;const n=Ba[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vo(e.r),this.g=Vo(e.g),this.b=Vo(e.b),this}copyLinearToSRGB(e){return this.r=Wo(e.r),this.g=Wo(e.g),this.b=Wo(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;return jo.workingToColorSpace(Ta.copy(this),e),65536*Math.round(bo(255*Ta.r,0,255))+256*Math.round(bo(255*Ta.g,0,255))+Math.round(bo(255*Ta.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jo.workingColorSpace;jo.workingToColorSpace(Ta.copy(this),t);const n=Ta.r,i=Ta.g,r=Ta.b,o=Math.max(n,i,r),s=Math.min(n,i,r);let a,l;const A=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=A<=.5?e/(o+s):e/(2-o-s),o){case n:a=(i-r)/e+(i<r?6:0);break;case i:a=(r-n)/e+2;break;case r:a=(n-i)/e+4}a/=6}return e.h=a,e.s=l,e.l=A,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jo.workingColorSpace;return jo.workingToColorSpace(Ta.copy(this),t),e.r=Ta.r,e.g=Ta.g,e.b=Ta.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;jo.workingToColorSpace(Ta.copy(this),e);const t=Ta.r,n=Ta.g,i=Ta.b;return e!==_r?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(_a),this.setHSL(_a.h+e,_a.s+t,_a.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_a),e.getHSL(Ca);const n=Bo(_a.h,Ca.h,t),i=Bo(_a.s,Ca.s,t),r=Bo(_a.l,Ca.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ta=new Ea;Ea.NAMES=Ba;let Ma=0;class Fa extends fo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ma++}),this.uuid=wo(),this.name="",this.type="Material",this.blending=Gt,this.side=Ot,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=rn,this.blendDst=on,this.blendEquation=qt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ea(0,0,0),this.blendAlpha=0,this.depthFunc=vn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Gr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mr,this.stencilZFail=Mr,this.stencilZPass=Mr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Gt&&(n.blending=this.blending),this.side!==Ot&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==rn&&(n.blendSrc=this.blendSrc),this.blendDst!==on&&(n.blendDst=this.blendDst),this.blendEquation!==qt&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==vn&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Gr&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Mr&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Mr&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Mr&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Ia extends Fa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ea(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.combine=Bn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ua=La();function La(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function Ra(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=bo(e,-65504,65504),Ua.floatView[0]=e;const t=Ua.uint32View[0],n=t>>23&511;return Ua.baseTable[n]+((8388607&t)>>Ua.shiftTable[n])}function Pa(e){const t=e>>10;return Ua.uint32View[0]=Ua.mantissaTable[Ua.offsetTable[t]+(1023&e)]+Ua.exponentTable[t],Ua.floatView[0]}class Na{static toHalfFloat(e){return Ra(e)}static fromHalfFloat(e){return Pa(e)}}const ka=new Mo,Da=new Eo;let Oa=0;class Ha{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Oa++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Zr,this.updateRanges=[],this.gpuType=ai,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Da.fromBufferAttribute(this,t),Da.applyMatrix3(e),this.setXY(t,Da.x,Da.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)ka.fromBufferAttribute(this,t),ka.applyMatrix3(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ka.fromBufferAttribute(this,t),ka.applyMatrix4(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ka.fromBufferAttribute(this,t),ka.applyNormalMatrix(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ka.fromBufferAttribute(this,t),ka.transformDirection(e),this.setXYZ(t,ka.x,ka.y,ka.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=_o(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Co(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_o(t,this.array)),t}setX(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_o(t,this.array)),t}setY(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_o(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_o(t,this.array)),t}setW(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array),i=Co(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array),i=Co(i,this.array),r=Co(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Zr&&(e.usage=this.usage),e}}class Qa extends Ha{constructor(e,t,n){super(new Int8Array(e),t,n)}}class za extends Ha{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Ga extends Ha{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class ja extends Ha{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Va extends Ha{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Wa extends Ha{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Ka extends Ha{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class qa extends Ha{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Pa(this.array[e*this.itemSize]);return this.normalized&&(t=_o(t,this.array)),t}setX(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize]=Ra(t),this}getY(e){let t=Pa(this.array[e*this.itemSize+1]);return this.normalized&&(t=_o(t,this.array)),t}setY(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize+1]=Ra(t),this}getZ(e){let t=Pa(this.array[e*this.itemSize+2]);return this.normalized&&(t=_o(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize+2]=Ra(t),this}getW(e){let t=Pa(this.array[e*this.itemSize+3]);return this.normalized&&(t=_o(t,this.array)),t}setW(e,t){return this.normalized&&(t=Co(t,this.array)),this.array[e*this.itemSize+3]=Ra(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array)),this.array[e+0]=Ra(t),this.array[e+1]=Ra(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array),i=Co(i,this.array)),this.array[e+0]=Ra(t),this.array[e+1]=Ra(n),this.array[e+2]=Ra(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array),i=Co(i,this.array),r=Co(r,this.array)),this.array[e+0]=Ra(t),this.array[e+1]=Ra(n),this.array[e+2]=Ra(i),this.array[e+3]=Ra(r),this}}class Xa extends Ha{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Ja=0;const Ya=new Ps,Za=new la,$a=new Mo,el=new ls,tl=new ls,nl=new Mo;class il extends fo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ja++}),this.uuid=wo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ro(e)?Ka:Va)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Uo).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ya.makeRotationFromQuaternion(e),this.applyMatrix4(Ya),this}rotateX(e){return Ya.makeRotationX(e),this.applyMatrix4(Ya),this}rotateY(e){return Ya.makeRotationY(e),this.applyMatrix4(Ya),this}rotateZ(e){return Ya.makeRotationZ(e),this.applyMatrix4(Ya),this}translate(e,t,n){return Ya.makeTranslation(e,t,n),this.applyMatrix4(Ya),this}scale(e,t,n){return Ya.makeScale(e,t,n),this.applyMatrix4(Ya),this}lookAt(e){return Za.lookAt(e),Za.updateMatrix(),this.applyMatrix4(Za.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($a).negate(),this.translate($a.x,$a.y,$a.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new Xa(t,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const n=e[i];t.setXYZ(i,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Mo(-1/0,-1/0,-1/0),new Mo(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];el.setFromBufferAttribute(e),this.morphTargetsRelative?(nl.addVectors(this.boundingBox.min,el.min),this.boundingBox.expandByPoint(nl),nl.addVectors(this.boundingBox.max,el.max),this.boundingBox.expandByPoint(nl)):(this.boundingBox.expandByPoint(el.min),this.boundingBox.expandByPoint(el.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ss);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Mo,1/0);if(e){const n=this.boundingSphere.center;if(el.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];tl.setFromBufferAttribute(n),this.morphTargetsRelative?(nl.addVectors(el.min,tl.min),el.expandByPoint(nl),nl.addVectors(el.max,tl.max),el.expandByPoint(nl)):(el.expandByPoint(tl.min),el.expandByPoint(tl.max))}el.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)nl.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(nl));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)nl.fromBufferAttribute(o,t),s&&($a.fromBufferAttribute(e,t),nl.add($a)),i=Math.max(i,n.distanceToSquared(nl))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ha(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let B=0;B<n.count;B++)s[B]=new Mo,a[B]=new Mo;const l=new Mo,A=new Mo,c=new Mo,u=new Eo,h=new Eo,d=new Eo,p=new Mo,f=new Mo;function g(e,t,i){l.fromBufferAttribute(n,e),A.fromBufferAttribute(n,t),c.fromBufferAttribute(n,i),u.fromBufferAttribute(r,e),h.fromBufferAttribute(r,t),d.fromBufferAttribute(r,i),A.sub(l),c.sub(l),h.sub(u),d.sub(u);const o=1/(h.x*d.y-d.x*h.y);isFinite(o)&&(p.copy(A).multiplyScalar(d.y).addScaledVector(c,-h.y).multiplyScalar(o),f.copy(c).multiplyScalar(h.x).addScaledVector(A,-d.x).multiplyScalar(o),s[e].add(p),s[t].add(p),s[i].add(p),a[e].add(f),a[t].add(f),a[i].add(f))}let m=this.groups;0===m.length&&(m=[{start:0,count:e.count}]);for(let B=0,_=m.length;B<_;++B){const t=m[B],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)g(e.getX(i+0),e.getX(i+1),e.getX(i+2))}const v=new Mo,y=new Mo,w=new Mo,b=new Mo;function x(e){w.fromBufferAttribute(i,e),b.copy(w);const t=s[e];v.copy(t),v.sub(w.multiplyScalar(w.dot(t))).normalize(),y.crossVectors(b,t);const n=y.dot(a[e])<0?-1:1;o.setXYZW(e,v.x,v.y,v.z,n)}for(let B=0,_=m.length;B<_;++B){const t=m[B],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)x(e.getX(i+0)),x(e.getX(i+1)),x(e.getX(i+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ha(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Mo,r=new Mo,o=new Mo,s=new Mo,a=new Mo,l=new Mo,A=new Mo,c=new Mo;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),d=e.getX(u+1),p=e.getX(u+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,d),o.fromBufferAttribute(t,p),A.subVectors(o,r),c.subVectors(i,r),A.cross(c),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),s.add(A),a.add(A),l.add(A),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,u=t.count;e<u;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),A.subVectors(o,r),c.subVectors(i,r),A.cross(c),n.setXYZ(e+0,A.x,A.y,A.z),n.setXYZ(e+1,A.x,A.y,A.z),n.setXYZ(e+2,A.x,A.y,A.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)nl.fromBufferAttribute(e,t),nl.normalize(),e.setXYZ(t,nl.x,nl.y,nl.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let s=0,a=0;for(let l=0,A=t.length;l<A;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)o[a++]=n[s++]}return new Ha(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new il,n=this.index.array,i=this.attributes;for(const s in i){const r=e(i[s],n);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const i=[],o=r[s];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);i.push(r)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const i={};let r=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[a]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere=s.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,A=o.length;l<A;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const rl=new Ps,ol=new Rs,sl=new Ss,al=new Mo,ll=new Mo,Al=new Mo,cl=new Mo,ul=new Mo,hl=new Mo,dl=new Mo,pl=new Mo;class fl extends la{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ia;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){hl.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],a=r[n];0!==i&&(ul.fromBufferAttribute(a,e),o?hl.addScaledVector(ul,i):hl.addScaledVector(ul.sub(t),i))}t.add(hl)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),sl.copy(n.boundingSphere),sl.applyMatrix4(r),ol.copy(e.ray).recast(e.near),!1===sl.containsPoint(ol.origin)){if(null===ol.intersectSphere(sl,al))return;if(ol.origin.distanceToSquared(al)>(e.far-e.near)**2)return}rl.copy(r).invert(),ol.copy(e.ray).applyMatrix4(rl),null!==n.boundingBox&&!1===ol.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,ol)}}_computeIntersections(e,t,n){let i;const r=this.geometry,o=this.material,s=r.index,a=r.attributes.position,l=r.attributes.uv,A=r.attributes.uv1,c=r.attributes.normal,u=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(o))for(let d=0,p=u.length;d<p;d++){const r=u[d],a=o[r.materialIndex];for(let o=Math.max(r.start,h.start),u=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));o<u;o+=3){i=gl(this,a,e,n,l,A,c,s.getX(o),s.getX(o+1),s.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);r<a;r+=3){i=gl(this,o,e,n,l,A,c,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==a)if(Array.isArray(o))for(let d=0,p=u.length;d<p;d++){const r=u[d],s=o[r.materialIndex];for(let o=Math.max(r.start,h.start),u=Math.min(a.count,Math.min(r.start+r.count,h.start+h.count));o<u;o+=3){i=gl(this,s,e,n,l,A,c,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);r<s;r+=3){i=gl(this,o,e,n,l,A,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function gl(e,t,n,i,r,o,s,a,l,A){e.getVertexPosition(a,ll),e.getVertexPosition(l,Al),e.getVertexPosition(A,cl);const c=function(e,t,n,i,r,o,s,a){let l;if(l=t.side===Ht?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,t.side===Ot,a),null===l)return null;pl.copy(a),pl.applyMatrix4(e.matrixWorld);const A=n.ray.origin.distanceTo(pl);return A<n.near||A>n.far?null:{distance:A,point:pl.clone(),object:e}}(e,t,n,i,ll,Al,cl,dl);if(c){const e=new Mo;xa.getBarycoord(dl,ll,Al,cl,e),r&&(c.uv=xa.getInterpolatedAttribute(r,a,l,A,e,new Eo)),o&&(c.uv1=xa.getInterpolatedAttribute(o,a,l,A,e,new Eo)),s&&(c.normal=xa.getInterpolatedAttribute(s,a,l,A,e,new Mo),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const t={a:a,b:l,c:A,normal:new Mo,materialIndex:0};xa.getNormal(ll,Al,cl,t.normal),c.face=t,c.barycoord=e}return c}class ml extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const s=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const a=[],l=[],A=[],c=[];let u=0,h=0;function d(e,t,n,i,r,o,d,p,f,g,m){const v=o/f,y=d/g,w=o/2,b=d/2,x=p/2,B=f+1,_=g+1;let C=0,S=0;const E=new Mo;for(let s=0;s<_;s++){const o=s*y-b;for(let a=0;a<B;a++){const u=a*v-w;E[e]=u*i,E[t]=o*r,E[n]=x,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=p>0?1:-1,A.push(E.x,E.y,E.z),c.push(a/f),c.push(1-s/g),C+=1}}for(let s=0;s<g;s++)for(let e=0;e<f;e++){const t=u+e+B*s,n=u+e+B*(s+1),i=u+(e+1)+B*(s+1),r=u+(e+1)+B*s;a.push(t,n,r),a.push(n,i,r),S+=6}s.addGroup(h,S,m),h+=S,u+=C}d("z","y","x",-1,-1,n,t,e,o,r,0),d("z","y","x",1,-1,n,t,-e,o,r,1),d("x","z","y",1,1,e,n,t,i,o,2),d("x","z","y",1,-1,e,n,-t,i,o,3),d("x","y","z",1,-1,e,t,n,i,r,4),d("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new Xa(l,3)),this.setAttribute("normal",new Xa(A,3)),this.setAttribute("uv",new Xa(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ml(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vl(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function yl(e){const t={};for(let n=0;n<e.length;n++){const i=vl(e[n]);for(const e in i)t[e]=i[e]}return t}function wl(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:jo.workingColorSpace}const bl={clone:vl,merge:yl};class xl extends Fa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vl(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Bl extends la{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ps,this.projectionMatrix=new Ps,this.projectionMatrixInverse=new Ps,this.coordinateSystem=Ao,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const _l=new Mo,Cl=new Eo,Sl=new Eo;class El extends Bl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*yo*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*vo*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*yo*Math.atan(Math.tan(.5*vo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){_l.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_l.x,_l.y).multiplyScalar(-e/_l.z),_l.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_l.x,_l.y).multiplyScalar(-e/_l.z)}getViewSize(e,t){return this.getViewBounds(e,Cl,Sl),t.subVectors(Sl,Cl)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*vo*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/s,i*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tl=-90;class Ml extends la{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new El(Tl,1,e,t);i.layers=this.layers,this.add(i);const r=new El(Tl,1,e,t);r.layers=this.layers,this.add(r);const o=new El(Tl,1,e,t);o.layers=this.layers,this.add(o);const s=new El(Tl,1,e,t);s.layers=this.layers,this.add(s);const a=new El(Tl,1,e,t);a.layers=this.layers,this.add(a);const l=new El(Tl,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,o,s,a]=t;for(const l of t)this.remove(l);if(e===Ao)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==co)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,s,a,l,A]=this.children,c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,a),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,i),e.render(t,A),e.setRenderTarget(c,u,h),e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class Fl extends es{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:kn,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0,arguments.length>9?arguments[9]:void 0),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Il extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Fl(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ml(5,5,5),s=new xl({name:"CubemapFromEquirect",uniforms:vl(n),vertexShader:i,fragmentShader:r,side:Ht,blending:zt});s.uniforms.tEquirect.value=t;const a=new fl(o,s),l=t.minFilter;t.minFilter===$n&&(t.minFilter=Jn);return new Ml(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(r)}}class Ul extends la{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ll={type:"move"};class Rl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ul,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ul,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Mo,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Mo),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ul,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Mo,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Mo),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),i=this._getHandJoint(l,o);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),a=.02,A=.005;l.inputState.pinching&&s>a+A?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-A&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Ll)))}return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Ul;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Pl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Ea(e),this.density=t}clone(){return new Pl(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Ea(e),this.near=t,this.far=n}clone(){return new Nl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class kl extends la{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vs,this.environmentIntensity=1,this.environmentRotation=new Vs,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Dl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Zr,this.updateRanges=[],this.version=0,this.uuid=wo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ol=new Mo;class Hl{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ol.fromBufferAttribute(this,t),Ol.applyMatrix4(e),this.setXYZ(t,Ol.x,Ol.y,Ol.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ol.fromBufferAttribute(this,t),Ol.applyNormalMatrix(e),this.setXYZ(t,Ol.x,Ol.y,Ol.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ol.fromBufferAttribute(this,t),Ol.transformDirection(e),this.setXYZ(t,Ol.x,Ol.y,Ol.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=_o(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Co(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Co(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Co(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Co(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Co(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_o(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_o(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_o(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_o(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array),i=Co(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Co(t,this.array),n=Co(n,this.array),i=Co(i,this.array),r=Co(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ha(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Hl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ql extends Fa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ea(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let zl;const Gl=new Mo,jl=new Mo,Vl=new Mo,Wl=new Eo,Kl=new Eo,ql=new Ps,Xl=new Mo,Jl=new Mo,Yl=new Mo,Zl=new Eo,$l=new Eo,eA=new Eo;class tA extends la{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ql;if(super(),this.isSprite=!0,this.type="Sprite",void 0===zl){zl=new il;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Dl(e,5);zl.setIndex([0,1,2,0,2,3]),zl.setAttribute("position",new Hl(t,3,0,!1)),zl.setAttribute("uv",new Hl(t,2,3,!1))}this.geometry=zl,this.material=e,this.center=new Eo(.5,.5),this.count=1}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jl.setFromMatrixScale(this.matrixWorld),ql.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&jl.multiplyScalar(-Vl.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;nA(Xl.set(-.5,-.5,0),Vl,o,jl,i,r),nA(Jl.set(.5,-.5,0),Vl,o,jl,i,r),nA(Yl.set(.5,.5,0),Vl,o,jl,i,r),Zl.set(0,0),$l.set(1,0),eA.set(1,1);let s=e.ray.intersectTriangle(Xl,Jl,Yl,!1,Gl);if(null===s&&(nA(Jl.set(-.5,.5,0),Vl,o,jl,i,r),$l.set(0,1),s=e.ray.intersectTriangle(Xl,Yl,Jl,!1,Gl),null===s))return;const a=e.ray.origin.distanceTo(Gl);a<e.near||a>e.far||t.push({distance:a,point:Gl.clone(),uv:xa.getInterpolation(Gl,Xl,Jl,Yl,Zl,$l,eA,new Eo),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function nA(e,t,n,i,r,o){Wl.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Kl.x=o*Wl.x-r*Wl.y,Kl.y=r*Wl.x+o*Wl.y):Kl.copy(Wl),e.copy(t),e.x+=Kl.x,e.y+=Kl.y,e.applyMatrix4(ql)}const iA=new Mo,rA=new Mo;class oA extends la{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){iA.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(iA);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){iA.setFromMatrixPosition(e.matrixWorld),rA.setFromMatrixPosition(this.matrixWorld);const n=iA.distanceTo(rA)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const sA=new Mo,aA=new ts,lA=new ts,AA=new Mo,cA=new Ps,uA=new Mo,hA=new Ss,dA=new Ps,pA=new Rs;class fA extends fl{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Rn,this.bindMatrix=new Ps,this.bindMatrixInverse=new Ps,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ls),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,uA),this.boundingBox.expandByPoint(uA)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ss),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,uA),this.boundingSphere.expandByPoint(uA)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),hA.copy(this.boundingSphere),hA.applyMatrix4(i),!1!==e.ray.intersectsSphere(hA)&&(dA.copy(i).invert(),pA.copy(e.ray).applyMatrix4(dA),null!==this.boundingBox&&!1===pA.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,pA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ts,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Rn?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Pn?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;aA.fromBufferAttribute(i.attributes.skinIndex,e),lA.fromBufferAttribute(i.attributes.skinWeight,e),sA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=lA.getComponent(r);if(0!==e){const i=aA.getComponent(r);cA.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(AA.copy(sA).applyMatrix4(cA),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class gA extends la{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mA extends es{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Vn,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Vn,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vA=new Ps,yA=new Ps;class wA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=wo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ps)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Ps;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const i=e[r]?e[r].matrixWorld:yA;vA.multiplyMatrices(i,t[r]),vA.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new wA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new mA(t,e,e,gi,ai);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new gA),this.bones.push(r),this.boneInverses.push((new Ps).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class bA extends Ha{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xA=new Ps,BA=new Ps,_A=[],CA=new ls,SA=new Ps,EA=new fl,TA=new Ss;class MA extends fl{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new bA(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,SA)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ls),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,xA),CA.copy(e.boundingBox).applyMatrix4(xA),this.boundingBox.union(CA)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ss),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,xA),TA.copy(e.boundingSphere).applyMatrix4(xA),this.boundingSphere.union(TA)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,r=e*(n.length+1)+1;for(let o=0;o<n.length;o++)n[o]=i[r+o]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(EA.geometry=this.geometry,EA.material=this.material,void 0!==EA.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),TA.copy(this.boundingSphere),TA.applyMatrix4(n),!1!==e.ray.intersectsSphere(TA)))for(let r=0;r<i;r++){this.getMatrixAt(r,xA),BA.multiplyMatrices(n,xA),EA.matrixWorld=BA,EA.raycast(e,_A);for(let e=0,n=_A.length;e<n;e++){const n=_A[e];n.instanceId=r,n.object=this,t.push(n)}_A.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new bA(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;null===this.morphTexture&&(this.morphTexture=new mA(new Float32Array(i*this.count),i,this.count,yi,ai));const r=this.morphTexture.source.data.data;let o=0;for(let l=0;l<n.length;l++)o+=n[l];const s=this.geometry.morphTargetsRelative?1:1-o,a=i*e;r[a]=s,r.set(n,a+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const FA=new Mo,IA=new Mo,UA=new Uo;class LA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=FA.subVectors(n,t).cross(IA.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(FA),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||UA.getNormalMatrix(e),i=this.coplanarPoint(FA).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const RA=new Ss,PA=new Eo(.5,.5),NA=new Mo;class kA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new LA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new LA,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new LA,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new LA,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new LA,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new LA;this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ao,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],A=r[4],c=r[5],u=r[6],h=r[7],d=r[8],p=r[9],f=r[10],g=r[11],m=r[12],v=r[13],y=r[14],w=r[15];if(i[0].setComponents(l-o,h-A,g-d,w-m).normalize(),i[1].setComponents(l+o,h+A,g+d,w+m).normalize(),i[2].setComponents(l+s,h+c,g+p,w+v).normalize(),i[3].setComponents(l-s,h-c,g-p,w-v).normalize(),n)i[4].setComponents(a,u,f,y).normalize(),i[5].setComponents(l-a,h-u,g-f,w-y).normalize();else if(i[4].setComponents(l-a,h-u,g-f,w-y).normalize(),t===Ao)i[5].setComponents(l+a,h+u,g+f,w+y).normalize();else{if(t!==co)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),RA.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),RA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(RA)}intersectsSprite(e){RA.center.set(0,0,0);const t=PA.distanceTo(e.center);return RA.radius=.7071067811865476+t,RA.applyMatrix4(e.matrixWorld),this.intersectsSphere(RA)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(NA.x=i.normal.x>0?e.max.x:e.min.x,NA.y=i.normal.y>0?e.max.y:e.min.y,NA.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(NA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const DA=new Ps,OA=new kA;class HA{constructor(){this.coordinateSystem=Ao}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(DA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),OA.setFromProjectionMatrix(DA,i.coordinateSystem,i.reversedDepth),OA.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(DA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),OA.setFromProjectionMatrix(DA,i.coordinateSystem,i.reversedDepth),OA.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(DA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),OA.setFromProjectionMatrix(DA,i.coordinateSystem,i.reversedDepth),OA.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(DA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),OA.setFromProjectionMatrix(DA,i.coordinateSystem,i.reversedDepth),OA.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(DA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),OA.setFromProjectionMatrix(DA,i.coordinateSystem,i.reversedDepth),OA.containsPoint(e))return!0}return!1}clone(){return new HA}}function QA(e,t){return e-t}function zA(e,t){return e.z-t.z}function GA(e,t){return t.z-e.z}class jA{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const s=r[this.index];o.push(s),this.index++,s.start=e,s.count=t,s.z=n,s.index=i}reset(){this.list.length=0,this.index=0}}const VA=new Ps,WA=new Ea(1,1,1),KA=new kA,qA=new HA,XA=new ls,JA=new Ss,YA=new Mo,ZA=new Mo,$A=new Mo,ec=new jA,tc=new fl,nc=[];function ic(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const r=e.count;for(let o=0;o<r;o++)for(let r=0;r<i;r++)t.setComponent(o+n,r,e.getComponent(o,r))}else t.array.set(e.array,n*i);t.needsUpdate=!0}function rc(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)t[i]=e[i]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class oc extends fl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,i=arguments.length>3?arguments[3]:void 0;super(new il,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new mA(t,e,e,gi,ai);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new mA(t,e,e,wi,si);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new mA(t,e,e,gi,ai);n.colorSpace=jo.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in e.attributes){const r=e.getAttribute(i),{array:o,itemSize:s,normalized:a}=r,l=new o.constructor(n*s),A=new Ha(l,s,a);t.setAttribute(i,A)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Ha(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ls);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,VA),this.getBoundingBoxAt(i,XA).applyMatrix4(VA),e.union(XA)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ss);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,VA),this.getBoundingSphereAt(i,JA).applyMatrix4(VA),e.union(JA)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(QA),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const i=this._matricesTexture;VA.identity().toArray(i.image.data,16*n),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(WA.toArray(r.image.data,4*n),r.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const o=e.getIndex();if(null!==o&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?o.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let s;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(QA),s=this._availableGeometryIds.shift(),r[s]=i):(s=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(s,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,s}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),o=t.getIndex(),s=this._geometryInfo[e];if(i&&o.count>s.reservedIndexCount||t.attributes.position.count>s.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const a=s.vertexStart,l=s.reservedVertexCount;s.vertexCount=t.getAttribute("position").count;for(const A in n.attributes){const e=t.getAttribute(A),i=n.getAttribute(A);ic(e,i,a);const r=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=a+t;for(let t=0;t<r;t++)i.setComponent(e,t,0)}i.needsUpdate=!0,i.addUpdateRange(a*r,l*r)}if(i){const e=s.indexStart,n=s.reservedIndexCount;s.indexCount=t.getIndex().count;for(let t=0;t<o.count;t++)r.setX(e+t,a+o.getX(t));for(let t=o.count,i=n;t<i;t++)r.setX(e+t,a);r.needsUpdate=!0,r.addUpdateRange(e,s.reservedIndexCount)}return s.start=i?s.indexStart:s.vertexStart,s.count=i?s.indexCount:s.vertexCount,s.boundingBox=null,null!==t.boundingBox&&(s.boundingBox=t.boundingBox.clone()),s.boundingSphere=null,null!==t.boundingSphere&&(s.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),r=this.geometry;for(let o=0,s=n.length;o<s;o++){const s=i[o],a=n[s];if(!1!==a.active){if(null!==r.index){if(a.indexStart!==t){const{indexStart:n,vertexStart:i,reservedIndexCount:o}=a,s=r.index,l=s.array,A=e-i;for(let e=n;e<n+o;e++)l[e]=l[e]+A;s.array.copyWithin(t,n,n+o),s.addUpdateRange(t,o),a.indexStart=t}t+=a.reservedIndexCount}if(a.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=a,i=r.attributes;for(const r in i){const o=i[r],{array:s,itemSize:a}=o;s.copyWithin(e*a,t*a,(t+n)*a),o.addUpdateRange(e*a,n*a)}a.vertexStart=e}e+=a.reservedVertexCount,a.start=r.index?a.indexStart:a.vertexStart,this._nextIndexStart=r.index?a.indexStart+a.reservedIndexCount:0,this._nextVertexStart=a.vertexStart+a.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingBox){const e=new ls,t=n.index,r=n.attributes.position;for(let n=i.start,o=i.start+i.count;n<o;n++){let i=n;t&&(i=t.getX(i)),e.expandByPoint(YA.fromBufferAttribute(r,i))}i.boundingBox=e}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingSphere){const t=new Ss;this.getBoundingBoxAt(e,XA),XA.getCenter(t.center);const r=n.index,o=n.attributes.position;let s=0;for(let e=i.start,n=i.start+i.count;e<n;e++){let n=e;r&&(n=r.getX(n)),YA.fromBufferAttribute(o,n),s=Math.max(s,t.center.distanceToSquared(YA))}t.radius=Math.sqrt(s),i.boundingSphere=t}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(QA);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));const i=new Int32Array(e),r=new Int32Array(e);rc(this._multiDrawCounts,i),rc(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,s=this._matricesTexture,a=this._colorsTexture;o.dispose(),this._initIndirectTexture(),rc(o.image.data,this._indirectTexture.image.data),s.dispose(),this._initMatricesTexture(),rc(s.image.data,this._matricesTexture.image.data),a&&(a.dispose(),this._initColorsTexture(),rc(a.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index){if(Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."))}const i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new il,this._initializeGeometry(i));const r=this.geometry;i.index&&rc(i.index.array,r.index.array);for(const o in i.attributes)rc(i.attributes[o].array,r.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,o=this.geometry;tc.material=this.material,tc.geometry.index=o.index,tc.geometry.attributes=o.attributes,null===tc.geometry.boundingBox&&(tc.geometry.boundingBox=new ls),null===tc.geometry.boundingSphere&&(tc.geometry.boundingSphere=new Ss);for(let s=0,a=n.length;s<a;s++){if(!n[s].visible||!n[s].active)continue;const o=n[s].geometryIndex,a=i[o];tc.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(s,tc.matrixWorld).premultiply(r),this.getBoundingBoxAt(o,tc.geometry.boundingBox),this.getBoundingSphereAt(o,tc.geometry.boundingSphere),tc.raycast(e,nc);for(let e=0,n=nc.length;e<n;e++){const n=nc[e];n.object=this,n.batchId=s,t.push(n)}nc.length=0}tc.material=null,tc.geometry.index=null,tc.geometry.attributes={},tc.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>A(A({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>A({},e)),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),s=null===o?1:o.array.BYTES_PER_ELEMENT,a=this._instanceInfo,l=this._multiDrawStarts,A=this._multiDrawCounts,c=this._geometryInfo,u=this.perObjectFrustumCulled,h=this._indirectTexture,d=h.image.data,p=n.isArrayCamera?qA:KA;u&&!n.isArrayCamera&&(VA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),KA.setFromProjectionMatrix(VA,n.coordinateSystem,n.reversedDepth));let f=0;if(this.sortObjects){VA.copy(this.matrixWorld).invert(),YA.setFromMatrixPosition(n.matrixWorld).applyMatrix4(VA),ZA.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(VA);for(let i=0,r=a.length;i<r;i++)if(a[i].visible&&a[i].active){const e=a[i].geometryIndex;this.getMatrixAt(i,VA),this.getBoundingSphereAt(e,JA).applyMatrix4(VA);let t=!1;if(u&&(t=!p.intersectsSphere(JA,n)),!t){const t=c[e],n=$A.subVectors(JA.center,YA).dot(ZA);ec.push(t.start,t.count,n,i)}}const e=ec.list,t=this.customSort;null===t?e.sort(r.transparent?GA:zA):t.call(this,e,n);for(let n=0,i=e.length;n<i;n++){const t=e[n];l[f]=t.start*s,A[f]=t.count,d[f]=t.index,f++}ec.reset()}else for(let g=0,m=a.length;g<m;g++)if(a[g].visible&&a[g].active){const e=a[g].geometryIndex;let t=!1;if(u&&(this.getMatrixAt(g,VA),this.getBoundingSphereAt(e,JA).applyMatrix4(VA),t=!p.intersectsSphere(JA,n)),!t){const t=c[e];l[f]=t.start*s,A[f]=t.count,d[f]=g,f++}}h.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,o){this.onBeforeRender(e,null,i,r,o)}}class sc extends Fa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ea(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ac=new Mo,lc=new Mo,Ac=new Ps,cc=new Rs,uc=new Ss,hc=new Mo,dc=new Mo;class pc extends la{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sc;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)ac.fromBufferAttribute(t,e-1),lc.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ac.distanceTo(lc);e.setAttribute("lineDistance",new Xa(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uc.copy(n.boundingSphere),uc.applyMatrix4(i),uc.radius+=r,!1===e.ray.intersectsSphere(uc))return;Ac.copy(i).invert(),cc.copy(e.ray).applyMatrix4(Ac);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=this.isLineSegments?2:1,A=n.index,c=n.attributes.position;if(null!==A){const n=Math.max(0,o.start),i=Math.min(A.count,o.start+o.count);for(let r=n,o=i-1;r<o;r+=l){const n=A.getX(r),i=A.getX(r+1),o=fc(this,e,cc,a,n,i,r);o&&t.push(o)}if(this.isLineLoop){const r=A.getX(i-1),o=A.getX(n),s=fc(this,e,cc,a,r,o,i-1);s&&t.push(s)}}else{const n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);for(let r=n,o=i-1;r<o;r+=l){const n=fc(this,e,cc,a,r,r+1,r);n&&t.push(n)}if(this.isLineLoop){const r=fc(this,e,cc,a,i-1,n,i-1);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function fc(e,t,n,i,r,o,s){const a=e.geometry.attributes.position;ac.fromBufferAttribute(a,r),lc.fromBufferAttribute(a,o);if(n.distanceSqToSegment(ac,lc,hc,dc)>i)return;hc.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(hc);return l<t.near||l>t.far?void 0:{distance:l,point:dc.clone().applyMatrix4(e.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:e}}const gc=new Mo,mc=new Mo;class vc extends pc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)gc.fromBufferAttribute(t,e),mc.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+gc.distanceTo(mc);e.setAttribute("lineDistance",new Xa(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class yc extends pc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class wc extends Fa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ea(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const bc=new Ps,xc=new Rs,Bc=new Ss,_c=new Mo;class Cc extends la{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wc;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bc.copy(n.boundingSphere),Bc.applyMatrix4(i),Bc.radius+=r,!1===e.ray.intersectsSphere(Bc))return;bc.copy(i).invert(),xc.copy(e.ray).applyMatrix4(bc);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=n.index,A=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);n<r;n++){const r=l.getX(n);_c.fromBufferAttribute(A,r),Sc(_c,r,a,i,e,t,this)}}else{for(let n=Math.max(0,o.start),r=Math.min(A.count,o.start+o.count);n<r;n++)_c.fromBufferAttribute(A,n),Sc(_c,n,a,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Sc(e,t,n,i,r,o,s){const a=xc.distanceSqToPoint(e);if(a<n){const n=new Mo;xc.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class Ec extends es{constructor(e,t,n,i){super(e,t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jn,arguments.length>5&&void 0!==arguments[5]?arguments[5]:Jn,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const r=this;"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function t(){r.needsUpdate=!0,r._requestVideoFrameCallbackId=e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Tc extends Ec{constructor(e,t,n,i,r,o,s,a){super({},e,t,n,i,r,o,s,a),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Mc extends es{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Vn,this.minFilter=Vn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fc extends es{constructor(e,t,n,i,r,o,s,a,l,A,c,u){super(null,o,s,a,l,A,i,r,c,u),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ic extends Fc{constructor(e,t,n,i,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Gn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Uc extends Fc{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,kn),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Lc extends es{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Rc extends es{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:si,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vn,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Vn,l=arguments.length>8?arguments[8]:void 0,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:mi,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;if(A!==mi&&A!==vi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:c},i,r,o,s,a,A,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Jo(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Pc extends es{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Nc extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),r=Math.max(1,Math.floor(r));const o=[],s=[],a=[],l=[],A=t/2,c=Math.PI/2*e,u=t,h=2*c+u,d=2*n+r,p=i+1,f=new Mo,g=new Mo;for(let m=0;m<=d;m++){let v=0,y=0,w=0,b=0;if(m<=n){const t=m/n,i=t*Math.PI/2;y=-A-e*Math.cos(i),w=e*Math.sin(i),b=-e*Math.cos(i),v=t*c}else if(m<=n+r){const i=(m-n)/r;y=i*t-A,w=e,b=0,v=c+i*u}else{const t=(m-n-r)/n,i=t*Math.PI/2;y=A+e*Math.sin(i),w=e*Math.cos(i),b=e*Math.sin(i),v=c+u+t*c}const x=Math.max(0,Math.min(1,v/h));let B=0;0===m?B=.5/i:m===d&&(B=-.5/i);for(let e=0;e<=i;e++){const t=e/i,n=t*Math.PI*2,r=Math.sin(n),o=Math.cos(n);g.x=-w*o,g.y=y,g.z=w*r,s.push(g.x,g.y,g.z),f.set(-w*o,b,w*r),f.normalize(),a.push(f.x,f.y,f.z),l.push(t+B,x)}if(m>0){const e=(m-1)*p;for(let t=0;t<i;t++){const n=e+t,i=e+t+1,r=m*p+t,s=m*p+t+1;o.push(n,i,r),o.push(i,s,r)}}}this.setIndex(o),this.setAttribute("position",new Xa(s,3)),this.setAttribute("normal",new Xa(a,3)),this.setAttribute("uv",new Xa(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nc(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class kc extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],o=[],s=[],a=[],l=new Mo,A=new Eo;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let c=0,u=3;c<=t;c++,u+=3){const r=n+c/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),o.push(l.x,l.y,l.z),s.push(0,0,1),A.x=(o[u]/e+1)/2,A.y=(o[u+1]/e+1)/2,a.push(A.x,A.y)}for(let c=1;c<=t;c++)r.push(c,c+1,0);this.setIndex(r),this.setAttribute("position",new Xa(o,3)),this.setAttribute("normal",new Xa(s,3)),this.setAttribute("uv",new Xa(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Dc extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const A=[],c=[],u=[],h=[];let d=0;const p=[],f=n/2;let g=0;function m(n){const r=d,o=new Eo,p=new Mo;let m=0;const v=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=i;e++)c.push(0,f*y,0),u.push(0,y,0),h.push(.5,.5),d++;const w=d;for(let e=0;e<=i;e++){const t=e/i*a+s,n=Math.cos(t),r=Math.sin(t);p.x=v*r,p.y=f*y,p.z=v*n,c.push(p.x,p.y,p.z),u.push(0,y,0),o.x=.5*n+.5,o.y=.5*r*y+.5,h.push(o.x,o.y),d++}for(let e=0;e<i;e++){const t=r+e,i=w+e;!0===n?A.push(i,i+1,t):A.push(i+1,i,t),m+=3}l.addGroup(g,m,!0===n?1:2),g+=m}!function(){const o=new Mo,m=new Mo;let v=0;const y=(t-e)/n;for(let l=0;l<=r;l++){const A=[],g=l/r,v=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*a+s,l=Math.sin(r),p=Math.cos(r);m.x=v*l,m.y=-g*n+f,m.z=v*p,c.push(m.x,m.y,m.z),o.set(l,y,p).normalize(),u.push(o.x,o.y,o.z),h.push(t,1-g),A.push(d++)}p.push(A)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const o=p[i][n],s=p[i+1][n],a=p[i+1][n+1],l=p[i][n+1];(e>0||0!==i)&&(A.push(o,s,l),v+=3),(t>0||i!==r-1)&&(A.push(s,a,l),v+=3)}l.addGroup(g,v,0),g+=v}(),!1===o&&(e>0&&m(!0),t>0&&m(!1)),this.setIndex(A),this.setAttribute("position",new Xa(c,3)),this.setAttribute("normal",new Xa(u,3)),this.setAttribute("uv",new Xa(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Oc extends Dc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}static fromJSON(e){return new Oc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hc extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],o=[];function s(e,t,n,i){const r=i+1,o=[];for(let s=0;s<=r;s++){o[s]=[];const i=e.clone().lerp(n,s/r),a=t.clone().lerp(n,s/r),l=r-s;for(let e=0;e<=l;e++)o[s][e]=0===e&&s===r?i:i.clone().lerp(a,e/l)}for(let s=0;s<r;s++)for(let e=0;e<2*(r-s)-1;e++){const t=Math.floor(e/2);e%2===0?(a(o[s][t+1]),a(o[s+1][t]),a(o[s][t])):(a(o[s][t+1]),a(o[s+1][t+1]),a(o[s+1][t]))}}function a(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function A(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}function u(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new Mo,i=new Mo,r=new Mo;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),s(n,i,r,e)}(i),function(e){const t=new Mo;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Mo;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=c(e)/2/Math.PI+.5,i=u(e)/Math.PI+.5;o.push(n,1-i)}(function(){const e=new Mo,t=new Mo,n=new Mo,i=new Mo,s=new Eo,a=new Eo,l=new Eo;for(let u=0,h=0;u<r.length;u+=9,h+=6){e.set(r[u+0],r[u+1],r[u+2]),t.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),s.set(o[h+0],o[h+1]),a.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),i.copy(e).add(t).add(n).divideScalar(3);const d=c(i);A(s,h+0,e,d),A(a,h+2,t,d),A(l,h+4,n,d)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),s=Math.min(t,n,i);r>.9&&s<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Xa(r,3)),this.setAttribute("normal",new Xa(r.slice(),3)),this.setAttribute("uv",new Xa(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hc(e.vertices,e.indices,e.radius,e.details)}}class Qc extends Hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qc(e.radius,e.detail)}}const zc=new Mo,Gc=new Mo,jc=new Mo,Vc=new xa;class Wc extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(vo*t),o=e.getIndex(),s=e.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],A=["a","b","c"],c=new Array(3),u={},h=[];for(let e=0;e<a;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:a}=Vc;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),Vc.getNormal(jc),c[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),c[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),c[2]="".concat(Math.round(a.x*i),",").concat(Math.round(a.y*i),",").concat(Math.round(a.z*i)),c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],i=c[t],o=Vc[A[e]],s=Vc[A[t]],a="".concat(n,"_").concat(i),d="".concat(i,"_").concat(n);d in u&&u[d]?(jc.dot(u[d].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(s.x,s.y,s.z)),u[d]=null):a in u||(u[a]={index0:l[e],index1:l[t],normal:jc.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:n}=u[e];zc.fromBufferAttribute(s,t),Gc.fromBufferAttribute(s,n),h.push(zc.x,zc.y,zc.z),h.push(Gc.x,Gc.y,Gc.z)}this.setAttribute("position",new Xa(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Kc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let s,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),s=n[i]-o,s<0)a=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const A=n[i];return(i+(o-A)/(n[i+1]-A))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),s=this.getPoint(r),a=t||(o.isVector2?new Eo:new Mo);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new Mo,i=[],r=[],o=[],s=new Mo,a=new Ps;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new Mo)}r[0]=new Mo,o[0]=new Mo;let l=Number.MAX_VALUE;const A=Math.abs(i[0].x),c=Math.abs(i[0].y),u=Math.abs(i[0].z);A<=l&&(l=A,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),u<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),o[h]=o[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(bo(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(a.makeRotationAxis(s,e))}o[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(bo(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class qc extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,n=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=r?0:n),!0!==this.aClockwise||r||(i===n?i=-n:i-=n);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=a-this.aY;s=n*e-i*t+this.aX,a=n*t+i*e+this.aY}return t.set(s,a)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Xc extends qc{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Jc(){let e=0,t=0,n=0,i=0;function r(r,o,s,a){e=r,t=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,A=(n-t)/s-(i-t)/(s+a)+(i-n)/a;l*=s,A*=s,r(t,n,l,A)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}const Yc=new Mo,Zc=new Jc,$c=new Jc,eu=new Jc;class tu extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let o,s,a=Math.floor(r),l=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===l&&a===i-1&&(a=i-2,l=1),this.closed||a>0?o=n[(a-1)%i]:(Yc.subVectors(n[0],n[1]).add(n[0]),o=Yc);const A=n[a%i],c=n[(a+1)%i];if(this.closed||a+2<i?s=n[(a+2)%i]:(Yc.subVectors(n[i-1],n[i-2]).add(n[i-1]),s=Yc),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(A),e),n=Math.pow(A.distanceToSquared(c),e),i=Math.pow(c.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Zc.initNonuniformCatmullRom(o.x,A.x,c.x,s.x,t,n,i),$c.initNonuniformCatmullRom(o.y,A.y,c.y,s.y,t,n,i),eu.initNonuniformCatmullRom(o.z,A.z,c.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(Zc.initCatmullRom(o.x,A.x,c.x,s.x,this.tension),$c.initCatmullRom(o.y,A.y,c.y,s.y,this.tension),eu.initCatmullRom(o.z,A.z,c.z,s.z,this.tension));return t.set(Zc.calc(l),$c.calc(l),eu.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Mo).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function nu(e,t,n,i,r){const o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function iu(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function ru(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class ou extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Eo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Eo,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Eo;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(ru(e,n.x,i.x,r.x,o.x),ru(e,n.y,i.y,r.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class su extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mo,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Mo;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(ru(e,n.x,i.x,r.x,o.x),ru(e,n.y,i.y,r.y,o.y),ru(e,n.z,i.z,r.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class au extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Eo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lu extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Au extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Eo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Eo;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,n=this.v0,i=this.v1,r=this.v2;return t.set(iu(e,n.x,i.x,r.x),iu(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cu extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mo;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo,n=this.v0,i=this.v1,r=this.v2;return t.set(iu(e,n.x,i.x,r.x),iu(e,n.y,i.y,r.y),iu(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uu extends Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,n=this.points,i=(n.length-1)*e,r=Math.floor(i),o=i-r,s=n[0===r?r:r-1],a=n[r],l=n[r>n.length-2?n.length-1:r+1],A=n[r>n.length-3?n.length-1:r+2];return t.set(nu(o,s.x,a.x,l.x,A.x),nu(o,s.y,a.y,l.y,A.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Eo).fromArray(n))}return this}}var hu=Object.freeze({__proto__:null,ArcCurve:Xc,CatmullRomCurve3:tu,CubicBezierCurve:ou,CubicBezierCurve3:su,EllipseCurve:qc,LineCurve:au,LineCurve3:lu,QuadraticBezierCurve:Au,QuadraticBezierCurve3:cu,SplineCurve:uu});class du extends Kc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new hu[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,o=this.curves[r],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const i=a[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new hu[n.type]).fromJSON(n))}return this}}class pu extends du{constructor(e){super(),this.type="Path",this.currentPoint=new Eo,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new au(this.currentPoint.clone(),new Eo(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Au(this.currentPoint.clone(),new Eo(e,t),new Eo(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){const s=new ou(this.currentPoint.clone(),new Eo(e,t),new Eo(n,i),new Eo(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new uu(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,s,a){const l=this.currentPoint.x,A=this.currentPoint.y;return this.absellipse(e+l,t+A,n,i,r,o,s,a),this}absellipse(e,t,n,i,r,o,s,a){const l=new qc(e,t,n,i,r,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const A=l.getPoint(1);return this.currentPoint.copy(A),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class fu extends pu{constructor(e){super(e),this.uuid=wo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new pu).fromJSON(n))}return this}}function gu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=mu(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,A;if(i&&(o=function(e,t,n,i){const r=[];for(let o=0,s=t.length;o<s;o++){const n=mu(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i,!1);n===n.next&&(n.steiner=!0),r.push(Tu(n))}r.sort(_u);for(let o=0;o<r.length;o++)n=Cu(r[o],n);return n}(e,t,o,n)),e.length>80*n){a=1/0,l=1/0;let t=-1/0,i=-1/0;for(let o=n;o<r;o+=n){const n=e[o],r=e[o+1];n<a&&(a=n),r<l&&(l=r),n>t&&(t=n),r>i&&(i=r)}A=Math.max(t-a,i-l),A=0!==A?32767/A:0}return yu(o,s,n,a,l,A,0),s}function mu(e,t,n,i,r){let o;if(r===function(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(let s=t;s<n;s+=i)o=Ou(s/i|0,e[s],e[s+1],o);else for(let s=n-i;s>=t;s-=i)o=Ou(s/i|0,e[s],e[s+1],o);return o&&Lu(o,o.next)&&(Hu(o),o=o.next),o}function vu(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Lu(i,i.next)&&0!==Uu(i.prev,i,i.next))i=i.next;else{if(Hu(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function yu(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Eu(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n=1;do{let i,r=e;e=null;let o=null;for(t=0;r;){t++;let s=r,a=0;for(let e=0;e<n&&(a++,s=s.nextZ,s);e++);let l=n;for(;a>0||l>0&&s;)0!==a&&(0===l||!s||r.z<=s.z)?(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=s}o.nextZ=null,n*=2}while(t>1)}(r)}(e,i,r,o);let a=e;for(;e.prev!==e.next;){const l=e.prev,A=e.next;if(o?bu(e,i,r,o):wu(e))t.push(l.i,e.i,A.i),Hu(e),e=A.next,a=A.next;else if((e=A)===a){s?1===s?yu(e=xu(vu(e),t),t,n,i,r,o,2):2===s&&Bu(e,t,n,i,r,o):yu(vu(e),t,n,i,r,o,1);break}}}function wu(e){const t=e.prev,n=e,i=e.next;if(Uu(t,n,i)>=0)return!1;const r=t.x,o=n.x,s=i.x,a=t.y,l=n.y,A=i.y,c=Math.min(r,o,s),u=Math.min(a,l,A),h=Math.max(r,o,s),d=Math.max(a,l,A);let p=i.next;for(;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=u&&p.y<=d&&Fu(r,a,o,l,s,A,p.x,p.y)&&Uu(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function bu(e,t,n,i){const r=e.prev,o=e,s=e.next;if(Uu(r,o,s)>=0)return!1;const a=r.x,l=o.x,A=s.x,c=r.y,u=o.y,h=s.y,d=Math.min(a,l,A),p=Math.min(c,u,h),f=Math.max(a,l,A),g=Math.max(c,u,h),m=Eu(d,p,t,n,i),v=Eu(f,g,t,n,i);let y=e.prevZ,w=e.nextZ;for(;y&&y.z>=m&&w&&w.z<=v;){if(y.x>=d&&y.x<=f&&y.y>=p&&y.y<=g&&y!==r&&y!==s&&Fu(a,c,l,u,A,h,y.x,y.y)&&Uu(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,w.x>=d&&w.x<=f&&w.y>=p&&w.y<=g&&w!==r&&w!==s&&Fu(a,c,l,u,A,h,w.x,w.y)&&Uu(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;y&&y.z>=m;){if(y.x>=d&&y.x<=f&&y.y>=p&&y.y<=g&&y!==r&&y!==s&&Fu(a,c,l,u,A,h,y.x,y.y)&&Uu(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=v;){if(w.x>=d&&w.x<=f&&w.y>=p&&w.y<=g&&w!==r&&w!==s&&Fu(a,c,l,u,A,h,w.x,w.y)&&Uu(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function xu(e,t){let n=e;do{const i=n.prev,r=n.next.next;!Lu(i,r)&&Ru(i,n,n.next,r)&&ku(i,r)&&ku(r,i)&&(t.push(i.i,n.i,r.i),Hu(n),Hu(n.next),n=e=r),n=n.next}while(n!==e);return vu(n)}function Bu(e,t,n,i,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Iu(s,e)){let a=Du(s,e);return s=vu(s,s.next),a=vu(a,a.next),yu(s,t,n,i,r,o,0),void yu(a,t,n,i,r,o,0)}e=e.next}s=s.next}while(s!==e)}function _u(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function Cu(e,t){const n=function(e,t){let n=t;const i=e.x,r=e.y;let o,s=-1/0;if(Lu(e,n))return n;do{if(Lu(e,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>s&&(s=e,o=n.x<n.next.x?n:n.next,e===i))return o}n=n.next}while(n!==t);if(!o)return null;const a=o,l=o.x,A=o.y;let c=1/0;n=o;do{if(i>=n.x&&n.x>=l&&i!==n.x&&Mu(r<A?i:s,r,l,A,r<A?s:i,r,n.x,n.y)){const t=Math.abs(r-n.y)/(i-n.x);ku(n,e)&&(t<c||t===c&&(n.x>o.x||n.x===o.x&&Su(o,n)))&&(o=n,c=t)}n=n.next}while(n!==a);return o}(e,t);if(!n)return t;const i=Du(n,e);return vu(i,i.next),vu(n,n.next)}function Su(e,t){return Uu(e.prev,e,t.prev)<0&&Uu(t.next,e,e.next)<0}function Eu(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Tu(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Mu(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function Fu(e,t,n,i,r,o,s,a){return!(e===s&&t===a)&&Mu(e,t,n,i,r,o,s,a)}function Iu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ru(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ku(e,t)&&ku(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Uu(e.prev,e,t.prev)||Uu(e,t.prev,t))||Lu(e,t)&&Uu(e.prev,e,e.next)>0&&Uu(t.prev,t,t.next)>0)}function Uu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Lu(e,t){return e.x===t.x&&e.y===t.y}function Ru(e,t,n,i){const r=Nu(Uu(e,t,n)),o=Nu(Uu(e,t,i)),s=Nu(Uu(n,i,e)),a=Nu(Uu(n,i,t));return r!==o&&s!==a||(!(0!==r||!Pu(e,n,t))||(!(0!==o||!Pu(e,i,t))||(!(0!==s||!Pu(n,e,i))||!(0!==a||!Pu(n,t,i)))))}function Pu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Nu(e){return e>0?1:e<0?-1:0}function ku(e,t){return Uu(e.prev,e,e.next)<0?Uu(e,t,e.next)>=0&&Uu(e,e.prev,t)>=0:Uu(e,t,e.prev)<0||Uu(e,e.next,t)<0}function Du(e,t){const n=Qu(e.i,e.x,e.y),i=Qu(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Ou(e,t,n,i){const r=Qu(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Hu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Qu(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class zu{static triangulate(e,t){return gu(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:2)}}class Gu{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return Gu.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];ju(e),Vu(n,e);let o=e.length;t.forEach(ju);for(let a=0;a<t.length;a++)i.push(o),o+=t[a].length,Vu(n,t[a]);const s=zu.triangulate(n,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}}function ju(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Vu(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Wu extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fu([new Eo(.5,.5),new Eo(-.5,.5),new Eo(-.5,-.5),new Eo(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let s=0,a=e.length;s<a;s++){o(e[s])}function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let A=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,u=void 0!==t.bevelSize?t.bevelSize:c-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Ku;let g,m,v,y,w,b=!1;p&&(g=p.getSpacedPoints(a),b=!0,A=!1,m=p.computeFrenetFrames(a,!1),v=new Mo,y=new Mo,w=new Mo),A||(d=0,c=0,u=0,h=0);const x=e.extractPoints(s);let B=x.shape;const _=x.holes;if(!Gu.isClockWise(B)){B=B.reverse();for(let e=0,t=_.length;e<t;e++){const t=_[e];Gu.isClockWise(t)&&(_[e]=t.reverse())}}function C(e){const t=1e-10*1e-10;let n=e[0];for(let i=1;i<=e.length;i++){const r=i%e.length,o=e[r],s=o.x-n.x,a=o.y-n.y,l=s*s+a*a,A=Math.max(Math.abs(o.x),Math.abs(o.y),Math.abs(n.x),Math.abs(n.y));l<=t*A*A?(e.splice(r,1),i--):n=o}}C(B),_.forEach(C);const S=_.length,E=B;for(let t=0;t<S;t++){const e=_[t];B=B.concat(e)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const M=B.length;function F(e,t,n){let i,r,o;const s=e.x-t.x,a=e.y-t.y,l=n.x-e.x,A=n.y-e.y,c=s*s+a*a,u=s*A-a*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(c),h=Math.sqrt(l*l+A*A),d=t.x-a/u,p=t.y+s/u,f=((n.x-A/h-d)*A-(n.y+l/h-p)*l)/(s*A-a*l);i=d+s*f-e.x,r=p+a*f-e.y;const g=i*i+r*r;if(g<=2)return new Eo(i,r);o=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(A)&&(e=!0),e?(i=-a,r=s,o=Math.sqrt(c)):(i=s,r=a,o=Math.sqrt(c/2))}return new Eo(i/o,r/o)}const I=[];for(let t=0,n=E.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=F(E[t],E[i],E[r]);const U=[];let L,R,P=I.concat();for(let t=0,n=S;t<n;t++){const e=_[t];L=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[t]=F(e[t],e[i],e[r]);U.push(L),P=P.concat(L)}if(0===d)R=Gu.triangulateShape(E,_);else{const e=[],t=[];for(let n=0;n<d;n++){const i=n/d,r=c*Math.cos(i*Math.PI/2),o=u*Math.sin(i*Math.PI/2)+h;for(let t=0,n=E.length;t<n;t++){const n=T(E[t],I[t],o);O(n.x,n.y,-r),0===i&&e.push(n)}for(let e=0,n=S;e<n;e++){const n=_[e];L=U[e];const s=[];for(let e=0,t=n.length;e<t;e++){const t=T(n[e],L[e],o);O(t.x,t.y,-r),0===i&&s.push(t)}0===i&&t.push(s)}}R=Gu.triangulateShape(e,t)}const N=R.length,k=u+h;for(let t=0;t<M;t++){const e=A?T(B[t],P[t],k):B[t];b?(y.copy(m.normals[0]).multiplyScalar(e.x),v.copy(m.binormals[0]).multiplyScalar(e.y),w.copy(g[0]).add(y).add(v),O(w.x,w.y,w.z)):O(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<M;e++){const n=A?T(B[e],P[e],k):B[e];b?(y.copy(m.normals[t]).multiplyScalar(n.x),v.copy(m.binormals[t]).multiplyScalar(n.y),w.copy(g[t]).add(y).add(v),O(w.x,w.y,w.z)):O(n.x,n.y,l/a*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=c*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+h;for(let t=0,r=E.length;t<r;t++){const e=T(E[t],I[t],i);O(e.x,e.y,l+n)}for(let t=0,r=_.length;t<r;t++){const e=_[t];L=U[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],L[t],i);b?O(r.x,r.y+g[a-1].y,g[a-1].x+n):O(r.x,r.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=a+2*d;e<n;e++){const n=M*e,o=M*(e+1);Q(t+i+n,t+r+n,t+r+o,t+i+o)}}}function O(e,t,n){o.push(e),o.push(t),o.push(n)}function H(e,t,r){z(e),z(t),z(r);const o=i.length/3,s=f.generateTopUV(n,i,o-3,o-2,o-1);G(s[0]),G(s[1]),G(s[2])}function Q(e,t,r,o){z(e),z(t),z(o),z(t),z(r),z(o);const s=i.length/3,a=f.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function z(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function G(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(A){let e=0,t=M*e;for(let n=0;n<N;n++){const e=R[n];H(e[2]+t,e[1]+t,e[0]+t)}e=a+2*d,t=M*e;for(let n=0;n<N;n++){const e=R[n];H(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<N;e++){const t=R[e];H(t[2],t[1],t[0])}for(let e=0;e<N;e++){const t=R[e];H(t[0]+M*a,t[1]+M*a,t[2]+M*a)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;D(E,t),t+=E.length;for(let n=0,i=_.length;n<i;n++){const e=_[n];D(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Xa(i,3)),this.setAttribute("uv",new Xa(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new hu[i.type]).fromJSON(i)),new Wu(n,e.options)}}const Ku={generateTopUV:function(e,t,n,i,r){const o=t[3*n],s=t[3*n+1],a=t[3*i],l=t[3*i+1],A=t[3*r],c=t[3*r+1];return[new Eo(o,s),new Eo(a,l),new Eo(A,c)]},generateSideWallUV:function(e,t,n,i,r,o){const s=t[3*n],a=t[3*n+1],l=t[3*n+2],A=t[3*i],c=t[3*i+1],u=t[3*i+2],h=t[3*r],d=t[3*r+1],p=t[3*r+2],f=t[3*o],g=t[3*o+1],m=t[3*o+2];return Math.abs(a-c)<Math.abs(s-A)?[new Eo(s,1-l),new Eo(A,1-u),new Eo(h,1-p),new Eo(f,1-m)]:[new Eo(a,1-l),new Eo(c,1-u),new Eo(d,1-p),new Eo(g,1-m)]}};class qu extends Hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qu(e.radius,e.detail)}}class Xu extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Eo(0,-.5),new Eo(.5,0),new Eo(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=bo(i,0,2*Math.PI);const r=[],o=[],s=[],a=[],l=[],A=1/t,c=new Mo,u=new Eo,h=new Mo,d=new Mo,p=new Mo;let f=0,g=0;for(let m=0;m<=e.length-1;m++)switch(m){case 0:f=e[m+1].x-e[m].x,g=e[m+1].y-e[m].y,h.x=1*g,h.y=-f,h.z=0*g,p.copy(h),h.normalize(),a.push(h.x,h.y,h.z);break;case e.length-1:a.push(p.x,p.y,p.z);break;default:f=e[m+1].x-e[m].x,g=e[m+1].y-e[m].y,h.x=1*g,h.y=-f,h.z=0*g,d.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),a.push(h.x,h.y,h.z),p.copy(d)}for(let m=0;m<=t;m++){const r=n+m*A*i,h=Math.sin(r),d=Math.cos(r);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*h,c.y=e[n].y,c.z=e[n].x*d,o.push(c.x,c.y,c.z),u.x=m/t,u.y=n/(e.length-1),s.push(u.x,u.y);const i=a[3*n+0]*h,r=a[3*n+1],A=a[3*n+0]*d;l.push(i,r,A)}}for(let m=0;m<t;m++)for(let t=0;t<e.length-1;t++){const n=t+m*e.length,i=n,o=n+e.length,s=n+e.length+1,a=n+1;r.push(i,o,a),r.push(s,a,o)}this.setIndex(r),this.setAttribute("position",new Xa(o,3)),this.setAttribute("uv",new Xa(s,2)),this.setAttribute("normal",new Xa(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xu(e.points,e.segments,e.phiStart,e.phiLength)}}class Ju extends Hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ju(e.radius,e.detail)}}class Yu extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,o=t/2,s=Math.floor(n),a=Math.floor(i),l=s+1,A=a+1,c=e/s,u=t/a,h=[],d=[],p=[],f=[];for(let g=0;g<A;g++){const e=g*u-o;for(let t=0;t<l;t++){const n=t*c-r;d.push(n,-e,0),p.push(0,0,1),f.push(t/s),f.push(1-g/a)}}for(let g=0;g<a;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new Xa(d,3)),this.setAttribute("normal",new Xa(p,3)),this.setAttribute("uv",new Xa(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yu(e.width,e.height,e.widthSegments,e.heightSegments)}}class Zu extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const s=[],a=[],l=[],A=[];let c=e;const u=(t-e)/i,h=new Mo,d=new Eo;for(let p=0;p<=i;p++){for(let e=0;e<=n;e++){const i=r+e/n*o;h.x=c*Math.cos(i),h.y=c*Math.sin(i),a.push(h.x,h.y,h.z),l.push(0,0,1),d.x=(h.x/t+1)/2,d.y=(h.y/t+1)/2,A.push(d.x,d.y)}c+=u}for(let p=0;p<i;p++){const e=p*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,o=i+n+1,a=i+n+2,l=i+1;s.push(r,o,l),s.push(o,a,l)}}this.setIndex(s),this.setAttribute("position",new Xa(a,3)),this.setAttribute("normal",new Xa(l,3)),this.setAttribute("uv",new Xa(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zu(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class $u extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fu([new Eo(0,.5),new Eo(-.5,-.5),new Eo(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let A=0;A<e.length;A++)l(e[A]),this.addGroup(s,a,A),s+=a,a=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let A=l.shape;const c=l.holes;!1===Gu.isClockWise(A)&&(A=A.reverse());for(let t=0,n=c.length;t<n;t++){const e=c[t];!0===Gu.isClockWise(e)&&(c[t]=e.reverse())}const u=Gu.triangulateShape(A,c);for(let t=0,n=c.length;t<n;t++){const e=c[t];A=A.concat(e)}for(let t=0,n=A.length;t<n;t++){const e=A[t];i.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,i=u.length;t<i;t++){const e=u[t],i=e[0]+s,r=e[1]+s,o=e[2]+s;n.push(i,r,o),a+=3}}this.setIndex(n),this.setAttribute("position",new Xa(i,3)),this.setAttribute("normal",new Xa(r,3)),this.setAttribute("uv",new Xa(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new $u(n,e.curveSegments)}}class eh extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const A=[],c=new Mo,u=new Mo,h=[],d=[],p=[],f=[];for(let g=0;g<=n;g++){const h=[],m=g/n;let v=0;0===g&&0===o?v=.5/t:g===n&&a===Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const a=n/t;c.x=-e*Math.cos(i+a*r)*Math.sin(o+m*s),c.y=e*Math.cos(o+m*s),c.z=e*Math.sin(i+a*r)*Math.sin(o+m*s),d.push(c.x,c.y,c.z),u.copy(c).normalize(),p.push(u.x,u.y,u.z),f.push(a+v,1-m),h.push(l++)}A.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=A[g][e+1],i=A[g][e],r=A[g+1][e],s=A[g+1][e+1];(0!==g||o>0)&&h.push(t,i,s),(g!==n-1||a<Math.PI)&&h.push(i,r,s)}this.setIndex(h),this.setAttribute("position",new Xa(d,3)),this.setAttribute("normal",new Xa(p,3)),this.setAttribute("uv",new Xa(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class th extends Hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new th(e.radius,e.detail)}}class nh extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const o=[],s=[],a=[],l=[],A=new Mo,c=new Mo,u=new Mo;for(let h=0;h<=n;h++)for(let o=0;o<=i;o++){const d=o/i*r,p=h/n*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(d),c.y=(e+t*Math.cos(p))*Math.sin(d),c.z=t*Math.sin(p),s.push(c.x,c.y,c.z),A.x=e*Math.cos(d),A.y=e*Math.sin(d),u.subVectors(c,A).normalize(),a.push(u.x,u.y,u.z),l.push(o/i),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=i;e++){const t=(i+1)*h+e-1,n=(i+1)*(h-1)+e-1,r=(i+1)*(h-1)+e,s=(i+1)*h+e;o.push(t,n,s),o.push(n,r,s)}this.setIndex(o),this.setAttribute("position",new Xa(s,3)),this.setAttribute("normal",new Xa(a,3)),this.setAttribute("uv",new Xa(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nh(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ih extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],l=[],A=[],c=new Mo,u=new Mo,h=new Mo,d=new Mo,p=new Mo,f=new Mo,g=new Mo;for(let v=0;v<=n;++v){const s=v/n*r*Math.PI*2;m(s,r,o,e,h),m(s+.01,r,o,e,d),f.subVectors(d,h),g.addVectors(d,h),p.crossVectors(f,g),g.crossVectors(p,f),p.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,o=-t*Math.cos(r),s=t*Math.sin(r);c.x=h.x+(o*g.x+s*p.x),c.y=h.y+(o*g.y+s*p.y),c.z=h.z+(o*g.z+s*p.z),a.push(c.x,c.y,c.z),u.subVectors(c,h).normalize(),l.push(u.x,u.y,u.z),A.push(v/n),A.push(e/i)}}for(let v=1;v<=n;v++)for(let e=1;e<=i;e++){const t=(i+1)*(v-1)+(e-1),n=(i+1)*v+(e-1),r=(i+1)*v+e,o=(i+1)*(v-1)+e;s.push(t,n,o),s.push(n,r,o)}function m(e,t,n,i,r){const o=Math.cos(e),s=Math.sin(e),a=n/t*e,l=Math.cos(a);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Xa(a,3)),this.setAttribute("normal",new Xa(l,3)),this.setAttribute("uv",new Xa(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ih(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class rh extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cu(new Mo(-1,-1,0),new Mo(-1,1,0),new Mo(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new Mo,a=new Mo,l=new Eo;let A=new Mo;const c=[],u=[],h=[],d=[];function p(r){A=e.getPointAt(r/t,A);const l=o.normals[r],h=o.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),o=-Math.cos(t);a.x=o*l.x+r*h.x,a.y=o*l.y+r*h.y,a.z=o*l.z+r*h.z,a.normalize(),u.push(a.x,a.y,a.z),s.x=A.x+n*a.x,s.y=A.y+n*a.y,s.z=A.z+n*a.z,c.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,s=(i+1)*(e-1)+t;d.push(n,r,s),d.push(r,o,s)}}()}(),this.setIndex(d),this.setAttribute("position",new Xa(c,3)),this.setAttribute("normal",new Xa(u,3)),this.setAttribute("uv",new Xa(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new rh((new hu[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class oh extends il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new Mo,r=new Mo;if(null!==e.index){const o=e.attributes.position,s=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],A=l.start;for(let e=A,a=A+l.count;e<a;e+=3)for(let l=0;l<3;l++){const a=s.getX(e+l),A=s.getX(e+(l+1)%3);i.fromBufferAttribute(o,a),r.fromBufferAttribute(o,A),!0===sh(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let e=0,s=o.count/3;e<s;e++)for(let a=0;a<3;a++){const s=3*e+a,l=3*e+(a+1)%3;i.fromBufferAttribute(o,s),r.fromBufferAttribute(o,l),!0===sh(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Xa(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function sh(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var ah=Object.freeze({__proto__:null,BoxGeometry:ml,CapsuleGeometry:Nc,CircleGeometry:kc,ConeGeometry:Oc,CylinderGeometry:Dc,DodecahedronGeometry:Qc,EdgesGeometry:Wc,ExtrudeGeometry:Wu,IcosahedronGeometry:qu,LatheGeometry:Xu,OctahedronGeometry:Ju,PlaneGeometry:Yu,PolyhedronGeometry:Hc,RingGeometry:Zu,ShapeGeometry:$u,SphereGeometry:eh,TetrahedronGeometry:th,TorusGeometry:nh,TorusKnotGeometry:ih,TubeGeometry:rh,WireframeGeometry:oh});class lh extends Fa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ea(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ah extends xl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ch extends Fa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ea(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ea(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=br,this.normalScale=new Eo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uh extends ch{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Eo(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ea(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ea(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ea(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class hh extends Fa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ea(16777215),this.specular=new Ea(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ea(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=br,this.normalScale=new Eo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.combine=Bn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dh extends Fa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ea(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ea(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=br,this.normalScale=new Eo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ph extends Fa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=br,this.normalScale=new Eo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class fh extends Fa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ea(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ea(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=br,this.normalScale=new Eo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.combine=Bn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gh extends Fa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mr,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mh extends Fa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class vh extends Fa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ea(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=br,this.normalScale=new Eo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yh extends sc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function wh(e,t){return e&&e.constructor!==t?"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function bh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xh(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n}function Bh(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,s=0;s!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r}function _h(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(t.push(o.time),n.push(...s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)}class Ch{static convertArray(e,t){return wh(e,t)}static isTypedArray(e){return bh(e)}static getKeyframeOrder(e){return xh(e)}static sortedArray(e,t,n){return Bh(e,t,n)}static flattenJSON(e,t,n,i){_h(e,t,n,i)}static subclip(e,t,n,i){return function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),a=[],A=[];for(let o=0;o<e.times.length;++o){const s=e.times[o]*r;if(!(s<n||s>=i)){a.push(e.times[o]);for(let n=0;n<t;++n)A.push(e.values[o*t+n])}}0!==a.length&&(e.times=wh(a,e.times.constructor),e.values=wh(A,e.values.constructor),s.push(e))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}(e,t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:30)}static makeClipAdditive(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,o=t/i;for(let s=0;s<r;++s){const t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let a=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let A=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(A=c/3);const u=t.times.length-1;let h;if(o<=t.times[0]){const e=a,n=l-a;h=t.values.slice(e,n)}else if(o>=t.times[u]){const e=u*l+a,n=e+l-a;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=a,i=l-a;e.evaluate(o),h=e.resultBuffer.slice(n,i)}"quaternion"===i&&(new To).fromArray(h).normalize().conjugate().toArray(h);const d=r.times.length;for(let e=0;e<d;++e){const t=e*c+A;if("quaternion"===i)To.multiplyQuaternionsFlat(r.values,t,h,0,r.values,t);else{const e=c-2*A;for(let n=0;n<e;++n)r.values[t+n]-=h[n]}}}return e.blendMode=dr,e}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:30)}}class Sh{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=r)){const s=t[1];e<s&&(n=2,r=s);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Eh extends Sh{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ar,endingEnd:Ar}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case cr:r=e,s=2*t-n;break;case ur:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case cr:o=e,a=2*n-t;break;case ur:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}const l=.5*(n-t),A=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*A,this._offsetNext=o*A}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,A=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,h=this._weightNext,d=(n-t)/(i-t),p=d*d,f=p*d,g=-u*f+2*u*p-u*d,m=(1+u)*f+(-1.5-2*u)*p+(-.5+u)*d+1,v=(-1-h)*f+(1.5+h)*p+.5*d,y=h*f-h*p;for(let w=0;w!==s;++w)r[w]=g*o[A+w]+m*o[l+w]+v*o[a+w]+y*o[c+w];return r}}class Th extends Sh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,A=(n-t)/(i-t),c=1-A;for(let u=0;u!==s;++u)r[u]=o[l+u]*c+o[a+u]*A;return r}}class Mh extends Sh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fh{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wh(t,this.TimeBufferType),this.values=wh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:wh(e.times,Array),values:wh(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Mh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Th(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Eh(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sr:t=this.InterpolantFactoryMethodDiscrete;break;case ar:t=this.InterpolantFactoryMethodLinear;break;case lr:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sr;case this.InterpolantFactoryMethodLinear:return ar;case this.InterpolantFactoryMethodSmooth:return lr}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==i&&bh(i))for(let s=0,a=i.length;s!==a;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===lr,r=e.length-1;let o=1;for(let s=1;s<r;++s){let r=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[o+s]){r=!0;break}}}if(r){if(s!==o){e[o]=e[s];const i=s*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,s=0;s!==n;++s)t[i+s]=t[e+s];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Fh.prototype.ValueTypeName="",Fh.prototype.TimeBufferType=Float32Array,Fh.prototype.ValueBufferType=Float32Array,Fh.prototype.DefaultInterpolation=ar;class Ih extends Fh{constructor(e,t,n){super(e,t,n)}}Ih.prototype.ValueTypeName="bool",Ih.prototype.ValueBufferType=Array,Ih.prototype.DefaultInterpolation=sr,Ih.prototype.InterpolantFactoryMethodLinear=void 0,Ih.prototype.InterpolantFactoryMethodSmooth=void 0;class Uh extends Fh{constructor(e,t,n,i){super(e,t,n,i)}}Uh.prototype.ValueTypeName="color";class Lh extends Fh{constructor(e,t,n,i){super(e,t,n,i)}}Lh.prototype.ValueTypeName="number";class Rh extends Sh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t);let l=e*s;for(let A=l+s;l!==A;l+=4)To.slerpFlat(r,0,o,l-s,o,l,a);return r}}class Ph extends Fh{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new Rh(this.times,this.values,this.getValueSize(),e)}}Ph.prototype.ValueTypeName="quaternion",Ph.prototype.InterpolantFactoryMethodSmooth=void 0;class Nh extends Fh{constructor(e,t,n){super(e,t,n)}}Nh.prototype.ValueTypeName="string",Nh.prototype.ValueBufferType=Array,Nh.prototype.DefaultInterpolation=sr,Nh.prototype.InterpolantFactoryMethodLinear=void 0,Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class kh extends Fh{constructor(e,t,n,i){super(e,t,n,i)}}kh.prototype.ValueTypeName="vector";class Dh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hr;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=wo(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)t.push(Oh(n[o]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,o=n.length;r!==o;++r)t.push(Fh.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,o=[];for(let s=0;s<r;s++){let e=[],a=[];e.push((s+r-1)%r,s,(s+1)%r),a.push(0,1,0);const l=xh(e);e=Bh(e,1,l),a=Bh(a,1,l),i||0!==e[0]||(e.push(r),a.push(a[0])),o.push(new Lh(".morphTargetInfluences["+t[s].name+"]",e,a).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const t=e[s],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],s=[];_h(n,o,s,i),0!==o.length&&r.push(new e(t,o,s))}},i=[],r=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let A=0;A<l.length;A++){const e=l[A].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],o=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),o.push(i.morphTarget===r?1:0)}i.push(new Lh(".morphTargetInfluence["+r+"]",t,o))}a=t.length*o}else{const r=".bones["+t[A].name+"]";n(kh,r+".position",e,"pos",i),n(Ph,r+".quaternion",e,"rot",i),n(kh,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,a,i,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function Oh(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lh;case"vector":case"vector2":case"vector3":case"vector4":return kh;case"color":return Uh;case"quaternion":return Ph;case"bool":case"boolean":return Ih;case"string":return Nh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];_h(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Hh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Qh{constructor(e,t,n){const i=this;let r,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(e){a++,!1===o&&void 0!==i.onStart&&i.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,a),s===a&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const zh=new Qh;class Gh{constructor(e){this.manager=void 0!==e?e:zh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Gh.DEFAULT_MATERIAL_NAME="__DEFAULT";const jh={};class Vh extends Error{constructor(e,t){super(e),this.response=t}}class Wh extends Gh{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Hh.get("file:".concat(e));if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==jh[e])return void jh[e].push({onLoad:t,onProgress:n,onError:i});jh[e]=[],jh[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),s=this.mimeType,a=this.responseType;fetch(o).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=jh[e],i=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),o=r?parseInt(r):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){i.read().then(i=>{let{done:r,value:l}=i;if(r)e.close();else{a+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new Vh('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,s));case"json":return e.json();default:if(""===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{Hh.add("file:".concat(e),t);const n=jh[e];delete jh[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=jh[e];if(void 0===n)throw this.manager.itemError(e),t;delete jh[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Kh extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new Wh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(EI){i?i(EI):console.error(EI),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Dh.parse(e[n]);t.push(i)}return t}}class qh extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=this,o=[],s=new Fc,a=new Wh(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function A(A){a.load(e[A],function(e){const n=r.parse(e,!0);o[A]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=Jn),s.image=o,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(Array.isArray(e))for(let c=0,u=e.length;c<u;++c)A(c);else a.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Jn),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}}const Xh=new WeakMap;class Jh extends Gh{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Hh.get("image:".concat(e));if(void 0!==o){if(!0===o.complete)r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0);else{let e=Xh.get(o);void 0===e&&(e=[],Xh.set(o,e)),e.push({onLoad:t,onError:i})}return o}const s=ko("img");function a(){A(),t&&t(this);const n=Xh.get(this)||[];for(let e=0;e<n.length;e++){const t=n[e];t.onLoad&&t.onLoad(this)}Xh.delete(this),r.manager.itemEnd(e)}function l(t){A(),i&&i(t),Hh.remove("image:".concat(e));const n=Xh.get(this)||[];for(let e=0;e<n.length;e++){const i=n[e];i.onError&&i.onError(t)}Xh.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function A(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),Hh.add("image:".concat(e),s),r.manager.itemStart(e),s.src=e,s}}class Yh extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=new Fl;r.colorSpace=_r;const o=new Jh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(e[n],function(e){r.images[n]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)a(l);return r}}class Zh extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new mA,s=new Wh(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){let n;try{n=r.parse(e)}catch(s){if(void 0===i)return void console.error(s);i(s)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Gn,o.wrapT=void 0!==n.wrapT?n.wrapT:Gn,o.magFilter=void 0!==n.magFilter?n.magFilter:Jn,o.minFilter=void 0!==n.minFilter?n.minFilter:Jn,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(o.colorSpace=n.colorSpace),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=$n),1===n.mipmapCount&&(o.minFilter=Jn),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n)},n,i),o}}class $h extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=new es,o=new Jh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class ed extends la{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Ea(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class td extends ed{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(la.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ea(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const nd=new Ps,id=new Mo,rd=new Mo;class od{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Eo(512,512),this.mapType=ti,this.map=null,this.mapPass=null,this.matrix=new Ps,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kA,this._frameExtents=new Eo(1,1),this._viewportCount=1,this._viewports=[new ts(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;id.setFromMatrixPosition(e.matrixWorld),t.position.copy(id),rd.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rd),t.updateMatrixWorld(),nd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nd,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(nd)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sd extends od{constructor(){super(new El(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=2*yo*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ad extends ed{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(la.DEFAULT_UP),this.updateMatrix(),this.target=new la,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new sd}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const ld=new Ps,Ad=new Mo,cd=new Mo;class ud extends od{constructor(){super(new El(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Eo(4,2),this._viewportCount=6,this._viewports=[new ts(2,1,1,1),new ts(0,1,1,1),new ts(3,1,1,1),new ts(1,1,1,1),new ts(3,0,1,1),new ts(1,0,1,1)],this._cubeDirections=[new Mo(1,0,0),new Mo(-1,0,0),new Mo(0,0,1),new Mo(0,0,-1),new Mo(0,1,0),new Mo(0,-1,0)],this._cubeUps=[new Mo(0,1,0),new Mo(0,1,0),new Mo(0,1,0),new Mo(0,1,0),new Mo(0,0,1),new Mo(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Ad.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ad),cd.copy(n.position),cd.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(cd),n.updateMatrixWorld(),i.makeTranslation(-Ad.x,-Ad.y,-Ad.z),ld.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ld,n.coordinateSystem,n.reversedDepth)}}class hd extends ed{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new ud}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class dd extends Bl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class pd extends od{constructor(){super(new dd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class fd extends ed{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(la.DEFAULT_UP),this.updateMatrix(),this.target=new la,this.shadow=new pd}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class gd extends ed{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class md extends ed{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vd{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Mo)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class yd extends ed{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vd;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class wd extends Gh{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,o=new Wh(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(EI){i?i(EI):console.error(EI),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new Ea).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(i.dispersion=e.dispersion),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new Ea).setHex(t.value);break;case"v2":i.uniforms[r].value=(new Eo).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new Mo).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new ts).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new Uo).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Ps).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new Eo).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapRotation&&i.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Eo).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return wd.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:lh,SpriteMaterial:Ql,RawShaderMaterial:Ah,ShaderMaterial:xl,PointsMaterial:wc,MeshPhysicalMaterial:uh,MeshStandardMaterial:ch,MeshPhongMaterial:hh,MeshToonMaterial:dh,MeshNormalMaterial:ph,MeshLambertMaterial:fh,MeshDepthMaterial:gh,MeshDistanceMaterial:mh,MeshBasicMaterial:Ia,MeshMatcapMaterial:vh,LineDashedMaterial:yh,LineBasicMaterial:sc,Material:Fa}[e]}}class bd{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xd extends il{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Bd extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new Wh(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(EI){i?i(EI):console.error(EI),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],o=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],o=new Uint32Array(r).buffer;return n[t]=o,o}(e,r.buffer),s=No(r.type,o),a=new Dl(s,r.stride);return a.uuid=r.uuid,t[i]=a,a}const r=e.isInstancedBufferGeometry?new xd:new il,o=e.data.index;if(void 0!==o){const e=No(o.type,o.array);r.setIndex(new Ha(e,1))}const s=e.data.attributes;for(const c in s){const t=s[c];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new Hl(r,t.itemSize,t.offset,t.normalized)}else{const e=No(t.type,t.array);n=new(t.isInstancedBufferAttribute?bA:Ha)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),r.setAttribute(c,n)}const a=e.data.morphAttributes;if(a)for(const c in a){const t=a[c],n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];let s;if(o.isInterleavedBufferAttribute){const t=i(e.data,o.data);s=new Hl(t,o.itemSize,o.offset,o.normalized)}else{const e=No(o.type,o.array);s=new Ha(e,o.itemSize,o.normalized)}void 0!==o.name&&(s.name=o.name),n.push(s)}r.morphAttributes[c]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let c=0,u=l.length;c!==u;++c){const e=l[c];r.addGroup(e.start,e.count,e.materialIndex)}const A=e.data.boundingSphere;return void 0!==A&&(r.boundingSphere=(new Ss).fromJSON(A)),e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class _d extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=this,o=""===this.path?bd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new Wh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let o=null;try{o=JSON.parse(n)}catch(a){return void 0!==i&&i(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}const s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(o,t)},n,i)}async loadAsync(e,t){const n=""===this.path?bd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new Wh(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),o=JSON.parse(r),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,n),A=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,A),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,i,s,o,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),this.bindLightTargets(a),a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new fu).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,o=e.length;r<o;r++){const t=(new wA).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new Bd;for(let r=0,o=e.length;r<o;r++){let o;const s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;default:s.type in ah?o=ah[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new wd;r.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=Dh.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:No(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Qh(t);r=new Jh(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=o(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new mA(n.data,n.width,n.height)))}i[n.uuid]=new Jo(e)}else{const e=o(n.url);i[n.uuid]=new Jo(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:No(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new Jh(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],o=i.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new mA(i.data,i.width,i.height)))}n[i.uuid]=new Jo(e)}else{const e=await r(i.url);n[i.uuid]=new Jo(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,o=e.length;r<o;r++){const o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image],a=s.data;let l;Array.isArray(a)?(l=new Fl,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new mA:new es,a&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,Cd)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],Sd),l.wrapT=n(o.wrap[1],Sd)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,Ed)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,Ed)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),i[o.uuid]=l}return i}parseObject(e,t,n,i,r){let o,s,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":o=new kl,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Ea(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Nl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Pl(e.fog.color,e.fog.density)),""!==e.fog.name&&(o.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&o.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(o.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new El(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new dd(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new gd(e.color,e.intensity);break;case"DirectionalLight":o=new fd(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new hd(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new md(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ad(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new td(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new yd).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),a=c(e.material),o=new fA(s,a),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),a=c(e.material),o=new fl(s,a);break;case"InstancedMesh":s=l(e.geometry),a=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;o=new MA(s,a,t),o.instanceMatrix=new bA(new Float32Array(n.array),16),void 0!==i&&(o.instanceColor=new bA(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":s=l(e.geometry),a=c(e.material),o=new oc(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,a),o.geometry=s,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(e=>{let t=null,n=null;return void 0!==e.boundingBox&&(t=(new ls).fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(n=(new Ss).fromJSON(e.boundingSphere)),A(A({},e),{},{boundingBox:t,boundingSphere:n})}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=u(e.matricesTexture.uuid),o._indirectTexture=u(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(o._colorsTexture=u(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(o.boundingSphere=(new Ss).fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(o.boundingBox=(new ls).fromJSON(e.boundingBox));break;case"LOD":o=new oA;break;case"Line":o=new pc(l(e.geometry),c(e.material));break;case"LineLoop":o=new yc(l(e.geometry),c(e.material));break;case"LineSegments":o=new vc(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Cc(l(e.geometry),c(e.material));break;case"Sprite":o=new tA(c(e.material));break;case"Group":o=new Ul;break;case"Bone":o=new gA;break;default:o=new la}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(o.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)o.add(this.parseObject(s[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=o.getObjectByProperty("uuid",n.object);void 0!==i&&o.addLevel(i,n.distance,n.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);t.target=void 0!==i?i:new la}})}}const Cd={UVMapping:Nn,CubeReflectionMapping:kn,CubeRefractionMapping:Dn,EquirectangularReflectionMapping:On,EquirectangularRefractionMapping:Hn,CubeUVReflectionMapping:Qn},Sd={RepeatWrapping:zn,ClampToEdgeWrapping:Gn,MirroredRepeatWrapping:jn},Ed={NearestFilter:Vn,NearestMipmapNearestFilter:Wn,NearestMipmapLinearFilter:qn,LinearFilter:Jn,LinearMipmapNearestFilter:Yn,LinearMipmapLinearFilter:$n},Td=new WeakMap;class Md extends Gh{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Hh.get("image-bitmap:".concat(e));if(void 0!==o)return r.manager.itemStart(e),o.then?void o.then(n=>{if(!0!==Td.has(o))return t&&t(n),r.manager.itemEnd(e),n;i&&i(Td.get(o)),r.manager.itemError(e),r.manager.itemEnd(e)}):(setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,s.signal="function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const a=fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){return Hh.add("image-bitmap:".concat(e),n),t&&t(n),r.manager.itemEnd(e),n}).catch(function(t){i&&i(t),Td.set(a,t),Hh.remove("image-bitmap:".concat(e)),r.manager.itemError(e),r.manager.itemEnd(e)});Hh.add("image-bitmap:".concat(e),a),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Fd;class Id{static getContext(){return void 0===Fd&&(Fd=new(window.AudioContext||window.webkitAudioContext)),Fd}static setContext(e){Fd=e}}class Ud extends Gh{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new Wh(this.manager);function s(t){i?i(t):console.error(t),r.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(e){try{const n=e.slice(0);Id.getContext().decodeAudioData(n,function(e){t(e)}).catch(s)}catch(EI){s(EI)}},n,i)}}const Ld=new Ps,Rd=new Ps,Pd=new Ps;class Nd{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new El,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new El,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Pd.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(vo*t.fov*.5)/t.zoom;let o,s;Rd.elements[12]=-n,Ld.elements[12]=n,o=-r*t.aspect+i,s=r*t.aspect+i,Pd.elements[0]=2*t.near/(s-o),Pd.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(Pd),o=-r*t.aspect-i,s=r*t.aspect-i,Pd.elements[0]=2*t.near/(s-o),Pd.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(Pd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Rd),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ld)}}class kd extends El{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Dd{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Od=new Mo,Hd=new To,Qd=new Mo,zd=new Mo,Gd=new Mo;class jd extends la{constructor(){super(),this.type="AudioListener",this.context=Id.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Dd}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Od,Hd,Qd),zd.set(0,0,-1).applyQuaternion(Hd),Gd.set(0,1,0).applyQuaternion(Hd),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Od.x,e),t.positionY.linearRampToValueAtTime(Od.y,e),t.positionZ.linearRampToValueAtTime(Od.z,e),t.forwardX.linearRampToValueAtTime(zd.x,e),t.forwardY.linearRampToValueAtTime(zd.y,e),t.forwardZ.linearRampToValueAtTime(zd.z,e),t.upX.linearRampToValueAtTime(Gd.x,e),t.upY.linearRampToValueAtTime(Gd.y,e),t.upZ.linearRampToValueAtTime(Gd.z,e)}else t.setPosition(Od.x,Od.y,Od.z),t.setOrientation(zd.x,zd.y,zd.z,Gd.x,Gd.y,Gd.z)}}class Vd extends la{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Wd=new Mo,Kd=new To,qd=new Mo,Xd=new Mo;class Jd extends Vd{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Wd,Kd,qd),Xd.set(0,0,1).applyQuaternion(Kd);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wd.x,e),t.positionY.linearRampToValueAtTime(Wd.y,e),t.positionZ.linearRampToValueAtTime(Wd.z,e),t.orientationX.linearRampToValueAtTime(Xd.x,e),t.orientationY.linearRampToValueAtTime(Xd.y,e),t.orientationZ.linearRampToValueAtTime(Xd.z,e)}else t.setPosition(Wd.x,Wd.y,Wd.z),t.setOrientation(Xd.x,Xd.y,Xd.z)}}class Yd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Zd{constructor(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){To.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const o=this._workIndex*r;To.multiplyQuaternionsFlat(e,o,e,t,e,n),To.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,r){const o=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*o+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}}const $d="\\[\\]\\.:\\/",ep=new RegExp("["+$d+"]","g"),tp="[^"+$d+"]",np="[^"+$d.replace("\\.","")+"]",ip=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",tp)+/(WCOD+)?/.source.replace("WCOD",np)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tp)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tp)+"$"),rp=["material","materials","bones","map"];class op{constructor(e,t,n){this.path=t,this.parsedPath=n||op.parseTrackName(t),this.node=op.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new op.Composite(e,t,n):new op(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ep,"")}static parseTrackName(e){const t=ip.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==rp.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=op.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}op.Composite=class{constructor(e,t,n){const i=n||op.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},op.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},op.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},op.prototype.GetterByBindingType=[op.prototype._getValue_direct,op.prototype._getValue_array,op.prototype._getValue_arrayElement,op.prototype._getValue_toArray],op.prototype.SetterByBindingTypeAndVersioning=[[op.prototype._setValue_direct,op.prototype._setValue_direct_setNeedsUpdate,op.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[op.prototype._setValue_array,op.prototype._setValue_array_setNeedsUpdate,op.prototype._setValue_array_setMatrixWorldNeedsUpdate],[op.prototype._setValue_arrayElement,op.prototype._setValue_arrayElement_setNeedsUpdate,op.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[op.prototype._setValue_fromArray,op.prototype._setValue_fromArray_setNeedsUpdate,op.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class sp{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let s,a=e.length,l=this.nCachedObjects_;for(let A=0,c=arguments.length;A!==c;++A){const c=arguments[A],u=c.uuid;let h=t[u];if(void 0===h){h=a++,t[u]=h,e.push(c);for(let e=0,t=o;e!==t;++e)r[e].push(new op(c,n[e],i[e]))}else if(h<l){s=e[h];const a=--l,A=e[a];t[A.uuid]=h,e[h]=A,t[u]=a,e[a]=c;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[a];let s=t[h];t[h]=o,void 0===s&&(s=new op(c,n[e],i[e])),t[a]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=r){const o=r++,A=e[o];t[A.uuid]=l,e[l]=A,t[a]=o,e[o]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[l]=i,t[o]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<r){const s=--r,a=e[s],A=--o,c=e[A];t[a.uuid]=l,e[l]=a,t[c.uuid]=s,e[s]=c,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[A];t[l]=i,t[s]=r,t.pop()}}else{const r=--o,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,A=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(c);for(let u=A,h=a.length;u!==h;++u){const n=a[u];c[u]=new op(n,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}class ap{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,o=r.length,s=new Array(o),a={endingStart:Ar,endingEnd:Ar};for(let l=0;l!==o;++l){const e=r[l].createInterpolant(null);s[l]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===dr)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=n===or;if(0===e)return-1===r?i:o&&1===(1&r)?t-i:i;if(n===ir){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=cr,i.endingEnd=cr):(i.endingStart=e?this.zeroSlopeAtStart?cr:Ar:ur,i.endingEnd=t?this.zeroSlopeAtEnd?cr:Ar:ur)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}const lp=new Float32Array(1);class Ap extends fo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let A=l[a];void 0===A&&(A={},l[a]=A);for(let c=0;c!==r;++c){const e=i[c],r=e.name;let l=A[r];if(void 0!==l)++l.referenceCount,o[c]=l;else{if(l=o[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,r));continue}const i=t&&t._propertyBindings[c].binding.parsedPath;l=new Zd(op.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,r),o[c]=l}s[c].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],A=e._byClipCacheIndex;l._byClipCacheIndex=A,a[A]=l,a.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Th(new Float32Array(2),new Float32Array(2),1,lp),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let o="string"===typeof e?Dh.findByName(i,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:hr),void 0!==a){const e=a.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const A=new ap(this,o,t,n);return this._bindAction(A,l),this._addInactiveAction(A,s,r),A}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?Dh.findByName(n,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,o)}const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class cp extends ns{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new ss(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class up{constructor(e){this.value=e}clone(){return new up(void 0===this.value.clone?this.value:this.value.clone())}}let hp=0;class dp extends fo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:hp++}),this.name="",this.usage=Zr,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class pp extends Dl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class fp{constructor(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.normalized=o,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const gp=new Ps;class mp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Rs(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Ws,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return gp.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gp),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return yp(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(vp),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)yp(e[i],this,n,t);return n.sort(vp),n}}function vp(e,t){return e.distance-t.distance}function yp(e,t,n,i){let r=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(r=!1)}if(!0===r&&!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)yp(i[e],t,n,!0)}}class wp{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=bp.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function bp(){!1===this._document.hidden&&this.reset()}class xp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=bo(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(bo(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Bp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class _p{constructor(e,t,n,i){_p.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=i,this}}const Cp=new Eo;class Sp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Eo(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Cp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Cp).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ep=new Mo,Tp=new Mo,Mp=new Mo,Fp=new Mo,Ip=new Mo,Up=new Mo,Lp=new Mo;class Rp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Ep.subVectors(e,this.start),Tp.subVectors(this.end,this.start);const n=Tp.dot(Tp);let i=Tp.dot(Ep)/n;return t&&(i=bo(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Up,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lp;const i=1e-8*1e-8;let r,o;const s=this.start,a=e.start,l=this.end,A=e.end;Mp.subVectors(l,s),Fp.subVectors(A,a),Ip.subVectors(s,a);const c=Mp.dot(Mp),u=Fp.dot(Fp),h=Fp.dot(Ip);if(c<=i&&u<=i)return t.copy(s),n.copy(a),t.sub(n),t.dot(t);if(c<=i)r=0,o=h/u,o=bo(o,0,1);else{const e=Mp.dot(Ip);if(u<=i)o=0,r=bo(-e/c,0,1);else{const t=Mp.dot(Fp),n=c*u-t*t;r=0!==n?bo((t*h-e*u)/n,0,1):0,o=(t*r+h)/u,o<0?(o=0,r=bo(-e/c,0,1)):o>1&&(o=1,r=bo((t-e)/c,0,1))}}return t.copy(s).add(Mp.multiplyScalar(r)),n.copy(a).add(Fp.multiplyScalar(o)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Pp=new Mo;class Np extends la{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new il,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const e=o/a*Math.PI*2,t=s/a*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Xa(i,3));const r=new sc({fog:!1,toneMapped:!1});this.cone=new vc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Pp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Pp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const kp=new Mo,Dp=new Ps,Op=new Ps;class Hp extends vc{constructor(e){const t=Qp(e),n=new il,i=[],r=[];for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new Xa(i,3)),n.setAttribute("color",new Xa(r,3));super(n,new sc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Ea(255),s=new Ea(65280);this.setColors(o,s)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Op.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(Dp.multiplyMatrices(Op,e.matrixWorld),kp.setFromMatrixPosition(Dp),i.setXYZ(o,kp.x,kp.y,kp.z),Dp.multiplyMatrices(Op,e.parent.matrixWorld),kp.setFromMatrixPosition(Dp),i.setXYZ(o+1,kp.x,kp.y,kp.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const n=this.geometry.getAttribute("color");for(let i=0;i<n.count;i+=2)n.setXYZ(i,e.r,e.g,e.b),n.setXYZ(i+1,t.r,t.g,t.b);return n.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qp(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push(...Qp(e.children[n]));return t}class zp extends fl{constructor(e,t,n){super(new eh(t,4,2),new Ia({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Gp=new Mo,jp=new Ea,Vp=new Ea;class Wp extends la{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Ju(t);i.rotateY(.5*Math.PI),this.material=new Ia({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Ha(o,3)),this.add(new fl(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");jp.copy(this.light.color),Vp.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?jp:Vp;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Gp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Kp extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Ea(n),i=new Ea(i);const r=t/2,o=e/t,s=e/2,a=[],l=[];for(let c=0,u=0,h=-s;c<=t;c++,h+=o){a.push(-s,0,h,s,0,h),a.push(h,0,-s,h,0,s);const e=c===r?n:i;e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3}const A=new il;A.setAttribute("position",new Xa(a,3)),A.setAttribute("color",new Xa(l,3));super(A,new sc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class qp extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new Ea(r),o=new Ea(o);const s=[],a=[];if(t>1)for(let A=0;A<t;A++){const n=A/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(i,0,l);const c=1&A?r:o;a.push(c.r,c.g,c.b),a.push(c.r,c.g,c.b)}for(let A=0;A<n;A++){const t=1&A?r:o,l=e-e/n*A;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l;s.push(r,0,o),a.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l,s.push(r,0,o),a.push(t.r,t.g,t.b)}}const l=new il;l.setAttribute("position",new Xa(s,3)),l.setAttribute("color",new Xa(a,3));super(l,new sc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Xp=new Mo,Jp=new Mo,Yp=new Mo;class Zp extends la{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new il;i.setAttribute("position",new Xa([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new sc({fog:!1,toneMapped:!1});this.lightPlane=new pc(i,r),this.add(this.lightPlane),i=new il,i.setAttribute("position",new Xa([0,0,0,0,0,1],3)),this.targetLine=new pc(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Xp.setFromMatrixPosition(this.light.matrixWorld),Jp.setFromMatrixPosition(this.light.target.matrixWorld),Yp.subVectors(Jp,Xp),this.lightPlane.lookAt(Jp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Jp),this.targetLine.scale.z=Yp.length()}}const $p=new Mo,ef=new Bl;class tf extends vc{constructor(e){const t=new il,n=new sc({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={};function s(e,t){a(e),a(t)}function a(e){i.push(0,0,0),r.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Xa(i,3)),t.setAttribute("color",new Xa(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Ea(16755200),A=new Ea(16711680),c=new Ea(43775),u=new Ea(16777215),h=new Ea(3355443);this.setColors(l,A,c,u,h)}setColors(e,t,n,i,r){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap;let n,i;if(ef.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)n=1,i=0;else if(this.camera.coordinateSystem===Ao)n=-1,i=1;else{if(this.camera.coordinateSystem!==co)throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);n=0,i=1}nf("c",t,e,ef,0,0,n),nf("t",t,e,ef,0,0,i),nf("n1",t,e,ef,-1,-1,n),nf("n2",t,e,ef,1,-1,n),nf("n3",t,e,ef,-1,1,n),nf("n4",t,e,ef,1,1,n),nf("f1",t,e,ef,-1,-1,i),nf("f2",t,e,ef,1,-1,i),nf("f3",t,e,ef,-1,1,i),nf("f4",t,e,ef,1,1,i),nf("u1",t,e,ef,.7,1.1,n),nf("u2",t,e,ef,-.7,1.1,n),nf("u3",t,e,ef,0,2,n),nf("cf1",t,e,ef,-1,0,i),nf("cf2",t,e,ef,1,0,i),nf("cf3",t,e,ef,0,-1,i),nf("cf4",t,e,ef,0,1,i),nf("cn1",t,e,ef,-1,0,n),nf("cn2",t,e,ef,1,0,n),nf("cn3",t,e,ef,0,-1,n),nf("cn4",t,e,ef,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function nf(e,t,n,i,r,o,s){$p.set(r,o,s).unproject(i);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],$p.x,$p.y,$p.z)}}const rf=new ls;class of extends vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new il;r.setIndex(new Ha(n,1)),r.setAttribute("position",new Ha(i,3)),super(r,new sc({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&rf.setFromObject(this.object),rf.isEmpty())return;const e=rf.min,t=rf.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sf extends vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new il;i.setIndex(new Ha(n,1)),i.setAttribute("position",new Xa([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new sc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class af extends pc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new il;i.setAttribute("position",new Xa([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new sc({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new il;r.setAttribute("position",new Xa([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new fl(r,new Ia({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lf=new Mo;let Af,cf;class uf extends la{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mo(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mo(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===Af&&(Af=new il,Af.setAttribute("position",new Xa([0,0,0,0,1,0],3)),cf=new Oc(.5,1,5,1),cf.translate(0,-.5,0)),this.position.copy(t),this.line=new pc(Af,new sc({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fl(cf,new Ia({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lf.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lf,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class hf extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new il;n.setAttribute("position",new Xa(t,3)),n.setAttribute("color",new Xa([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new sc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new Ea,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class df{constructor(){this.type="ShapePath",this.color=new Ea,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new pu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],s=t[o],a=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],a=-a,s=t[r],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const n=Gu.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,o,s;const a=[];if(1===i.length)return o=i[0],s=new fu,s.curves=o.curves,a.push(s),a;let l=!n(i[0].getPoints());l=e?!l:l;const A=[],c=[];let u,h,d=[],p=0;c[p]=void 0,d[p]=[];for(let f=0,g=i.length;f<g;f++)o=i[f],u=o.getPoints(),r=n(u),r=e?!r:r,r?(!l&&c[p]&&p++,c[p]={s:new fu,p:u},c[p].s.curves=o.curves,l&&p++,d[p]=[]):d[p].push({h:o,p:u[0]});if(!c[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new fu;r.curves=i.curves,t.push(r)}return t}(i);if(c.length>1){let e=!1,n=0;for(let t=0,i=c.length;t<i;t++)A[t]=[];for(let i=0,r=c.length;i<r;i++){const r=d[i];for(let o=0;o<r.length;o++){const s=r[o];let a=!0;for(let r=0;r<c.length;r++)t(s.p,c[r].p)&&(i!==r&&n++,a?(a=!1,A[r].push(s)):e=!0);a&&A[i].push(s)}}n>0&&!1===e&&(d=A)}for(let f=0,g=c.length;f<g;f++){s=c[f].s,a.push(s),h=d[f];for(let e=0,t=h.length;e<t;e++)s.holes.push(h[e].h)}return a}}class pf extends fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):console.warn("THREE.Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function ff(e,t,n,i){const r=function(e){switch(e){case ti:case ni:return{byteLength:1,components:1};case ri:case ii:case li:return{byteLength:2,components:1};case Ai:case ci:return{byteLength:2,components:4};case si:case oi:case ai:return{byteLength:4,components:1};case hi:case di:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(i);switch(n){case pi:return e*t;case yi:case wi:return e*t/r.components*r.byteLength;case bi:case xi:return e*t*2/r.components*r.byteLength;case fi:return e*t*3/r.components*r.byteLength;case gi:case _i:return e*t*4/r.components*r.byteLength;case Ci:case Si:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Ei:case Ti:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Fi:case Ui:return Math.max(e,16)*Math.max(t,8)/4;case Mi:case Ii:return Math.max(e,8)*Math.max(t,8)/2;case Li:case Ri:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Pi:case Ni:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case ki:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Di:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Oi:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Hi:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Qi:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case zi:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Gi:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case ji:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Vi:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Wi:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Ki:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case qi:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Xi:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Ji:case Yi:case Zi:return Math.ceil(e/4)*Math.ceil(t/4)*16;case $i:case er:return Math.ceil(e/4)*Math.ceil(t/4)*8;case tr:case nr:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}class gf{static contain(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}static getByteLength(e,t,n,i){return ff(e,t,n,i)}}function mf(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function vf(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,o=i.byteLength,s=e.createBuffer();let a;if(e.bindBuffer(n,s),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)a=e.FLOAT;else if("undefined"!==typeof Float16Array&&i instanceof Float16Array)a=e.HALF_FLOAT;else if(i instanceof Uint16Array)a=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=e.SHORT;else if(i instanceof Uint32Array)a=e.UNSIGNED_INT;else if(i instanceof Int32Array)a=e.INT;else if(i instanceof Int8Array)a=e.BYTE;else if(i instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=e.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,i){const r=n.array,o=n.updateRanges;if(e.bindBuffer(i,t),0===o.length)e.bufferSubData(i,0,r);else{o.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<o.length;e++){const n=o[t],i=o[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,o[t]=i)}o.length=t+1;for(let n=0,s=o.length;n<s;n++){const t=o[n];e.bufferSubData(i,t.start*r.BYTES_PER_ELEMENT,r,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Tt}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Tt);const yf={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},wf={common:{diffuse:{value:new Ea(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Uo},alphaMap:{value:null},alphaMapTransform:{value:new Uo},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Uo}},envmap:{envMap:{value:null},envMapRotation:{value:new Uo},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Uo}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Uo}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Uo},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Uo},normalScale:{value:new Eo(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Uo},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Uo}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Uo}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Uo}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ea(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ea(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Uo},alphaTest:{value:0},uvTransform:{value:new Uo}},sprite:{diffuse:{value:new Ea(16777215)},opacity:{value:1},center:{value:new Eo(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Uo},alphaMap:{value:null},alphaMapTransform:{value:new Uo},alphaTest:{value:0}}},bf={basic:{uniforms:yl([wf.common,wf.specularmap,wf.envmap,wf.aomap,wf.lightmap,wf.fog]),vertexShader:yf.meshbasic_vert,fragmentShader:yf.meshbasic_frag},lambert:{uniforms:yl([wf.common,wf.specularmap,wf.envmap,wf.aomap,wf.lightmap,wf.emissivemap,wf.bumpmap,wf.normalmap,wf.displacementmap,wf.fog,wf.lights,{emissive:{value:new Ea(0)}}]),vertexShader:yf.meshlambert_vert,fragmentShader:yf.meshlambert_frag},phong:{uniforms:yl([wf.common,wf.specularmap,wf.envmap,wf.aomap,wf.lightmap,wf.emissivemap,wf.bumpmap,wf.normalmap,wf.displacementmap,wf.fog,wf.lights,{emissive:{value:new Ea(0)},specular:{value:new Ea(1118481)},shininess:{value:30}}]),vertexShader:yf.meshphong_vert,fragmentShader:yf.meshphong_frag},standard:{uniforms:yl([wf.common,wf.envmap,wf.aomap,wf.lightmap,wf.emissivemap,wf.bumpmap,wf.normalmap,wf.displacementmap,wf.roughnessmap,wf.metalnessmap,wf.fog,wf.lights,{emissive:{value:new Ea(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yf.meshphysical_vert,fragmentShader:yf.meshphysical_frag},toon:{uniforms:yl([wf.common,wf.aomap,wf.lightmap,wf.emissivemap,wf.bumpmap,wf.normalmap,wf.displacementmap,wf.gradientmap,wf.fog,wf.lights,{emissive:{value:new Ea(0)}}]),vertexShader:yf.meshtoon_vert,fragmentShader:yf.meshtoon_frag},matcap:{uniforms:yl([wf.common,wf.bumpmap,wf.normalmap,wf.displacementmap,wf.fog,{matcap:{value:null}}]),vertexShader:yf.meshmatcap_vert,fragmentShader:yf.meshmatcap_frag},points:{uniforms:yl([wf.points,wf.fog]),vertexShader:yf.points_vert,fragmentShader:yf.points_frag},dashed:{uniforms:yl([wf.common,wf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yf.linedashed_vert,fragmentShader:yf.linedashed_frag},depth:{uniforms:yl([wf.common,wf.displacementmap]),vertexShader:yf.depth_vert,fragmentShader:yf.depth_frag},normal:{uniforms:yl([wf.common,wf.bumpmap,wf.normalmap,wf.displacementmap,{opacity:{value:1}}]),vertexShader:yf.meshnormal_vert,fragmentShader:yf.meshnormal_frag},sprite:{uniforms:yl([wf.sprite,wf.fog]),vertexShader:yf.sprite_vert,fragmentShader:yf.sprite_frag},background:{uniforms:{uvTransform:{value:new Uo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yf.background_vert,fragmentShader:yf.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Uo}},vertexShader:yf.backgroundCube_vert,fragmentShader:yf.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yf.cube_vert,fragmentShader:yf.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yf.equirect_vert,fragmentShader:yf.equirect_frag},distanceRGBA:{uniforms:yl([wf.common,wf.displacementmap,{referencePosition:{value:new Mo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yf.distanceRGBA_vert,fragmentShader:yf.distanceRGBA_frag},shadow:{uniforms:yl([wf.lights,wf.fog,{color:{value:new Ea(0)},opacity:{value:1}}]),vertexShader:yf.shadow_vert,fragmentShader:yf.shadow_frag}};bf.physical={uniforms:yl([bf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Uo},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Uo},clearcoatNormalScale:{value:new Eo(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Uo},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Uo},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Uo},sheen:{value:0},sheenColor:{value:new Ea(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Uo},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Uo},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Uo},transmissionSamplerSize:{value:new Eo},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Uo},attenuationDistance:{value:0},attenuationColor:{value:new Ea(0)},specularColor:{value:new Ea(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Uo},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Uo},anisotropyVector:{value:new Eo},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Uo}}]),vertexShader:yf.meshphysical_vert,fragmentShader:yf.meshphysical_frag};const xf={r:0,b:0,g:0},Bf=new Vs,_f=new Ps;function Cf(e,t,n,i,r,o,s){const a=new Ea(0);let l,A,c=!0===o?0:1,u=null,h=0,d=null;function p(e){let i=!0===e.isScene?e.background:null;if(i&&i.isTexture){i=(e.backgroundBlurriness>0?n:t).get(i)}return i}function f(t,n){t.getRGB(xf,wl(e)),i.buffers.color.setClear(xf.r,xf.g,xf.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(e),c=t,f(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,f(a,c)},render:function(t){let n=!1;const r=p(t);null===r?f(a,c):r&&r.isColor&&(f(r,1),n=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===o&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const i=p(n);i&&(i.isCubeTexture||i.mapping===Qn)?(void 0===A&&(A=new fl(new ml(1,1,1),new xl({name:"BackgroundCubeMaterial",uniforms:vl(bf.backgroundCube.uniforms),vertexShader:bf.backgroundCube.vertexShader,fragmentShader:bf.backgroundCube.fragmentShader,side:Ht,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(A)),Bf.copy(n.backgroundRotation),Bf.x*=-1,Bf.y*=-1,Bf.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Bf.y*=-1,Bf.z*=-1),A.material.uniforms.envMap.value=i,A.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,A.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,A.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,A.material.uniforms.backgroundRotation.value.setFromMatrix4(_f.makeRotationFromEuler(Bf)),A.material.toneMapped=jo.getTransfer(i.colorSpace)!==Er,u===i&&h===i.version&&d===e.toneMapping||(A.material.needsUpdate=!0,u=i,h=i.version,d=e.toneMapping),A.layers.enableAll(),t.unshift(A,A.geometry,A.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new fl(new Yu(2,2),new xl({name:"BackgroundMaterial",uniforms:vl(bf.background.uniforms),vertexShader:bf.background.vertexShader,fragmentShader:bf.background.fragmentShader,side:Ot,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=jo.getTransfer(i.colorSpace)!==Er,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),u===i&&h===i.version&&d===e.toneMapping||(l.material.needsUpdate=!0,u=i,h=i.version,d=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==A&&(A.geometry.dispose(),A.material.dispose(),A=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Sf(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=A(null);let o=r,s=!1;function a(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function A(e){const t=[],i=[],r=[];for(let o=0;o<n;o++)t[o]=0,i[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function c(){const e=o.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function u(e){h(e,0)}function h(t,n){const i=o.newAttributes,r=o.enabledAttributes,s=o.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),s[t]!==n&&(e.vertexAttribDivisor(t,n),s[t]=n)}function d(){const t=o.newAttributes,n=o.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function p(t,n,i,r,o,s,a){!0===a?e.vertexAttribIPointer(t,n,i,o,s):e.vertexAttribPointer(t,n,i,r,o,s)}function f(){g(),s=!0,o!==r&&(o=r,a(o.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,f,g){let m=!1;const v=function(t,n,r){const o=!0===r.wireframe;let s=i[t.id];void 0===s&&(s={},i[t.id]=s);let a=s[n.id];void 0===a&&(a={},s[n.id]=a);let l=a[o];void 0===l&&(l=A(e.createVertexArray()),a[o]=l);return l}(f,l,r);o!==v&&(o=v,a(o.object)),m=function(e,t,n,i){const r=o.attributes,s=t.attributes;let a=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){const t=r[o];let n=s[o];if(void 0===n&&("instanceMatrix"===o&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}}return o.attributesNum!==a||o.index!==i}(n,f,l,g),m&&function(e,t,n,i){const r={},s=t.attributes;let a=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){let t=s[o];void 0===t&&("instanceMatrix"===o&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[o]=n,a++}}o.attributes=r,o.attributesNum=a,o.index=i}(n,f,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(m||s)&&(s=!1,function(n,i,r,o){c();const s=o.attributes,a=r.getAttributes(),l=i.defaultAttributeValues;for(const A in a){const i=a[A];if(i.location>=0){let r=s[A];if(void 0===r&&("instanceMatrix"===A&&n.instanceMatrix&&(r=n.instanceMatrix),"instanceColor"===A&&n.instanceColor&&(r=n.instanceColor)),void 0!==r){const s=r.normalized,a=r.itemSize,l=t.get(r);if(void 0===l)continue;const A=l.buffer,c=l.type,d=l.bytesPerElement,f=c===e.INT||c===e.UNSIGNED_INT||r.gpuType===oi;if(r.isInterleavedBufferAttribute){const t=r.data,l=t.stride,g=r.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)h(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)u(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,A);for(let e=0;e<i.locationSize;e++)p(i.location+e,a/i.locationSize,c,s,l*d,(g+a/i.locationSize*e)*d,f)}else{if(r.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)h(i.location+e,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<i.locationSize;e++)u(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,A);for(let e=0;e<i.locationSize;e++)p(i.location+e,a/i.locationSize,c,s,a*d,a/i.locationSize*e*d,f)}}else if(void 0!==l){const t=l[A];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}d()}(n,r,l,f),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:f,resetDefaultState:g,dispose:function(){f();for(const e in i){const t=i[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;const t=i[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete i[e.id]},releaseStatesOfProgram:function(e){for(const t in i){const n=i[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)l(r[e].object),delete r[e];delete n[e.id]}},initAttributes:c,enableAttribute:u,disableUnusedAttributes:d}}function Ef(e,t,n){let i;function r(t,r,o){0!==o&&(e.drawArraysInstanced(i,t,r,o),n.update(r,i,o))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,r,0,o);let s=0;for(let t=0;t<o;t++)s+=r[t];n.update(s,i,1)},this.renderMultiDrawInstances=function(e,o,s,a){if(0===s)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],o[t],a[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,o,0,a,0,s);let t=0;for(let e=0;e<s;e++)t+=o[e]*a[e];n.update(t,i,1)}}}function Tf(e,t,n,i){let r;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp";const a=o(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=!0===n.logarithmicDepthBuffer,A=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,textureFormatReadable:function(t){return t===gi||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===li&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==ti&&i.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==ai&&!r)},precision:s,logarithmicDepthBuffer:l,reversedDepthBuffer:A,maxTextures:c,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Mf(e){const t=this;let n=null,i=0,r=!1,o=!1;const s=new LA,a=new Uo,l={value:null,needsUpdate:!1};function A(e,n,i,r){const o=null!==e?e.length:0;let A=null;if(0!==o){if(A=l.value,!0!==r||null===A){const t=i+4*o,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===A||A.length<t)&&(A=new Float32Array(t));for(let n=0,l=i;n!==o;++n,l+=4)s.copy(e[n]).applyMatrix4(r,a),s.normal.toArray(A,l),A[l+3]=s.constant}l.value=A,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,A}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){o=!0,A(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=A(e,t,0)},this.setState=function(s,a,c){const u=s.clippingPlanes,h=s.clipIntersection,d=s.clipShadows,p=e.get(s);if(!r||null===u||0===u.length||o&&!d)o?A(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=o?0:i,t=4*e;let r=p.clippingState||null;l.value=r,r=A(u,a,t,c);for(let i=0;i!==t;++i)r[i]=n[i];p.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Ff(e){let t=new WeakMap;function n(e,t){return t===On?e.mapping=kn:t===Hn&&(e.mapping=Dn),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===On||o===Hn){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new Il(o.height);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}const If=[.125,.215,.35,.446,.526,.582],Uf=20,Lf=new dd,Rf=new Ea;let Pf=null,Nf=0,kf=0,Df=!1;const Of=(1+Math.sqrt(5))/2,Hf=1/Of,Qf=[new Mo(-Of,Hf,0),new Mo(Of,Hf,0),new Mo(-Hf,0,Of),new Mo(Hf,0,Of),new Mo(0,Of,-Hf),new Mo(0,Of,Hf),new Mo(-1,1,-1),new Mo(1,1,-1),new Mo(-1,1,1),new Mo(1,1,1)],zf=new Mo;class Gf{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{size:o=256,position:s=zf}=r;Pf=this._renderer.getRenderTarget(),Nf=this._renderer.getActiveCubeFace(),kf=this._renderer.getActiveMipmapLevel(),Df=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a,s),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Kf(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Wf(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Pf,Nf,kf),this._renderer.xr.enabled=Df,e.scissorTest=!1,Vf(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===kn||e.mapping===Dn?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Pf=this._renderer.getRenderTarget(),Nf=this._renderer.getActiveCubeFace(),kf=this._renderer.getActiveMipmapLevel(),Df=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Jn,minFilter:Jn,generateMipmaps:!1,type:li,format:gi,colorSpace:Cr,depthBuffer:!1},i=jf(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=jf(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const o=e-4+1+If.length;for(let s=0;s<o;s++){const o=Math.pow(2,r);n.push(o);let a=1/o;s>e-4?a=If[s-e+4-1]:0===s&&(a=0),i.push(a);const l=1/(o-2),A=-l,c=1+l,u=[A,A,c,A,c,c,A,A,c,c,A,c],h=6,d=6,p=3,f=2,g=1,m=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(g*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];m.set(i,p*d*e),v.set(u,f*d*e);const r=[e,e,e,e,e,e];y.set(r,g*d*e)}const w=new il;w.setAttribute("position",new Ha(m,p)),w.setAttribute("uv",new Ha(v,f)),w.setAttribute("faceIndex",new Ha(y,g)),t.push(w),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(Uf),r=new Mo(0,1,0),o=new xl({name:"SphericalGaussianBlur",defines:{n:Uf,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:zt,depthTest:!1,depthWrite:!1});return o}(i,e,t)}return i}_compileMaterial(e){const t=new fl(this._lodPlanes[0],e);this._renderer.compile(t,Lf)}_sceneToCubeUV(e,t,n,i,r){const o=new El(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,A=l.autoClear,c=l.toneMapping;l.getClearColor(Rf),l.toneMapping=Sn,l.autoClear=!1;l.state.buffers.depth.getReversed()&&(l.setRenderTarget(i),l.clearDepth(),l.setRenderTarget(null));const u=new Ia({name:"PMREM.Background",side:Ht,depthWrite:!1,depthTest:!1}),h=new fl(new ml,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(Rf),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(o.up.set(0,s[f],0),o.position.set(r.x,r.y,r.z),o.lookAt(r.x+a[f],r.y,r.z)):1===t?(o.up.set(0,0,s[f]),o.position.set(r.x,r.y,r.z),o.lookAt(r.x,r.y+a[f],r.z)):(o.up.set(0,s[f],0),o.position.set(r.x,r.y,r.z),o.lookAt(r.x,r.y,r.z+a[f]));const n=this._cubeSize;Vf(i,t*n,f>2?n:0,n,n),l.setRenderTarget(i),d&&l.render(h,o),l.render(e,o)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=c,l.autoClear=A,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===kn||e.mapping===Dn;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Kf()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Wf());const r=i?this._cubemapMaterial:this._equirectMaterial,o=new fl(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;Vf(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,Lf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Qf[(i-r-1)%Qf.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const A=new fl(this._lodPlanes[i],l),c=l.uniforms,u=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,d=r/h,p=isFinite(r)?1+Math.floor(3*d):Uf;p>Uf&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Uf));const f=[];let g=0;for(let y=0;y<Uf;++y){const e=y/d,t=Math.exp(-e*e/2);f.push(t),0===y?g+=t:y<p&&(g+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/g;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=f,c.latitudinal.value="latitudinal"===o,s&&(c.poleAxis.value=s);const{_lodMax:m}=this;c.dTheta.value=h,c.mipInt.value=m-n;const v=this._sizeLods[i];Vf(t,3*v*(i>m-4?i-m+4:0),4*(this._cubeSize-v),3*v,2*v),a.setRenderTarget(t),a.render(A,Lf)}}function jf(e,t,n){const i=new is(e,t,n);return i.texture.mapping=Qn,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vf(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Wf(){return new xl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:zt,depthTest:!1,depthWrite:!1})}function Kf(){return new xl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:zt,depthTest:!1,depthWrite:!1})}function qf(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,s=o===On||o===Hn,a=o===kn||o===Dn;if(s||a){let o=t.get(r);const l=void 0!==o?o.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new Gf(e)),o=s?n.fromEquirectangular(r,o):n.fromCubemap(r,o),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),o.texture;if(void 0!==o)return o.texture;{const l=r.image;return s&&l&&l.height>0||a&&l&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(l)?(null===n&&(n=new Gf(e)),o=s?n.fromEquirectangular(r):n.fromCubemap(r),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),r.addEventListener("dispose",i),o.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Xf(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&Ho("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Jf(e,t,n,i){const r={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);a.removeEventListener("dispose",s),delete r[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const a=new(Ro(n)?Ka:Va)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const r in i)t.update(i[r],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function Yf(e,t,n){let i,r,o;function s(t,s,a){0!==a&&(e.drawElementsInstanced(i,s,r,t*o,a),n.update(s,i,a))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,s){e.drawElements(i,s,r,t*o),n.update(s,i,1)},this.renderInstances=s,this.renderMultiDraw=function(e,o,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,o,0,r,e,0,s);let a=0;for(let t=0;t<s;t++)a+=o[t];n.update(a,i,1)},this.renderMultiDrawInstances=function(e,a,l,A){if(0===l)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)s(e[t]/o,a[t],A[t]);else{c.multiDrawElementsInstancedWEBGL(i,a,0,r,e,0,A,0,l);let t=0;for(let e=0;e<l;e++)t+=a[e]*A[e];n.update(t,i,1)}}}function Zf(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function $f(e,t,n){const i=new WeakMap,r=new ts;return{update:function(o,s,a){const l=o.morphTargetInfluences,A=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,c=void 0!==A?A.length:0;let u=i.get(s);if(void 0===u||u.count!==c){void 0!==u&&u.texture.dispose();const h=void 0!==s.morphAttributes.position,d=void 0!==s.morphAttributes.normal,p=void 0!==s.morphAttributes.color,f=s.morphAttributes.position||[],g=s.morphAttributes.normal||[],m=s.morphAttributes.color||[];let v=0;!0===h&&(v=1),!0===d&&(v=2),!0===p&&(v=3);let y=s.attributes.position.count*v,w=1;y>t.maxTextureSize&&(w=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const b=new Float32Array(y*w*4*c),x=new rs(b,y,w,c);x.type=ai,x.needsUpdate=!0;const B=4*v;for(let C=0;C<c;C++){const S=f[C],E=g[C],T=m[C],M=y*w*4*C;for(let F=0;F<S.count;F++){const I=F*B;!0===h&&(r.fromBufferAttribute(S,F),b[M+I+0]=r.x,b[M+I+1]=r.y,b[M+I+2]=r.z,b[M+I+3]=0),!0===d&&(r.fromBufferAttribute(E,F),b[M+I+4]=r.x,b[M+I+5]=r.y,b[M+I+6]=r.z,b[M+I+7]=0),!0===p&&(r.fromBufferAttribute(T,F),b[M+I+8]=r.x,b[M+I+9]=r.y,b[M+I+10]=r.z,b[M+I+11]=4===T.itemSize?r.w:1)}}function _(){x.dispose(),i.delete(s),s.removeEventListener("dispose",_)}u={count:c,texture:x,size:new Eo(y,w)},i.set(s,u),s.addEventListener("dispose",_)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)a.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let U=0;for(let R=0;R<l.length;R++)U+=l[R];const L=s.morphTargetsRelative?1:1-U;a.getUniforms().setValue(e,"morphTargetBaseInfluence",L),a.getUniforms().setValue(e,"morphTargetInfluences",l)}a.getUniforms().setValue(e,"morphTargetsTexture",u.texture,n),a.getUniforms().setValue(e,"morphTargetsTextureSize",u.size)}}}function eg(e,t,n,i){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const a=i.render.frame,l=s.geometry,A=t.get(s,l);if(r.get(A)!==a&&(t.update(A),r.set(A,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),r.get(s)!==a&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,a))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==a&&(e.update(),r.set(e,a))}return A},dispose:function(){r=new WeakMap}}}const tg=new es,ng=new Rc(1,1),ig=new rs,rg=new ss,og=new Fl,sg=[],ag=[],lg=new Float32Array(16),Ag=new Float32Array(9),cg=new Float32Array(4);function ug(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=sg[r];if(void 0===o&&(o=new Float32Array(r),sg[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function hg(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function dg(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function pg(e,t){let n=ag[t];void 0===n&&(n=new Int32Array(t),ag[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function fg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function gg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(hg(n,t))return;e.uniform2fv(this.addr,t),dg(n,t)}}function mg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(hg(n,t))return;e.uniform3fv(this.addr,t),dg(n,t)}}function vg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(hg(n,t))return;e.uniform4fv(this.addr,t),dg(n,t)}}function yg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(hg(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),dg(n,t)}else{if(hg(n,i))return;cg.set(i),e.uniformMatrix2fv(this.addr,!1,cg),dg(n,i)}}function wg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(hg(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),dg(n,t)}else{if(hg(n,i))return;Ag.set(i),e.uniformMatrix3fv(this.addr,!1,Ag),dg(n,i)}}function bg(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(hg(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),dg(n,t)}else{if(hg(n,i))return;lg.set(i),e.uniformMatrix4fv(this.addr,!1,lg),dg(n,i)}}function xg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Bg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(hg(n,t))return;e.uniform2iv(this.addr,t),dg(n,t)}}function _g(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(hg(n,t))return;e.uniform3iv(this.addr,t),dg(n,t)}}function Cg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(hg(n,t))return;e.uniform4iv(this.addr,t),dg(n,t)}}function Sg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Eg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(hg(n,t))return;e.uniform2uiv(this.addr,t),dg(n,t)}}function Tg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(hg(n,t))return;e.uniform3uiv(this.addr,t),dg(n,t)}}function Mg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(hg(n,t))return;e.uniform4uiv(this.addr,t),dg(n,t)}}function Fg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let o;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(ng.compareFunction=Kr,o=ng):o=tg,n.setTexture2D(t||o,r)}function Ig(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||rg,r)}function Ug(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||og,r)}function Lg(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||ig,r)}function Rg(e,t){e.uniform1fv(this.addr,t)}function Pg(e,t){const n=ug(t,this.size,2);e.uniform2fv(this.addr,n)}function Ng(e,t){const n=ug(t,this.size,3);e.uniform3fv(this.addr,n)}function kg(e,t){const n=ug(t,this.size,4);e.uniform4fv(this.addr,n)}function Dg(e,t){const n=ug(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Og(e,t){const n=ug(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Hg(e,t){const n=ug(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Qg(e,t){e.uniform1iv(this.addr,t)}function zg(e,t){e.uniform2iv(this.addr,t)}function Gg(e,t){e.uniform3iv(this.addr,t)}function jg(e,t){e.uniform4iv(this.addr,t)}function Vg(e,t){e.uniform1uiv(this.addr,t)}function Wg(e,t){e.uniform2uiv(this.addr,t)}function Kg(e,t){e.uniform3uiv(this.addr,t)}function qg(e,t){e.uniform4uiv(this.addr,t)}function Xg(e,t,n){const i=this.cache,r=t.length,o=pg(n,r);hg(i,o)||(e.uniform1iv(this.addr,o),dg(i,o));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||tg,o[s])}function Jg(e,t,n){const i=this.cache,r=t.length,o=pg(n,r);hg(i,o)||(e.uniform1iv(this.addr,o),dg(i,o));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||rg,o[s])}function Yg(e,t,n){const i=this.cache,r=t.length,o=pg(n,r);hg(i,o)||(e.uniform1iv(this.addr,o),dg(i,o));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||og,o[s])}function Zg(e,t,n){const i=this.cache,r=t.length,o=pg(n,r);hg(i,o)||(e.uniform1iv(this.addr,o),dg(i,o));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||ig,o[s])}class $g{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return fg;case 35664:return gg;case 35665:return mg;case 35666:return vg;case 35674:return yg;case 35675:return wg;case 35676:return bg;case 5124:case 35670:return xg;case 35667:case 35671:return Bg;case 35668:case 35672:return _g;case 35669:case 35673:return Cg;case 5125:return Sg;case 36294:return Eg;case 36295:return Tg;case 36296:return Mg;case 35678:case 36198:case 36298:case 36306:case 35682:return Fg;case 35679:case 36299:case 36307:return Ig;case 35680:case 36300:case 36308:case 36293:return Ug;case 36289:case 36303:case 36311:case 36292:return Lg}}(t.type)}}class em{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Rg;case 35664:return Pg;case 35665:return Ng;case 35666:return kg;case 35674:return Dg;case 35675:return Og;case 35676:return Hg;case 5124:case 35670:return Qg;case 35667:case 35671:return zg;case 35668:case 35672:return Gg;case 35669:case 35673:return jg;case 5125:return Vg;case 36294:return Wg;case 36295:return Kg;case 36296:return qg;case 35678:case 36198:case 36298:case 36306:case 35682:return Xg;case 35679:case 36299:case 36307:return Jg;case 35680:case 36300:case 36308:case 36293:return Yg;case 36289:case 36303:case 36311:case 36292:return Zg}}(t.type)}}class tm{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}}}const nm=/(\w+)(\])?(\[|\.)?/g;function im(e,t){e.seq.push(t),e.map[t.id]=t}function rm(e,t,n){const i=e.name,r=i.length;for(nm.lastIndex=0;;){const o=nm.exec(i),s=nm.lastIndex;let a=o[1];const l="]"===o[2],A=o[3];if(l&&(a|=0),void 0===A||"["===A&&s+2===r){im(n,void 0===A?new $g(a,e,t):new em(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new tm(a),im(n,e)),n=e}}}class om{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);rm(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function sm(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let am=0;const lm=new Uo;function Am(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=(e.getShaderInfoLog(t)||"").trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const i=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=r;s<o;s++){const e=s+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function cm(e,t){const n=function(e){jo._getMatrix(lm,jo.workingColorSpace,e);const t="mat3( ".concat(lm.elements.map(e=>e.toFixed(4))," )");switch(jo.getTransfer(e)){case Sr:return[t,"LinearTransferOETF"];case Er:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function um(e,t){let n;switch(t){case En:n="Linear";break;case Tn:n="Reinhard";break;case Mn:n="Cineon";break;case Fn:n="ACESFilmic";break;case Un:n="AgX";break;case Ln:n="Neutral";break;case In:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const hm=new Mo;function dm(){jo.getLuminanceCoefficients(hm);const e=hm.x.toFixed(4),t=hm.y.toFixed(4),n=hm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function pm(e){return""!==e}function fm(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function gm(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const mm=/^[ \t]*#include +<([\w\d./]+)>/gm;function vm(e){return e.replace(mm,wm)}const ym=new Map;function wm(e,t){let n=yf[t];if(void 0===n){const e=ym.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=yf[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return vm(n)}const bm=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xm(e){return e.replace(bm,Bm)}function Bm(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function _m(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Cm(e,t,n,i){const r=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Nt?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===kt?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Dt&&(t="SHADOWMAP_TYPE_VSM"),t}(n),A=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case kn:case Dn:t="ENVMAP_TYPE_CUBE";break;case Qn:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Dn&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Bn:t="ENVMAP_BLENDING_MULTIPLY";break;case _n:t="ENVMAP_BLENDING_MIX";break;case Cn:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),d=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pm).join("\n")}(n),p=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),f=r.createProgram();let g,m,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(pm).join("\n"),g.length>0&&(g+="\n"),m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(pm).join("\n"),m.length>0&&(m+="\n")):(g=[_m(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(pm).join("\n"),m=[_m(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+A:"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Sn?"#define TONE_MAPPING":"",n.toneMapping!==Sn?yf.tonemapping_pars_fragment:"",n.toneMapping!==Sn?um("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",yf.colorspace_pars_fragment,cm("linearToOutputTexel",n.outputColorSpace),dm(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(pm).join("\n")),s=vm(s),s=fm(s,n),s=gm(s,n),a=vm(a),a=fm(a,n),a=gm(a,n),s=xm(s),a=xm(a),!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=[d,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,m=["#define varying in",n.glslVersion===lo?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===lo?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+m);const y=v+g+s,w=v+m+a,b=sm(r,r.VERTEX_SHADER,y),x=sm(r,r.FRAGMENT_SHADER,w);function B(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(f)||"",i=r.getShaderInfoLog(b)||"",o=r.getShaderInfoLog(x)||"",s=n.trim(),a=i.trim(),l=o.trim();let A=!0,c=!0;if(!1===r.getProgramParameter(f,r.LINK_STATUS))if(A=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,f,b,x);else{const e=Am(r,b,"vertex"),n=Am(r,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(f,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+s+"\n"+e+"\n"+n)}else""!==s?console.warn("THREE.WebGLProgram: Program Info Log:",s):""!==a&&""!==l||(c=!1);c&&(t.diagnostics={runnable:A,programLog:s,vertexShader:{log:a,prefix:g},fragmentShader:{log:l,prefix:m}})}r.deleteShader(b),r.deleteShader(x),_=new om(r,f),C=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),o=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(r,f)}let _,C;r.attachShader(f,b),r.attachShader(f,x),void 0!==n.index0AttributeName?r.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(f,0,"position"),r.linkProgram(f),this.getUniforms=function(){return void 0===_&&B(this),_},this.getAttributes=function(){return void 0===C&&B(this),C};let S=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===S&&(S=r.getProgramParameter(f,37297)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(f),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=am++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=b,this.fragmentShader=x,this}let Sm=0;class Em{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Tm(e),t.set(e,n)),n}}class Tm{constructor(e){this.id=Sm++,this.code=e,this.usedTimes=0}}function Mm(e,t,n,i,r,o,s){const a=new Ws,l=new Em,A=new Set,c=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return A.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(o,a,c,g,m){const v=g.fog,y=m.geometry,w=o.isMeshStandardMaterial?g.environment:null,b=(o.isMeshStandardMaterial?n:t).get(o.envMap||w),x=b&&b.mapping===Qn?b.image.height:null,B=p[o.type];null!==o.precision&&(d=r.getMaxPrecision(o.precision),d!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",d,"instead."));const _=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,C=void 0!==_?_.length:0;let S,E,T,M,F=0;if(void 0!==y.morphAttributes.position&&(F=1),void 0!==y.morphAttributes.normal&&(F=2),void 0!==y.morphAttributes.color&&(F=3),B){const e=bf[B];S=e.vertexShader,E=e.fragmentShader}else S=o.vertexShader,E=o.fragmentShader,l.update(o),T=l.getVertexShaderID(o),M=l.getFragmentShaderID(o);const I=e.getRenderTarget(),U=e.state.buffers.depth.getReversed(),L=!0===m.isInstancedMesh,R=!0===m.isBatchedMesh,P=!!o.map,N=!!o.matcap,k=!!b,D=!!o.aoMap,O=!!o.lightMap,H=!!o.bumpMap,Q=!!o.normalMap,z=!!o.displacementMap,G=!!o.emissiveMap,j=!!o.metalnessMap,V=!!o.roughnessMap,W=o.anisotropy>0,K=o.clearcoat>0,q=o.dispersion>0,X=o.iridescence>0,J=o.sheen>0,Y=o.transmission>0,Z=W&&!!o.anisotropyMap,$=K&&!!o.clearcoatMap,ee=K&&!!o.clearcoatNormalMap,te=K&&!!o.clearcoatRoughnessMap,ne=X&&!!o.iridescenceMap,ie=X&&!!o.iridescenceThicknessMap,re=J&&!!o.sheenColorMap,oe=J&&!!o.sheenRoughnessMap,se=!!o.specularMap,ae=!!o.specularColorMap,le=!!o.specularIntensityMap,Ae=Y&&!!o.transmissionMap,ce=Y&&!!o.thicknessMap,ue=!!o.gradientMap,he=!!o.alphaMap,de=o.alphaTest>0,pe=!!o.alphaHash,fe=!!o.extensions;let ge=Sn;o.toneMapped&&(null!==I&&!0!==I.isXRRenderTarget||(ge=e.toneMapping));const me={shaderID:B,shaderType:o.type,shaderName:o.name,vertexShader:S,fragmentShader:E,defines:o.defines,customVertexShaderID:T,customFragmentShaderID:M,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:d,batching:R,batchingColor:R&&null!==m._colorsTexture,instancing:L,instancingColor:L&&null!==m.instanceColor,instancingMorph:L&&null!==m.morphTexture,supportsVertexTextures:h,outputColorSpace:null===I?e.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:Cr,alphaToCoverage:!!o.alphaToCoverage,map:P,matcap:N,envMap:k,envMapMode:k&&b.mapping,envMapCubeUVHeight:x,aoMap:D,lightMap:O,bumpMap:H,normalMap:Q,displacementMap:h&&z,emissiveMap:G,normalMapObjectSpace:Q&&o.normalMapType===xr,normalMapTangentSpace:Q&&o.normalMapType===br,metalnessMap:j,roughnessMap:V,anisotropy:W,anisotropyMap:Z,clearcoat:K,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:q,iridescence:X,iridescenceMap:ne,iridescenceThicknessMap:ie,sheen:J,sheenColorMap:re,sheenRoughnessMap:oe,specularMap:se,specularColorMap:ae,specularIntensityMap:le,transmission:Y,transmissionMap:Ae,thicknessMap:ce,gradientMap:ue,opaque:!1===o.transparent&&o.blending===Gt&&!1===o.alphaToCoverage,alphaMap:he,alphaTest:de,alphaHash:pe,combine:o.combine,mapUv:P&&f(o.map.channel),aoMapUv:D&&f(o.aoMap.channel),lightMapUv:O&&f(o.lightMap.channel),bumpMapUv:H&&f(o.bumpMap.channel),normalMapUv:Q&&f(o.normalMap.channel),displacementMapUv:z&&f(o.displacementMap.channel),emissiveMapUv:G&&f(o.emissiveMap.channel),metalnessMapUv:j&&f(o.metalnessMap.channel),roughnessMapUv:V&&f(o.roughnessMap.channel),anisotropyMapUv:Z&&f(o.anisotropyMap.channel),clearcoatMapUv:$&&f(o.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&f(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&f(o.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&f(o.iridescenceThicknessMap.channel),sheenColorMapUv:re&&f(o.sheenColorMap.channel),sheenRoughnessMapUv:oe&&f(o.sheenRoughnessMap.channel),specularMapUv:se&&f(o.specularMap.channel),specularColorMapUv:ae&&f(o.specularColorMap.channel),specularIntensityMapUv:le&&f(o.specularIntensityMap.channel),transmissionMapUv:Ae&&f(o.transmissionMap.channel),thicknessMapUv:ce&&f(o.thicknessMap.channel),alphaMapUv:he&&f(o.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(Q||W),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===m.isPoints&&!!y.attributes.uv&&(P||he),fog:!!v,useFog:!0===o.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===o.flatShading&&!1===o.wireframe,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:u,reversedDepthBuffer:U,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:C,morphTextureStride:F,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:P&&!0===o.map.isVideoTexture&&jo.getTransfer(o.map.colorSpace)===Er,decodeVideoTextureEmissive:G&&!0===o.emissiveMap.isVideoTexture&&jo.getTransfer(o.emissiveMap.colorSpace)===Er,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Qt,flipSided:o.side===Ht,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:fe&&!0===o.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(fe&&!0===o.extensions.multiDraw||R)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return me.vertexUv1s=A.has(1),me.vertexUv2s=A.has(2),me.vertexUv3s=A.has(3),A.clear(),me},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.supportsVertexTextures&&a.enable(0);t.instancing&&a.enable(1);t.instancingColor&&a.enable(2);t.instancingMorph&&a.enable(3);t.matcap&&a.enable(4);t.envMap&&a.enable(5);t.normalMapObjectSpace&&a.enable(6);t.normalMapTangentSpace&&a.enable(7);t.clearcoat&&a.enable(8);t.iridescence&&a.enable(9);t.alphaTest&&a.enable(10);t.vertexColors&&a.enable(11);t.vertexAlphas&&a.enable(12);t.vertexUv1s&&a.enable(13);t.vertexUv2s&&a.enable(14);t.vertexUv3s&&a.enable(15);t.vertexTangents&&a.enable(16);t.anisotropy&&a.enable(17);t.alphaHash&&a.enable(18);t.batching&&a.enable(19);t.dispersion&&a.enable(20);t.batchingColor&&a.enable(21);t.gradientMap&&a.enable(22);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.reversedDepthBuffer&&a.enable(4);t.skinning&&a.enable(5);t.morphTargets&&a.enable(6);t.morphNormals&&a.enable(7);t.morphColors&&a.enable(8);t.premultipliedAlpha&&a.enable(9);t.shadowMapEnabled&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.transmission&&a.enable(15);t.sheen&&a.enable(16);t.opaque&&a.enable(17);t.pointsUvs&&a.enable(18);t.decodeVideoTexture&&a.enable(19);t.decodeVideoTextureEmissive&&a.enable(20);t.alphaToCoverage&&a.enable(21);e.push(a.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=bf[t];n=bl.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Cm(e,n,t,o),c.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Fm(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Im(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Um(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Lm(){const e=[];let t=0;const n=[],i=[],r=[];function o(n,i,r,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,a,l,A){const c=o(e,t,s,a,l,A);s.transmission>0?i.push(c):!0===s.transparent?r.push(c):n.push(c)},unshift:function(e,t,s,a,l,A){const c=o(e,t,s,a,l,A);s.transmission>0?i.unshift(c):!0===s.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Im),i.length>1&&i.sort(t||Um),r.length>1&&r.sort(t||Um)}}}function Rm(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new Lm,e.set(t,[r])):n>=i.length?(r=new Lm,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Pm(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Mo,color:new Ea};break;case"SpotLight":n={position:new Mo,direction:new Mo,color:new Ea,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Mo,color:new Ea,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Mo,skyColor:new Ea,groundColor:new Ea};break;case"RectAreaLight":n={color:new Ea,position:new Mo,halfWidth:new Mo,halfHeight:new Mo}}return e[t.id]=n,n}}}let Nm=0;function km(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Dm(e){const t=new Pm,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Eo};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Eo,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)i.probe.push(new Mo);const r=new Mo,o=new Ps,s=new Ps;return{setup:function(r){let o=0,s=0,a=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,A=0,c=0,u=0,h=0,d=0,p=0,f=0,g=0,m=0,v=0;r.sort(km);for(let e=0,w=r.length;e<w;e++){const y=r[e],w=y.color,b=y.intensity,x=y.distance,B=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)o+=w.r*b,s+=w.g*b,a+=w.b*b;else if(y.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(y.sh.coefficients[e],b);v++}else if(y.isDirectionalLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[l]=t,i.directionalShadowMap[l]=B,i.directionalShadowMatrix[l]=y.shadow.matrix,d++}i.directional[l]=e,l++}else if(y.isSpotLight){const e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(w).multiplyScalar(b),e.distance=x,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,i.spot[c]=e;const r=y.shadow;if(y.map&&(i.spotLightMap[g]=y.map,g++,r.updateMatrices(y),y.castShadow&&m++),i.spotLightMatrix[c]=r.matrix,y.castShadow){const e=n.get(y);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[c]=e,i.spotShadowMap[c]=B,f++}c++}else if(y.isRectAreaLight){const e=t.get(y);e.color.copy(w).multiplyScalar(b),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),i.rectArea[u]=e,u++}else if(y.isPointLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[A]=t,i.pointShadowMap[A]=B,i.pointShadowMatrix[A]=y.shadow.matrix,p++}i.point[A]=e,A++}else if(y.isHemisphereLight){const e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(b),e.groundColor.copy(y.groundColor).multiplyScalar(b),i.hemi[h]=e,h++}}u>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=wf.LTC_FLOAT_1,i.rectAreaLTC2=wf.LTC_FLOAT_2):(i.rectAreaLTC1=wf.LTC_HALF_1,i.rectAreaLTC2=wf.LTC_HALF_2)),i.ambient[0]=o,i.ambient[1]=s,i.ambient[2]=a;const y=i.hash;y.directionalLength===l&&y.pointLength===A&&y.spotLength===c&&y.rectAreaLength===u&&y.hemiLength===h&&y.numDirectionalShadows===d&&y.numPointShadows===p&&y.numSpotShadows===f&&y.numSpotMaps===g&&y.numLightProbes===v||(i.directional.length=l,i.spot.length=c,i.rectArea.length=u,i.point.length=A,i.hemi.length=h,i.directionalShadow.length=d,i.directionalShadowMap.length=d,i.pointShadow.length=p,i.pointShadowMap.length=p,i.spotShadow.length=f,i.spotShadowMap.length=f,i.directionalShadowMatrix.length=d,i.pointShadowMatrix.length=p,i.spotLightMatrix.length=f+g-m,i.spotLightMap.length=g,i.numSpotLightShadowsWithMaps=m,i.numLightProbes=v,y.directionalLength=l,y.pointLength=A,y.spotLength=c,y.rectAreaLength=u,y.hemiLength=h,y.numDirectionalShadows=d,y.numPointShadows=p,y.numSpotShadows=f,y.numSpotMaps=g,y.numLightProbes=v,i.version=Nm++)},setupView:function(e,t){let n=0,a=0,l=0,A=0,c=0;const u=t.matrixWorldInverse;for(let h=0,d=e.length;h<d;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(u),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(u),l++}else if(t.isRectAreaLight){const e=i.rectArea[A];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),s.identity(),o.copy(t.matrixWorld),o.premultiply(u),s.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),A++}else if(t.isPointLight){const e=i.point[a];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),a++}else if(t.isHemisphereLight){const e=i.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(u),c++}}},state:i}}function Om(e){const t=new Dm(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function Hm(e){let t=new WeakMap;return{get:function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.get(n);let o;return void 0===r?(o=new Om(e),t.set(n,[o])):i>=r.length?(o=new Om(e),r.push(o)):o=r[i],o},dispose:function(){t=new WeakMap}}}function Qm(e,t,n){let i=new kA;const r=new Eo,o=new Eo,s=new ts,a=new gh({depthPacking:vr}),l=new mh,A={},c=n.maxTextureSize,u={[Ot]:Ht,[Ht]:Ot,[Qt]:Qt},h=new xl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Eo},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new il;p.setAttribute("position",new Ha(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new fl(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Nt;let m=this.type;function v(n,i){const o=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new is(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,o,h,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,o,d,f,null)}function y(t,n,i,r){let o=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===i.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=o.uuid,t=n.uuid;let i=A[e];void 0===i&&(i={},A[e]=i);let r=i[t];void 0===r&&(r=o.clone(),i[t]=r,n.addEventListener("dispose",b)),o=r}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=r===Dt?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],o.alphaMap=n.alphaMap,o.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=i}return o}function w(n,r,o,s,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===Dt)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let A=0,c=t.length;A<c;A++){const c=t[A],u=l[c.materialIndex];if(u&&u.visible){const t=y(n,u,s,a);n.onBeforeShadow(e,n,r,o,i,t,c),e.renderBufferDirect(o,null,i,t,n,c),n.onAfterShadow(e,n,r,o,i,t,c)}}}else if(l.visible){const t=y(n,l,s,a);n.onBeforeShadow(e,n,r,o,i,t,null),e.renderBufferDirect(o,null,i,t,n,null),n.onAfterShadow(e,n,r,o,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)w(l[e],r,o,s,a)}function b(e){e.target.removeEventListener("dispose",b);for(const t in A){const n=A[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),A=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(zt),!0===h.buffers.depth.getReversed()?h.buffers.color.setClear(0,0,0,0):h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const d=m!==Dt&&this.type===Dt,p=m===Dt&&this.type!==Dt;for(let f=0,g=t.length;f<g;f++){const l=t[f],A=l.shadow;if(void 0===A){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===A.autoUpdate&&!1===A.needsUpdate)continue;r.copy(A.mapSize);const u=A.getFrameExtents();if(r.multiply(u),o.copy(A.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(o.x=Math.floor(c/u.x),r.x=o.x*u.x,A.mapSize.x=o.x),r.y>c&&(o.y=Math.floor(c/u.y),r.y=o.y*u.y,A.mapSize.y=o.y)),null===A.map||!0===d||!0===p){const e=this.type!==Dt?{minFilter:Vn,magFilter:Vn}:{};null!==A.map&&A.map.dispose(),A.map=new is(r.x,r.y,e),A.map.texture.name=l.name+".shadowMap",A.camera.updateProjectionMatrix()}e.setRenderTarget(A.map),e.clear();const g=A.getViewportCount();for(let e=0;e<g;e++){const t=A.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(s),A.updateMatrices(l,e),i=A.getFrustum(),w(n,a,A.camera,l,this.type)}!0!==A.isPointLightShadow&&this.type===Dt&&v(A,a),A.needsUpdate=!1}m=this.type,g.needsUpdate=!1,e.setRenderTarget(l,A,u)}}const zm={[fn]:gn,[mn]:bn,[yn]:xn,[vn]:wn,[gn]:fn,[bn]:mn,[xn]:yn,[wn]:vn};function Gm(e,t){const n=new function(){let t=!1;const n=new ts;let i=null;const r=new ts(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,s,a){!0===a&&(t*=s,i*=s,o*=s),n.set(t,i,o,s),!1===r.equals(n)&&(e.clearColor(t,i,o,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,o=null,s=null;return{setReversed:function(e){if(i!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),i=e;const r=s;s=null,this.setClear(r)}},getReversed:function(){return i},setTest:function(t){t?H(e.DEPTH_TEST):Q(e.DEPTH_TEST)},setMask:function(t){r===t||n||(e.depthMask(t),r=t)},setFunc:function(t){if(i&&(t=zm[t]),o!==t){switch(t){case fn:e.depthFunc(e.NEVER);break;case gn:e.depthFunc(e.ALWAYS);break;case mn:e.depthFunc(e.LESS);break;case vn:e.depthFunc(e.LEQUAL);break;case yn:e.depthFunc(e.EQUAL);break;case wn:e.depthFunc(e.GEQUAL);break;case bn:e.depthFunc(e.GREATER);break;case xn:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}o=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(i&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,r=null,o=null,s=null,i=!1}}},r=new function(){let t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,A=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):Q(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&l===i||(e.stencilOp(t,n,i),s=t,a=n,l=i)},setLocked:function(e){t=e},setClear:function(t){A!==t&&(e.clearStencil(t),A=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,A=null}}},o=new WeakMap,s=new WeakMap;let a={},l={},A=new WeakMap,c=[],u=null,h=!1,d=null,p=null,f=null,g=null,m=null,v=null,y=null,w=new Ea(0,0,0),b=0,x=!1,B=null,_=null,C=null,S=null,E=null;const T=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let M=!1,F=0;const I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(F=parseFloat(/^WebGL (\d)/.exec(I)[1]),M=F>=1):-1!==I.indexOf("OpenGL ES")&&(F=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),M=F>=2);let U=null,L={};const R=e.getParameter(e.SCISSOR_BOX),P=e.getParameter(e.VIEWPORT),N=(new ts).fromArray(R),k=(new ts).fromArray(P);function D(t,n,i,r){const o=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let a=0;a<i;a++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}const O={};function H(t){!0!==a[t]&&(e.enable(t),a[t]=!0)}function Q(t){!1!==a[t]&&(e.disable(t),a[t]=!1)}O[e.TEXTURE_2D]=D(e.TEXTURE_2D,e.TEXTURE_2D,1),O[e.TEXTURE_CUBE_MAP]=D(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),O[e.TEXTURE_2D_ARRAY]=D(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),O[e.TEXTURE_3D]=D(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),H(e.DEPTH_TEST),i.setFunc(vn),V(!1),W(Ut),H(e.CULL_FACE),j(zt);const z={[qt]:e.FUNC_ADD,[Xt]:e.FUNC_SUBTRACT,[Jt]:e.FUNC_REVERSE_SUBTRACT};z[Yt]=e.MIN,z[Zt]=e.MAX;const G={[$t]:e.ZERO,[en]:e.ONE,[tn]:e.SRC_COLOR,[rn]:e.SRC_ALPHA,[cn]:e.SRC_ALPHA_SATURATE,[ln]:e.DST_COLOR,[sn]:e.DST_ALPHA,[nn]:e.ONE_MINUS_SRC_COLOR,[on]:e.ONE_MINUS_SRC_ALPHA,[An]:e.ONE_MINUS_DST_COLOR,[an]:e.ONE_MINUS_DST_ALPHA,[un]:e.CONSTANT_COLOR,[hn]:e.ONE_MINUS_CONSTANT_COLOR,[dn]:e.CONSTANT_ALPHA,[pn]:e.ONE_MINUS_CONSTANT_ALPHA};function j(t,n,i,r,o,s,a,l,A,c){if(t!==zt){if(!1===h&&(H(e.BLEND),h=!0),t===Kt)o=o||n,s=s||i,a=a||r,n===p&&o===m||(e.blendEquationSeparate(z[n],z[o]),p=n,m=o),i===f&&r===g&&s===v&&a===y||(e.blendFuncSeparate(G[i],G[r],G[s],G[a]),f=i,g=r,v=s,y=a),!1!==l.equals(w)&&A===b||(e.blendColor(l.r,l.g,l.b,A),w.copy(l),b=A),d=t,x=!1;else if(t!==d||c!==x){if(p===qt&&m===qt||(e.blendEquation(e.FUNC_ADD),p=qt,m=qt),c)switch(t){case Gt:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case jt:e.blendFunc(e.ONE,e.ONE);break;case Vt:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Wt:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Gt:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case jt:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case Vt:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Wt:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,g=null,v=null,y=null,w.set(0,0,0),b=0,d=t,x=c}}else!0===h&&(Q(e.BLEND),h=!1)}function V(t){B!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),B=t)}function W(t){t!==It?(H(e.CULL_FACE),t!==_&&(t===Ut?e.cullFace(e.BACK):t===Lt?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Q(e.CULL_FACE),_=t}function K(t,n,i){t?(H(e.POLYGON_OFFSET_FILL),S===n&&E===i||(e.polygonOffset(n,i),S=n,E=i)):Q(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:H,disable:Q,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let i=c,r=!1;if(t){i=A.get(n),void 0===i&&(i=[],A.set(n,i));const o=t.textures;if(i.length!==o.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=o.length;t<n;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=o.length,r=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,r=!0);r&&e.drawBuffers(i)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:j,setMaterial:function(t,o){t.side===Qt?Q(e.CULL_FACE):H(e.CULL_FACE);let s=t.side===Ht;o&&(s=!s),V(s),t.blending===Gt&&!1===t.transparent?j(zt):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);const a=t.stencilWrite;r.setTest(a),a&&(r.setMask(t.stencilWriteMask),r.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),r.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),K(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):Q(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:V,setCullFace:W,setLineWidth:function(t){t!==C&&(M&&e.lineWidth(t),C=t)},setPolygonOffset:K,setScissorTest:function(t){t?H(e.SCISSOR_TEST):Q(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+T-1),U!==t&&(e.activeTexture(t),U=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===U?e.TEXTURE0+T-1:U);let r=L[i];void 0===r&&(r={type:void 0,texture:void 0},L[i]=r),r.type===t&&r.texture===n||(U!==i&&(e.activeTexture(i),U=i),e.bindTexture(t,n||O[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=L[U];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let i=s.get(n);void 0===i&&(i=new WeakMap,s.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=s.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===k.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),k.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),a={},U=null,L={},l={},A=new WeakMap,c=[],u=null,h=!1,d=null,p=null,f=null,g=null,m=null,v=null,y=null,w=new Ea(0,0,0),b=0,x=!1,B=null,_=null,C=null,S=null,E=null,N.set(0,0,e.canvas.width,e.canvas.height),k.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),r.reset()}}}function jm(e,t,n,i,r,o,s){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),A=new Eo,c=new WeakMap;let u;const h=new WeakMap;let d=!1;try{d="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(j){}function p(e,t){return d?new OffscreenCanvas(e,t):ko("canvas")}function f(e,t,n){let i=1;const r=G(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),o=Math.floor(i*r.height);void 0===u&&(u=p(n,o));const s=t?p(n,o):u;s.width=n,s.height=o;return s.getContext("2d").drawImage(e,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+n+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function g(e){return e.generateMipmaps}function m(t){e.generateMipmap(t)}function v(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function y(n,i,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=i;if(i===e.RED&&(r===e.FLOAT&&(a=e.R32F),r===e.HALF_FLOAT&&(a=e.R16F),r===e.UNSIGNED_BYTE&&(a=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.R8UI),r===e.UNSIGNED_SHORT&&(a=e.R16UI),r===e.UNSIGNED_INT&&(a=e.R32UI),r===e.BYTE&&(a=e.R8I),r===e.SHORT&&(a=e.R16I),r===e.INT&&(a=e.R32I)),i===e.RG&&(r===e.FLOAT&&(a=e.RG32F),r===e.HALF_FLOAT&&(a=e.RG16F),r===e.UNSIGNED_BYTE&&(a=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.RG8UI),r===e.UNSIGNED_SHORT&&(a=e.RG16UI),r===e.UNSIGNED_INT&&(a=e.RG32UI),r===e.BYTE&&(a=e.RG8I),r===e.SHORT&&(a=e.RG16I),r===e.INT&&(a=e.RG32I)),i===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.RGB8UI),r===e.UNSIGNED_SHORT&&(a=e.RGB16UI),r===e.UNSIGNED_INT&&(a=e.RGB32UI),r===e.BYTE&&(a=e.RGB8I),r===e.SHORT&&(a=e.RGB16I),r===e.INT&&(a=e.RGB32I)),i===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(a=e.RGBA16UI),r===e.UNSIGNED_INT&&(a=e.RGBA32UI),r===e.BYTE&&(a=e.RGBA8I),r===e.SHORT&&(a=e.RGBA16I),r===e.INT&&(a=e.RGBA32I)),i===e.RGB&&(r===e.UNSIGNED_INT_5_9_9_9_REV&&(a=e.RGB9_E5),r===e.UNSIGNED_INT_10F_11F_11F_REV&&(a=e.R11F_G11F_B10F)),i===e.RGBA){const t=s?Sr:jo.getTransfer(o);r===e.FLOAT&&(a=e.RGBA32F),r===e.HALF_FLOAT&&(a=e.RGBA16F),r===e.UNSIGNED_BYTE&&(a=t===Er?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(a=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(a=e.RGB5_A1)}return a!==e.R16F&&a!==e.R32F&&a!==e.RG16F&&a!==e.RG32F&&a!==e.RGBA16F&&a!==e.RGBA32F||t.get("EXT_color_buffer_float"),a}function w(t,n){let i;return t?null===n||n===si||n===ui?i=e.DEPTH24_STENCIL8:n===ai?i=e.DEPTH32F_STENCIL8:n===ri&&(i=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===si||n===ui?i=e.DEPTH_COMPONENT24:n===ai?i=e.DEPTH_COMPONENT32F:n===ri&&(i=e.DEPTH_COMPONENT16),i}function b(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==Vn&&e.minFilter!==Jn?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function x(e){const t=e.target;t.removeEventListener("dispose",x),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=h.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&_(e),0===Object.keys(r).length&&h.delete(n)}i.remove(e)}(t),t.isVideoTexture&&c.delete(t)}function B(t){const n=t.target;n.removeEventListener("dispose",B),function(t){const n=i.get(t);t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let t=0;t<n.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[i][t]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=t.textures;for(let o=0,a=r.length;o<a;o++){const t=i.get(r[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(r[o])}i.remove(t)}(n)}function _(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete h.get(r)[n.__cacheKey],s.memory.textures--}let C=0;function S(t,r){const o=i.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;c.get(e)!==t&&(c.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void L(o,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(o.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+r)}const E={[zn]:e.REPEAT,[Gn]:e.CLAMP_TO_EDGE,[jn]:e.MIRRORED_REPEAT},T={[Vn]:e.NEAREST,[Wn]:e.NEAREST_MIPMAP_NEAREST,[qn]:e.NEAREST_MIPMAP_LINEAR,[Jn]:e.LINEAR,[Yn]:e.LINEAR_MIPMAP_NEAREST,[$n]:e.LINEAR_MIPMAP_LINEAR},M={[jr]:e.NEVER,[Yr]:e.ALWAYS,[Vr]:e.LESS,[Kr]:e.LEQUAL,[Wr]:e.EQUAL,[Jr]:e.GEQUAL,[qr]:e.GREATER,[Xr]:e.NOTEQUAL};function F(n,o){if(o.type!==ai||!1!==t.has("OES_texture_float_linear")||o.magFilter!==Jn&&o.magFilter!==Yn&&o.magFilter!==qn&&o.magFilter!==$n&&o.minFilter!==Jn&&o.minFilter!==Yn&&o.minFilter!==qn&&o.minFilter!==$n||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,E[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,E[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,E[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T[o.minFilter]),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,M[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===Vn)return;if(o.minFilter!==qn&&o.minFilter!==$n)return;if(o.type===ai&&!1===t.has("OES_texture_float_linear"))return;if(o.anisotropy>1||i.get(o).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy}}}function I(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",x));const r=n.source;let o=h.get(r);void 0===o&&(o={},h.set(r,o));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),o[a].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&_(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return i}function U(e,t,n){return Math.floor(Math.floor(e/n)/t)}function L(t,s,a){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const A=I(t,s),c=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+a);const u=i.get(c);if(c.version!==u.__version||!0===A){n.activeTexture(e.TEXTURE0+a);const t=jo.getPrimaries(jo.workingColorSpace),i=s.colorSpace===Br?null:jo.getPrimaries(s.colorSpace),h=s.colorSpace===Br||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let d=f(s.image,!1,r.maxTextureSize);d=z(s,d);const p=o.convert(s.format,s.colorSpace),v=o.convert(s.type);let x,B=y(s.internalFormat,p,v,s.colorSpace,s.isVideoTexture);F(l,s);const _=s.mipmaps,C=!0!==s.isVideoTexture,S=void 0===u.__version||!0===A,E=c.dataReady,T=b(s,d);if(s.isDepthTexture)B=w(s.format===vi,s.type),S&&(C?n.texStorage2D(e.TEXTURE_2D,1,B,d.width,d.height):n.texImage2D(e.TEXTURE_2D,0,B,d.width,d.height,0,p,v,null));else if(s.isDataTexture)if(_.length>0){C&&S&&n.texStorage2D(e.TEXTURE_2D,T,B,_[0].width,_[0].height);for(let t=0,i=_.length;t<i;t++)x=_[t],C?E&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,p,v,x.data):n.texImage2D(e.TEXTURE_2D,t,B,x.width,x.height,0,p,v,x.data);s.generateMipmaps=!1}else C?(S&&n.texStorage2D(e.TEXTURE_2D,T,B,d.width,d.height),E&&function(t,i,r,o){const s=t.updateRanges;if(0===s.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,r,o,i.data);else{s.sort((e,t)=>e.start-t.start);let a=0;for(let e=1;e<s.length;e++){const t=s[a],n=s[e],r=t.start+t.count,o=U(n.start,i.width,4),l=U(t.start,i.width,4);n.start<=r+1&&o===l&&U(n.start+n.count-1,i.width,4)===o?t.count=Math.max(t.count,n.start+n.count-t.start):(++a,s[a]=n)}s.length=a+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),A=e.getParameter(e.UNPACK_SKIP_PIXELS),c=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,i.width);for(let t=0,u=s.length;t<u;t++){const a=s[t],l=Math.floor(a.start/4),A=Math.ceil(a.count/4),c=l%i.width,u=Math.floor(l/i.width),h=A,d=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,u),n.texSubImage2D(e.TEXTURE_2D,0,c,u,h,d,r,o,i.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,A),e.pixelStorei(e.UNPACK_SKIP_ROWS,c)}}(s,d,p,v)):n.texImage2D(e.TEXTURE_2D,0,B,d.width,d.height,0,p,v,d.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){C&&S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,T,B,_[0].width,_[0].height,d.depth);for(let t=0,i=_.length;t<i;t++)if(x=_[t],s.format!==gi)if(null!==p)if(C){if(E)if(s.layerUpdates.size>0){const i=ff(x.width,x.height,s.format,s.type);for(const r of s.layerUpdates){const o=x.data.subarray(r*i/x.data.BYTES_PER_ELEMENT,(r+1)*i/x.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,x.width,x.height,1,p,o)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,d.depth,p,x.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,B,x.width,x.height,d.depth,0,x.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?E&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,d.depth,p,v,x.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,B,x.width,x.height,d.depth,0,p,v,x.data)}else{C&&S&&n.texStorage2D(e.TEXTURE_2D,T,B,_[0].width,_[0].height);for(let t=0,i=_.length;t<i;t++)x=_[t],s.format!==gi?null!==p?C?E&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,p,x.data):n.compressedTexImage2D(e.TEXTURE_2D,t,B,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?E&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,p,v,x.data):n.texImage2D(e.TEXTURE_2D,t,B,x.width,x.height,0,p,v,x.data)}else if(s.isDataArrayTexture)if(C){if(S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,T,B,d.width,d.height,d.depth),E)if(s.layerUpdates.size>0){const t=ff(d.width,d.height,s.format,s.type);for(const i of s.layerUpdates){const r=d.data.subarray(i*t/d.data.BYTES_PER_ELEMENT,(i+1)*t/d.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,d.width,d.height,1,p,v,r)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,d.width,d.height,d.depth,p,v,d.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,B,d.width,d.height,d.depth,0,p,v,d.data);else if(s.isData3DTexture)C?(S&&n.texStorage3D(e.TEXTURE_3D,T,B,d.width,d.height,d.depth),E&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,d.width,d.height,d.depth,p,v,d.data)):n.texImage3D(e.TEXTURE_3D,0,B,d.width,d.height,d.depth,0,p,v,d.data);else if(s.isFramebufferTexture){if(S)if(C)n.texStorage2D(e.TEXTURE_2D,T,B,d.width,d.height);else{let t=d.width,i=d.height;for(let r=0;r<T;r++)n.texImage2D(e.TEXTURE_2D,r,B,t,i,0,p,v,null),t>>=1,i>>=1}}else if(_.length>0){if(C&&S){const t=G(_[0]);n.texStorage2D(e.TEXTURE_2D,T,B,t.width,t.height)}for(let t=0,i=_.length;t<i;t++)x=_[t],C?E&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,p,v,x):n.texImage2D(e.TEXTURE_2D,t,B,p,v,x);s.generateMipmaps=!1}else if(C){if(S){const t=G(d);n.texStorage2D(e.TEXTURE_2D,T,B,t.width,t.height)}E&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p,v,d)}else n.texImage2D(e.TEXTURE_2D,0,B,p,v,d);g(s)&&m(l),u.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function R(t,r,s,l,A,c){const u=o.convert(s.format,s.colorSpace),h=o.convert(s.type),d=y(s.internalFormat,u,h,s.colorSpace),p=i.get(r),f=i.get(s);if(f.__renderTarget=r,!p.__hasExternalTextures){const t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);A===e.TEXTURE_3D||A===e.TEXTURE_2D_ARRAY?n.texImage3D(A,c,d,t,i,r.depth,0,u,h,null):n.texImage2D(A,c,d,t,i,0,u,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),Q(r)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,A,f.__webglTexture,0,H(r)):(A===e.TEXTURE_2D||A>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&A<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,A,f.__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function P(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const r=n.depthTexture,o=r&&r.isDepthTexture?r.type:null,s=w(n.stencilBuffer,o),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,A=H(n);Q(n)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,A,s,n.width,n.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,A,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const s=t[r],l=o.convert(s.format,s.colorSpace),A=o.convert(s.type),c=y(s.internalFormat,l,A,s.colorSpace),u=H(n);i&&!1===Q(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):Q(n)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function N(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const o=i.get(r.depthTexture);o.__renderTarget=r,o.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),S(r.depthTexture,0);const s=o.__webglTexture,l=H(r);if(r.depthTexture.format===mi)Q(r)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==vi)throw new Error("Unknown depthTexture format");Q(r)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function k(t){const r=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?N(r.__webglFramebuffer[0],t):N(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=e.createRenderbuffer(),P(r.__webglDepthbuffer[i],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=r.__webglDepthbuffer[i];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,o)}}else{const i=t.texture.mipmaps;if(i&&i.length>0?n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),P(r.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const D=[],O=[];function H(e){return Math.min(r.maxSamples,e.samples)}function Q(e){const n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(e,t){const n=e.colorSpace,i=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Cr&&n!==Br&&(jo.getTransfer(n)===Er?i===gi&&r===ti||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function G(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(A.width=e.naturalWidth||e.width,A.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(A.width=e.displayWidth,A.height=e.displayHeight):(A.width=e.width,A.height=e.height),A}this.allocateTextureUnit=function(){const e=C;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=S,this.setTexture2DArray=function(t,r){const o=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version?L(o,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const o=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version?L(o,t,r):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){const a=i.get(t);t.version>0&&a.__version!==t.version?function(t,s,a){if(6!==s.image.length)return;const l=I(t,s),A=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const c=i.get(A);if(A.version!==c.__version||!0===l){n.activeTexture(e.TEXTURE0+a);const t=jo.getPrimaries(jo.workingColorSpace),i=s.colorSpace===Br?null:jo.getPrimaries(s.colorSpace),u=s.colorSpace===Br||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,u);const h=s.isCompressedTexture||s.image[0].isCompressedTexture,d=s.image[0]&&s.image[0].isDataTexture,p=[];for(let e=0;e<6;e++)p[e]=h||d?d?s.image[e].image:s.image[e]:f(s.image[e],!0,r.maxCubemapSize),p[e]=z(s,p[e]);const v=p[0],w=o.convert(s.format,s.colorSpace),x=o.convert(s.type),B=y(s.internalFormat,w,x,s.colorSpace),_=!0!==s.isVideoTexture,C=void 0===c.__version||!0===l,S=A.dataReady;let E,T=b(s,v);if(F(e.TEXTURE_CUBE_MAP,s),h){_&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,T,B,v.width,v.height);for(let t=0;t<6;t++){E=p[t].mipmaps;for(let i=0;i<E.length;i++){const r=E[i];s.format!==gi?null!==w?_?S&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,w,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,B,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,w,x,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,B,r.width,r.height,0,w,x,r.data)}}}else{if(E=s.mipmaps,_&&C){E.length>0&&T++;const t=G(p[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,T,B,t.width,t.height)}for(let t=0;t<6;t++)if(d){_?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,p[t].width,p[t].height,w,x,p[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,B,p[t].width,p[t].height,0,w,x,p[t].data);for(let i=0;i<E.length;i++){const r=E[i].image[t].image;_?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,w,x,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,B,r.width,r.height,0,w,x,r.data)}}else{_?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,w,x,p[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,B,w,x,p[t]);for(let i=0;i<E.length;i++){const r=E[i];_?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,w,x,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,B,w,x,r.image[t])}}}g(s)&&m(e.TEXTURE_CUBE_MAP),c.__version=A.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(a,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){const o=i.get(t);void 0!==n&&R(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&k(t)},this.setupRenderTarget=function(t){const r=t.texture,a=i.get(t),l=i.get(r);t.addEventListener("dispose",B);const A=t.textures,c=!0===t.isWebGLCubeRenderTarget,u=A.length>1;if(u||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,s.memory.textures++),c){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)a.__webglFramebuffer[t][n]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(u)for(let t=0,n=A.length;t<n;t++){const n=i.get(A[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===Q(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<A.length;n++){const i=A[n];a.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[n]);const r=o.convert(i.format,i.colorSpace),s=o.convert(i.type),l=y(i.internalFormat,r,s,i.colorSpace,!0===t.isXRRenderTarget),c=H(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,a.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),P(a.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),F(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)R(a.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else R(a.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(r)&&m(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(u){for(let r=0,o=A.length;r<o;r++){const o=A[r],s=i.get(o);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,s.__webglTexture),F(l,o),R(a.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,l,0),g(o)&&m(l)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),F(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)R(a.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else R(a.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);g(r)&&m(i),n.unbindTexture()}t.depthBuffer&&k(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let r=0,o=t.length;r<o;r++){const o=t[r];if(g(o)){const t=v(e),r=i.get(o).__webglTexture;n.bindTexture(t,r),m(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===Q(t)){const r=t.textures,o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const A=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=i.get(t),u=r.length>1;if(u)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),u){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),!0===l&&(D.length=0,O.length=0,D.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(D.push(A),O.push(A),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,O)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,D))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);const o=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=k,this.setupFrameBufferTexture=R,this.useMultisampledRTT=Q}function Vm(e,t){return{convert:function(n){let i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Br;const o=jo.getTransfer(r);if(n===ti)return e.UNSIGNED_BYTE;if(n===Ai)return e.UNSIGNED_SHORT_4_4_4_4;if(n===ci)return e.UNSIGNED_SHORT_5_5_5_1;if(n===hi)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===di)return e.UNSIGNED_INT_10F_11F_11F_REV;if(n===ni)return e.BYTE;if(n===ii)return e.SHORT;if(n===ri)return e.UNSIGNED_SHORT;if(n===oi)return e.INT;if(n===si)return e.UNSIGNED_INT;if(n===ai)return e.FLOAT;if(n===li)return e.HALF_FLOAT;if(n===pi)return e.ALPHA;if(n===fi)return e.RGB;if(n===gi)return e.RGBA;if(n===mi)return e.DEPTH_COMPONENT;if(n===vi)return e.DEPTH_STENCIL;if(n===yi)return e.RED;if(n===wi)return e.RED_INTEGER;if(n===bi)return e.RG;if(n===xi)return e.RG_INTEGER;if(n===_i)return e.RGBA_INTEGER;if(n===Ci||n===Si||n===Ei||n===Ti)if(o===Er){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===Ci)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Si)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ei)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ti)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===Ci)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Si)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ei)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ti)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Mi||n===Fi||n===Ii||n===Ui){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===Mi)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Fi)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ii)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ui)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Li||n===Ri||n===Pi){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===Li||n===Ri)return o===Er?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===Pi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ni||n===ki||n===Di||n===Oi||n===Hi||n===Qi||n===zi||n===Gi||n===ji||n===Vi||n===Wi||n===Ki||n===qi||n===Xi){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===Ni)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ki)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Di)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Oi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Hi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Qi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===zi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Gi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ji)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Vi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Wi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ki)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===qi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Xi)return o===Er?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Ji||n===Yi||n===Zi){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===Ji)return o===Er?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Yi)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Zi)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===$i||n===er||n===tr||n===nr){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===$i)return i.COMPRESSED_RED_RGTC1_EXT;if(n===er)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===tr)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===nr)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===ui?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class Wm{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new Pc(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new xl({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new fl(new Yu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Km extends fo{constructor(e,t){super();const n=this;let i=null,r=1,o=null,s="local-floor",a=1,l=null,A=null,c=null,u=null,h=null,d=null;const p="undefined"!==typeof XRWebGLBinding,f=new Wm,g={},m=t.getContextAttributes();let v=null,y=null;const w=[],b=[],x=new Eo;let B=null;const _=new El;_.viewport=new ts;const C=new El;C.viewport=new ts;const S=[_,C],E=new kd;let T=null,M=null;function F(e){const t=b.indexOf(e.inputSource);if(-1===t)return;const n=w[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function I(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",I),i.removeEventListener("inputsourceschange",U);for(let e=0;e<w.length;e++){const t=b[e];null!==t&&(b[e]=null,w[e].disconnect(t))}T=null,M=null,f.reset();for(const e in g)delete g[e];e.setRenderTarget(v),h=null,u=null,c=null,i=null,y=null,k.stop(),n.isPresenting=!1,e.setPixelRatio(B),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function U(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=b.indexOf(n);i>=0&&(b[i]=null,w[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=b.indexOf(n);if(-1===i){for(let e=0;e<w.length;e++){if(e>=b.length){b.push(n),i=e;break}if(null===b[e]){b[e]=n,i=e;break}}if(-1===i)break}const r=w[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=w[e];return void 0===t&&(t=new Rl,w[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=w[e];return void 0===t&&(t=new Rl,w[e]=t),t.getGripSpace()},this.getHand=function(e){let t=w[e];return void 0===t&&(t=new Rl,w[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return null===c&&p&&(c=new XRWebGLBinding(i,t)),c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(A){if(i=A,null!==i){v=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",I),i.addEventListener("inputsourceschange",U),!0!==m.xrCompatible&&await t.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(x);if(p&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,o=null,s=null;m.depth&&(s=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?vi:mi,o=m.stencil?ui:si);const a={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};c=this.getBinding(),u=c.createProjectionLayer(a),i.updateRenderState({layers:[u]}),e.setPixelRatio(1),e.setSize(u.textureWidth,u.textureHeight,!1),y=new is(u.textureWidth,u.textureHeight,{format:gi,type:ti,depthTexture:new Rc(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===u.ignoreDepthValues,resolveStencilBuffer:!1===u.ignoreDepthValues})}else{const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),y=new is(h.framebufferWidth,h.framebufferHeight,{format:gi,type:ti,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}y.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await i.requestReferenceSpace(s),k.setContext(i),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const L=new Mo,R=new Mo;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;let t=e.near,n=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(n=f.depthFar)),E.near=C.near=_.near=t,E.far=C.far=_.far=n,T===E.near&&M===E.far||(i.updateRenderState({depthNear:E.near,depthFar:E.far}),T=E.near,M=E.far),E.layers.mask=6|e.layers.mask,_.layers.mask=3&E.layers.mask,C.layers.mask=5&E.layers.mask;const r=e.parent,o=E.cameras;P(E,r);for(let i=0;i<o.length;i++)P(o[i],r);2===o.length?function(e,t,n){L.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=L.distanceTo(R),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],A=(r[9]-1)/r[5],c=(r[8]-1)/r[0],u=(o[8]+1)/o[0],h=s*c,d=s*u,p=i/(-c+u),f=p*-c;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=s+p,n=a+p,r=h-f,o=d+(i-f),c=l*a/n*t,u=A*a/n*t;e.projectionMatrix.makePerspective(r,o,c,u,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(E,_,C):E.projectionMatrix.copy(_.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*yo*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,r)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==u||null!==h)return a},this.setFoveation=function(e){a=e,null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(E)},this.getCameraTexture=function(e){return g[e]};let N=null;const k=new mf;k.setAnimationLoop(function(t,r){if(A=r.getViewerPose(l||o),d=r,null!==A){const t=A.views;null!==h&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let r=!1;t.length!==E.cameras.length&&(E.cameras.length=0,r=!0);for(let n=0;n<t.length;n++){const i=t[n];let o=null;if(null!==h)o=h.getViewport(i);else{const t=c.getViewSubImage(u,i);o=t.viewport,0===n&&(e.setRenderTargetTextures(y,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(y))}let s=S[n];void 0===s&&(s=new El,s.layers.enable(n),s.viewport=new ts,S[n]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===n&&(E.matrix.copy(s.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===r&&E.cameras.push(s)}const o=i.enabledFeatures;if(o&&o.includes("depth-sensing")&&"gpu-optimized"==i.depthUsage&&p){c=n.getBinding();const e=c.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&f.init(e,i.renderState)}if(o&&o.includes("camera-access")&&p){e.state.unbindTexture(),c=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new Pc,g[n]=e);const t=c.getCameraImage(n);e.sourceTexture=t}}}}for(let e=0;e<w.length;e++){const t=b[e],n=w[e];null!==t&&void 0!==n&&n.update(t,r,l||o)}N&&N(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),d=null}),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}const qm=new Vs,Xm=new Ps;function Jm(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===Ht&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===Ht&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);const r=t.get(i),o=r.envMap,s=r.envMapRotation;o&&(e.envMap.value=o,qm.copy(s),qm.x*=-1,qm.y*=-1,qm.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(qm.y*=-1,qm.z*=-1),e.envMapRotation.value.setFromMatrix4(Xm.makeRotationFromEuler(qm)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,wl(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,o,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Ht&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,a)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,o,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ym(e,t,n,i){let r={},o={},s=[];const a=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,o=t+"_"+n;if(void 0===i[o])return i[o]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=i[o];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return i[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function A(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){const n=t.target;n.removeEventListener("dispose",c);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,u){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let o=0,s=t.length;o<s;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,r=e.length;t<r;t++){const r=e[t],o=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=o.length;e<t;e++){const t=A(o[e]),s=n%i,a=s%t.boundary,l=s+a;n+=a,0!==l&&i-l<t.storage&&(n+=i-l),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",c));const d=u.program;i.updateUBOMapping(n,d);const p=t.render.frame;o[n.id]!==p&&(!function(t){const n=r[t.id],i=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,r,n,o)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let o=0;o<n.length;o++){const s=n[o],a=A(s);"number"===typeof s||"boolean"===typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=0,i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=0,i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=0):(s.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=p)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},o={}}}}class Zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Do(),context:n=null,depth:i=!0,stencil:r=!1,alpha:o=!1,antialias:s=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:l=!1,powerPreference:A="default",failIfMajorPerformanceCaveat:c=!1,reversedDepthBuffer:u=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const d=new Uint32Array(4),p=new Int32Array(4);let f=null,g=null;const m=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Sn,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const y=this;let w=!1;this._outputColorSpace=_r;let b=0,x=0,B=null,_=-1,C=null;const S=new ts,E=new ts;let T=null;const M=new Ea(0);let F=0,I=t.width,U=t.height,L=1,R=null,P=null;const N=new ts(0,0,I,U),k=new ts(0,0,I,U);let D=!1;const O=new kA;let H=!1,Q=!1;const z=new Ps,G=new Mo,j=new ts,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let W=!1;function K(){return null===B?L:1}let q,X,J,Y,Z,$,ee,te,ne,ie,re,oe,se,ae,le,Ae,ce,ue,he,de,pe,fe,ge,me,ve=n;function ye(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:A,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Tt)),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",Be,!1),t.addEventListener("webglcontextcreationerror",_e,!1),null===ve){const t="webgl2";if(ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ze){throw console.error("THREE.WebGLRenderer: "+ze.message),ze}function we(){q=new Xf(ve),q.init(),fe=new Vm(ve,q),X=new Tf(ve,q,e,fe),J=new Gm(ve,q),X.reversedDepthBuffer&&u&&J.buffers.depth.setReversed(!0),Y=new Zf(ve),Z=new Fm,$=new jm(ve,q,J,Z,X,fe,Y),ee=new Ff(y),te=new qf(y),ne=new vf(ve),ge=new Sf(ve,ne),ie=new Jf(ve,ne,Y,ge),re=new eg(ve,ie,ne,Y),he=new $f(ve,X,$),Ae=new Mf(Z),oe=new Mm(y,ee,te,q,X,ge,Ae),se=new Jm(y,Z),ae=new Rm,le=new Hm(q),ue=new Cf(y,ee,te,J,re,h,a),ce=new Qm(y,re,X),me=new Ym(ve,Y,X,J),de=new Ef(ve,q,Y),pe=new Yf(ve,q,Y),Y.programs=oe.programs,y.capabilities=X,y.extensions=q,y.properties=Z,y.renderLists=ae,y.shadowMap=ce,y.state=J,y.info=Y}we();const be=new Km(y,ve);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const e=Y.autoReset,t=ce.enabled,n=ce.autoUpdate,i=ce.needsUpdate,r=ce.type;we(),Y.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=i,ce.type=r}function _e(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach(function(e){oe.releaseProgram(e)}),e.isShaderMaterial&&oe.releaseShaderCache(e))})(e),Z.remove(e)}(t)}function Se(e,t,n){!0===e.transparent&&e.side===Qt&&!1===e.forceSinglePass?(e.side=Ht,e.needsUpdate=!0,Ne(e,t,n),e.side=Ot,e.needsUpdate=!0,Ne(e,t,n),e.side=Qt):Ne(e,t,n)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(e){void 0!==e&&(L=e,this.setSize(I,U,!1))},this.getSize=function(e){return e.set(I,U)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=e,U=n,t.width=Math.floor(e*L),t.height=Math.floor(n*L),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(I*L,U*L).floor()},this.setDrawingBufferSize=function(e,n,i){I=e,U=n,L=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,i){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,i),J.viewport(S.copy(N).multiplyScalar(L).round())},this.getScissor=function(e){return e.copy(k)},this.setScissor=function(e,t,n,i){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,i),J.scissor(E.copy(k).multiplyScalar(L).round())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){J.setScissorTest(D=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor(...arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha(...arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==B){const t=B.texture.format;e=t===_i||t===xi||t===wi}if(e){const e=B.texture.type,t=e===ti||e===si||e===ri||e===ui||e===Ai||e===ci,n=ue.getClearColor(),i=ue.getClearAlpha(),r=n.r,o=n.g,s=n.b;t?(d[0]=r,d[1]=o,d[2]=s,d[3]=i,ve.clearBufferuiv(ve.COLOR,0,d)):(p[0]=r,p[1]=o,p[2]=s,p[3]=i,ve.clearBufferiv(ve.COLOR,0,p))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",Be,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),ue.dispose(),ae.dispose(),le.dispose(),Z.dispose(),ee.dispose(),te.dispose(),re.dispose(),ge.dispose(),me.dispose(),oe.dispose(),be.dispose(),be.removeEventListener("sessionstart",Te),be.removeEventListener("sessionend",Me),Fe.stop()},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=V);const s=r.isMesh&&r.matrixWorld.determinant()<0,a=function(e,t,n,i,r){!0!==t.isScene&&(t=V);$.resetTextureUnits();const o=t.fog,s=i.isMeshStandardMaterial?t.environment:null,a=null===B?y.outputColorSpace:!0===B.isXRRenderTarget?B.texture.colorSpace:Cr,l=(i.isMeshStandardMaterial?te:ee).get(i.envMap||s),A=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),u=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,d=!!n.morphAttributes.color;let p=Sn;i.toneMapped&&(null!==B&&!0!==B.isXRRenderTarget||(p=y.toneMapping));const f=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,m=void 0!==f?f.length:0,v=Z.get(i),w=g.state.lights;if(!0===H&&(!0===Q||e!==C)){const t=e===C&&i.id===_;Ae.setState(i,e,t)}let b=!1;i.version===v.__version?v.needsLights&&v.lightsStateVersion!==w.state.version||v.outputColorSpace!==a||r.isBatchedMesh&&!1===v.batching?b=!0:r.isBatchedMesh||!0!==v.batching?r.isBatchedMesh&&!0===v.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===v.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===v.instancing?b=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?b=!0:r.isSkinnedMesh||!0!==v.skinning?r.isInstancedMesh&&!0===v.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===v.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===v.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===v.instancingMorph&&null!==r.morphTexture||v.envMap!==l||!0===i.fog&&v.fog!==o?b=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===Ae.numPlanes&&v.numIntersection===Ae.numIntersection?(v.vertexAlphas!==A||v.vertexTangents!==c||v.morphTargets!==u||v.morphNormals!==h||v.morphColors!==d||v.toneMapping!==p||v.morphTargetsCount!==m)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,v.__version=i.version);let x=v.currentProgram;!0===b&&(x=Ne(i,t,r));let S=!1,E=!1,T=!1;const M=x.getUniforms(),F=v.uniforms;J.useProgram(x.program)&&(S=!0,E=!0,T=!0);i.id!==_&&(_=i.id,E=!0);if(S||C!==e){J.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),M.setValue(ve,"projectionMatrix",e.projectionMatrix),M.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=M.map.cameraPosition;void 0!==t&&t.setValue(ve,G.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&M.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&M.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,E=!0,T=!0)}if(r.isSkinnedMesh){M.setOptional(ve,r,"bindMatrix"),M.setOptional(ve,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(ve,"boneTexture",e.boneTexture,$))}r.isBatchedMesh&&(M.setOptional(ve,r,"batchingTexture"),M.setValue(ve,"batchingTexture",r._matricesTexture,$),M.setOptional(ve,r,"batchingIdTexture"),M.setValue(ve,"batchingIdTexture",r._indirectTexture,$),M.setOptional(ve,r,"batchingColorTexture"),null!==r._colorsTexture&&M.setValue(ve,"batchingColorTexture",r._colorsTexture,$));const I=n.morphAttributes;void 0===I.position&&void 0===I.normal&&void 0===I.color||he.update(r,n,x);(E||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,M.setValue(ve,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(F.envMap.value=l,F.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(F.envMapIntensity.value=t.environmentIntensity);E&&(M.setValue(ve,"toneMappingExposure",y.toneMappingExposure),v.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(F,T),o&&!0===i.fog&&se.refreshFogUniforms(F,o),se.refreshMaterialUniforms(F,i,L,U,g.state.transmissionRenderTarget[e.id]),om.upload(ve,ke(v),F,$));i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(om.upload(ve,ke(v),F,$),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&M.setValue(ve,"center",r.center);if(M.setValue(ve,"modelViewMatrix",r.modelViewMatrix),M.setValue(ve,"normalMatrix",r.normalMatrix),M.setValue(ve,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];me.update(n,x),me.bind(n,x)}}return x}(e,t,n,i,r);J.setMaterial(i,s);let l=n.index,A=1;if(!0===i.wireframe){if(l=ie.getWireframeAttribute(n),void 0===l)return;A=2}const c=n.drawRange,u=n.attributes.position;let h=c.start*A,d=(c.start+c.count)*A;null!==o&&(h=Math.max(h,o.start*A),d=Math.min(d,(o.start+o.count)*A)),null!==l?(h=Math.max(h,0),d=Math.min(d,l.count)):void 0!==u&&null!==u&&(h=Math.max(h,0),d=Math.min(d,u.count));const p=d-h;if(p<0||p===1/0)return;let f;ge.setup(r,i,a,n,l);let m=de;if(null!==l&&(f=ne.get(l),m=pe,m.setIndex(f)),r.isMesh)!0===i.wireframe?(J.setLineWidth(i.wireframeLinewidth*K()),m.setMode(ve.LINES)):m.setMode(ve.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),J.setLineWidth(e*K()),r.isLineSegments?m.setMode(ve.LINES):r.isLineLoop?m.setMode(ve.LINE_LOOP):m.setMode(ve.LINE_STRIP)}else r.isPoints?m.setMode(ve.POINTS):r.isSprite&&m.setMode(ve.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)Ho("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),m.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(q.get("WEBGL_multi_draw"))m.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,n=r._multiDrawCount,o=l?ne.get(l).bytesPerElement:1,s=Z.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)s.setValue(ve,"_gl_DrawID",i),m.render(e[i]/o,t[i])}else if(r.isInstancedMesh)m.renderInstances(h,p,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);m.renderInstances(h,p,t)}else m.render(h,p)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),g=le.get(n),g.init(t),v.push(g),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),g.setupLights();const i=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];Se(o,n,e),i.add(o)}else Se(t,n,e),i.add(t)}),g=v.pop(),i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){Z.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ee=null;function Te(){Fe.stop()}function Me(){Fe.start()}const Fe=new mf;function Ie(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||O.intersectsSprite(e)){i&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=re.update(e),r=e.material;r.visible&&f.push(e,t,r,n,j.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||O.intersectsObject(e))){const t=re.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),j.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),j.copy(t.boundingSphere.center)),j.applyMatrix4(e.matrixWorld).applyMatrix4(z)),Array.isArray(r)){const i=t.groups;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r[s.materialIndex];a&&a.visible&&f.push(e,t,a,n,j.z,s)}}else r.visible&&f.push(e,t,r,n,j.z,null)}const r=e.children;for(let o=0,s=r.length;o<s;o++)Ie(r[o],t,n,i)}function Ue(e,t,n,i){const r=e.opaque,o=e.transmissive,s=e.transparent;g.setupLightsView(n),!0===H&&Ae.setGlobalState(y.clippingPlanes,n),i&&J.viewport(S.copy(i)),r.length>0&&Re(r,t,n),o.length>0&&Re(o,t,n),s.length>0&&Re(s,t,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function Le(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[i.id]&&(g.state.transmissionRenderTarget[i.id]=new is(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")||q.has("EXT_color_buffer_float")?li:ti,minFilter:$n,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:jo.workingColorSpace}));const o=g.state.transmissionRenderTarget[i.id],s=i.viewport||S;o.setSize(s.z*y.transmissionResolutionScale,s.w*y.transmissionResolutionScale);const a=y.getRenderTarget(),l=y.getActiveCubeFace(),A=y.getActiveMipmapLevel();y.setRenderTarget(o),y.getClearColor(M),F=y.getClearAlpha(),F<1&&y.setClearColor(16777215,.5),y.clear(),W&&ue.render(n);const c=y.toneMapping;y.toneMapping=Sn;const u=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),g.setupLightsView(i),!0===H&&Ae.setGlobalState(y.clippingPlanes,i),Re(e,n,i),$.updateMultisampleRenderTarget(o),$.updateRenderTargetMipmap(o),!1===q.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,o=t.length;r<o;r++){const o=t[r],s=o.object,a=o.geometry,l=o.material,A=o.group;if(l.side===Qt&&s.layers.test(i.layers)){const t=l.side;l.side=Ht,l.needsUpdate=!0,Pe(s,n,i,a,l,A),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&($.updateMultisampleRenderTarget(o),$.updateRenderTargetMipmap(o))}y.setRenderTarget(a,l,A),y.setClearColor(M,F),void 0!==u&&(i.viewport=u),y.toneMapping=c}function Re(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],s=o.object,a=o.geometry,l=o.group;let A=o.material;!0===A.allowOverride&&null!==i&&(A=i),s.layers.test(n.layers)&&Pe(s,t,n,a,A,l)}}function Pe(e,t,n,i,r,o){e.onBeforeRender(y,t,n,i,r,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(y,t,n,i,e,o),!0===r.transparent&&r.side===Qt&&!1===r.forceSinglePass?(r.side=Ht,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,o),r.side=Ot,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,o),r.side=Qt):y.renderBufferDirect(n,t,i,r,e,o),e.onAfterRender(y,t,n,i,r,o)}function Ne(e,t,n){!0!==t.isScene&&(t=V);const i=Z.get(e),r=g.state.lights,o=g.state.shadowsArray,s=r.state.version,a=oe.getParameters(e,r.state,o,t,n),l=oe.getProgramCacheKey(a);let A=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===A&&(e.addEventListener("dispose",Ce),A=new Map,i.programs=A);let c=A.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===s)return De(e,a),c}else a.uniforms=oe.getUniforms(e),e.onBeforeCompile(a,y),c=oe.acquireProgram(a,l),A.set(l,c),i.uniforms=a.uniforms;const u=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=Ae.uniform),De(e,a),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=c,i.uniformsList=null,c}function ke(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=om.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function De(e,t){const n=Z.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Fe.setAnimationLoop(function(e){Ee&&Ee(e)}),"undefined"!==typeof self&&Fe.setContext(self),this.setAnimationLoop=function(e){Ee=e,be.setAnimationLoop(e),null===e?Fe.stop():Fe.start()},be.addEventListener("sessionstart",Te),be.addEventListener("sessionend",Me),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,B),g=le.get(e,v.length),g.init(t),v.push(g),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(z,Ao,t.reversedDepth),Q=this.localClippingEnabled,H=Ae.init(this.clippingPlanes,Q),f=ae.get(e,m.length),f.init(),m.push(f),!0===be.enabled&&!0===be.isPresenting){const e=y.xr.getDepthSensingMesh();null!==e&&Ie(e,t,-1/0,y.sortObjects)}Ie(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(R,P),W=!1===be.enabled||!1===be.isPresenting||!1===be.hasDepthSensing(),W&&ue.addToRenderList(f,e),this.info.render.frame++,!0===H&&Ae.beginShadows();const n=g.state.shadowsArray;ce.render(n,e,t),!0===H&&Ae.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=f.opaque,r=f.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,o=n.length;t<o;t++){Le(i,r,e,n[t])}W&&ue.render(e);for(let t=0,i=n.length;t<i;t++){const i=n[t];Ue(f,e,i,i.viewport)}}else r.length>0&&Le(i,r,e,t),W&&ue.render(e),Ue(f,e,t);null!==B&&0===x&&($.updateMultisampleRenderTarget(B),$.updateRenderTargetMipmap(B)),!0===e.isScene&&e.onAfterRender(y,e,t),ge.resetDefaultState(),_=-1,C=null,v.pop(),v.length>0?(g=v[v.length-1],!0===H&&Ae.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,m.pop(),f=m.length>0?m[m.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(e,t,n){const i=Z.get(e);i.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===i.__autoAllocateDepthBuffer&&(i.__useRenderToTexture=!1),Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=i.__autoAllocateDepthBuffer?void 0:n,i.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const Oe=ve.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;B=e,b=t,x=n;let i=!0,r=null,o=!1,s=!1;if(e){const a=Z.get(e);if(void 0!==a.__useDefaultFramebuffer)J.bindFramebuffer(ve.FRAMEBUFFER,null),i=!1;else if(void 0===a.__webglFramebuffer)$.setupRenderTarget(e);else if(a.__hasExternalTextures)$.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(a.__boundDepthTexture!==t){if(null!==t&&Z.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const A=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(A[t])?A[t][n]:A[t],o=!0):r=e.samples>0&&!1===$.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(A)?A[n]:A,S.copy(e.viewport),E.copy(e.scissor),T=e.scissorTest}else S.copy(N).multiplyScalar(L).floor(),E.copy(k).multiplyScalar(L).floor(),T=D;0!==n&&(r=Oe);if(J.bindFramebuffer(ve.FRAMEBUFFER,r)&&i&&J.drawBuffers(e,r),J.viewport(S),J.scissor(E),J.setScissorTest(T),o){const i=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=t;for(let t=0;t<e.textures.length;t++){const r=Z.get(e.textures[t]);ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0+t,r.__webglTexture,n,i)}}else if(null!==e&&0!==n){const t=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,t.__webglTexture,n)}_=-1},this.readRenderTargetPixels=function(e,t,n,i,r,o,s){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){J.bindFramebuffer(ve.FRAMEBUFFER,l);try{const s=e.textures[a],l=s.format,A=s.type;if(!X.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(A))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&(e.textures.length>1&&ve.readBuffer(ve.COLOR_ATTACHMENT0+a),ve.readPixels(t,n,i,r,fe.convert(l),fe.convert(A),o))}finally{const e=null!==B?Z.get(B).__webglFramebuffer:null;J.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,r,o,s){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r){J.bindFramebuffer(ve.FRAMEBUFFER,l);const s=e.textures[a],A=s.format,c=s.type;if(!X.textureFormatReadable(A))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const u=ve.createBuffer();ve.bindBuffer(ve.PIXEL_PACK_BUFFER,u),ve.bufferData(ve.PIXEL_PACK_BUFFER,o.byteLength,ve.STREAM_READ),e.textures.length>1&&ve.readBuffer(ve.COLOR_ATTACHMENT0+a),ve.readPixels(t,n,i,r,fe.convert(A),fe.convert(c),0);const h=null!==B?Z.get(B).__webglFramebuffer:null;J.bindFramebuffer(ve.FRAMEBUFFER,h);const d=ve.fenceSync(ve.SYNC_GPU_COMMANDS_COMPLETE,0);return ve.flush(),await function(e,t,n){return new Promise(function(i,r){setTimeout(function o(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:i()}},n)})}(ve,d,4),ve.bindBuffer(ve.PIXEL_PACK_BUFFER,u),ve.getBufferSubData(ve.PIXEL_PACK_BUFFER,0,o),ve.deleteBuffer(u),ve.deleteSync(d),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),s=null!==t?t.x:0,a=null!==t?t.y:0;$.setTexture2D(e,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,s,a,r,o),J.unbindTexture()};const He=ve.createFramebuffer(),Qe=ve.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,i,r,o,s,a,l,A,c,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===p&&(0!==d?(Ho("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),p=d,d=0):p=0);const f=e.isCompressedTexture?e.mipmaps[p]:e.image;if(null!==u)n=u.max.x-u.min.x,i=u.max.y-u.min.y,r=u.isBox3?u.max.z-u.min.z:1,o=u.min.x,s=u.min.y,a=u.isBox3?u.min.z:0;else{const t=Math.pow(2,-d);n=Math.floor(f.width*t),i=Math.floor(f.height*t),r=e.isDataArrayTexture?f.depth:e.isData3DTexture?Math.floor(f.depth*t):1,o=0,s=0,a=0}null!==h?(l=h.x,A=h.y,c=h.z):(l=0,A=0,c=0);const g=fe.convert(t.format),m=fe.convert(t.type);let v;t.isData3DTexture?($.setTexture3D(t,0),v=ve.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?($.setTexture2DArray(t,0),v=ve.TEXTURE_2D_ARRAY):($.setTexture2D(t,0),v=ve.TEXTURE_2D),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const y=ve.getParameter(ve.UNPACK_ROW_LENGTH),w=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),b=ve.getParameter(ve.UNPACK_SKIP_PIXELS),x=ve.getParameter(ve.UNPACK_SKIP_ROWS),B=ve.getParameter(ve.UNPACK_SKIP_IMAGES);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,f.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,f.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,o),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,s),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,a);const _=e.isDataArrayTexture||e.isData3DTexture,C=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const u=Z.get(e),h=Z.get(t),f=Z.get(u.__renderTarget),g=Z.get(h.__renderTarget);J.bindFramebuffer(ve.READ_FRAMEBUFFER,f.__webglFramebuffer),J.bindFramebuffer(ve.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let m=0;m<r;m++)_&&(ve.framebufferTextureLayer(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,Z.get(e).__webglTexture,d,a+m),ve.framebufferTextureLayer(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,Z.get(t).__webglTexture,p,c+m)),ve.blitFramebuffer(o,s,n,i,l,A,n,i,ve.DEPTH_BUFFER_BIT,ve.NEAREST);J.bindFramebuffer(ve.READ_FRAMEBUFFER,null),J.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null)}else if(0!==d||e.isRenderTargetTexture||Z.has(e)){const u=Z.get(e),h=Z.get(t);J.bindFramebuffer(ve.READ_FRAMEBUFFER,He),J.bindFramebuffer(ve.DRAW_FRAMEBUFFER,Qe);for(let e=0;e<r;e++)_?ve.framebufferTextureLayer(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,u.__webglTexture,d,a+e):ve.framebufferTexture2D(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,u.__webglTexture,d),C?ve.framebufferTextureLayer(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,h.__webglTexture,p,c+e):ve.framebufferTexture2D(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,h.__webglTexture,p),0!==d?ve.blitFramebuffer(o,s,n,i,l,A,n,i,ve.COLOR_BUFFER_BIT,ve.NEAREST):C?ve.copyTexSubImage3D(v,p,l,A,c+e,o,s,n,i):ve.copyTexSubImage2D(v,p,l,A,o,s,n,i);J.bindFramebuffer(ve.READ_FRAMEBUFFER,null),J.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null)}else C?e.isDataTexture||e.isData3DTexture?ve.texSubImage3D(v,p,l,A,c,n,i,r,g,m,f.data):t.isCompressedArrayTexture?ve.compressedTexSubImage3D(v,p,l,A,c,n,i,r,g,f.data):ve.texSubImage3D(v,p,l,A,c,n,i,r,g,m,f):e.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,p,l,A,n,i,g,m,f.data):e.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,p,l,A,f.width,f.height,g,f.data):ve.texSubImage2D(ve.TEXTURE_2D,p,l,A,n,i,g,m,f);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,y),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,w),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,b),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,x),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,B),0===p&&t.generateMipmaps&&ve.generateMipmap(v),J.unbindTexture()},this.initRenderTarget=function(e){void 0===Z.get(e).__webglFramebuffer&&$.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?$.setTextureCube(e,0):e.isData3DTexture?$.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?$.setTexture2DArray(e,0):$.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){b=0,x=0,B=null,J.reset(),ge.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ao}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=jo._getDrawingBufferColorSpace(e),t.unpackColorSpace=jo._getUnpackColorSpace()}}var $m=n(8443);const ev=e=>{let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=i?i:"object"!==typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,o={setState:i,getState:r,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(i,r,o);return o},{useSyncExternalStoreWithSelector:tv}=$m,nv=e=>e;const iv=(e,t)=>{const n=(e=>e?ev(e):ev)(e),r=function(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nv,n=arguments.length>2?arguments[2]:void 0;const r=tv(e.subscribe,e.getState,e.getInitialState,t,n);return i.useDebugValue(r),r}(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r},rv=[];function ov(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function sv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const s of rv)if(ov(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:t,equal:i.equal,remove:()=>{const e=rv.indexOf(r);-1!==e&&rv.splice(e,1)},promise:(o=e,"object"===typeof o&&"function"===typeof o.then?e:e(...t)).then(e=>{r.response=e,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(e=>r.error=e)};var o;if(rv.push(r),!n)throw r.promise}var av=n(2016),lv=n.n(av),Av=n(8784);(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product))})()?i.useLayoutEffect:i.useEffect;function cv(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=cv(i,t,n);if(e)return e;i=t?null:i.sibling}}function uv(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(VT){return e}}const hv=uv(i.createContext(null));class dv extends i.Component{render(){return i.createElement(hv.Provider,{value:this._reactInternals},this.props.children)}}function pv(){const e=i.useContext(hv);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=i.useId();return i.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=cv(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}const fv=Symbol.for("react.context"),gv=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===fv;function mv(){const e=function(){const e=pv(),[t]=i.useState(()=>new Map);t.clear();let n=e;for(;n;){const e=n.type;gv(e)&&e!==hv&&!t.has(e)&&t.set(e,i.use(uv(e))),n=n.return}return t}();return i.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>i.createElement(t,null,i.createElement(n.Provider,A(A({},r),{},{value:e.get(n)}))),e=>i.createElement(dv,A({},e))),[e])}const vv=["params"];function yv(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}r.act;const wv=e=>e&&e.isOrthographicCamera,bv=e=>null!=e&&("string"===typeof e||"number"===typeof e||e.isColor),xv=((e,t)=>"undefined"!==typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product)))()?i.useLayoutEffect:i.useEffect;function Bv(e){const t=i.useRef(e);return xv(()=>{t.current=e},[e]),t}function _v(e){let{set:t}=e;return xv(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const Cv=(e=>(e=class extends i.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},e.getDerivedStateFromError=()=>({error:!0}),e))();function Sv(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function Ev(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}const Tv={obj:e=>e===Object(e)&&!Tv.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(Tv.str(e)||Tv.num(e)||Tv.boo(e))return e===t;const o=Tv.obj(e);if(o&&"reference"===i)return e===t;const s=Tv.arr(e);if(s&&"reference"===n)return e===t;if((s||o)&&e===t)return!0;let a;for(a in e)if(!(a in t))return!1;if(o&&"shallow"===n&&"shallow"===i){for(a in r?t:e)if(!Tv.equ(e[a],t[a],{strict:r,objects:"reference"}))return!1}else for(a in r?t:e)if(e[a]!==t[a])return!1;if(Tv.und(a)){if(s&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Mv(e){const t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}const Fv=["children","key","ref"];function Iv(e){const t={};for(const n in e)Fv.includes(n)||(t[n]=e[n]);return t}function Uv(e,t,n,i){const r=e;let o=null==r?void 0:r.__r3f;return o||(o={root:t,type:n,parent:null,children:[],props:Iv(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=o)),o}function Lv(e,t){let n=e[t];if(!t.includes("-"))return{root:e,key:t,target:n};n=e;for(const r of t.split("-")){var i;t=r,e=n,n=null==(i=n)?void 0:i[t]}return{root:e,key:t,target:n}}const Rv=/-\d+$/;function Pv(e,t){if(Tv.str(t.props.attach)){if(Rv.test(t.props.attach)){const n=t.props.attach.replace(Rv,""),{root:i,key:r}=Lv(e.object,n);Array.isArray(i[r])||(i[r]=[])}const{root:n,key:i}=Lv(e.object,t.props.attach);t.previousAttach=n[i],n[i]=t.object}else Tv.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function Nv(e,t){if(Tv.str(t.props.attach)){const{root:n,key:i}=Lv(e.object,t.props.attach),r=t.previousAttach;void 0===r?delete n[i]:n[i]=r}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}const kv=[...Fv,"args","dispose","attach","object","onUpdate","dispose"],Dv=new Map;function Ov(e){let t=Dv.get(e.constructor);try{t||(t=new e.constructor,Dv.set(e.constructor,t))}catch(EI){}return t}const Hv=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Qv=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function zv(e,t){var n;const i=e.__r3f,r=i&&yv(i).getState(),o=null==i?void 0:i.eventCount;for(const a in t){let n=t[a];if(kv.includes(a))continue;if(i&&Qv.test(a)){"function"===typeof n?i.handlers[a]=n:delete i.handlers[a],i.eventCount=Object.keys(i.handlers).length;continue}if(void 0===n)continue;let{root:o,key:l,target:A}=Lv(e,a);if(A instanceof Ws&&n instanceof Ws)A.mask=n.mask;else if(A instanceof Ea&&bv(n))A.set(n);else if(null!==A&&"object"===typeof A&&"function"===typeof A.set&&"function"===typeof A.copy&&null!=n&&n.constructor&&A.constructor===n.constructor)A.copy(n);else if(null!==A&&"object"===typeof A&&"function"===typeof A.set&&Array.isArray(n))"function"===typeof A.fromArray?A.fromArray(n):A.set(...n);else if(null!==A&&"object"===typeof A&&"function"===typeof A.set&&"number"===typeof n)"function"===typeof A.setScalar?A.setScalar(n):A.set(n);else{var s;o[l]=n,r&&!r.linear&&Hv.includes(l)&&null!=(s=o[l])&&s.isTexture&&o[l].format===gi&&o[l].type===ti&&(o[l].colorSpace=_r)}}if(null!=i&&i.parent&&null!=r&&r.internal&&null!=(n=i.object)&&n.isObject3D&&o!==i.eventCount){const e=i.object,t=r.internal.interaction.indexOf(e);t>-1&&r.internal.interaction.splice(t,1),i.eventCount&&null!==e.raycast&&r.internal.interaction.push(e)}return i&&void 0===i.props.attach&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Gv(i),e}function Gv(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);const n=null==(t=e.root)||null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function jv(e,t){e.manual||(wv(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}const Vv=e=>null==e?void 0:e.isObject3D;function Wv(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Kv(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function qv(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const i=e.eventObject.__r3f;if(n.hovered.delete(Wv(e)),null!=i&&i.eventCount){const n=i.handlers,r=A(A({},e),{},{intersections:t});null==n.onPointerOut||n.onPointerOut(r),null==n.onPointerLeave||n.onPointerLeave(r)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))})}}return function(o){const{onPointerMissed:s,internal:a}=e.getState();a.lastEvent.current=o;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(t,n){const i=e.getState(),r=new Set,o=[],s=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<s.length;e++){const t=Ev(s[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let a=s.flatMap(function(e){const n=Ev(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i}).sort((e,t)=>{const n=Ev(e.object),i=Ev(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=Wv(e);return!r.has(t)&&(r.add(t),!0)});i.events.filter&&(a=i.events.filter(a,i));for(const e of a){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push(A(A({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(Wv(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),h=c?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(o):0;"onPointerDown"===r&&(a.initialClick=[o.offsetX,o.offsetY],a.initialHits=u.map(e=>e.eventObject)),c&&!u.length&&h<=2&&(i(o,a.interaction),s&&s(o)),l&&n(u),function(e,t,i,r){if(e.length){const o={stopped:!1};for(const s of e){let a=Ev(s.object);if(a||s.object.traverseAncestors(e=>{const t=Ev(e);if(t)return a=t,!1}),a){const{raycaster:l,pointer:c,camera:u,internal:h}=a,d=new Mo(c.x,c.y,0).unproject(u),p=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(s.eventObject))&&t},f=e=>{const n={intersection:s,target:t.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(s.eventObject,n):h.capturedMap.set(e,new Map([[s.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{const t=h.capturedMap.get(e);t&&Kv(h.capturedMap,s.eventObject,t,e)};let m={};for(let e in t){let n=t[e];"function"!==typeof n&&(m[e]=n)}let v=A(A(A({},s),m),{},{pointer:c,intersections:e,stopped:o.stopped,delta:i,unprojectedPoint:d,ray:l.ray,camera:u,stopPropagation(){const i="pointerId"in t&&h.capturedMap.get(t.pointerId);(!i||i.has(s.eventObject))&&(v.stopped=o.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===s.eventObject))&&n([...e.slice(0,e.indexOf(s)),s])},target:{hasPointerCapture:p,setPointerCapture:f,releasePointerCapture:g},currentTarget:{hasPointerCapture:p,setPointerCapture:f,releasePointerCapture:g},nativeEvent:t});if(r(v),!0===o.stopped)break}}}}(u,o,h,function(e){const t=e.eventObject,n=t.__r3f;if(null==n||!n.eventCount)return;const s=n.handlers;if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=Wv(e),n=a.hovered.get(t);n?n.stopped&&e.stopPropagation():(a.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const n=s[r];n?c&&!a.initialHits.includes(t)||(i(o,a.interaction.filter(e=>!a.initialHits.includes(e))),n(e)):c&&a.initialHits.includes(t)&&i(o,a.interaction.filter(e=>!a.initialHits.includes(e)))}})}}}}const Xv=e=>!(null==e||!e.render),Jv=i.createContext(null),Yv=(e,t)=>{const n=(r=(n,r)=>{const o=new Mo,s=new Mo,a=new Mo;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:A,left:c}=n,u=i/l;t.isVector3?a.copy(t):a.set(...t);const h=e.getWorldPosition(o).distanceTo(a);if(wv(e))return{width:i/e.zoom,height:l/e.zoom,top:A,left:c,factor:1,distance:h,aspect:u};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,r=n*(i/l);return{width:r,height:n,top:A,left:c,factor:i/r,distance:h,aspect:u}}}let c;const u=e=>n(t=>({performance:A(A({},t.performance),{},{current:e})})),h=new Eo,d={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Dd,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout(()=>u(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n(t=>A(A({},t),{},{events:A(A({},t.events),e)})),setSize:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=r().camera,c={width:e,height:t,top:i,left:o};n(e=>({size:c,viewport:A(A({},e.viewport),l(a,s,c))}))},setDpr:e=>n(t=>{const n=Sv(e);return{viewport:A(A({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:i.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return d},r?iv(r,o):iv);var r,o;const s=n.getState();let a=s.size,l=s.viewport.dpr,c=s.camera;return n.subscribe(()=>{const{camera:e,size:t,viewport:i,gl:r,set:o}=n.getState();if(t.width!==a.width||t.height!==a.height||i.dpr!==l){a=t,l=i.dpr,jv(e,t),i.dpr>0&&r.setPixelRatio(i.dpr);const n="undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,n)}e!==c&&(c=e,o(t=>({viewport:A(A({},t.viewport),t.viewport.getCurrentViewport(e))})))}),n.subscribe(t=>e(t)),n};function Zv(){const e=i.useContext(Jv);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function $v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return Zv()(e,t)}function ey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Zv(),i=n.getState().internal.subscribe,r=Bv(e);return xv(()=>i(r,t,n),[t,i,n]),null}const ty=new WeakMap;function ny(e,t){return function(n){let i;(e=>{var t;return"function"===typeof e&&(null==e||null==(t=e.prototype)?void 0:t.constructor)===e})(n)?(i=ty.get(n),i||(i=new n,ty.set(n,i))):i=n,e&&e(i);for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return Promise.all(o.map(e=>new Promise((n,r)=>i.load(e,e=>{Vv(null==e?void 0:e.scene)&&Object.assign(e,Mv(e.scene)),n(e)},t,t=>r(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))))))}}function iy(e,t,n,i){const r=Array.isArray(t)?t:[t],o=((e,t,n)=>sv(e,t,!1,n))(ny(n,i),[e,...r],{equal:Tv.equ});return Array.isArray(t)?o:o[0]}function ry(e){const t=lv()(e);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version}),t}iy.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{sv(e,t,!0,n)})(ny(n),[e,...i])},iy.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)rv.splice(0,rv.length);else{const t=rv.find(t=>ov(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const oy={},sy=/^three(?=[A-Z])/,ay=e=>"".concat(e[0].toUpperCase()).concat(e.slice(1));let ly=0;function Ay(e,t){const n=ay(e),i=oy[n];if("primitive"!==e&&!i)throw new Error("R3F: ".concat(n," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if("primitive"===e&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function cy(e){var t;e.isHidden&&(e.props.attach&&null!=(t=e.parent)&&t.object?Pv(e.parent,e):Vv(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,Gv(e))}function uy(e,t,n){const i=t.root.getState();if(e.parent||e.object===i.scene){if(!t.object){var r,o;const e=oy[ay(t.type)];t.object=null!=(r=t.props.object)?r:new e(...null!=(o=t.props.args)?o:[]),t.object.__r3f=t}if(zv(t.object,t.props),t.props.attach)Pv(e,t);else if(Vv(t.object)&&Vv(e.object)){const i=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==i){const n=e.object.children.indexOf(t.object);if(-1!==n){e.object.children.splice(n,1);const r=n<i?i-1:i;e.object.children.splice(r,0,t.object)}else t.object.parent=e.object,e.object.children.splice(i,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})}else e.object.add(t.object)}for(const e of t.children)uy(t,e);Gv(t)}}function hy(e,t){t&&(t.parent=e,e.children.push(t),uy(e,t))}function dy(e,t,n){if(!t||!n)return;t.parent=e;const i=e.children.indexOf(n);-1!==i?e.children.splice(i,0,t):e.children.push(t),uy(e,t,n)}function py(e){if("function"===typeof e.dispose){const t=()=>{try{e.dispose()}catch(t){}};"undefined"!==typeof IS_REACT_ACT_ENVIRONMENT?t():(0,Av.unstable_scheduleCallback)(Av.unstable_IdlePriority,t)}}function fy(e,t,n){if(!t)return;t.parent=null;const i=e.children.indexOf(t);-1!==i&&e.children.splice(i,1),t.props.attach?Nv(e,t):Vv(t.object)&&Vv(e.object)&&(e.object.remove(t.object),function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)}),n.capturedMap.forEach((e,i)=>{Kv(n.capturedMap,t,e,i)})}(yv(t),t.object));const r=null!==t.props.dispose&&!1!==n;for(let o=t.children.length-1;o>=0;o--){fy(t,t.children[o],r)}t.children.length=0,delete t.object.__r3f,r&&"primitive"!==t.type&&"Scene"!==t.object.type&&py(t.object),void 0===n&&Gv(t)}function gy(e,t){for(const n of[e,e.alternate])if(null!==n)if("function"===typeof n.ref){null==n.refCleanup||n.refCleanup();const e=n.ref(t);"function"===typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}const my=[];const vy=()=>{},yy={};let wy=0;const by=ry({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var i;return Ay(e=ay(e)in oy?e:e.replace(sy,""),t),"primitive"===e&&null!=(i=t.object)&&i.__r3f&&delete t.object.__r3f,Uv(t.object,n,e,t)},removeChild:fy,appendChild:hy,appendInitialChild:hy,insertBefore:dy,appendChildToContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&hy(n,t)},removeChildFromContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&fy(n,t)},insertInContainerBefore(e,t,n){const i=e.getState().scene.__r3f;t&&n&&i&&dy(i,t,n)},getRootHostContext:()=>yy,getChildHostContext:()=>yy,commitUpdate(e,t,n,i,r){var o,s,a;Ay(t,i);let l=!1;if(("primitive"===e.type&&n.object!==i.object||(null==(o=i.args)?void 0:o.length)!==(null==(s=n.args)?void 0:s.length)||null!=(a=i.args)&&a.some((e,t)=>{var i;return e!==(null==(i=n.args)?void 0:i[t])}))&&(l=!0),l)my.push([e,A({},i),r]);else{const t=function(e,t){const n={};for(const i in t)if(!kv.includes(i)&&!Tv.equ(t[i],e.props[i])){n[i]=t[i];for(const e in t)e.startsWith("".concat(i,"-"))&&(n[e]=t[e])}for(const i in e.props){if(kv.includes(i)||t.hasOwnProperty(i))continue;const{root:r,key:o}=Lv(e.object,i);if(r.constructor&&0===r.constructor.length){const e=Ov(r);Tv.und(e)||(n[o]=e[o])}else n[o]=0}return n}(e,i);Object.keys(t).length&&(Object.assign(e.props,t),zv(e.object,t))}(null===r.sibling||0===(4&r.flags))&&function(){for(const[n]of my){const e=n.parent;if(e){n.props.attach?Nv(e,n):Vv(n.object)&&Vv(e.object)&&e.object.remove(n.object);for(const e of n.children)e.props.attach?Nv(n,e):Vv(e.object)&&Vv(n.object)&&n.object.remove(e.object)}n.isHidden&&cy(n),n.object.__r3f&&delete n.object.__r3f,"primitive"!==n.type&&py(n.object)}for(const[n,i,r]of my){n.props=i;const o=n.parent;if(o){var e,t;const i=oy[ay(n.type)];n.object=null!=(e=n.props.object)?e:new i(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,gy(r,n.object),zv(n.object,n.props),n.props.attach?Pv(o,n):Vv(n.object)&&Vv(o.object)&&o.object.add(n.object);for(const e of n.children)e.props.attach?Pv(n,e):Vv(e.object)&&Vv(n.object)&&n.object.add(e.object);Gv(n)}}my.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>Uv(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){var t;e.isHidden||(e.props.attach&&null!=(t=e.parent)&&t.object?Nv(e.parent,e):Vv(e.object)&&(e.object.visible=!1),e.isHidden=!0,Gv(e))},unhideInstance:cy,createTextInstance:vy,hideTextInstance:vy,unhideTextInstance:vy,scheduleTimeout:"function"===typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"===typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:i.createContext(null),setCurrentUpdatePriority(e){wy=e},getCurrentUpdatePriority:()=>wy,resolveUpdatePriority(){var e;if(0!==wy)return wy;switch("undefined"!==typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Et.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Et.ContinuousEventPriority;default:return Et.DefaultEventPriority}},resetFormInstance(){}}),xy=new Map,By={objects:"shallow",strict:!1};function _y(e){const t=xy.get(e),n=null==t?void 0:t.fiber,i=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const r="function"===typeof reportError?reportError:console.error,o=i||Yv(Qy,zy),a=n||by.createContainer(o,Et.ConcurrentRoot,null,!1,null,"",r,r,r,null);let l,c;t||xy.set(e,{fiber:a,store:o});let u=!1,h=null;return{async configure(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h=new Promise(e=>t=e);let{gl:i,size:r,scene:a,events:d,onCreated:p,shadows:f=!1,linear:g=!1,flat:m=!1,legacy:v=!1,orthographic:y=!1,frameloop:w="always",dpr:b=[1,2],performance:x,raycaster:B,camera:_,onPointerMissed:C}=n,S=o.getState(),E=S.gl;if(!S.gl){const t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"===typeof i?await i(t):i;E=Xv(n)?n:new Zm(A(A({},t),i)),S.set({gl:E})}let T=S.raycaster;T||S.set({raycaster:T=new mp});const M=B||{},{params:F}=M,I=s(M,vv);if(Tv.equ(I,T,By)||zv(T,A({},I)),Tv.equ(F,T.params,By)||zv(T,{params:A(A({},T.params),F)}),!S.camera||S.camera===c&&!Tv.equ(c,_,By)){c=_;const e=null==_?void 0:_.isCamera,t=e?_:y?new dd(0,0,0,0,.1,1e3):new El(75,0,.1,1e3);e||(t.position.z=5,_&&(zv(t,_),t.manual||("aspect"in _||"left"in _||"right"in _||"bottom"in _||"top"in _)&&(t.manual=!0,t.updateProjectionMatrix())),S.camera||null!=_&&_.rotation||t.lookAt(0,0,0)),S.set({camera:t}),T.camera=t}if(!S.scene){let e;null!=a&&a.isScene?(e=a,Uv(e,o,"",{})):(e=new kl,Uv(e,o,"",{}),a&&zv(e,a)),S.set({scene:e})}d&&!S.events.handlers&&S.set({events:d(o)});const U=function(e,t){if(!t&&"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:i,left:r}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:r}}return!t&&"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:A({width:0,height:0,top:0,left:0},t)}(e,r);if(Tv.equ(U,S.size,By)||S.setSize(U.width,U.height,U.top,U.left),b&&S.viewport.dpr!==Sv(b)&&S.setDpr(b),S.frameloop!==w&&S.setFrameloop(w),S.onPointerMissed||S.set({onPointerMissed:C}),x&&!Tv.equ(x,S.performance,By)&&S.set(e=>({performance:A(A({},e.performance),x)})),!S.xr){var L;const e=(e,t)=>{const n=o.getState();"never"!==n.frameloop&&zy(e,!0,n,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||Qy(t)},n={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(L=E.xr)?void 0:L.addEventListener)&&n.connect(),S.set({xr:n})}if(E.shadowMap){const e=E.shadowMap.enabled,t=E.shadowMap.type;if(E.shadowMap.enabled=!!f,Tv.boo(f))E.shadowMap.type=kt;else if(Tv.str(f)){var R;const e={basic:Pt,percentage:Nt,soft:kt,variance:Dt};E.shadowMap.type=null!=(R=e[f])?R:kt}else Tv.obj(f)&&Object.assign(E.shadowMap,f);e===E.shadowMap.enabled&&t===E.shadowMap.type||(E.shadowMap.needsUpdate=!0)}return jo.enabled=!v,u||(E.outputColorSpace=g?Cr:_r,E.toneMapping=m?Sn:Fn),S.legacy!==v&&S.set(()=>({legacy:v})),S.linear!==g&&S.set(()=>({linear:g})),S.flat!==m&&S.set(()=>({flat:m})),!i||Tv.fun(i)||Xv(i)||Tv.equ(i,E,By)||zv(E,i),l=p,u=!0,t(),this},render(t){return u||h||this.configure(),h.then(()=>{by.updateContainer((0,xt.jsx)(Cy,{store:o,children:t,onCreated:l,rootElement:e}),a,null,()=>{})}),o},unmount(){Sy(e)}}}function Cy(e){let{store:t,children:n,onCreated:i,rootElement:r}=e;return xv(()=>{const e=t.getState();e.set(e=>({internal:A(A({},e.internal),{},{active:!0})})),i&&i(e),t.getState().events.connected||null==e.events.connect||e.events.connect(r)},[]),(0,xt.jsx)(Jv.Provider,{value:t,children:n})}function Sy(e,t){const n=xy.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),by.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var n,i,o,s;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(o=r.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(s=r.gl)&&s.xr&&r.xr.disconnect(),function(e){"Scene"!==e.type&&(null==e.dispose||e.dispose());for(const t in e){const n=e[t];"Scene"!==(null==n?void 0:n.type)&&(null==n||null==n.dispose||n.dispose())}}(r.scene),xy.delete(e),t&&t(e)}catch(EI){}},500)})}}const Ey=new Set,Ty=new Set,My=new Set;function Fy(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function Iy(e,t){switch(e){case"before":return Fy(Ey,t);case"after":return Fy(Ty,t);case"tail":return Fy(My,t)}}let Uy,Ly;function Ry(e,t,n){let i=t.clock.getDelta();"never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Uy=t.internal.subscribers;for(let r=0;r<Uy.length;r++)Ly=Uy[r],Ly.ref.current(Ly.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let Py,Ny,ky,Dy=!1,Oy=!1;function Hy(e){Ny=requestAnimationFrame(Hy),Dy=!0,Py=0,Iy("before",e),Oy=!0;for(const n of xy.values()){var t;ky=n.store.getState(),!ky.internal.active||!("always"===ky.frameloop||ky.internal.frames>0)||null!=(t=ky.gl.xr)&&t.isPresenting||(Py+=Ry(e,ky))}if(Oy=!1,Iy("after",e),0===Py)return Iy("tail",e),Dy=!1,cancelAnimationFrame(Ny)}function Qy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var n;if(!e)return xy.forEach(e=>Qy(e.store.getState(),t));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(e.internal.frames=t>1?Math.min(60,e.internal.frames+t):Oy?2:1,Dy||(Dy=!0,requestAnimationFrame(Hy)))}function zy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(t&&Iy("before",e),n)Ry(e,n,i);else for(const r of xy.values())Ry(e,r.store.getState());t&&Iy("after",e)}const Gy={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function jy(e){const{handlePointer:t}=qv(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Gy).reduce((e,n)=>A(A({},e),{},{[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=e.getState();if(null==i.disconnect||i.disconnect(),n(e=>({events:A(A({},e.events),{},{connected:t})})),i.handlers)for(const e in i.handlers){const n=i.handlers[e],[r,o]=Gy[e];t.addEventListener(r,n,{passive:o})}},disconnect:()=>{const{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(const e in n.handlers){const t=n.handlers[e],[i]=Gy[e];n.connected.removeEventListener(i,t)}t(e=>({events:A(A({},e.events),{},{connected:void 0})}))}}}}function Vy(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function Wy(){let{debounce:e,scroll:t,polyfill:n,offsetSize:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const o=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=(0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),A=e?"number"==typeof e?e:e.scroll:null,c=e?"number"==typeof e?e:e.resize:null,u=(0,i.useRef)(!1);(0,i.useEffect)(()=>(u.current=!0,()=>{u.current=!1}));const[h,d,p]=(0,i.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:i,bottom:o,right:s,x:A,y:c}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:i,bottom:o,right:s,x:A,y:c};l.current.element instanceof HTMLElement&&r&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),u.current&&!Xy(l.current.lastBounds,h)&&a(l.current.lastBounds=h)};return[e,c?Vy(e,c):e,A?Vy(e,A):e]},[a,r,A,c]);function f(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",p,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,t){(0,i.useEffect)(()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,t])}(p,!!t),function(e){(0,i.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(d),(0,i.useEffect)(()=>{f(),g()},[t,p,d]),(0,i.useEffect)(()=>f,[]),[e=>{!e||e===l.current.element||(f(),l.current.element=e,l.current.scrollContainers=Ky(e),g())},s,h]}function Ky(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...Ky(e.parentElement)]}const qy=["x","y","top","bottom","left","right","width","height"],Xy=(e,t)=>qy.every(n=>e[n]===t[n]),Jy=["ref","children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"];function Yy(t){let{ref:n,children:r,fallback:o,resize:a,style:l,gl:c,events:u=jy,eventSource:h,eventPrefix:d,shadows:p,linear:f,flat:g,legacy:m,orthographic:v,frameloop:y,dpr:w,performance:b,raycaster:x,camera:B,scene:_,onPointerMissed:C,onCreated:S}=t,E=s(t,Jy);i.useMemo(()=>function(e){if("function"===typeof e){const t="".concat(ly++);return oy[t]=e,t}Object.assign(oy,e)}(e),[]);const T=function(){const e=pv(),t=mv();return i.useMemo(()=>n=>{let{children:r}=n;const o=cv(e,!0,e=>e.type===i.StrictMode)?i.StrictMode:i.Fragment;return(0,xt.jsx)(o,{children:(0,xt.jsx)(t,{children:r})})},[e,t])}(),[M,F]=Wy(A({scroll:!0,debounce:{scroll:50,resize:0}},a)),I=i.useRef(null),U=i.useRef(null);i.useImperativeHandle(n,()=>I.current);const L=Bv(C),[R,P]=i.useState(!1),[N,k]=i.useState(!1);if(R)throw R;if(N)throw N;const D=i.useRef(null);xv(()=>{const e=I.current;if(F.width>0&&F.height>0&&e){async function t(){await D.current.configure({gl:c,scene:_,events:u,shadows:p,linear:f,flat:g,legacy:m,orthographic:v,frameloop:y,dpr:w,performance:b,raycaster:x,camera:B,size:F,onPointerMissed:function(){return null==L.current?void 0:L.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(h?(t=h)&&t.hasOwnProperty("current")?h.current:h:U.current),d&&e.setEvents({compute:(e,t)=>{const n=e[d+"X"],i=e[d+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),D.current.render((0,xt.jsx)(T,{children:(0,xt.jsx)(Cv,{set:k,children:(0,xt.jsx)(i.Suspense,{fallback:(0,xt.jsx)(_v,{set:P}),children:null!=r?r:null})})}))}D.current||(D.current=_y(e)),t()}}),i.useEffect(()=>{const e=I.current;if(e)return()=>Sy(e)},[]);const O=h?"none":"auto";return(0,xt.jsx)("div",A(A({ref:U,style:A({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O},l)},E),{},{children:(0,xt.jsx)("div",{ref:M,style:{width:"100%",height:"100%"},children:(0,xt.jsx)("canvas",{ref:I,style:{display:"block"},children:o})})}))}function Zy(e){return(0,xt.jsx)(dv,{children:(0,xt.jsx)(Yy,A({},e))})}function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$y.apply(null,arguments)}var ew=Object.defineProperty,tw=(e,t,n)=>(((e,t,n)=>{t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class nw{constructor(){tw(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}var iw=Object.defineProperty,rw=(e,t,n)=>(((e,t,n)=>{t in e?iw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const ow=new Vs(0,0,0,"YXZ"),sw=new Mo,aw={type:"change"},lw={type:"lock"},Aw={type:"unlock"},cw=Math.PI/2;class uw extends nw{constructor(e,t){super(),rw(this,"camera"),rw(this,"domElement"),rw(this,"isLocked"),rw(this,"minPolarAngle"),rw(this,"maxPolarAngle"),rw(this,"pointerSpeed"),rw(this,"onMouseMove",e=>{this.domElement&&!1!==this.isLocked&&(ow.setFromQuaternion(this.camera.quaternion),ow.y-=.002*e.movementX*this.pointerSpeed,ow.x-=.002*e.movementY*this.pointerSpeed,ow.x=Math.max(cw-this.maxPolarAngle,Math.min(cw-this.minPolarAngle,ow.x)),this.camera.quaternion.setFromEuler(ow),this.dispatchEvent(aw))}),rw(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(lw),this.isLocked=!0):(this.dispatchEvent(Aw),this.isLocked=!1))}),rw(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),rw(this,"connect",e=>{this.domElement=e||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),rw(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),rw(this,"dispose",()=>{this.disconnect()}),rw(this,"getObject",()=>this.camera),rw(this,"direction",new Mo(0,0,-1)),rw(this,"getDirection",e=>e.copy(this.direction).applyQuaternion(this.camera.quaternion)),rw(this,"moveForward",e=>{sw.setFromMatrixColumn(this.camera.matrix,0),sw.crossVectors(this.camera.up,sw),this.camera.position.addScaledVector(sw,e)}),rw(this,"moveRight",e=>{sw.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(sw,e)}),rw(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),rw(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}}const hw=["domElement","selector","onChange","onLock","onUnlock","enabled","makeDefault"],dw=["camera"],pw=i.forwardRef((e,t)=>{let{domElement:n,selector:r,onChange:o,onLock:a,onUnlock:l,enabled:A=!0,makeDefault:c}=e,u=s(e,hw);const{camera:h}=u,d=s(u,dw),p=$v(e=>e.setEvents),f=$v(e=>e.gl),g=$v(e=>e.camera),m=$v(e=>e.invalidate),v=$v(e=>e.events),y=$v(e=>e.get),w=$v(e=>e.set),b=h||g,x=n||v.connected||f.domElement,B=i.useMemo(()=>new uw(b),[b]);return i.useEffect(()=>{if(A){B.connect(x);const e=y().events.compute;return p({compute(e,t){const n=t.size.width/2,i=t.size.height/2;t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{B.disconnect(),p({compute:e})}}},[A,B]),i.useEffect(()=>{const e=e=>{m(),o&&o(e)};B.addEventListener("change",e),a&&B.addEventListener("lock",a),l&&B.addEventListener("unlock",l);const t=()=>B.lock(),n=r?Array.from(document.querySelectorAll(r)):[document];return n.forEach(e=>e&&e.addEventListener("click",t)),()=>{B.removeEventListener("change",e),a&&B.removeEventListener("lock",a),l&&B.removeEventListener("unlock",l),n.forEach(e=>e?e.removeEventListener("click",t):void 0)}},[o,a,l,r,B,m]),i.useEffect(()=>{if(c){const e=y().controls;return w({controls:B}),()=>w({controls:e})}},[c,B]),i.createElement("primitive",$y({ref:t,object:B},d))}),fw=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],gw=new Mo,mw=new Mo,vw=new Mo,yw=new Eo;function ww(e,t,n){const i=gw.setFromMatrixPosition(e.matrixWorld);i.project(t);const r=n.width/2,o=n.height/2;return[i.x*r+r,-i.y*o+o]}const bw=e=>Math.abs(e)<1e-10?0:e;function xw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="matrix3d(";for(let r=0;16!==r;r++)i+=bw(t[r]*e.elements[r])+(15!==r?",":")");return n+i}const Bw=(_w=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>xw(e,_w));var _w;const Cw=(e,t)=>xw(e,(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1])(t),"translate(-50%,-50%)");const Sw=i.forwardRef((e,t)=>{let{children:n,eps:r=.001,style:a,className:l,prepend:c,center:u,fullscreen:h,portal:d,distanceFactor:p,sprite:f=!1,transform:g=!1,occlude:m,onOcclude:v,castShadow:y,receiveShadow:w,material:b,geometry:x,zIndexRange:B=[16777271,0],calculatePosition:_=ww,as:C="div",wrapperClass:S,pointerEvents:E="auto"}=e,T=s(e,fw);const{gl:M,camera:F,scene:I,size:U,raycaster:L,events:R,viewport:P}=$v(),[N]=i.useState(()=>document.createElement(C)),k=i.useRef(null),D=i.useRef(null),O=i.useRef(0),H=i.useRef([0,0]),Q=i.useRef(null),z=i.useRef(null),G=(null==d?void 0:d.current)||R.connected||M.domElement.parentNode,j=i.useRef(null),V=i.useRef(!1),W=i.useMemo(()=>m&&"blending"!==m||Array.isArray(m)&&m.length&&function(e){return e&&"object"===typeof e&&"current"in e}(m[0]),[m]);i.useLayoutEffect(()=>{const e=M.domElement;m&&"blending"===m?(e.style.zIndex="".concat(Math.floor(B[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[m]),i.useLayoutEffect(()=>{if(D.current){const e=k.current=o.createRoot(N);if(I.updateMatrixWorld(),g)N.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=_(D.current,F,U);N.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return G&&(c?G.prepend(N):G.appendChild(N)),()=>{G&&G.removeChild(N),e.unmount()}}},[G,g]),i.useLayoutEffect(()=>{S&&(N.className=S)},[S]);const K=i.useMemo(()=>g?{position:"absolute",top:0,left:0,width:U.width,height:U.height,transformStyle:"preserve-3d",pointerEvents:"none"}:A(A({position:"absolute",transform:u?"translate3d(-50%,-50%,0)":"none"},h&&{top:-U.height/2,left:-U.width/2,width:U.width,height:U.height}),a),[a,u,h,U,g]),q=i.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);i.useLayoutEffect(()=>{var e,r;(V.current=!1,g)?null==(e=k.current)||e.render(i.createElement("div",{ref:Q,style:K},i.createElement("div",{ref:z,style:q},i.createElement("div",{ref:t,className:l,style:a,children:n})))):null==(r=k.current)||r.render(i.createElement("div",{ref:t,style:K,className:l,children:n}))});const X=i.useRef(!0);ey(e=>{if(D.current){F.updateMatrixWorld(),D.current.updateWorldMatrix(!0,!1);const e=g?H.current:_(D.current,F,U);if(g||Math.abs(O.current-F.zoom)>r||Math.abs(H.current[0]-e[0])>r||Math.abs(H.current[1]-e[1])>r){const t=function(e,t){const n=gw.setFromMatrixPosition(e.matrixWorld),i=mw.setFromMatrixPosition(t.matrixWorld),r=n.sub(i),o=t.getWorldDirection(vw);return r.angleTo(o)>Math.PI/2}(D.current,F);let n=!1;W&&(Array.isArray(m)?n=m.map(e=>e.current):"blending"!==m&&(n=[I]));const i=X.current;if(n){const e=function(e,t,n,i){const r=gw.setFromMatrixPosition(e.matrixWorld),o=r.clone();o.project(t),yw.set(o.x,o.y),n.setFromCamera(yw,t);const s=n.intersectObjects(i,!0);if(s.length){const e=s[0].distance;return r.distanceTo(n.ray.origin)<e}return!0}(D.current,F,L,n);X.current=e&&!t}else X.current=!t;i!==X.current&&(v?v(!X.current):N.style.display=X.current?"block":"none");const r=Math.floor(B[0]/2),o=m?W?[B[0],r]:[r-1,0]:B;if(N.style.zIndex="".concat(function(e,t,n){if(t instanceof El||t instanceof dd){const i=gw.setFromMatrixPosition(e.matrixWorld),r=mw.setFromMatrixPosition(t.matrixWorld),o=i.distanceTo(r),s=(n[1]-n[0])/(t.far-t.near),a=n[1]-s*t.far;return Math.round(s*o+a)}}(D.current,F,o)),g){const[e,t]=[U.width/2,U.height/2],n=F.projectionMatrix.elements[5]*t,{isOrthographicCamera:i,top:r,left:o,bottom:s,right:a}=F,l=Bw(F.matrixWorldInverse),A=i?"scale(".concat(n,")translate(").concat(bw(-(a+o)/2),"px,").concat(bw((r+s)/2),"px)"):"translateZ(".concat(n,"px)");let c=D.current.matrixWorld;f&&(c=F.matrixWorldInverse.clone().transpose().copyPosition(c).scale(D.current.scale),c.elements[3]=c.elements[7]=c.elements[11]=0,c.elements[15]=1),N.style.width=U.width+"px",N.style.height=U.height+"px",N.style.perspective=i?"":"".concat(n,"px"),Q.current&&z.current&&(Q.current.style.transform="".concat(A).concat(l,"translate(").concat(e,"px,").concat(t,"px)"),z.current.style.transform=Cw(c,1/((p||10)/400)))}else{const t=void 0===p?1:function(e,t){if(t instanceof dd)return t.zoom;if(t instanceof El){const n=gw.setFromMatrixPosition(e.matrixWorld),i=mw.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,o=n.distanceTo(i);return 1/(2*Math.tan(r/2)*o)}return 1}(D.current,F)*p;N.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(t,")")}H.current=e,O.current=F.zoom}}if(!W&&j.current&&!V.current)if(g){if(Q.current){const e=Q.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=F;if(t||x)T.scale&&(Array.isArray(T.scale)?T.scale instanceof Mo?j.current.scale.copy(T.scale.clone().divideScalar(1)):j.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):j.current.scale.setScalar(1/T.scale));else{const t=(p||10)/400,n=e.clientWidth*t,i=e.clientHeight*t;j.current.scale.set(n,i,1)}V.current=!0}}}else{const t=N.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/P.factor,n=t.clientWidth*e,i=t.clientHeight*e;j.current.scale.set(n,i,1),V.current=!0}j.current.lookAt(e.camera.position)}});const J=i.useMemo(()=>({vertexShader:g?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "}),[g]);return i.createElement("group",$y({},T,{ref:D}),m&&!W&&i.createElement("mesh",{castShadow:y,receiveShadow:w,ref:j},x||i.createElement("planeGeometry",null),b||i.createElement("shaderMaterial",{side:Qt,vertexShader:J.vertexShader,fragmentShader:J.fragmentShader})))});const Ew=function(e){let{annotation:t,currentUserId:n,onRemove:r,onSelect:o}=e;const s=(0,i.useRef)(),a=t.userId===n||t.user_id===n,l=[t.x||0,t.y||1,t.z||0],A=a?"#4CAF50":"#2196F3",c=a?"#4CAF50":"#2196F3",u=e=>{e.stopPropagation(),o&&o(t)};return(0,xt.jsxs)("group",{position:l,children:[(0,xt.jsxs)("mesh",{ref:s,onClick:u,children:[(0,xt.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,xt.jsx)("meshStandardMaterial",{color:A,emissive:A,emissiveIntensity:.5})]}),(0,xt.jsxs)("mesh",{position:[0,-l[1]/2,0],children:[(0,xt.jsx)("cylinderGeometry",{args:[.02,.02,l[1],8]}),(0,xt.jsx)("meshStandardMaterial",{color:A,transparent:!0,opacity:.3})]}),(0,xt.jsx)(Sw,{position:[0,.5,0],center:!0,distanceFactor:8,style:{pointerEvents:"auto",userSelect:"none"},children:(0,xt.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.85)",color:"white",padding:"8px 12px",borderRadius:"6px",border:"2px solid ".concat(c),minWidth:"120px",maxWidth:"250px",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",cursor:"pointer"},onClick:u,children:[(0,xt.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"4px",color:c},children:t.user_name||t.userName||"Anonymous"}),(0,xt.jsx)("div",{style:{fontSize:"13px",wordWrap:"break-word"},children:t.text}),a&&(0,xt.jsx)("button",{onClick:e=>{e.stopPropagation(),r&&a&&r(t.id)},style:{marginTop:"6px",padding:"4px 8px",fontSize:"11px",background:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%"},children:"Delete"})]})})]})},Tw=new WeakMap;class Mw extends Gh{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new Wh(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const a in t.attributeTypes){const e=t.attributeTypes[a];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[a]=e.name)}const n=JSON.stringify(t);if(Tw.has(e)){const t=Tw.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(r,o).then(n=>(i=n,new Promise((n,o)=>{i._callbacks[r]={resolve:n,reject:o},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),Tw.set(e,{key:n,promise:s}),s}_createGeometry(e){const t=new il;e.index&&t.setIndex(new Ha(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,o=i.array,s=i.itemSize;t.setAttribute(r,new Ha(o,s))}return t}_loadLibrary(e,t){const n=new Wh(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,i)=>{n.load(e,t,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=Fw.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Fw(){let e,t;function n(e,t,n,i,r,o){const s=o.num_components(),a=n.num_points()*s,l=a*r.BYTES_PER_ELEMENT,A=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,A,l,c);const u=new r(e.HEAPF32.buffer,c,a).slice();return e._free(c),{name:i,array:u,itemSize:s}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const i=r.buffer,o=r.taskConfig;t.then(e=>{const t=e.draco,s=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(i),i.byteLength);try{const e=function(e,t,i,r){const o=r.attributeIDs,s=r.attributeTypes;let a,l;const A=t.GetEncodedGeometryType(i);if(A===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeBufferToMesh(i,a);else{if(A!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeBufferToPointCloud(i,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const c={index:null,attributes:[]};for(const u in o){const i=self[s[u]];let l,A;if(r.useUniqueIDs)A=o[u],l=t.GetAttributeByUniqueId(a,A);else{if(A=t.GetAttributeId(a,e[o[u]]),-1===A)continue;l=t.GetAttribute(a,A)}c.attributes.push(n(e,t,a,u,i,l))}A===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){const i=n.num_faces(),r=3*i,o=4*r,s=e._malloc(o);t.GetTrianglesUInt32Array(n,o,s);const a=new Uint32Array(e.HEAPF32.buffer,s,r).slice();return e._free(s),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,s,a,o),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(l){console.error(l),self.postMessage({type:"error",id:r.id,error:l.message})}finally{t.destroy(a),t.destroy(s)}})}}}let Iw;const Uw=()=>{if(Iw)return Iw;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let n,i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const r=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const i=e.charCodeAt(t);n[t]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let i=0;for(let r=0;r<e.length;++r)n[i++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,i)}(i),{}).then(e=>{n=e.instance,n.exports.__wasm_call_ctors()});function o(e,t,i,r,o,s){const a=n.exports.sbrk,l=i+3&-4,A=a(l*r),c=a(o.length),u=new Uint8Array(n.exports.memory.buffer);u.set(o,c);const h=e(A,i,r,c,o.length);if(0===h&&s&&s(A,l,r),t.set(u.subarray(A,A+i*r)),a(A-a(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}const s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},a={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Iw={ready:r,supported:!0,decodeVertexBuffer(e,t,i,r,a){o(n.exports.meshopt_decodeVertexBuffer,e,t,i,r,n.exports[s[a]])},decodeIndexBuffer(e,t,i,r){o(n.exports.meshopt_decodeIndexBuffer,e,t,i,r)},decodeIndexSequence(e,t,i,r){o(n.exports.meshopt_decodeIndexSequence,e,t,i,r)},decodeGltfBuffer(e,t,i,r,l,A){o(n.exports[a[l]],e,t,i,r,n.exports[s[A]])}},Iw};function Lw(e,t){if(t===pr)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===gr||t===fr){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(n)if(t===gr)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2===0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const Rw=(()=>parseInt(Tt.replace(/\D+/g,"")))();function Pw(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(EI){return t}}const Nw="srgb",kw="srgb-linear";class Dw extends Gh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new jw(e)}),this.register(function(e){return new Vw(e)}),this.register(function(e){return new eb(e)}),this.register(function(e){return new tb(e)}),this.register(function(e){return new nb(e)}),this.register(function(e){return new Kw(e)}),this.register(function(e){return new qw(e)}),this.register(function(e){return new Xw(e)}),this.register(function(e){return new Jw(e)}),this.register(function(e){return new Gw(e)}),this.register(function(e){return new Yw(e)}),this.register(function(e){return new Ww(e)}),this.register(function(e){return new $w(e)}),this.register(function(e){return new Zw(e)}),this.register(function(e){return new Qw(e)}),this.register(function(e){return new ib(e)}),this.register(function(e){return new rb(e)})}load(e,t,n,i){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=bd.extractUrlBase(e);o=bd.resolveURL(t,this.path)}else o=bd.extractUrlBase(e);this.manager.itemStart(e);const s=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},a=new Wh(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{r.parse(n,o,function(n){t(n),r.manager.itemEnd(e)},s)}catch(EI){s(EI)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},s={};if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(Pw(new Uint8Array(e.slice(0,4)))===ob){try{o[Hw.KHR_BINARY_GLTF]=new lb(e)}catch(l){return void(i&&i(l))}r=JSON.parse(o[Hw.KHR_BINARY_GLTF].content)}else r=JSON.parse(Pw(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const a=new Rb(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){const e=this.pluginCallbacks[A](a);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let A=0;A<r.extensionsUsed.length;++A){const e=r.extensionsUsed[A],t=r.extensionsRequired||[];switch(e){case Hw.KHR_MATERIALS_UNLIT:o[e]=new zw;break;case Hw.KHR_DRACO_MESH_COMPRESSION:o[e]=new Ab(r,this.dracoLoader);break;case Hw.KHR_TEXTURE_TRANSFORM:o[e]=new cb;break;case Hw.KHR_MESH_QUANTIZATION:o[e]=new ub;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}a.setExtensions(o),a.setPlugins(s),a.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function Ow(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Hw={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Qw{constructor(e){this.parser=e,this.name=Hw.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let s;const a=new Ea(16777215);void 0!==o.color&&a.setRGB(o.color[0],o.color[1],o.color[2],kw);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":s=new fd(a),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new hd(a),s.distance=l;break;case"spot":s=new ad(a),s.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,s.angle=o.spot.outerConeAngle,s.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return s.position.set(0,0,0),s.decay=2,Tb(s,o),void 0!==o.intensity&&(s.intensity=o.intensity),s.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(s),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return n._getNodeRef(t.cache,r,e)})}}class zw{constructor(){this.name=Hw.KHR_MATERIALS_UNLIT}getMaterialType(){return Ia}extendParams(e,t,n){const i=[];e.color=new Ea(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],kw),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,Nw))}return Promise.all(i)}}class Gw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class jw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Eo(e,e)}return Promise.all(r)}}class Vw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class Ww{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Kw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ea(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],kw)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Nw)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class qw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Xw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Ea).setRGB(s[0],s[1],s[2],kw),Promise.all(r)}}class Jw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class Yw{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return t.specularColor=(new Ea).setRGB(s[0],s[1],s[2],kw),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Nw)),Promise.all(r)}}class Zw{constructor(e){this.parser=e,this.name=Hw.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class $w{constructor(e){this.parser=e,this.name=Hw.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?uh:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class eb{constructor(e){this.parser=e,this.name=Hw.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class tb{constructor(e){this.parser=e,this.name=Hw.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,o.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class nb{constructor(e){this.parser=e,this.name=Hw.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,o.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class ib{constructor(e){this.name=Hw.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(t){const n=e.byteOffset||0,i=e.byteLength||0,o=e.count,s=e.byteStride,a=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,s,a,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(o*s);return r.decodeGltfBuffer(new Uint8Array(t),o,s,a,e.mode,e.filter),t})})}return null}}class rb{constructor(e){this.name=Hw.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const a of i.primitives)if(a.mode!==fb.TRIANGLES&&a.mode!==fb.TRIANGLE_STRIP&&a.mode!==fb.TRIANGLE_FAN&&void 0!==a.mode)return null;const r=n.extensions[this.name].attributes,o=[],s={};for(const a in r)o.push(this.parser.getDependency("accessor",r[a]).then(e=>(s[a]=e,s[a])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const o of n){const e=new Ps,t=new Mo,n=new To,a=new Mo(1,1,1),l=new MA(o.geometry,o.material,i);for(let r=0;r<i;r++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,r),s.ROTATION&&n.fromBufferAttribute(s.ROTATION,r),s.SCALE&&a.fromBufferAttribute(s.SCALE,r),l.setMatrixAt(r,e.compose(t,n,a));for(const i in s)if("_COLOR_0"===i){const e=s[i];l.instanceColor=new bA(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&o.geometry.setAttribute(i,s[i]);la.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const ob="glTF",sb=1313821514,ab=5130562;class lb{constructor(e){this.name=Hw.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Pw(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ob)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(e,12);let r=0;for(;r<n;){const t=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===sb){const n=new Uint8Array(e,12+r,t);this.content=Pw(n)}else if(n===ab){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ab{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Hw.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(const A in o){const e=wb[A]||A.toLowerCase();s[e]=o[A]}for(const A in e.attributes){const t=wb[A]||A.toLowerCase();if(void 0!==o[A]){const i=n.accessors[e.attributes[A]],r=gb[i.componentType];l[t]=r.name,a[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,n){i.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],i=a[t];void 0!==i&&(n.normalized=i)}t(e)},s,l,kw,n)})})}}class cb{constructor(){this.name=Hw.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class ub{constructor(){this.name=Hw.KHR_MESH_QUANTIZATION}}class hb extends Sh{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,A=i-t,c=(n-t)/A,u=c*c,h=u*c,d=e*l,p=d-l,f=-2*h+3*u,g=h-u,m=1-f,v=g-u+c;for(let y=0;y!==s;y++){const e=o[p+y+s],t=o[p+y+a]*A,n=o[d+y+s],i=o[d+y]*A;r[y]=m*e+v*t+f*n+g*i}return r}}const db=new To;class pb extends hb{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return db.fromArray(r).normalize().toArray(r),r}}const fb={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},gb={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mb={9728:Vn,9729:Jn,9984:Wn,9985:Yn,9986:qn,9987:$n},vb={33071:Gn,33648:jn,10497:zn},yb={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wb=A(A({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},Rw>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),bb={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},xb={CUBICSPLINE:void 0,LINEAR:ar,STEP:sr},Bb="OPAQUE",_b="MASK",Cb="BLEND";function Sb(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new ch({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ot})),e.DefaultMaterial}function Eb(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function Tb(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Mb(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Fb(e){let t;const n=e.extensions&&e.extensions[Hw.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Ib(n.attributes):e.indices+":"+Ib(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+Ib(e.targets[i]);return t}function Ib(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function Ub(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Lb=new Ps;class Rb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ow,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||i&&r<98?this.textureLoader=new $h(this.options.manager):this.textureLoader=new Md(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Wh(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return Eb(r,o,i),Tb(o,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(o)})).then(function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,o]of e.children.entries())r(o,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Hw.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(e,r){n.load(bd.resolveURL(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=yb[i.type],t=gb[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new Ha(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(e){const r=e[0],o=yb[i.type],s=gb[i.componentType],a=s.BYTES_PER_ELEMENT,l=a*o,A=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,u=!0===i.normalized;let h,d;if(c&&c!==l){const e=Math.floor(A/c),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(h=new s(r,e*c,i.count*c/a),l=new Dl(h,c/a),t.cache.add(n,l)),d=new Hl(l,o,A%c/a,u)}else h=null===r?new s(i.count*o):new s(r,A,i.count*o),d=new Ha(h,o,u);if(void 0!==i.sparse){const t=yb.SCALAR,n=gb[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,A=new n(e[1],a,i.sparse.count*t),c=new s(e[2],l,i.sparse.count*o);null!==r&&(d=new Ha(d.array.slice(),d.itemSize,d.normalized));for(let e=0,i=A.length;e<i;e++){const t=A[e];if(d.setX(t,c[e*o]),o>=2&&d.setY(t,c[e*o+1]),o>=3&&d.setZ(t,c[e*o+2]),o>=4&&d.setW(t,c[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,r=this.json,o=r.textures[e],s=r.images[t],a=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=o.name||s.name||"",""===t.name&&"string"===typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(r.samplers||{})[o.sampler]||{};return t.magFilter=mb[n.magFilter]||Jn,t.minFilter=mb[n.minFilter]||$n,t.wrapS=vb[n.wrapS]||zn,t.wrapT=vb[n.wrapT]||zn,i.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[a]=l,l}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const o=i.images[e],s=self.URL||self.webkitURL;let a=o.uri||"",l=!1;if(void 0!==o.bufferView)a=n.getDependency("bufferView",o.bufferView).then(function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return a=s.createObjectURL(t),a});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const A=Promise.resolve(a).then(function(e){return new Promise(function(n,i){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new es(e);t.needsUpdate=!0,n(t)}),t.load(bd.resolveURL(e,r.path),o,void 0,i)})}).then(function(e){var t;return!0===l&&s.revokeObjectURL(a),Tb(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e});return this.sourceCache[e]=A,A}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[Hw.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[Hw.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[Hw.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==i&&("number"===typeof i&&(i=3001===i?Nw:kw),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Nw?3001:3e3),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new wc,Fa.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new sc,Fa.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||o){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return ch}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let o;const s={},a=[];if((r.extensions||{})[Hw.KHR_MATERIALS_UNLIT]){const e=i[Hw.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),a.push(e.extendParams(s,r,t))}else{const n=r.pbrMetallicRoughness||{};if(s.color=new Ea(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],kw),s.opacity=e[3]}void 0!==n.baseColorTexture&&a.push(t.assignTexture(s,"map",n.baseColorTexture,Nw)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(a.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),a.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),a.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===r.doubleSided&&(s.side=Qt);const l=r.alphaMode||Bb;if(l===Cb?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===_b&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==Ia&&(a.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new Eo(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==Ia&&(a.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==Ia){const e=r.emissiveFactor;s.emissive=(new Ea).setRGB(e[0],e[1],e[2],kw)}return void 0!==r.emissiveTexture&&o!==Ia&&a.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,Nw)),Promise.all(a).then(function(){const n=new o(s);return r.name&&(n.name=r.name),Tb(n,r),t.associations.set(n,{materials:e}),r.extensions&&Eb(i,n,r),n})}createUniqueName(e){const t=op.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[Hw.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return Pb(n,e,t)})}const o=[];for(let s=0,a=e.length;s<a;s++){const n=e[s],a=Fb(n),l=i[a];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[Hw.KHR_DRACO_MESH_COMPRESSION]?r(n):Pb(new il,n,t),i[a]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],o=r.primitives,s=[];for(let a=0,l=o.length;a<l;a++){const e=void 0===o[a].material?Sb(this.cache):this.getDependency("material",o[a].material);s.push(e)}return s.push(t.loadGeometries(o)),Promise.all(s).then(function(n){const s=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let c=0,u=a.length;c<u;c++){const n=a[c],A=o[c];let u;const h=s[c];if(A.mode===fb.TRIANGLES||A.mode===fb.TRIANGLE_STRIP||A.mode===fb.TRIANGLE_FAN||void 0===A.mode)u=!0===r.isSkinnedMesh?new fA(n,h):new fl(n,h),!0===u.isSkinnedMesh&&u.normalizeSkinWeights(),A.mode===fb.TRIANGLE_STRIP?u.geometry=Lw(u.geometry,fr):A.mode===fb.TRIANGLE_FAN&&(u.geometry=Lw(u.geometry,gr));else if(A.mode===fb.LINES)u=new vc(n,h);else if(A.mode===fb.LINE_STRIP)u=new pc(n,h);else if(A.mode===fb.LINE_LOOP)u=new yc(n,h);else{if(A.mode!==fb.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);u=new Cc(n,h)}Object.keys(u.geometry.morphAttributes).length>0&&Mb(u,r),u.name=t.createUniqueName(r.name||"mesh_"+e),Tb(u,r),A.extensions&&Eb(i,u,A),t.assignFinalMaterial(u),l.push(u)}for(let i=0,r=l.length;i<r;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return r.extensions&&Eb(i,l[0],r),l[0];const A=new Ul;r.extensions&&Eb(i,A,r),t.associations.set(A,{meshes:e});for(let e=0,t=l.length;e<t;e++)A.add(l[e]);return A})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new El(So.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new dd(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Tb(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),i=e,r=[],o=[];for(let s=0,a=i.length;s<a;s++){const e=i[s];if(e){r.push(e);const t=new Ps;null!==n&&t.fromArray(n.array,16*s),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}return new wA(r,o)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,o=[],s=[],a=[],l=[],A=[];for(let c=0,u=i.channels.length;c<u;c++){const e=i.channels[c],t=i.samplers[e.sampler],n=e.target,r=n.node,u=void 0!==i.parameters?i.parameters[t.input]:t.input,h=void 0!==i.parameters?i.parameters[t.output]:t.output;void 0!==n.node&&(o.push(this.getDependency("node",r)),s.push(this.getDependency("accessor",u)),a.push(this.getDependency("accessor",h)),l.push(t),A.push(n))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(A)]).then(function(e){const t=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=[];for(let r=0,A=t.length;r<A;r++){const e=t[r],A=i[r],c=o[r],u=s[r],h=a[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const d=n._createAnimationTracks(e,A,c,u,h);if(d)for(let t=0;t<d.length;t++)l.push(d[t])}return new Dh(r,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],o=n.children||[];for(let a=0,l=o.length;a<l;a++)r.push(t.getDependency("node",o[a]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),s]).then(function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,Lb)});for(let r=0,o=n.length;r<o;r++)t.add(n[r]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"",s=[],a=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return a&&s.push(a),void 0!==r.camera&&s.push(i.getDependency("camera",r.camera).then(function(e){return i._getNodeRef(i.cameraCache,r.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){s.push(e)}),this.nodeCache[e]=Promise.all(s).then(function(t){let s;if(s=!0===r.isBone?new gA:t.length>1?new Ul:1===t.length?t[0]:new la,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(r.name&&(s.userData.name=r.name,s.name=o),Tb(s,r),r.extensions&&Eb(n,s,r),void 0!==r.matrix){const e=new Ps;e.fromArray(r.matrix),s.applyMatrix4(e)}else void 0!==r.translation&&s.position.fromArray(r.translation),void 0!==r.rotation&&s.quaternion.fromArray(r.rotation),void 0!==r.scale&&s.scale.fromArray(r.scale);return i.associations.has(s)||i.associations.set(s,{}),i.associations.get(s).nodes=e,s}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Ul;n.name&&(r.name=i.createUniqueName(n.name)),Tb(r,n),n.extensions&&Eb(t,r,n);const o=n.nodes||[],s=[];for(let a=0,l=o.length;a<l;a++)s.push(i.getDependency("node",o[a]));return Promise.all(s).then(function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Fa||n instanceof es)&&t.set(n,r);return e.traverse(e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)}),t})(r),r})}_createAnimationTracks(e,t,n,i,r){const o=[],s=e.name?e.name:e.uuid,a=[];let l;switch(bb[r.path]===bb.weights?e.traverse(function(e){e.morphTargetInfluences&&a.push(e.name?e.name:e.uuid)}):a.push(s),bb[r.path]){case bb.weights:l=Lh;break;case bb.rotation:l=Ph;break;case bb.position:case bb.scale:l=kh;break;default:if(1===n.itemSize)l=Lh;else l=kh}const A=void 0!==i.interpolation?xb[i.interpolation]:ar,c=this._getArrayFromAccessor(n);for(let u=0,h=a.length;u<h;u++){const e=new l(a[u]+"."+bb[r.path],t.array,c,A);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=Ub(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof Ph?pb:hb)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Pb(e,t,n){const i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}for(const s in i){const t=wb[s]||s.toLowerCase();t in e.attributes||r.push(o(i[s],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(i)}return Tb(e,t),function(e,t,n){const i=t.attributes,r=new ls;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Mo(t[0],t[1],t[2]),new Mo(o[0],o[1],o[2])),e.normalized){const t=Ub(gb[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new Mo,t=new Mo;for(let i=0,r=o.length;i<r;i++){const r=o[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),i.normalized){const e=Ub(gb[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const s=new Ss;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,o=!1;for(let A=0,c=t.length;A<c;A++){const e=t[A];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(e);const s=[],a=[],l=[];for(let A=0,c=t.length;A<c;A++){const c=t[A];if(i){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(t){const n=t[0],s=t[1],a=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}let Nb=null,kb="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Db(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return i=>{n&&n(i),e&&(Nb||(Nb=new Mw),Nb.setDecoderPath("string"===typeof e?e:kb),i.setDRACOLoader(Nb)),t&&i.setMeshoptDecoder(Uw())}}const Ob=(e,t,n,i)=>iy(Dw,e,Db(t,n,i));Ob.preload=(e,t,n,i)=>iy.preload(Dw,e,Db(t,n,i)),Ob.clear=e=>iy.clear(Dw,e),Ob.setDecoderPath=e=>{kb=e};function Hb(e){let{color:t,scale:n=1}=e;const i=Ob("/models/spaceman.glb");return i&&i.scene?(0,xt.jsx)("primitive",{object:i.scene.clone(),scale:n,rotation:[0,Math.PI,0]}):null}function Qb(e){let{color:t,scale:n=1}=e;const[r,o]=(0,i.useState)(!1),s=()=>(0,xt.jsxs)("group",{scale:n,children:[(0,xt.jsxs)("mesh",{position:[0,0,0],children:[(0,xt.jsx)("cylinderGeometry",{args:[.25,.3,1.5,8]}),(0,xt.jsx)("meshStandardMaterial",{color:t,emissive:t,emissiveIntensity:.3})]}),(0,xt.jsxs)("mesh",{position:[0,1,0],children:[(0,xt.jsx)("sphereGeometry",{args:[.35,16,16]}),(0,xt.jsx)("meshStandardMaterial",{color:t,emissive:t,emissiveIntensity:.4})]})]});return r?(0,xt.jsx)(s,{}):(0,xt.jsx)(i.Suspense,{fallback:(0,xt.jsx)(s,{}),children:(0,xt.jsx)(Hb,{color:t,scale:n})})}const zb=function(e){let{userId:t,userName:n,position:r,rotation:o}=e;const s=(0,i.useRef)(),a=(0,i.useRef)(),l=r||{x:0,y:1.6,z:0},A=o||{pitch:0,yaw:0};ey(e=>{a.current&&(a.current.position.y=.1*Math.sin(2*e.clock.elapsedTime)+1.8)});const c=(e=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"];return t[e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%t.length]})(t);return(0,xt.jsxs)("group",{ref:s,position:[l.x,l.y,l.z],children:[(0,xt.jsx)("group",{rotation:[0,A.yaw,0],children:(0,xt.jsx)(Qb,{color:c,scale:.8})}),(0,xt.jsxs)("mesh",{ref:a,position:[0,1.8,0],rotation:[Math.PI/2,0,-A.yaw],children:[(0,xt.jsx)("coneGeometry",{args:[.15,.5,8]}),(0,xt.jsx)("meshStandardMaterial",{color:"#ffffff",emissive:"#ffffff",emissiveIntensity:.5,transparent:!0,opacity:.8})]}),(0,xt.jsx)("group",{rotation:[A.pitch,A.yaw,0],children:(0,xt.jsxs)("mesh",{position:[0,1.2,-1],children:[(0,xt.jsx)("cylinderGeometry",{args:[.02,.02,2,8]}),(0,xt.jsx)("meshStandardMaterial",{color:c,transparent:!0,opacity:.3})]})}),(0,xt.jsx)(Sw,{position:[0,2.2,0],center:!0,distanceFactor:8,style:{pointerEvents:"none",userSelect:"none"},children:(0,xt.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",whiteSpace:"nowrap",border:"2px solid ".concat(c),boxShadow:"0 2px 8px rgba(0,0,0,0.5)"},children:n})}),(0,xt.jsxs)("mesh",{position:[0,.01-l.y,0],rotation:[-Math.PI/2,0,0],children:[(0,xt.jsx)("circleGeometry",{args:[.5,16]}),(0,xt.jsx)("meshBasicMaterial",{color:c,transparent:!0,opacity:.2})]})]})};var Gb=n(2284),jb=Uint8Array,Vb=Uint16Array,Wb=Int32Array,Kb=new jb([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qb=new jb([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xb=new jb([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jb=function(e,t){for(var n=new Vb(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new Wb(n[30]);for(i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return{b:n,r:r}},Yb=Jb(Kb,2),Zb=Yb.b,$b=Yb.r;Zb[28]=258,$b[258]=28;for(var ex=Jb(qb,0),tx=(ex.b,ex.r),nx=new Vb(32768),ix=0;ix<32768;++ix){var rx=(43690&ix)>>1|(21845&ix)<<1;rx=(61680&(rx=(52428&rx)>>2|(13107&rx)<<2))>>4|(3855&rx)<<4,nx[ix]=((65280&rx)>>8|(255&rx)<<8)>>1}var ox=function(e,t,n){for(var i=e.length,r=0,o=new Vb(t);r<i;++r)e[r]&&++o[e[r]-1];var s,a=new Vb(t);for(r=1;r<t;++r)a[r]=a[r-1]+o[r-1]<<1;if(n){s=new Vb(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var A=r<<4|e[r],c=t-e[r],u=a[e[r]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)s[nx[u]>>l]=A}else for(s=new Vb(i),r=0;r<i;++r)e[r]&&(s[r]=nx[a[e[r]-1]++]>>15-e[r]);return s},sx=new jb(288);for(ix=0;ix<144;++ix)sx[ix]=8;for(ix=144;ix<256;++ix)sx[ix]=9;for(ix=256;ix<280;++ix)sx[ix]=7;for(ix=280;ix<288;++ix)sx[ix]=8;var ax=new jb(32);for(ix=0;ix<32;++ix)ax[ix]=5;var lx=ox(sx,9,0),Ax=ox(ax,5,0),cx=function(e){return(e+7)/8|0},ux=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new jb(e.subarray(t,n))},hx=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},dx=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},px=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,o=n.slice();if(!r)return{t:bx,l:0};if(1==r){var s=new jb(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],A=0,c=1,u=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=r-1;)a=n[n[A].f<n[u].f?A++:u++],l=n[A!=c&&n[A].f<n[u].f?A++:u++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(i=1;i<r;++i)o[i].s>h&&(h=o[i].s);var d=new Vb(h+1),p=fx(n[c-1],d,0);if(p>t){i=0;var f=0,g=p-t,m=1<<g;for(o.sort(function(e,t){return d[t.s]-d[e.s]||e.f-t.f});i<r;++i){var v=o[i].s;if(!(d[v]>t))break;f+=m-(1<<p-d[v]),d[v]=t}for(f>>=g;f>0;){var y=o[i].s;d[y]<t?f-=1<<t-d[y]++-1:++i}for(;i>=0&&f;--i){var w=o[i].s;d[w]==t&&(--d[w],++f)}p=t}return{t:new jb(d),l:p}},fx=function(e,t,n){return-1==e.s?Math.max(fx(e.l,t,n+1),fx(e.r,t,n+1)):t[e.s]=n},gx=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Vb(++t),i=0,r=e[0],o=1,s=function(e){n[i++]=e},a=1;a<=t;++a)if(e[a]==r&&a!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=e[a]}return{c:n.subarray(0,i),n:t}},mx=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},vx=function(e,t,n){var i=n.length,r=cx(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var o=0;o<i;++o)e[r+o+4]=n[o];return 8*(r+4+i)},yx=function(e,t,n,i,r,o,s,a,l,A,c){hx(t,c++,n),++r[256];for(var u=px(r,15),h=u.t,d=u.l,p=px(o,15),f=p.t,g=p.l,m=gx(h),v=m.c,y=m.n,w=gx(f),b=w.c,x=w.n,B=new Vb(19),_=0;_<v.length;++_)++B[31&v[_]];for(_=0;_<b.length;++_)++B[31&b[_]];for(var C=px(B,7),S=C.t,E=C.l,T=19;T>4&&!S[Xb[T-1]];--T);var M,F,I,U,L=A+5<<3,R=mx(r,sx)+mx(o,ax)+s,P=mx(r,h)+mx(o,f)+s+14+3*T+mx(B,S)+2*B[16]+3*B[17]+7*B[18];if(l>=0&&L<=R&&L<=P)return vx(t,c,e.subarray(l,l+A));if(hx(t,c,1+(P<R)),c+=2,P<R){M=ox(h,d,0),F=h,I=ox(f,g,0),U=f;var N=ox(S,E,0);hx(t,c,y-257),hx(t,c+5,x-1),hx(t,c+10,T-4),c+=14;for(_=0;_<T;++_)hx(t,c+3*_,S[Xb[_]]);c+=3*T;for(var k=[v,b],D=0;D<2;++D){var O=k[D];for(_=0;_<O.length;++_){var H=31&O[_];hx(t,c,N[H]),c+=S[H],H>15&&(hx(t,c,O[_]>>5&127),c+=O[_]>>12)}}}else M=lx,F=sx,I=Ax,U=ax;for(_=0;_<a;++_){var Q=i[_];if(Q>255){dx(t,c,M[(H=Q>>18&31)+257]),c+=F[H+257],H>7&&(hx(t,c,Q>>23&31),c+=Kb[H]);var z=31&Q;dx(t,c,I[z]),c+=U[z],z>3&&(dx(t,c,Q>>5&8191),c+=qb[z])}else dx(t,c,M[Q]),c+=F[Q]}return dx(t,c,M[256]),c+F[256]},wx=new Wb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bx=new jb(0),xx=function(e,t,n,i,r,o){var s=o.z||e.length,a=new jb(i+s+5*(1+Math.ceil(s/7e3))+r),l=a.subarray(i,a.length-r),A=o.l,c=7&(o.r||0);if(t){c&&(l[0]=o.r>>3);for(var u=wx[t-1],h=u>>13,d=8191&u,p=(1<<n)-1,f=o.p||new Vb(32768),g=o.h||new Vb(p+1),m=Math.ceil(n/3),v=2*m,y=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<v)&p},w=new Wb(25e3),b=new Vb(288),x=new Vb(32),B=0,_=0,C=o.i||0,S=0,E=o.w||0,T=0;C+2<s;++C){var M=y(C),F=32767&C,I=g[M];if(f[F]=I,g[M]=F,E<=C){var U=s-C;if((B>7e3||S>24576)&&(U>423||!A)){c=yx(e,l,0,w,b,x,_,S,T,C-T,c),S=B=_=0,T=C;for(var L=0;L<286;++L)b[L]=0;for(L=0;L<30;++L)x[L]=0}var R=2,P=0,N=d,k=F-I&32767;if(U>2&&M==y(C-k))for(var D=Math.min(h,U)-1,O=Math.min(32767,C),H=Math.min(258,U);k<=O&&--N&&F!=I;){if(e[C+R]==e[C+R-k]){for(var Q=0;Q<H&&e[C+Q]==e[C+Q-k];++Q);if(Q>R){if(R=Q,P=k,Q>D)break;var z=Math.min(k,Q-2),G=0;for(L=0;L<z;++L){var j=C-k+L&32767,V=j-f[j]&32767;V>G&&(G=V,I=j)}}}k+=(F=I)-(I=f[F])&32767}if(P){w[S++]=268435456|$b[R]<<18|tx[P];var W=31&$b[R],K=31&tx[P];_+=Kb[W]+qb[K],++b[257+W],++x[K],E=C+R,++B}else w[S++]=e[C],++b[e[C]]}}for(C=Math.max(C,E);C<s;++C)w[S++]=e[C],++b[e[C]];c=yx(e,l,A,w,b,x,_,S,T,C-T,c),A||(o.r=7&c|l[c/8|0]<<3,c-=7,o.h=g,o.p=f,o.i=C,o.w=E)}else{for(C=o.w||0;C<s+A;C+=65535){var q=C+65535;q>=s&&(l[c/8|0]=A,q=s),c=vx(l,c+1,e.subarray(C,q))}o.i=s}return ux(a,0,i+cx(c)+r)},Bx=function(){var e=1,t=0;return{p:function(n){for(var i=e,r=t,o=0|n.length,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)r+=i+=n[s];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}e=i,t=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},_x=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new jb(o.length+e.length);s.set(o),s.set(e,o.length),e=s,r.w=o.length}return xx(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},Cx=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Sx=function(e,t){var n=t.level,i=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var r=Bx();r.p(t.dictionary),Cx(e,2,r.d())}};function Ex(e,t){t||(t={});var n=Bx();n.p(e);var i=_x(e,t,t.dictionary?6:2,4);return Sx(i,t),Cx(i,i.length-4,n.d()),i}var Tx="undefined"!=typeof TextDecoder&&new TextDecoder;try{Tx.decode(bx,{stream:!0})}catch(EI){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function Mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Fx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,A=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){A=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(A)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Mx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mx(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const Ux=new TextEncoder;const Lx=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),Rx={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Px{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"byteLength",void 0),(0,a.A)(this,"byteOffset",void 0),(0,a.A)(this,"length",void 0),(0,a.A)(this,"offset",void 0),(0,a.A)(this,"lastWrittenByte",void 0),(0,a.A)(this,"littleEndian",void 0),(0,a.A)(this,"_data",void 0),(0,a.A)(this,"_mark",void 0),(0,a.A)(this,"_marks",void 0);let n=!1;"number"===typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,r=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof Px)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),this.lastWrittenByte=n?r:0,this.buffer=e,this.length=r,this.byteLength=r,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,r),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const n=Rx[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,r=this.buffer.slice(i,i+n);if(this.littleEndian===Lx&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(i,i+n));e.reverse();const r=new Rx[t](e.buffer);return this.offset+=n,r.reverse(),r}const o=new Rx[t](r);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Ix(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return Ix(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return Ux.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Nx(e){let t=e.length;for(;--t>=0;)e[t]=0}const kx=256,Dx=286,Ox=30,Hx=15,Qx=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),zx=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Gx=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vx=new Array(576);Nx(Vx);const Wx=new Array(60);Nx(Wx);const Kx=new Array(512);Nx(Kx);const qx=new Array(256);Nx(qx);const Xx=new Array(29);Nx(Xx);const Jx=new Array(Ox);function Yx(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let Zx,$x,eB;function tB(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Nx(Jx);const nB=e=>e<256?Kx[e]:Kx[256+(e>>>7)],iB=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},rB=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,iB(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},oB=(e,t,n)=>{rB(e,n[2*t],n[2*t+1])},sB=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},aB=(e,t,n)=>{const i=new Array(16);let r,o,s=0;for(r=1;r<=Hx;r++)s=s+n[r-1]<<1,i[r]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=sB(i[t]++,t))}},lB=e=>{let t;for(t=0;t<Dx;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Ox;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},AB=e=>{e.bi_valid>8?iB(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},cB=(e,t,n,i)=>{const r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]},uB=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&cB(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!cB(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},hB=(e,t,n)=>{let i,r,o,s,a=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+a++],i+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===i?oB(e,r,t):(o=qx[r],oB(e,o+kx+1,t),s=Qx[o],0!==s&&(r-=Xx[o],rB(e,r,s)),i--,o=nB(i),oB(e,o,n),s=zx[o],0!==s&&(i-=Jx[o],rB(e,i,s)))}while(a<e.sym_next);oB(e,256,t)},dB=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,l,A=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=A=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=A<2?++A:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[2*l+1]);for(t.max_code=A,s=e.heap_len>>1;s>=1;s--)uB(e,n,s);l=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],uB(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*l]=n[2*s]+n[2*a],e.depth[l]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=l,e.heap[1]=l++,uB(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let A,c,u,h,d,p,f=0;for(h=0;h<=Hx;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,A=e.heap_max+1;A<573;A++)c=e.heap[A],h=n[2*n[2*c+1]+1]+1,h>l&&(h=l,f++),n[2*c+1]=h,c>i||(e.bl_count[h]++,d=0,c>=a&&(d=s[c-a]),p=n[2*c],e.opt_len+=p*(h+d),o&&(e.static_len+=p*(r[2*c+1]+d)));if(0!==f){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,f-=2}while(f>0);for(h=l;0!==h;h--)for(c=e.bl_count[h];0!==c;)u=e.heap[--A],u>i||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),c--)}})(e,t),aB(n,A,e.bl_count)},pB=(e,t,n)=>{let i,r,o=-1,s=t[1],a=0,l=7,A=4;for(0===s&&(l=138,A=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++a<l&&r===s||(a<A?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=r,0===s?(l=138,A=3):r===s?(l=6,A=3):(l=7,A=4))},fB=(e,t,n)=>{let i,r,o=-1,s=t[1],a=0,l=7,A=4;for(0===s&&(l=138,A=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++a<l&&r===s)){if(a<A)do{oB(e,r,e.bl_tree)}while(0!==--a);else 0!==r?(r!==o&&(oB(e,r,e.bl_tree),a--),oB(e,16,e.bl_tree),rB(e,a-3,2)):a<=10?(oB(e,17,e.bl_tree),rB(e,a-3,3)):(oB(e,18,e.bl_tree),rB(e,a-11,7));a=0,o=r,0===s?(l=138,A=3):r===s?(l=6,A=3):(l=7,A=4)}};let gB=!1;const mB=(e,t,n,i)=>{rB(e,0+(i?1:0),3),AB(e),iB(e,n),iB(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var vB=e=>{gB||((()=>{let e,t,n,i,r;const o=new Array(16);for(n=0,i=0;i<28;i++)for(Xx[i]=n,e=0;e<1<<Qx[i];e++)qx[n++]=i;for(qx[n-1]=i,r=0,i=0;i<16;i++)for(Jx[i]=r,e=0;e<1<<zx[i];e++)Kx[r++]=i;for(r>>=7;i<Ox;i++)for(Jx[i]=r<<7,e=0;e<1<<zx[i]-7;e++)Kx[256+r++]=i;for(t=0;t<=Hx;t++)o[t]=0;for(e=0;e<=143;)Vx[2*e+1]=8,e++,o[8]++;for(;e<=255;)Vx[2*e+1]=9,e++,o[9]++;for(;e<=279;)Vx[2*e+1]=7,e++,o[7]++;for(;e<=287;)Vx[2*e+1]=8,e++,o[8]++;for(aB(Vx,287,o),e=0;e<Ox;e++)Wx[2*e+1]=5,Wx[2*e]=sB(e,5);Zx=new Yx(Vx,Qx,257,Dx,Hx),$x=new Yx(Wx,zx,0,Ox,Hx),eB=new Yx(new Array(0),Gx,0,19,7)})(),gB=!0),e.l_desc=new tB(e.dyn_ltree,Zx),e.d_desc=new tB(e.dyn_dtree,$x),e.bl_desc=new tB(e.bl_tree,eB),e.bi_buf=0,e.bi_valid=0,lB(e)},yB=(e,t,n,i)=>{let r,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<kx;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),dB(e,e.l_desc),dB(e,e.d_desc),s=(e=>{let t;for(pB(e,e.dyn_ltree,e.l_desc.max_code),pB(e,e.dyn_dtree,e.d_desc.max_code),dB(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*jx[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?mB(e,t,n,i):4===e.strategy||o===r?(rB(e,2+(i?1:0),3),hB(e,Vx,Wx)):(rB(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(rB(e,t-257,5),rB(e,n-1,5),rB(e,i-4,4),r=0;r<i;r++)rB(e,e.bl_tree[2*jx[r]+1],3);fB(e,e.dyn_ltree,t-1),fB(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),hB(e,e.dyn_ltree,e.dyn_dtree)),lB(e),i&&AB(e)},wB=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(qx[n]+kx+1)]++,e.dyn_dtree[2*nB(t)]++),e.sym_next===e.sym_end),bB=e=>{rB(e,2,3),oB(e,256,Vx),(e=>{16===e.bi_valid?(iB(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},xB={_tr_init:vB,_tr_stored_block:mB,_tr_flush_block:yB,_tr_tally:wB,_tr_align:bB};var BB=(e,t,n,i)=>{let r=65535&e,o=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+t[i++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16};const _B=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var CB=(e,t,n,i)=>{const r=_B,o=i+n;e^=-1;for(let s=i;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},SB={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},EB={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:TB,_tr_stored_block:MB,_tr_flush_block:FB,_tr_tally:IB,_tr_align:UB}=xB,{Z_NO_FLUSH:LB,Z_PARTIAL_FLUSH:RB,Z_FULL_FLUSH:PB,Z_FINISH:NB,Z_BLOCK:kB,Z_OK:DB,Z_STREAM_END:OB,Z_STREAM_ERROR:HB,Z_DATA_ERROR:QB,Z_BUF_ERROR:zB,Z_DEFAULT_COMPRESSION:GB,Z_FILTERED:jB,Z_HUFFMAN_ONLY:VB,Z_RLE:WB,Z_FIXED:KB,Z_DEFAULT_STRATEGY:qB,Z_UNKNOWN:XB,Z_DEFLATED:JB}=EB,YB=258,ZB=262,$B=42,e_=113,t_=666,n_=(e,t)=>(e.msg=SB[t],t),i_=e=>2*e-(e>4?9:0),r_=e=>{let t=e.length;for(;--t>=0;)e[t]=0},o_=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)};let s_=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const a_=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},l_=(e,t)=>{FB(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a_(e.strm)},A_=(e,t)=>{e.pending_buf[e.pending++]=t},c_=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},u_=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=BB(e.adler,t,r,n):2===e.state.wrap&&(e.adler=CB(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},h_=(e,t)=>{let n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-ZB?e.strstart-(e.w_size-ZB):0,A=e.window,c=e.w_mask,u=e.prev,h=e.strstart+YB;let d=A[o+s-1],p=A[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,A[n+s]===p&&A[n+s-1]===d&&A[n]===A[o]&&A[++n]===A[o+1]){o+=2,n++;do{}while(A[++o]===A[++n]&&A[++o]===A[++n]&&A[++o]===A[++n]&&A[++o]===A[++n]&&A[++o]===A[++n]&&A[++o]===A[++n]&&A[++o]===A[++n]&&A[++o]===A[++n]&&o<h);if(i=YB-(h-o),o=h-YB,i>s){if(e.match_start=t,s=i,i>=a)break;d=A[o+s-1],p=A[o+s]}}}while((t=u[t&c])>l&&0!==--r);return s<=e.lookahead?s:e.lookahead},d_=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ZB)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),o_(e),i+=t),0===e.strm.avail_in)break;if(n=u_(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=s_(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=s_(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ZB&&0!==e.strm.avail_in)},p_=(e,t)=>{let n,i,r,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>r&&(n=r),n<o&&(0===n&&t!==NB||t===LB||n!==i+e.strm.avail_in))break;s=t===NB&&n===i+e.strm.avail_in?1:0,MB(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,a_(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(u_(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==LB&&t!==NB&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(u_(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,o=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=o||(i||t===NB)&&t!==LB&&0===e.strm.avail_in&&i<=r)&&(n=i>r?r:i,s=t===NB&&0===e.strm.avail_in&&n===i?1:0,MB(e,e.block_start,n,s),e.block_start+=n,a_(e.strm)),s?3:1)},f_=(e,t)=>{let n,i;for(;;){if(e.lookahead<ZB){if(d_(e),e.lookahead<ZB&&t===LB)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=s_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ZB&&(e.match_length=h_(e,n)),e.match_length>=3)if(i=IB(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=s_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=s_(e,e.ins_h,e.window[e.strstart+1]);else i=IB(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(l_(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===NB?(l_(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(l_(e,!1),0===e.strm.avail_out)?1:2},g_=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<ZB){if(d_(e),e.lookahead<ZB&&t===LB)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=s_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ZB&&(e.match_length=h_(e,n),e.match_length<=5&&(e.strategy===jB||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=IB(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=s_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(l_(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=IB(e,0,e.window[e.strstart-1]),i&&l_(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=IB(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===NB?(l_(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(l_(e,!1),0===e.strm.avail_out)?1:2};function m_(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const v_=[new m_(0,0,0,0,p_),new m_(4,4,8,4,f_),new m_(4,5,16,8,f_),new m_(4,6,32,32,f_),new m_(4,4,16,16,g_),new m_(8,16,32,32,g_),new m_(8,16,128,128,g_),new m_(8,32,128,256,g_),new m_(32,128,258,1024,g_),new m_(32,258,258,4096,g_)];function y_(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=JB,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),r_(this.dyn_ltree),r_(this.dyn_dtree),r_(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),r_(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),r_(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const w_=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$B&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==e_&&t.status!==t_?1:0},b_=e=>{if(w_(e))return n_(e,HB);e.total_in=e.total_out=0,e.data_type=XB;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?$B:e_,e.adler=2===t.wrap?0:1,t.last_flush=-2,TB(t),DB},x_=e=>{const t=b_(e);return t===DB&&(e=>{e.window_size=2*e.w_size,r_(e.head),e.max_lazy_match=v_[e.level].max_lazy,e.good_match=v_[e.level].good_length,e.nice_match=v_[e.level].nice_length,e.max_chain_length=v_[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},B_=(e,t,n,i,r,o)=>{if(!e)return HB;let s=1;if(t===GB&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==JB||i<8||i>15||t<0||t>9||o<0||o>KB||8===i&&1!==s)return n_(e,HB);8===i&&(i=9);const a=new y_;return e.state=a,a.strm=e,a.status=$B,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,x_(e)};var __=(e,t)=>{if(w_(e)||t>kB||t<0)return e?n_(e,HB):HB;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===t_&&t!==NB)return n_(e,0===e.avail_out?zB:HB);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(a_(e),0===e.avail_out)return n.last_flush=-1,DB}else if(0===e.avail_in&&i_(t)<=i_(i)&&t!==NB)return n_(e,zB);if(n.status===t_&&0!==e.avail_in)return n_(e,zB);if(n.status===$B&&0===n.wrap&&(n.status=e_),n.status===$B){let t=JB+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=VB||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,c_(n,t),0!==n.strstart&&(c_(n,e.adler>>>16),c_(n,65535&e.adler)),e.adler=1,n.status=e_,a_(e),0!==n.pending)return n.last_flush=-1,DB}if(57===n.status)if(e.adler=0,A_(n,31),A_(n,139),A_(n,8),n.gzhead)A_(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),A_(n,255&n.gzhead.time),A_(n,n.gzhead.time>>8&255),A_(n,n.gzhead.time>>16&255),A_(n,n.gzhead.time>>24&255),A_(n,9===n.level?2:n.strategy>=VB||n.level<2?4:0),A_(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(A_(n,255&n.gzhead.extra.length),A_(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=CB(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(A_(n,0),A_(n,0),A_(n,0),A_(n,0),A_(n,0),A_(n,9===n.level?2:n.strategy>=VB||n.level<2?4:0),A_(n,3),n.status=e_,a_(e),0!==n.pending)return n.last_flush=-1,DB;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=CB(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,a_(e),0!==n.pending)return n.last_flush=-1,DB;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=CB(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=CB(e.adler,n.pending_buf,n.pending-i,i)),a_(e),0!==n.pending)return n.last_flush=-1,DB;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,A_(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=CB(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=CB(e.adler,n.pending_buf,n.pending-i,i)),a_(e),0!==n.pending)return n.last_flush=-1,DB;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,A_(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=CB(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(a_(e),0!==n.pending))return n.last_flush=-1,DB;A_(n,255&e.adler),A_(n,e.adler>>8&255),e.adler=0}if(n.status=e_,a_(e),0!==n.pending)return n.last_flush=-1,DB}if(0!==e.avail_in||0!==n.lookahead||t!==LB&&n.status!==t_){let i=0===n.level?p_(n,t):n.strategy===VB?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(d_(e),0===e.lookahead)){if(t===LB)return 1;break}if(e.match_length=0,n=IB(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(l_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===NB?(l_(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(l_(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===WB?((e,t)=>{let n,i,r,o;const s=e.window;for(;;){if(e.lookahead<=YB){if(d_(e),e.lookahead<=YB&&t===LB)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=e.strstart+YB;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=YB-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=IB(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=IB(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(l_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===NB?(l_(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(l_(e,!1),0===e.strm.avail_out)?1:2})(n,t):v_[n.level].func(n,t);if(3!==i&&4!==i||(n.status=t_),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),DB;if(2===i&&(t===RB?UB(n):t!==kB&&(MB(n,0,0,!1),t===PB&&(r_(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),a_(e),0===e.avail_out))return n.last_flush=-1,DB}return t!==NB?DB:n.wrap<=0?OB:(2===n.wrap?(A_(n,255&e.adler),A_(n,e.adler>>8&255),A_(n,e.adler>>16&255),A_(n,e.adler>>24&255),A_(n,255&e.total_in),A_(n,e.total_in>>8&255),A_(n,e.total_in>>16&255),A_(n,e.total_in>>24&255)):(c_(n,e.adler>>>16),c_(n,65535&e.adler)),a_(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?DB:OB)},C_=(e,t)=>{let n=t.length;if(w_(e))return HB;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==$B||i.lookahead)return HB;if(1===r&&(e.adler=BB(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(r_(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,d_(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=s_(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,d_(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,i.wrap=r,DB},S_={deflateInit:(e,t)=>B_(e,t,JB,15,8,qB),deflateInit2:B_,deflateReset:x_,deflateResetKeep:b_,deflateSetHeader:(e,t)=>w_(e)||2!==e.state.wrap?HB:(e.state.gzhead=t,DB),deflate:__,deflateEnd:e=>{if(w_(e))return HB;const t=e.state.status;return e.state=null,t===e_?n_(e,QB):DB},deflateSetDictionary:C_,deflateInfo:"pako deflate (from Nodeca project)"};const E_=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var T_=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)E_(n,t)&&(e[t]=n[t])}}return e},M_=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,o=e.length;i<o;i++){let t=e[i];n.set(t,r),r+=t.length}return n};let F_=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(TI){F_=!1}const I_=new Uint8Array(256);for(let n=0;n<256;n++)I_[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;I_[254]=I_[254]=1;var U_=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,o,s=e.length,a=0;for(r=0;r<s;r++)n=e.charCodeAt(r),55296===(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)n=e.charCodeAt(r),55296===(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},L_=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const o=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){o[r++]=t;continue}let s=I_[t];if(s>4)o[r++]=65533,i+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&i<n;)t=t<<6|63&e[i++],s--;s>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=55296|t>>10&1023,o[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&F_)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(o,r)},R_=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+I_[e[n]]>t?n:t};var P_=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const N_=Object.prototype.toString,{Z_NO_FLUSH:k_,Z_SYNC_FLUSH:D_,Z_FULL_FLUSH:O_,Z_FINISH:H_,Z_OK:Q_,Z_STREAM_END:z_,Z_DEFAULT_COMPRESSION:G_,Z_DEFAULT_STRATEGY:j_,Z_DEFLATED:V_}=EB;function W_(e){this.options=T_({level:G_,method:V_,chunkSize:16384,windowBits:15,memLevel:8,strategy:j_},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P_,this.strm.avail_out=0;let n=S_.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Q_)throw new Error(SB[n]);if(t.header&&S_.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?U_(t.dictionary):"[object ArrayBuffer]"===N_.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=S_.deflateSetDictionary(this.strm,e),n!==Q_)throw new Error(SB[n]);this._dict_set=!0}}function K_(e,t){const n=new W_(t);if(n.push(e,!0),n.err)throw n.msg||SB[n.err];return n.result}W_.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?H_:k_,"string"===typeof e?n.input=U_(e):"[object ArrayBuffer]"===N_.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===D_||o===O_)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=S_.deflate(n,o),r===z_)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=S_.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Q_;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},W_.prototype.onData=function(e){this.chunks.push(e)},W_.prototype.onEnd=function(e){e===Q_&&(this.result=M_(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var q_={Deflate:W_,deflate:K_,deflateRaw:function(e,t){return(t=t||{}).raw=!0,K_(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,K_(e,t)},constants:EB};const X_=16209;var J_=function(e,t){let n,i,r,o,s,a,l,A,c,u,h,d,p,f,g,m,v,y,w,b,x,B,_,C;const S=e.state;n=e.next_in,_=e.input,i=n+(e.avail_in-5),r=e.next_out,C=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),a=S.dmax,l=S.wsize,A=S.whave,c=S.wnext,u=S.window,h=S.hold,d=S.bits,p=S.lencode,f=S.distcode,g=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;e:do{d<15&&(h+=_[n++]<<d,d+=8,h+=_[n++]<<d,d+=8),v=p[h&g];t:for(;;){if(y=v>>>24,h>>>=y,d-=y,y=v>>>16&255,0===y)C[r++]=65535&v;else{if(!(16&y)){if(0===(64&y)){v=p[(65535&v)+(h&(1<<y)-1)];continue t}if(32&y){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=X_;break e}w=65535&v,y&=15,y&&(d<y&&(h+=_[n++]<<d,d+=8),w+=h&(1<<y)-1,h>>>=y,d-=y),d<15&&(h+=_[n++]<<d,d+=8,h+=_[n++]<<d,d+=8),v=f[h&m];n:for(;;){if(y=v>>>24,h>>>=y,d-=y,y=v>>>16&255,!(16&y)){if(0===(64&y)){v=f[(65535&v)+(h&(1<<y)-1)];continue n}e.msg="invalid distance code",S.mode=X_;break e}if(b=65535&v,y&=15,d<y&&(h+=_[n++]<<d,d+=8,d<y&&(h+=_[n++]<<d,d+=8)),b+=h&(1<<y)-1,b>a){e.msg="invalid distance too far back",S.mode=X_;break e}if(h>>>=y,d-=y,y=r-o,b>y){if(y=b-y,y>A&&S.sane){e.msg="invalid distance too far back",S.mode=X_;break e}if(x=0,B=u,0===c){if(x+=l-y,y<w){w-=y;do{C[r++]=u[x++]}while(--y);x=r-b,B=C}}else if(c<y){if(x+=l+c-y,y-=c,y<w){w-=y;do{C[r++]=u[x++]}while(--y);if(x=0,c<w){y=c,w-=y;do{C[r++]=u[x++]}while(--y);x=r-b,B=C}}}else if(x+=c-y,y<w){w-=y;do{C[r++]=u[x++]}while(--y);x=r-b,B=C}for(;w>2;)C[r++]=B[x++],C[r++]=B[x++],C[r++]=B[x++],w-=3;w&&(C[r++]=B[x++],w>1&&(C[r++]=B[x++]))}else{x=r-b;do{C[r++]=C[x++],C[r++]=C[x++],C[r++]=C[x++],w-=3}while(w>2);w&&(C[r++]=C[x++],w>1&&(C[r++]=C[x++]))}break}}break}}while(n<i&&r<s);w=d>>3,n-=w,d-=w<<3,h&=(1<<d)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<s?s-r+257:257-(r-s),S.hold=h,S.bits=d};const Y_=15,Z_=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),eC=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tC=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var nC=(e,t,n,i,r,o,s,a)=>{const l=a.bits;let A,c,u,h,d,p,f=0,g=0,m=0,v=0,y=0,w=0,b=0,x=0,B=0,_=0,C=null;const S=new Uint16Array(16),E=new Uint16Array(16);let T,M,F,I=null;for(f=0;f<=Y_;f++)S[f]=0;for(g=0;g<i;g++)S[t[n+g]]++;for(y=l,v=Y_;v>=1&&0===S[v];v--);if(y>v&&(y=v),0===v)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(m=1;m<v&&0===S[m];m++);for(y<m&&(y=m),x=1,f=1;f<=Y_;f++)if(x<<=1,x-=S[f],x<0)return-1;if(x>0&&(0===e||1!==v))return-1;for(E[1]=0,f=1;f<Y_;f++)E[f+1]=E[f]+S[f];for(g=0;g<i;g++)0!==t[n+g]&&(s[E[t[n+g]]++]=g);if(0===e?(C=I=s,p=20):1===e?(C=Z_,I=$_,p=257):(C=eC,I=tC,p=0),_=0,g=0,f=m,d=o,w=y,b=0,u=-1,B=1<<y,h=B-1,1===e&&B>852||2===e&&B>592)return 1;for(;;){T=f-b,s[g]+1<p?(M=0,F=s[g]):s[g]>=p?(M=I[s[g]-p],F=C[s[g]-p]):(M=96,F=0),A=1<<f-b,c=1<<w,m=c;do{c-=A,r[d+(_>>b)+c]=T<<24|M<<16|F}while(0!==c);for(A=1<<f-1;_&A;)A>>=1;if(0!==A?(_&=A-1,_+=A):_=0,g++,0===--S[f]){if(f===v)break;f=t[n+s[g]]}if(f>y&&(_&h)!==u){for(0===b&&(b=y),d+=m,w=f-b,x=1<<w;w+b<v&&(x-=S[w+b],!(x<=0));)w++,x<<=1;if(B+=1<<w,1===e&&B>852||2===e&&B>592)return 1;u=_&h,r[u]=y<<24|w<<16|d-o}}return 0!==_&&(r[d+_]=f-b<<24|64<<16),a.bits=y,0};const{Z_FINISH:iC,Z_BLOCK:rC,Z_TREES:oC,Z_OK:sC,Z_STREAM_END:aC,Z_NEED_DICT:lC,Z_STREAM_ERROR:AC,Z_DATA_ERROR:cC,Z_MEM_ERROR:uC,Z_BUF_ERROR:hC,Z_DEFLATED:dC}=EB,pC=16180,fC=16190,gC=16191,mC=16192,vC=16194,yC=16199,wC=16200,bC=16206,xC=16209,BC=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function _C(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const CC=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<pC||t.mode>16211?1:0},SC=e=>{if(CC(e))return AC;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=pC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,sC},EC=e=>{if(CC(e))return AC;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,SC(e)},TC=(e,t)=>{let n;if(CC(e))return AC;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?AC:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,EC(e))},MC=(e,t)=>{if(!e)return AC;const n=new _C;e.state=n,n.strm=e,n.window=null,n.mode=pC;const i=TC(e,t);return i!==sC&&(e.state=null),i};let FC,IC,UC=!0;const LC=e=>{if(UC){FC=new Int32Array(512),IC=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(nC(1,e.lens,0,288,FC,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;nC(2,e.lens,0,32,IC,0,e.work,{bits:5}),UC=!1}e.lencode=FC,e.lenbits=9,e.distcode=IC,e.distbits=5},RC=(e,t,n,i)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(t.subarray(n-i,n-i+r),o.wnext),(i-=r)?(o.window.set(t.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var PC=(e,t)=>{let n,i,r,o,s,a,l,A,c,u,h,d,p,f,g,m,v,y,w,b,x,B,_=0;const C=new Uint8Array(4);let S,E;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(CC(e)||!e.output||!e.input&&0!==e.avail_in)return AC;n=e.state,n.mode===gC&&(n.mode=mC),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,A=n.hold,c=n.bits,u=a,h=l,B=sC;e:for(;;)switch(n.mode){case pC:if(0===n.wrap){n.mode=mC;break}for(;c<16;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(2&n.wrap&&35615===A){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&A,C[1]=A>>>8&255,n.check=CB(n.check,C,2,0),A=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&A)<<8)+(A>>8))%31){e.msg="incorrect header check",n.mode=xC;break}if((15&A)!==dC){e.msg="unknown compression method",n.mode=xC;break}if(A>>>=4,c-=4,x=8+(15&A),0===n.wbits&&(n.wbits=x),x>15||x>n.wbits){e.msg="invalid window size",n.mode=xC;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&A?16189:gC,A=0,c=0;break;case 16181:for(;c<16;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(n.flags=A,(255&n.flags)!==dC){e.msg="unknown compression method",n.mode=xC;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=xC;break}n.head&&(n.head.text=A>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&A,C[1]=A>>>8&255,n.check=CB(n.check,C,2,0)),A=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}n.head&&(n.head.time=A),512&n.flags&&4&n.wrap&&(C[0]=255&A,C[1]=A>>>8&255,C[2]=A>>>16&255,C[3]=A>>>24&255,n.check=CB(n.check,C,4,0)),A=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}n.head&&(n.head.xflags=255&A,n.head.os=A>>8),512&n.flags&&4&n.wrap&&(C[0]=255&A,C[1]=A>>>8&255,n.check=CB(n.check,C,2,0)),A=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}n.length=A,n.head&&(n.head.extra_len=A),512&n.flags&&4&n.wrap&&(C[0]=255&A,C[1]=A>>>8&255,n.check=CB(n.check,C,2,0)),A=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(d=n.length,d>a&&(d=a),d&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+d),x)),512&n.flags&&4&n.wrap&&(n.check=CB(n.check,i,d,o)),a-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;d=0;do{x=i[o+d++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&d<a);if(512&n.flags&&4&n.wrap&&(n.check=CB(n.check,i,d,o)),a-=d,o+=d,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;d=0;do{x=i[o+d++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&d<a);if(512&n.flags&&4&n.wrap&&(n.check=CB(n.check,i,d,o)),a-=d,o+=d,x)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(4&n.wrap&&A!==(65535&n.check)){e.msg="header crc mismatch",n.mode=xC;break}A=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=gC;break;case 16189:for(;c<32;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}e.adler=n.check=BC(A),A=0,c=0,n.mode=fC;case fC:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=A,n.bits=c,lC;e.adler=n.check=1,n.mode=gC;case gC:if(t===rC||t===oC)break e;case mC:if(n.last){A>>>=7&c,c-=7&c,n.mode=bC;break}for(;c<3;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}switch(n.last=1&A,A>>>=1,c-=1,3&A){case 0:n.mode=16193;break;case 1:if(LC(n),n.mode=yC,t===oC){A>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=xC}A>>>=2,c-=2;break;case 16193:for(A>>>=7&c,c-=7&c;c<32;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if((65535&A)!==(A>>>16^65535)){e.msg="invalid stored block lengths",n.mode=xC;break}if(n.length=65535&A,A=0,c=0,n.mode=vC,t===oC)break e;case vC:n.mode=16195;case 16195:if(d=n.length,d){if(d>a&&(d=a),d>l&&(d=l),0===d)break e;r.set(i.subarray(o,o+d),s),a-=d,o+=d,l-=d,s+=d,n.length-=d;break}n.mode=gC;break;case 16196:for(;c<14;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(n.nlen=257+(31&A),A>>>=5,c-=5,n.ndist=1+(31&A),A>>>=5,c-=5,n.ncode=4+(15&A),A>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=xC;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}n.lens[T[n.have++]]=7&A,A>>>=3,c-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},B=nC(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,B){e.msg="invalid code lengths set",n.mode=xC;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;_=n.lencode[A&(1<<n.lenbits)-1],g=_>>>24,m=_>>>16&255,v=65535&_,!(g<=c);){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(v<16)A>>>=g,c-=g,n.lens[n.have++]=v;else{if(16===v){for(E=g+2;c<E;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(A>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=xC;break}x=n.lens[n.have-1],d=3+(3&A),A>>>=2,c-=2}else if(17===v){for(E=g+3;c<E;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}A>>>=g,c-=g,x=0,d=3+(7&A),A>>>=3,c-=3}else{for(E=g+7;c<E;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}A>>>=g,c-=g,x=0,d=11+(127&A),A>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=xC;break}for(;d--;)n.lens[n.have++]=x}}if(n.mode===xC)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=xC;break}if(n.lenbits=9,S={bits:n.lenbits},B=nC(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,B){e.msg="invalid literal/lengths set",n.mode=xC;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},B=nC(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,B){e.msg="invalid distances set",n.mode=xC;break}if(n.mode=yC,t===oC)break e;case yC:n.mode=wC;case wC:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=A,n.bits=c,J_(e,h),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,A=n.hold,c=n.bits,n.mode===gC&&(n.back=-1);break}for(n.back=0;_=n.lencode[A&(1<<n.lenbits)-1],g=_>>>24,m=_>>>16&255,v=65535&_,!(g<=c);){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(m&&0===(240&m)){for(y=g,w=m,b=v;_=n.lencode[b+((A&(1<<y+w)-1)>>y)],g=_>>>24,m=_>>>16&255,v=65535&_,!(y+g<=c);){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}A>>>=y,c-=y,n.back+=y}if(A>>>=g,c-=g,n.back+=g,n.length=v,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=gC;break}if(64&m){e.msg="invalid literal/length code",n.mode=xC;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;c<E;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}n.length+=A&(1<<n.extra)-1,A>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;_=n.distcode[A&(1<<n.distbits)-1],g=_>>>24,m=_>>>16&255,v=65535&_,!(g<=c);){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(0===(240&m)){for(y=g,w=m,b=v;_=n.distcode[b+((A&(1<<y+w)-1)>>y)],g=_>>>24,m=_>>>16&255,v=65535&_,!(y+g<=c);){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}A>>>=y,c-=y,n.back+=y}if(A>>>=g,c-=g,n.back+=g,64&m){e.msg="invalid distance code",n.mode=xC;break}n.offset=v,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;c<E;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}n.offset+=A&(1<<n.extra)-1,A>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=xC;break}n.mode=16204;case 16204:if(0===l)break e;if(d=h-l,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=xC;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),f=n.window}else f=r,p=s-n.offset,d=n.length;d>l&&(d=l),l-=d,n.length-=d;do{r[s++]=f[p++]}while(--d);0===n.length&&(n.mode=wC);break;case 16205:if(0===l)break e;r[s++]=n.length,l--,n.mode=wC;break;case bC:if(n.wrap){for(;c<32;){if(0===a)break e;a--,A|=i[o++]<<c,c+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?CB(n.check,r,h,s-h):BB(n.check,r,h,s-h)),h=l,4&n.wrap&&(n.flags?A:BC(A))!==n.check){e.msg="incorrect data check",n.mode=xC;break}A=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===a)break e;a--,A+=i[o++]<<c,c+=8}if(4&n.wrap&&A!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=xC;break}A=0,c=0}n.mode=16208;case 16208:B=aC;break e;case xC:B=cC;break e;case 16210:return uC;default:return AC}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=A,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<xC&&(n.mode<bC||t!==iC))&&RC(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?CB(n.check,r,h,e.next_out-h):BB(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===gC?128:0)+(n.mode===yC||n.mode===vC?256:0),(0===u&&0===h||t===iC)&&B===sC&&(B=hC),B},NC=e=>{if(CC(e))return AC;let t=e.state;return t.window&&(t.window=null),e.state=null,sC},kC=(e,t)=>{if(CC(e))return AC;const n=e.state;return 0===(2&n.wrap)?AC:(n.head=t,t.done=!1,sC)},DC=(e,t)=>{const n=t.length;let i,r,o;return CC(e)?AC:(i=e.state,0!==i.wrap&&i.mode!==fC?AC:i.mode===fC&&(r=1,r=BB(r,t,n,0),r!==i.check)?cC:(o=RC(e,t,n,n),o?(i.mode=16210,uC):(i.havedict=1,sC)))},OC={inflateReset:EC,inflateReset2:TC,inflateResetKeep:SC,inflateInit:e=>MC(e,15),inflateInit2:MC,inflate:PC,inflateEnd:NC,inflateGetHeader:kC,inflateSetDictionary:DC,inflateInfo:"pako inflate (from Nodeca project)"};var HC=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const QC=Object.prototype.toString,{Z_NO_FLUSH:zC,Z_FINISH:GC,Z_OK:jC,Z_STREAM_END:VC,Z_NEED_DICT:WC,Z_STREAM_ERROR:KC,Z_DATA_ERROR:qC,Z_MEM_ERROR:XC}=EB;function JC(e){this.options=T_({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P_,this.strm.avail_out=0;let n=OC.inflateInit2(this.strm,t.windowBits);if(n!==jC)throw new Error(SB[n]);if(this.header=new HC,OC.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=U_(t.dictionary):"[object ArrayBuffer]"===QC.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=OC.inflateSetDictionary(this.strm,t.dictionary),n!==jC)))throw new Error(SB[n])}function YC(e,t){const n=new JC(t);if(n.push(e),n.err)throw n.msg||SB[n.err];return n.result}JC.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?GC:zC,"[object ArrayBuffer]"===QC.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=OC.inflate(n,s),o===WC&&r&&(o=OC.inflateSetDictionary(n,r),o===jC?o=OC.inflate(n,s):o===qC&&(o=WC));n.avail_in>0&&o===VC&&n.state.wrap>0&&0!==e[n.next_in];)OC.inflateReset(n),o=OC.inflate(n,s);switch(o){case KC:case qC:case WC:case XC:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===VC))if("string"===this.options.to){let e=R_(n.output,n.next_out),t=n.next_out-e,r=L_(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==jC||0!==a){if(o===VC)return o=OC.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},JC.prototype.onData=function(e){this.chunks.push(e)},JC.prototype.onEnd=function(e){e===jC&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=M_(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ZC={Inflate:JC,inflate:YC,inflateRaw:function(e,t){return(t=t||{}).raw=!0,YC(e,t)},ungzip:YC,constants:EB};const{Deflate:$C,deflate:eS,deflateRaw:tS,gzip:nS}=q_,{Inflate:iS,inflate:rS,inflateRaw:oS,ungzip:sS}=ZC;var aS=iS,lS=rS;const AS=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;AS[n]=e}const cS=4294967295;function uS(e,t){return(function(e,t,n){let i=e;for(let r=0;r<n;r++)i=AS[255&(i^t[r])]^i>>>8;return i}(cS,e,t)^cS)>>>0}function hS(e,t,n){const i=e.readUint32(),r=uS(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(r!==i)throw new Error("CRC mismatch for chunk ".concat(n,". Expected ").concat(i,", found ").concat(r))}function dS(e,t,n){for(let i=0;i<n;i++)t[i]=e[i]}function pS(e,t,n,i){let r=0;for(;r<i;r++)t[r]=e[r];for(;r<n;r++)t[r]=e[r]+t[r-i]&255}function fS(e,t,n,i){let r=0;if(0===n.length)for(;r<i;r++)t[r]=e[r];else for(;r<i;r++)t[r]=e[r]+n[r]&255}function gS(e,t,n,i,r){let o=0;if(0===n.length){for(;o<r;o++)t[o]=e[o];for(;o<i;o++)t[o]=e[o]+(t[o-r]>>1)&255}else{for(;o<r;o++)t[o]=e[o]+(n[o]>>1)&255;for(;o<i;o++)t[o]=e[o]+(t[o-r]+n[o]>>1)&255}}function mS(e,t,n,i,r){let o=0;if(0===n.length){for(;o<r;o++)t[o]=e[o];for(;o<i;o++)t[o]=e[o]+t[o-r]&255}else{for(;o<r;o++)t[o]=e[o]+n[o]&255;for(;o<i;o++)t[o]=e[o]+vS(t[o-r],n[o],n[o-r])&255}}function vS(e,t,n){const i=e+t-n,r=Math.abs(i-e),o=Math.abs(i-t),s=Math.abs(i-n);return r<=o&&r<=s?e:o<=s?t:n}function yS(e,t,n,i,r,o){switch(e){case 0:dS(t,n,r);break;case 1:pS(t,n,r,o);break;case 2:fS(t,n,i,r);break;case 3:gS(t,n,i,r,o);break;case 4:mS(t,n,i,r,o);break;default:throw new Error("Unsupported filter: ".concat(e))}}const wS=new Uint16Array([255]),bS=255===new Uint8Array(wS.buffer)[0];function xS(e){return(255&e)<<8|e>>8&255}const BS=new Uint16Array([255]),_S=255===new Uint8Array(BS.buffer)[0],CS=new Uint8Array(0);function SS(e){const{data:t,width:n,height:i,channels:r,depth:o}=e,s=Math.ceil(o/8)*r,a=Math.ceil(o/8*r*n),l=new Uint8Array(i*a);let A,c,u=CS,h=0;for(let d=0;d<i;d++){switch(A=t.subarray(h+1,h+1+a),c=l.subarray(d*a,(d+1)*a),t[h]){case 0:dS(A,c,a);break;case 1:pS(A,c,a,s);break;case 2:fS(A,c,u,a);break;case 3:gS(A,c,u,a,s);break;case 4:mS(A,c,u,a,s);break;default:throw new Error("Unsupported filter: ".concat(t[h]))}u=c,h+=a+1}if(16===o){const e=new Uint16Array(l.buffer);if(_S)for(let t=0;t<e.length;t++)e[t]=ES(e[t]);return e}return l}function ES(e){return(255&e)<<8|e>>8&255}const TS=Uint8Array.of(137,80,78,71,13,10,26,10);function MS(e){if(!function(e){if(e.length<TS.length)return!1;for(let t=0;t<TS.length;t++)if(e[t]!==TS[t])return!1;return!0}(e.readBytes(TS.length)))throw new Error("wrong PNG signature")}const FS="tEXt",IS=new TextDecoder("latin1");function US(e){if(RS(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const LS=/^[\u0000-\u00FF]*$/;function RS(e){if(!LS.test(e))throw new Error("invalid latin1 text")}function PS(e,t,n){const i=NS(t);e[i]=function(e,t){return IS.decode(e.readBytes(t))}(t,n-i.length-1)}function NS(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const n=IS.decode(e.readBytes(t-e.offset-1));return e.skip(1),US(n),n}const kS=-1,DS=0,OS=2,HS=3,QS=4,zS=6,GS=-1,jS=0,VS=-1,WS=0,KS=-1,qS=0,XS=1,JS=0,YS=1,ZS=2,$S=0,eE=1;class tE extends Px{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,a.A)(this,"_checkCrc",void 0),(0,a.A)(this,"_inflator",void 0),(0,a.A)(this,"_png",void 0),(0,a.A)(this,"_apng",void 0),(0,a.A)(this,"_end",void 0),(0,a.A)(this,"_hasPalette",void 0),(0,a.A)(this,"_palette",void 0),(0,a.A)(this,"_hasTransparency",void 0),(0,a.A)(this,"_transparency",void 0),(0,a.A)(this,"_compressionMethod",void 0),(0,a.A)(this,"_filterMethod",void 0),(0,a.A)(this,"_interlaceMethod",void 0),(0,a.A)(this,"_colorType",void 0),(0,a.A)(this,"_isAnimated",void 0),(0,a.A)(this,"_numberOfFrames",void 0),(0,a.A)(this,"_numberOfPlays",void 0),(0,a.A)(this,"_frames",void 0),(0,a.A)(this,"_writingDataChunks",void 0);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new aS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=GS,this._filterMethod=VS,this._interlaceMethod=KS,this._colorType=kS,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(MS(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(MS(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case FS:PS(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?hS(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?hS(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let n;switch(this._colorType=t,t){case DS:n=1;break;case OS:n=3;break;case HS:n=1;break;case QS:n=2;break;case zS:n=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==jS)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<t;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case DS:case OS:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case HS:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=NS(this),n=this.readUint8();if(n!==jS)throw new Error("Unsupported iCCP compression method: ".concat(n));const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:lS(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=SS({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===n.xOffset&&0===n.yOffset&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(n,i,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case JS:break;case YS:for(let t=0;t<this._png.height;t++)for(let i=0;i<this._png.width;i++){const r=(t*e.width+i)*this._png.channels;for(let e=0;e<this._png.channels;e++)n.data[r+e]=0}break;case ZS:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,i=(e,n)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+n)*this._png.channels,frameIndex:(e*t.width+n)*this._png.channels});switch(t.blendOp){case $S:for(let n=0;n<t.height;n++)for(let r=0;r<t.width;r++){const{index:o,frameIndex:s}=i(n,r);for(let n=0;n<this._png.channels;n++)e.data[o+n]=t.data[s+n]}break;case eE:for(let r=0;r<t.height;r++)for(let o=0;o<t.width;o++){const{index:s,frameIndex:a}=i(r,o);for(let i=0;i<this._png.channels;i++){const r=t.data[a+this._png.channels-1]/n,o=i%(this._png.channels-1)===0?1:t.data[a+i],l=Math.floor(r*o+(1-r)*e.data[s+i]);e.data[s+i]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==WS)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===qS)this._png.data=SS({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==XS)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:n,height:i,channels:r,depth:o}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*r,l=new Uint8Array(i*n*a);let A=0;for(let c=0;c<7;c++){const e=s[c],r=Math.ceil((n-e.x)/e.xStep),o=Math.ceil((i-e.y)/e.yStep);if(r<=0||o<=0)continue;const u=r*a,h=new Uint8Array(u);for(let s=0;s<o;s++){const o=t[A++],c=t.subarray(A,A+u);A+=u;const d=new Uint8Array(u);yS(o,c,d,h,u,a),h.set(d);for(let t=0;t<r;t++){const r=e.x+t*e.xStep,o=e.y+s*e.yStep;if(!(r>=n||o>=i))for(let e=0;e<a;e++)l[(o*n+r)*a+e]=d[t*a+e]}}}if(16===o){const e=new Uint16Array(l.buffer);if(bS)for(let t=0;t<e.length;t++)e[t]=xS(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:JS,blendOp:$S,data:e}),this._inflator=new aS,this._writingDataChunks=!1}}var nE;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(nE||(nE={}));var iE=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function rE(){iE.console&&"function"==typeof iE.console.log&&iE.console.log.apply(iE.console,arguments)}var oE={log:rE,warn:function(e){iE.console&&("function"==typeof iE.console.warn?iE.console.warn.apply(iE.console,arguments):rE.call(null,arguments))},error:function(e){iE.console&&("function"==typeof iE.console.error?iE.console.error.apply(iE.console,arguments):rE(e))}};function sE(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){AE(i.response,t,n)},i.onerror=function(){oE.error("could not download file")},i.send()}function aE(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function lE(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var AE=iE.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,Gb.A)(window))||window!==iE?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=iE.URL||iE.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin!==location.origin?aE(r.href)?sE(e,t,n):lE(r,r.target="_blank"):lE(r)):(r.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){lE(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(aE(e))sE(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){lE(i)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,Gb.A)(t)&&(oE.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return sE(e,t,n);var r="application/octet-stream"===e.type,o=/constructor/i.test(iE.HTMLElement)||iE.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&o)&&"object"===("undefined"==typeof FileReader?"undefined":(0,Gb.A)(FileReader))){var a=new FileReader;a.onloadend=function(){var e=a.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},a.readAsDataURL(e)}else{var l=iE.URL||iE.webkitURL,A=l.createObjectURL(e);i?i.location=A:location.href=A,i=null,setTimeout(function(){l.revokeObjectURL(A)},4e4)}});function cE(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,s=r.exec(e);s&&(t=o(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}var uE=iE.atob.bind(iE),hE=iE.btoa.bind(iE);function dE(e,t){var n=e[0],i=e[1],r=e[2],o=e[3];n=fE(n,i,r,o,t[0],7,-680876936),o=fE(o,n,i,r,t[1],12,-389564586),r=fE(r,o,n,i,t[2],17,606105819),i=fE(i,r,o,n,t[3],22,-1044525330),n=fE(n,i,r,o,t[4],7,-176418897),o=fE(o,n,i,r,t[5],12,1200080426),r=fE(r,o,n,i,t[6],17,-1473231341),i=fE(i,r,o,n,t[7],22,-45705983),n=fE(n,i,r,o,t[8],7,1770035416),o=fE(o,n,i,r,t[9],12,-1958414417),r=fE(r,o,n,i,t[10],17,-42063),i=fE(i,r,o,n,t[11],22,-1990404162),n=fE(n,i,r,o,t[12],7,1804603682),o=fE(o,n,i,r,t[13],12,-40341101),r=fE(r,o,n,i,t[14],17,-1502002290),n=gE(n,i=fE(i,r,o,n,t[15],22,1236535329),r,o,t[1],5,-165796510),o=gE(o,n,i,r,t[6],9,-1069501632),r=gE(r,o,n,i,t[11],14,643717713),i=gE(i,r,o,n,t[0],20,-373897302),n=gE(n,i,r,o,t[5],5,-701558691),o=gE(o,n,i,r,t[10],9,38016083),r=gE(r,o,n,i,t[15],14,-660478335),i=gE(i,r,o,n,t[4],20,-405537848),n=gE(n,i,r,o,t[9],5,568446438),o=gE(o,n,i,r,t[14],9,-1019803690),r=gE(r,o,n,i,t[3],14,-187363961),i=gE(i,r,o,n,t[8],20,1163531501),n=gE(n,i,r,o,t[13],5,-1444681467),o=gE(o,n,i,r,t[2],9,-51403784),r=gE(r,o,n,i,t[7],14,1735328473),n=mE(n,i=gE(i,r,o,n,t[12],20,-1926607734),r,o,t[5],4,-378558),o=mE(o,n,i,r,t[8],11,-2022574463),r=mE(r,o,n,i,t[11],16,1839030562),i=mE(i,r,o,n,t[14],23,-35309556),n=mE(n,i,r,o,t[1],4,-1530992060),o=mE(o,n,i,r,t[4],11,1272893353),r=mE(r,o,n,i,t[7],16,-155497632),i=mE(i,r,o,n,t[10],23,-1094730640),n=mE(n,i,r,o,t[13],4,681279174),o=mE(o,n,i,r,t[0],11,-358537222),r=mE(r,o,n,i,t[3],16,-722521979),i=mE(i,r,o,n,t[6],23,76029189),n=mE(n,i,r,o,t[9],4,-640364487),o=mE(o,n,i,r,t[12],11,-421815835),r=mE(r,o,n,i,t[15],16,530742520),n=vE(n,i=mE(i,r,o,n,t[2],23,-995338651),r,o,t[0],6,-198630844),o=vE(o,n,i,r,t[7],10,1126891415),r=vE(r,o,n,i,t[14],15,-1416354905),i=vE(i,r,o,n,t[5],21,-57434055),n=vE(n,i,r,o,t[12],6,1700485571),o=vE(o,n,i,r,t[3],10,-1894986606),r=vE(r,o,n,i,t[10],15,-1051523),i=vE(i,r,o,n,t[1],21,-2054922799),n=vE(n,i,r,o,t[8],6,1873313359),o=vE(o,n,i,r,t[15],10,-30611744),r=vE(r,o,n,i,t[6],15,-1560198380),i=vE(i,r,o,n,t[13],21,1309151649),n=vE(n,i,r,o,t[4],6,-145523070),o=vE(o,n,i,r,t[11],10,-1120210379),r=vE(r,o,n,i,t[2],15,718787259),i=vE(i,r,o,n,t[9],21,-343485551),e[0]=SE(n,e[0]),e[1]=SE(i,e[1]),e[2]=SE(r,e[2]),e[3]=SE(o,e[3])}function pE(e,t,n,i,r,o){return t=SE(SE(t,e),SE(i,o)),SE(t<<r|t>>>32-r,n)}function fE(e,t,n,i,r,o,s){return pE(t&n|~t&i,e,t,r,o,s)}function gE(e,t,n,i,r,o,s){return pE(t&i|n&~i,e,t,r,o,s)}function mE(e,t,n,i,r,o,s){return pE(t^n^i,e,t,r,o,s)}function vE(e,t,n,i,r,o,s){return pE(n^(t|~i),e,t,r,o,s)}function yE(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)dE(i,wE(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(dE(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,dE(i,r),i}function wE(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var bE="0123456789abcdef".split("");function xE(e){for(var t="",n=0;n<4;n++)t+=bE[e>>8*n+4&15]+bE[e>>8*n&15];return t}function BE(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function _E(e){return yE(e).map(BE).join("")}var CE="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=xE(e[t]);return e.join("")}(yE("hello"));function SE(e,t){if(CE){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function EE(e,t){var n,i,r,o;if(e!==n){for(var s=(r=e,o=1+(256/e.length|0),new Array(o+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var A=0;for(l=0;l<256;l++){var c=a[l];A=(A+c+s.charCodeAt(l))%256,a[l]=a[A],a[A]=c}n=e,i=a}else a=i;var u=t.length,h=0,d=0,p="";for(l=0;l<u;l++)d=(d+(c=a[h=(h+1)%256]))%256,a[h]=a[d],a[d]=c,s=a[(a[h]+a[d])%256],p+=String.fromCharCode(t.charCodeAt(l)^s);return p}var TE={print:4,modify:8,copy:16,"annot-forms":32};function ME(e,t,n,i){this.v=1,this.r=2;var r=192;e.forEach(function(e){if(void 0!==TE.perm)throw new Error("Invalid permission: "+e);r+=TE[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var o=(t+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^r)),this.encryptionKey=_E(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=EE(this.encryptionKey,this.padding)}function FE(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var r=e.charCodeAt(i);t+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):e[i]}return t}function IE(e){if("object"!==(0,Gb.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[n,!!i],r},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in t[n]){var s=t[n][o];try{s[0].apply(e,i)}catch(pv){iE.console&&oE.error("jsPDF PubSub Error",pv.message,pv)}s[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function UE(e){if(!(this instanceof UE))return new UE(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function LE(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function RE(e,t,n,i,r){if(!(this instanceof RE))return new RE(e,t,n,i,r);this.type="axial"===e?2:3,this.coords=t,this.colors=n,LE.call(this,i,r)}function PE(e,t,n,i,r){if(!(this instanceof PE))return new PE(e,t,n,i,r);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,LE.call(this,i,r)}function NE(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],s=[],a=1,l=16,A="S",c=null;"object"===(0,Gb.A)(e=e||{})&&(n=e.orientation,i=e.unit||i,r=e.format||r,o=e.compress||e.compressPdf||o,null!==(c=e.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),A=e.defaultPathOperation||"S"),s=e.filters||(!0===o?["FlateEncode"]:s),i=i||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},d={internal:{},__private__:{}};d.__private__.PubSub=IE;var p="1.3",f=d.__private__.getPdfVersion=function(){return p};d.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return g};var m=d.__private__.getPageFormat=function(e){return g[e]};r=r||"a4";var v="compat",y="advanced",w=v;function b(){this.saveGraphicsState(),Y(new Ie(he,0,0,-he,0,dn()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),A="n",w=y}function x(){this.restoreGraphicsState(),A="S",w=v}var B=d.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};d.advancedAPI=function(e){var t=w===v;return t&&b.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},d.compatAPI=function(e){var t=w===y;return t&&x.call(this),"function"!=typeof e||(e(this),t&&b.call(this)),this},d.isAdvancedAPI=function(){return w===y};var _,C=function(e){if(w!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=d.roundToPrecision=d.__private__.roundToPrecision=function(e,n){var i=t||n;if(isNaN(e)||isNaN(i))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(i).replace(/0+$/,"")};_=d.hpf=d.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,16)};var E=d.f2=d.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return S(e,2)},T=d.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return S(e,3)},M=d.scale=d.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return w===v?e*he:w===y?e:void 0},F=function(e){return M(function(e){return w===v?dn()-e:w===y?e:void 0}(e))};d.__private__.setPrecision=d.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var I,U="00000000000000000000000000000000",L=d.__private__.getFileId=function(){return U},R=d.__private__.setFileId=function(e){return U=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==c&&(vt=new ME(c.userPermissions,c.userPassword,c.ownerPassword,U)),U};d.setFileId=function(e){return R(e),this},d.getFileId=function(){return L()};var P=d.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",i=Math.floor(Math.abs(t/60)),r=Math.abs(t%60),o=[n,H(i),"'",H(r),"'"].join("");return["D:",e.getFullYear(),H(e.getMonth()+1),H(e.getDate()),H(e.getHours()),H(e.getMinutes()),H(e.getSeconds()),o].join("")},N=d.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,i=parseInt(e.substr(8,2),10),r=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return new Date(t,n,i,r,o,s,0)},k=d.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=P(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return I=t},D=d.__private__.getCreationDate=function(e){var t=I;return"jsDate"===e&&(t=N(I)),t};d.setCreationDate=function(e){return k(e),this},d.getCreationDate=function(e){return D(e)};var O,H=d.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},Q=d.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},z=0,G=[],j=[],V=0,W=[],K=[],q=!1,X=j;d.__private__.setCustomOutputDestination=function(e){q=!0,X=e};var J=function(e){q||(X=e)};d.__private__.resetCustomOutputDestination=function(){q=!1,X=j};var Y=d.__private__.out=function(e){return e=e.toString(),V+=e.length+1,X.push(e),X},Z=d.__private__.write=function(e){return Y(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},$=d.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n);t--;)i[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(e){return te=w===y?e/he:e,this};var ne,ie=d.__private__.getFontSize=d.getFontSize=function(){return w===v?te:te*he},re=e.R2L||!1;d.__private__.setR2L=d.setR2L=function(e){return re=e,this},d.__private__.getR2L=d.getR2L=function(){return re};var oe,se=d.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};d.__private__.getZoomMode=function(){return ne};var ae,le=d.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');oe=e};d.__private__.getPageMode=function(){return oe};var Ae=d.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');ae=e};d.__private__.getLayoutMode=function(){return ae},d.__private__.setDisplayMode=d.setDisplayMode=function(e,t,n){return se(e),Ae(t),le(n),this};var ce={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ce).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ce[e]},d.__private__.getDocumentProperties=function(){return ce},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(e){for(var t in ce)ce.hasOwnProperty(t)&&e[t]&&(ce[t]=e[t]);return this},d.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ce).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ce[e]=t};var ue,he,de,pe,fe,ge={},me={},ve=[],ye={},we={},be={},xe={},Be=null,_e=0,Ce=[],Se=new IE(d),Ee=e.hotfixes||[],Te={},Me={},Fe=[],Ie=function e(t,n,i,r,o,s){if(!(this instanceof e))return new e(t,n,i,r,o,s);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(r)&&(r=1),isNaN(o)&&(o=0),isNaN(s)&&(s=0),this._matrix=[t,n,i,r,o,s]};Object.defineProperty(Ie.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ie.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ie.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ie.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ie.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(e)},Ie.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,i=e.shx*this.sx+e.sy*this.shx,r=e.shx*this.shy+e.sy*this.sy,o=e.tx*this.sx+e.ty*this.shx+this.tx,s=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ie(t,n,i,r,o,s)},Ie.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=Math.sqrt(e*e+t*t),a=(e/=s)*n+(t/=s)*i;n-=e*a,i-=t*a;var l=Math.sqrt(n*n+i*i);return a/=l,e*(i/=l)<t*(n/=l)&&(e=-e,t=-t,a=-a,s=-s),{scale:new Ie(s,0,0,l,0,0),translate:new Ie(1,0,0,1,r,o),rotate:new Ie(e,t,-t,e,0,0),skew:new Ie(1,0,a,1,0,0)}},Ie.prototype.toString=function(e){return this.join(" ")},Ie.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=1/(e*i-t*n),a=i*s,l=-t*s,A=-n*s,c=e*s;return new Ie(a,l,A,c,-a*r-A*o,-l*r-c*o)},Ie.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},Ie.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},Ie.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty;return new Ie(e,t,n,i,r,o)},d.Matrix=Ie;var Ue=d.matrixMult=function(e,t){return t.multiply(e)},Le=new Ie(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Le;var Re=function(e,t){if(!we[e]){var n=(t instanceof RE?"Sh":"P")+(Object.keys(ye).length+1).toString(10);t.id=n,we[e]=n,ye[n]=t,Se.publish("addPattern",t)}};d.ShadingPattern=RE,d.TilingPattern=PE,d.addShadingPattern=function(e,t){return C("addShadingPattern()"),Re(e,t),this},d.beginTilingPattern=function(e){C("beginTilingPattern()"),on(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},d.endTilingPattern=function(e,t){C("endTilingPattern()"),t.stream=K[O].join("\n"),Re(e,t),Se.publish("endTilingPattern",t),Fe.pop().restore()};var Pe,Ne=d.__private__.newObject=function(){var e=ke();return De(e,!0),e},ke=d.__private__.newObjectDeferred=function(){return z++,G[z]=function(){return V},z},De=function(e,t){return t="boolean"==typeof t&&t,G[e]=V,t&&Y(e+" 0 obj"),e},Oe=d.__private__.newAdditionalObject=function(){var e={objId:ke(),content:""};return W.push(e),e},He=ke(),Qe=ke(),ze=d.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(t[r])).toString(16)).slice(-2);return i},Ge=d.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,i=e.ch2,r=e.ch3,o=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var a=new cE(n);if(a.ok)n=a.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,i=l>>8&255,r=255&l}if(void 0===i||void 0===o&&n===i&&i===r)t="string"==typeof n?n+" "+s[0]:2===e.precision?E(n/255)+" "+s[0]:T(n/255)+" "+s[0];else if(void 0===o||"object"===(0,Gb.A)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",s[1]].join(" ");t="string"==typeof n?[n,i,r,s[1]].join(" "):2===e.precision?[E(n/255),E(i/255),E(r/255),s[1]].join(" "):[T(n/255),T(i/255),T(r/255),s[1]].join(" ")}else t="string"==typeof n?[n,i,r,o,s[2]].join(" "):2===e.precision?[E(n),E(i),E(r),E(o),s[2]].join(" "):[T(n),T(i),T(r),T(o),s[2]].join(" ");return t},je=d.__private__.getFilters=function(){return s},Ve=d.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||je(),i=e.alreadyAppliedFilters||[],r=e.addLength1||!1,o=t.length,s=e.objectId,a=function(e){return e};if(null!==c&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==c&&(a=vt.encryptor(s,0));var l={};!0===n&&(n=["FlateEncode"]);var A=e.additionalKeyValues||[],u=(l=void 0!==NE.API.processDataByFilters?NE.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());if(0!==l.data.length&&(A.push({key:"Length",value:l.data.length}),!0===r&&A.push({key:"Length1",value:o})),0!=u.length)if(u.split("/").length-1==1)A.push({key:"Filter",value:u});else{A.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<A.length;h+=1)if("DecodeParms"===A[h].key){for(var d=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)d.push("null");d.push(A[h].value),A[h].value="["+d.join(" ")+"]"}}Y("<<");for(var f=0;f<A.length;f++)Y("/"+A[f].key+" "+A[f].value);Y(">>"),0!==l.data.length&&(Y("stream"),Y(a(l.data)),Y("endstream"))},We=d.__private__.putPage=function(e){var t=e.number,n=e.data,i=e.objId,r=e.contentsObjId;De(i,!0),Y("<</Type /Page"),Y("/Parent "+e.rootDictionaryObjId+" 0 R"),Y("/Resources "+e.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(_(e.mediaBox.bottomLeftX))+" "+parseFloat(_(e.mediaBox.bottomLeftY))+" "+_(e.mediaBox.topRightX)+" "+_(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Y("/CropBox ["+_(e.cropBox.bottomLeftX)+" "+_(e.cropBox.bottomLeftY)+" "+_(e.cropBox.topRightX)+" "+_(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Y("/BleedBox ["+_(e.bleedBox.bottomLeftX)+" "+_(e.bleedBox.bottomLeftY)+" "+_(e.bleedBox.topRightX)+" "+_(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Y("/TrimBox ["+_(e.trimBox.bottomLeftX)+" "+_(e.trimBox.bottomLeftY)+" "+_(e.trimBox.topRightX)+" "+_(e.trimBox.topRightY)+"]"),null!==e.artBox&&Y("/ArtBox ["+_(e.artBox.bottomLeftX)+" "+_(e.artBox.bottomLeftY)+" "+_(e.artBox.topRightX)+" "+_(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Y("/UserUnit "+e.userUnit),Se.publish("putPage",{objId:i,pageContext:Ce[t],pageNumber:t,page:n}),Y("/Contents "+r+" 0 R"),Y(">>"),Y("endobj");var o=n.join("\n");return w===y&&(o+="\nQ"),De(r,!0),Ve({data:o,filters:je(),objectId:r}),Y("endobj"),i},Ke=d.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=_e;e++)Ce[e].objId=ke(),Ce[e].contentsObjId=ke();for(e=1;e<=_e;e++)n.push(We({number:e,data:K[e],objId:Ce[e].objId,contentsObjId:Ce[e].contentsObjId,mediaBox:Ce[e].mediaBox,cropBox:Ce[e].cropBox,bleedBox:Ce[e].bleedBox,trimBox:Ce[e].trimBox,artBox:Ce[e].artBox,userUnit:Ce[e].userUnit,rootDictionaryObjId:He,resourceDictionaryObjId:Qe}));De(He,!0),Y("<</Type /Pages");var i="/Kids [";for(t=0;t<_e;t++)i+=n[t]+" 0 R ";Y(i+"]"),Y("/Count "+_e),Y(">>"),Y("endobj"),Se.publish("postPutPages")},qe=function(e){Se.publish("putFont",{font:e,out:Y,newObject:Ne,putStream:Ve}),!0!==e.isAlreadyPutted&&(e.objectNumber=Ne(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+FE(e.postScriptName)),Y("/Subtype /Type1"),"string"==typeof e.encoding&&Y("/Encoding /"+e.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Xe=function(e){e.objectNumber=Ne();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[_(e.x),_(e.y),_(e.x+e.width),_(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ve({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Y("endobj")},Je=function(e,t){t||(t=21);var n=Ne(),i=function(e,t){var n,i=[],r=1/(t-1);for(n=0;n<1;n+=r)i.push(n);if(i.push(1),0!=e[0].offset){var o={offset:0,color:e[0].color};e.unshift(o)}if(1!=e[e.length-1].offset){var s={offset:1,color:e[e.length-1].color};e.push(s)}for(var a="",l=0,A=0;A<i.length;A++){for(n=i[A];n>e[l+1].offset;)l++;var c=e[l].offset,u=(n-c)/(e[l+1].offset-c),h=e[l].color,d=e[l+1].color;a+=Q(Math.round((1-u)*h[0]+u*d[0]).toString(16))+Q(Math.round((1-u)*h[1]+u*d[1]).toString(16))+Q(Math.round((1-u)*h[2]+u*d[2]).toString(16))}return a.trim()}(e.colors,t),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+t+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve({data:i,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Y("endobj"),e.objectNumber=Ne(),Y("<< /ShadingType "+e.type),Y("/ColorSpace /DeviceRGB");var o="/Coords ["+_(parseFloat(e.coords[0]))+" "+_(parseFloat(e.coords[1]))+" ";2===e.type?o+=_(parseFloat(e.coords[2]))+" "+_(parseFloat(e.coords[3])):o+=_(parseFloat(e.coords[2]))+" "+_(parseFloat(e.coords[3]))+" "+_(parseFloat(e.coords[4]))+" "+_(parseFloat(e.coords[5])),Y(o+="]"),e.matrix&&Y("/Matrix ["+e.matrix.toString()+"]"),Y("/Function "+n+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Ye=function(e,t){var n=ke(),i=Ne();t.push({resourcesOid:n,objectOid:i}),e.objectNumber=i;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+e.boundingBox.map(_).join(" ")+"]"}),r.push({key:"XStep",value:_(e.xStep)}),r.push({key:"YStep",value:_(e.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),e.matrix&&r.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ve({data:e.stream,additionalKeyValues:r,objectId:e.objectNumber}),Y("endobj")},Ze=function(e){for(var t in e.objectNumber=Ne(),Y("<<"),e)switch(t){case"opacity":Y("/ca "+E(e[t]));break;case"stroke-opacity":Y("/CA "+E(e[t]))}Y(">>"),Y("endobj")},$e=function(e){De(e.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Y("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&Y("/"+e+" "+ge[e].objectNumber+" 0 R");Y(">>")}(),function(){if(Object.keys(ye).length>0){for(var e in Y("/Shading <<"),ye)ye.hasOwnProperty(e)&&ye[e]instanceof RE&&ye[e].objectNumber>=0&&Y("/"+e+" "+ye[e].objectNumber+" 0 R");Se.publish("putShadingPatternDict"),Y(">>")}}(),function(e){if(Object.keys(ye).length>0){for(var t in Y("/Pattern <<"),ye)ye.hasOwnProperty(t)&&ye[t]instanceof d.TilingPattern&&ye[t].objectNumber>=0&&ye[t].objectNumber<e&&Y("/"+t+" "+ye[t].objectNumber+" 0 R");Se.publish("putTilingPatternDict"),Y(">>")}}(e.objectOid),function(){if(Object.keys(be).length>0){var e;for(e in Y("/ExtGState <<"),be)be.hasOwnProperty(e)&&be[e].objectNumber>=0&&Y("/"+e+" "+be[e].objectNumber+" 0 R");Se.publish("putGStateDict"),Y(">>")}}(),function(){for(var e in Y("/XObject <<"),Te)Te.hasOwnProperty(e)&&Te[e].objectNumber>=0&&Y("/"+e+" "+Te[e].objectNumber+" 0 R");Se.publish("putXobjectDict"),Y(">>")}(),Y(">>"),Y("endobj")},et=function(e){me[e.fontName]=me[e.fontName]||{},me[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,i,r){var o={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:i,isStandardFont:r||!1,metadata:{}};return Se.publish("addFont",{font:o,instance:this}),ge[o.id]=o,et(o),o.id},nt=d.__private__.pdfEscape=d.pdfEscape=function(e,t){return function(e,t){var n,i,r,o,s,a,l,A,c;if(r=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&ge[ue].metadata&&ge[ue].metadata[r]&&ge[ue].metadata[r].encoding&&(o=ge[ue].metadata[r].encoding,!s&&ge[ue].encoding&&(s=ge[ue].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(l=!1,a=[],n=0,i=e.length;n<i;n++)(A=s[e.charCodeAt(n)])?a.push(String.fromCharCode(A)):a.push(e[n]),a[n].charCodeAt(0)>>8&&(l=!0);e=a.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(a=t.noBOM?[]:[254,255],n=0,i=e.length;n<i;n++){if((c=(A=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(A-(c<<8))}return String.fromCharCode.apply(void 0,a)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},it=d.__private__.beginPage=function(e){K[++_e]=[],Ce[_e]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},st(_e),J(K[O])},rt=function(e,t){var i,o,s;switch(n=t||n,"string"==typeof e&&(i=m(e.toLowerCase()),Array.isArray(i)&&(o=i[0],s=i[1])),Array.isArray(e)&&(o=e[0]*he,s=e[1]*he),isNaN(o)&&(o=r[0],s=r[1]),(o>14400||s>14400)&&(oE.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),s=Math.min(14400,s)),r=[o,s],n.substr(0,1)){case"l":s>o&&(r=[s,o]);break;case"p":o>s&&(r=[s,o])}it(r),Dt(Nt),Y(Wt),0!==Zt&&Y(Zt+" J"),0!==$t&&Y($t+" j"),Se.publish("addPage",{pageNumber:_e})},ot=function(e){e>0&&e<=_e&&(K.splice(e,1),Ce.splice(e,1),_e--,O>_e&&(O=_e),this.setPage(O))},st=function(e){e>0&&e<=_e&&(O=e)},at=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return K.length-1},lt=function(e,t,n){var i,r=void 0;return n=n||{},e=void 0!==e?e:ge[ue].fontName,t=void 0!==t?t:ge[ue].fontStyle,i=e.toLowerCase(),void 0!==me[i]&&void 0!==me[i][t]?r=me[i][t]:void 0!==me[e]&&void 0!==me[e][t]?r=me[e][t]:!1===n.disableWarning&&oE.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=me.times[t])&&(r=me.times.normal),r},At=d.__private__.putInfo=function(){var e=Ne(),t=function(e){return e};for(var n in null!==c&&(t=vt.encryptor(e,0)),Y("<<"),Y("/Producer ("+nt(t("jsPDF "+NE.version))+")"),ce)ce.hasOwnProperty(n)&&ce[n]&&Y("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(ce[n]))+")");Y("/CreationDate ("+nt(t(I))+")"),Y(">>"),Y("endobj")},ct=d.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||He;switch(Ne(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&Y("/OpenAction [3 0 R /XYZ null null "+E(ne)+"]")}switch(ae||(ae="continuous"),ae){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}oe&&Y("/PageMode /"+oe),Se.publish("putCatalog"),Y(">>"),Y("endobj")},ut=d.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(z+1)),Y("/Root "+z+" 0 R"),Y("/Info "+(z-1)+" 0 R"),null!==c&&Y("/Encrypt "+vt.oid+" 0 R"),Y("/ID [ <"+U+"> <"+U+"> ]"),Y(">>")},ht=d.__private__.putHeader=function(){Y("%PDF-"+p),Y("%\xba\xdf\xac\xe0")},dt=d.__private__.putXRef=function(){var e="0000000000";Y("xref"),Y("0 "+(z+1)),Y("0000000000 65535 f ");for(var t=1;t<=z;t++)"function"==typeof G[t]?Y((e+G[t]()).slice(-10)+" 00000 n "):void 0!==G[t]?Y((e+G[t]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},pt=d.__private__.buildDocument=function(){var e;z=0,V=0,j=[],G=[],W=[],He=ke(),Qe=ke(),J(j),Se.publish("buildDocument"),ht(),Ke(),function(){Se.publish("putAdditionalObjects");for(var e=0;e<W.length;e++){var t=W[e];De(t.objId,!0),Y(t.content),Y("endobj")}Se.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&qe(ge[e])}(),function(){var e;for(e in be)be.hasOwnProperty(e)&&Ze(be[e])}(),function(){for(var e in Te)Te.hasOwnProperty(e)&&Xe(Te[e])}(),function(e){var t;for(t in ye)ye.hasOwnProperty(t)&&(ye[t]instanceof RE?Je(ye[t]):ye[t]instanceof PE&&Ye(ye[t],e))}(e),Se.publish("putResources"),e.forEach($e),$e({resourcesOid:Qe,objectOid:Number.MAX_SAFE_INTEGER}),Se.publish("postPutResources"),null!==c&&(vt.oid=Ne(),Y("<<"),Y("/Filter /Standard"),Y("/V "+vt.v),Y("/R "+vt.r),Y("/U <"+vt.toHexString(vt.U)+">"),Y("/O <"+vt.toHexString(vt.O)+">"),Y("/P "+vt.P),Y(">>"),Y("endobj")),At(),ct();var t=V;return dt(),ut(),Y("startxref"),Y(""+t),Y("%%EOF"),J(K[O]),j.join("\n")},ft=d.__private__.getBlob=function(e){return new Blob([$(e)],{type:"application/pdf"})},gt=d.output=d.__private__.output=(Pe=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":d.save(t.filename);break;case"arraybuffer":return $(pt());case"blob":return ft(pt());case"bloburi":case"bloburl":if(void 0!==iE.URL&&"function"==typeof iE.URL.createObjectURL)return iE.URL&&iE.URL.createObjectURL(ft(pt()))||void 0;oE.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",i=pt();try{n=hE(i)}catch(c){n=hE(unescape(encodeURIComponent(i)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(iE)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(r=t.pdfObjectUrl,o="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",a=iE.open();return null!==a&&a.document.write(s),a}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(iE)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',A=iE.open();if(null!==A){A.document.write(l);var u=this;A.document.documentElement.querySelector("#pdfViewer").onload=function(){A.document.title=t.filename,A.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return A}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(iE))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',p=iE.open();if(null!==p&&(p.document.write(h),p.document.title=t.filename),p||"undefined"==typeof safari)return p;break;case"datauri":case"dataurl":return iE.document.location.href=this.output("datauristring",t);default:return null}},Pe.foo=function(){try{return Pe.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!iE.console)throw new Error(n);iE.console.error(n,t),iE.alert&&alert(n)}},Pe.foo.bar=Pe,Pe.foo),mt=function(e){return!0===Array.isArray(Ee)&&Ee.indexOf(e)>-1};switch(i){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==mt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);he=i}var vt=null;k(),R();var yt=d.__private__.getPageInfo=d.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ce[e].objId,pageNumber:e,pageContext:Ce[e]}},wt=d.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Ce)if(Ce[t].objId===e)break;return yt(t)},bt=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Ce[O].objId,pageNumber:O,pageContext:Ce[O]}};d.addPage=function(){return rt.apply(this,arguments),this},d.setPage=function(){return st.apply(this,arguments),J.call(this,K[O]),this},d.insertPage=function(e){return this.addPage(),this.movePage(O,e),this},d.movePage=function(e,t){var n,i;if(e>t){n=K[e],i=Ce[e];for(var r=e;r>t;r--)K[r]=K[r-1],Ce[r]=Ce[r-1];K[t]=n,Ce[t]=i,this.setPage(t)}else if(e<t){n=K[e],i=Ce[e];for(var o=e;o<t;o++)K[o]=K[o+1],Ce[o]=Ce[o+1];K[t]=n,Ce[t]=i,this.setPage(t)}return this},d.deletePage=function(){return ot.apply(this,arguments),this},d.__private__.text=d.text=function(e,t,n,i,r){var o,s,a,l,A,c,u,d,p,f=(i=i||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Ie==0?(a=arguments[4],l=arguments[5],"object"===(0,Gb.A)(u=arguments[3])&&null!==u||("string"==typeof a&&(l=a,a=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(a=u,u=null),i={flags:u,angle:a,align:l})):(C("The transform parameter of text() with a Matrix value"),p=r),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var m,v="",b="number"==typeof i.lineHeightFactor?i.lineHeightFactor:Pt,x=f.internal.scaleFactor;function B(e){return e=e.split("\t").join(Array(i.TabLen||9).join(" ")),nt(e,u)}function S(e){for(var t,n=e.concat(),i=[],r=n.length;r--;)"string"==typeof(t=n.shift())?i.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?i.push(t[0]):i.push([t[0],t[1],t[2]]);return i}function E(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var i,r,o=e.concat(),s=[],a=o.length;a--;)"string"==typeof(i=o.shift())?s.push(t(i)[0]):Array.isArray(i)&&"string"==typeof i[0]&&(r=t(i[0],i[1],i[2]),s.push([r[0],r[1],r[2]]));n=s}return n}var T=!1,F=!0;if("string"==typeof e)T=!0;else if(Array.isArray(e)){var I=e.concat();s=[];for(var U,L=I.length;L--;)("string"!=typeof(U=I.shift())||Array.isArray(U)&&"string"!=typeof U[0])&&(F=!1);T=F}if(!1===T)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var R=te/f.internal.scaleFactor,P=R*(b-1);switch(i.baseline){case"bottom":n-=P;break;case"top":n+=R-P;break;case"hanging":n+=R-2*P;break;case"middle":n+=R/2-P}if((c=i.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,c):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(f.splitTextToSize(t,c))},[]))),o={text:e,x:t,y:n,options:i,mutex:{pdfEscape:nt,activeFontKey:ue,fonts:ge,activeFontSize:te}},Se.publish("preProcessText",o),e=o.text,a=(i=o.options).angle,p instanceof Ie==0&&a&&"number"==typeof a){a*=Math.PI/180,0===i.rotationDirection&&(a=-a),w===y&&(a=-a);var N=Math.cos(a),k=Math.sin(a);p=new Ie(N,k,-k,N,0,0)}else a&&a instanceof Ie&&(p=a);w!==y||p||(p=Le),void 0!==(A=i.charSpace||Jt)&&(v+=_(M(A))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(d=i.horizontalScale)&&(v+=_(100*d)+" Tz\n"),i.lang;var D=-1,O=void 0!==i.renderingMode?i.renderingMode:i.stroke,H=f.internal.getCurrentPageInfo().pageContext;switch(O){case 0:case!1:case"fill":D=0;break;case 1:case!0:case"stroke":D=1;break;case 2:case"fillThenStroke":D=2;break;case 3:case"invisible":D=3;break;case 4:case"fillAndAddForClipping":D=4;break;case 5:case"strokeAndAddPathForClipping":D=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":D=6;break;case 7:case"addToPathForClipping":D=7}var Q=void 0!==H.usedRenderingMode?H.usedRenderingMode:-1;-1!==D?v+=D+" Tr\n":-1!==Q&&(v+="0 Tr\n"),-1!==D&&(H.usedRenderingMode=D),l=i.align||"left";var z,G=te*b,j=f.internal.pageSize.getWidth(),V=ge[ue];A=i.charSpace||Jt,c=i.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},i.flags);var W=[],K=function(e){return f.getStringUnitWidth(e,{font:V,charSpace:A,fontSize:te,doKerning:!1})*te/x};if("[object Array]"===Object.prototype.toString.call(e)){var q;s=S(e),"left"!==l&&(z=s.map(K));var X,J=0;if("right"===l){t-=z[0],e=[],L=s.length;for(var Z=0;Z<L;Z++)0===Z?(X=zt(t),q=Gt(n)):(X=M(J-z[Z]),q=-G),e.push([s[Z],X,q]),J=z[Z]}else if("center"===l){t-=z[0]/2,e=[],L=s.length;for(var $=0;$<L;$++)0===$?(X=zt(t),q=Gt(n)):(X=M((J-z[$])/2),q=-G),e.push([s[$],X,q]),J=z[$]}else if("left"===l){e=[],L=s.length;for(var ee=0;ee<L;ee++)e.push(s[ee])}else if("justify"===l&&"Identity-H"===V.encoding){e=[],L=s.length,c=0!==c?c:j;for(var ne=0,ie=0;ie<L;ie++)if(q=0===ie?Gt(n):-G,X=0===ie?zt(t):ne,ie<L-1){var oe=M((c-z[ie])/(s[ie].split(" ").length-1)),se=s[ie].split(" ");e.push([se[0]+" ",X,q]),ne=0;for(var ae=1;ae<se.length;ae++){var le=(K(se[ae-1]+" "+se[ae])-K(se[ae]))*x+oe;ae==se.length-1?e.push([se[ae],le,0]):e.push([se[ae]+" ",le,0]),ne-=le}}else e.push([s[ie],X,q]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],L=s.length,c=0!==c?c:j,ie=0;ie<L;ie++){q=0===ie?Gt(n):-G,X=0===ie?zt(t):0;var Ae=s[ie].split(" ").length-1,ce=Ae>0?(c-z[ie])/Ae:0;ie<L-1?W.push(_(M(ce))):W.push(0),e.push([s[ie],X,q])}}}!0===("boolean"==typeof i.R2L?i.R2L:re)&&(e=E(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),o={text:e,x:t,y:n,options:i,mutex:{pdfEscape:nt,activeFontKey:ue,fonts:ge,activeFontSize:te}},Se.publish("postProcessText",o),e=o.text,m=o.mutex.isHex||!1;var he=ge[ue].encoding;"WinAnsiEncoding"!==he&&"StandardEncoding"!==he||(e=E(e,function(e,t,n){return[B(e),t,n]})),s=S(e),e=[];for(var de,pe,fe,me=Array.isArray(s[0])?1:0,ve="",ye=function(e,t,n){var r="";return n instanceof Ie?(n="number"==typeof i.angle?Ue(n,new Ie(1,0,0,1,e,t)):Ue(new Ie(1,0,0,1,e,t),n),w===y&&(n=Ue(new Ie(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=_(e)+" "+_(t)+" Td\n",r},we=0;we<s.length;we++){switch(ve="",me){case 1:fe=(m?"<":"(")+s[we][0]+(m?">":")"),de=parseFloat(s[we][1]),pe=parseFloat(s[we][2]);break;case 0:fe=(m?"<":"(")+s[we]+(m?">":")"),de=zt(t),pe=Gt(n)}void 0!==W&&void 0!==W[we]&&(ve=W[we]+" Tw\n"),0===we?e.push(ve+ye(de,pe,p)+fe):0===me?e.push(ve+fe):1===me&&e.push(ve+ye(de,pe,p)+fe)}e=0===me?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=ue+" "+te+" Tf\n",be+=_(te*b)+" TL\n",be+=qt+"\n",be+=v,be+=e,Y(be+="ET"),h[ue]=!0,f};var xt=d.__private__.clip=d.clip=function(e){return Y("evenodd"===e?"W*":"W"),this};d.clipEvenOdd=function(){return xt("evenodd")},d.__private__.discardPath=d.discardPath=function(){return Y("n"),this};var Bt=d.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(e){return Bt(e)&&(A=e),this};var _t=d.__private__.getStyle=d.getStyle=function(e){var t=A;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Ct=d.close=function(){return Y("h"),this};d.stroke=function(){return Y("S"),this},d.fill=function(e){return St("f",e),this},d.fillEvenOdd=function(e){return St("f*",e),this},d.fillStroke=function(e){return St("B",e),this},d.fillStrokeEvenOdd=function(e){return St("B*",e),this};var St=function(e,t){"object"===(0,Gb.A)(t)?Mt(t,e):Y(e)},Et=function(e){null===e||w===y&&void 0===e||(e=_t(e),Y(e))};function Tt(e,t,n,i,r){var o=new PE(t||this.boundingBox,n||this.xStep,i||this.yStep,this.gState,r||this.matrix);o.stream=this.stream;var s=e+"$$"+this.cloneIndex+++"$$";return Re(s,o),o}var Mt=function(e,t){var n=we[e.key],i=ye[n];if(i instanceof RE)Y("q"),Y(Ft(t)),i.gState&&d.setGState(i.gState),Y(e.matrix.toString()+" cm"),Y("/"+n+" sh"),Y("Q");else if(i instanceof PE){var r=new Ie(1,0,0,-1,0,dn());e.matrix&&(r=r.multiply(e.matrix||Le),n=Tt.call(i,e.key,e.boundingBox,e.xStep,e.yStep,r).id),Y("q"),Y("/Pattern cs"),Y("/"+n+" scn"),i.gState&&d.setGState(i.gState),Y(t),Y("Q")}},Ft=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},It=d.moveTo=function(e,t){return Y(_(M(e))+" "+_(F(t))+" m"),this},Ut=d.lineTo=function(e,t){return Y(_(M(e))+" "+_(F(t))+" l"),this},Lt=d.curveTo=function(e,t,n,i,r,o){return Y([_(M(e)),_(F(t)),_(M(n)),_(F(i)),_(M(r)),_(F(o)),"c"].join(" ")),this};d.__private__.line=d.line=function(e,t,n,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||!Bt(r))throw new Error("Invalid arguments passed to jsPDF.line");return w===v?this.lines([[n-e,i-t]],e,t,[1,1],r||"S"):this.lines([[n-e,i-t]],e,t,[1,1]).stroke()},d.__private__.lines=d.lines=function(e,t,n,i,r,o){var s,a,l,A,c,u,h,d,p,f,g,m;if("number"==typeof e&&(m=n,n=t,t=e,e=m),i=i||[1,1],o=o||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(i)||!Bt(r)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(It(t,n),s=i[0],a=i[1],A=e.length,f=t,g=n,l=0;l<A;l++)2===(c=e[l]).length?(f=c[0]*s+f,g=c[1]*a+g,Ut(f,g)):(u=c[0]*s+f,h=c[1]*a+g,d=c[2]*s+f,p=c[3]*a+g,f=c[4]*s+f,g=c[5]*a+g,Lt(u,h,d,p,f,g));return o&&Ct(),Et(r),this},d.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.c;switch(n.op){case"m":It(i[0],i[1]);break;case"l":Ut(i[0],i[1]);break;case"c":Lt.apply(this,i);break;case"h":Ct()}}return this},d.__private__.rect=d.rect=function(e,t,n,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||!Bt(r))throw new Error("Invalid arguments passed to jsPDF.rect");return w===v&&(i=-i),Y([_(M(e)),_(F(t)),_(M(n)),_(M(i)),"re"].join(" ")),Et(r),this},d.__private__.triangle=d.triangle=function(e,t,n,i,r,o,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Bt(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,i-t],[r-n,o-i],[e-r,t-o]],e,t,[1,1],s,!0),this},d.__private__.roundedRect=d.roundedRect=function(e,t,n,i,r,o,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Bt(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),o=Math.min(o,.5*i),this.lines([[n-2*r,0],[r*a,0,r,o-o*a,r,o],[0,i-2*o],[0,o*a,-r*a,o,-r,o],[2*r-n,0],[-r*a,0,-r,-o*a,-r,-o],[0,2*o-i],[0,-o*a,r*a,-o,r,-o]],e+r,t,[1,1],s,!0),this},d.__private__.ellipse=d.ellipse=function(e,t,n,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||!Bt(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*i;return It(e+n,t),Lt(e+n,t-s,e+o,t-i,e,t-i),Lt(e-o,t-i,e-n,t-s,e-n,t),Lt(e-n,t+s,e-o,t+i,e,t+i),Lt(e+o,t+i,e+n,t+s,e+n,t),Et(r),this},d.__private__.circle=d.circle=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||!Bt(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,i)},d.setFont=function(e,t,n){return n&&(t=B(t,n)),ue=lt(e,t,{disableWarning:!1}),this};var Rt=d.__private__.getFont=d.getFont=function(){return ge[lt.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var e,t,n={};for(e in me)if(me.hasOwnProperty(e))for(t in n[e]=[],me[e])me[e].hasOwnProperty(t)&&n[e].push(t);return n},d.addFont=function(e,t,n,i,r){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=B(n,i)),tt.call(this,e,t,n,r=r||"Identity-H")};var Pt,Nt=e.lineWidth||.200025,kt=d.__private__.getLineWidth=d.getLineWidth=function(){return Nt},Dt=d.__private__.setLineWidth=d.setLineWidth=function(e){return Nt=e,Y(_(M(e))+" w"),this};d.__private__.setLineDash=NE.API.setLineDash=NE.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return _(M(e))}).join(" "),t=_(M(t)),Y("["+e+"] "+t+" d"),this};var Ot=d.__private__.getLineHeight=d.getLineHeight=function(){return te*Pt};d.__private__.getLineHeight=d.getLineHeight=function(){return te*Pt};var Ht=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Pt=e),this},Qt=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return Pt};Ht(e.lineHeight);var zt=d.__private__.getHorizontalCoordinate=function(e){return M(e)},Gt=d.__private__.getVerticalCoordinate=function(e){return w===y?e:Ce[O].mediaBox.topRightY-Ce[O].mediaBox.bottomLeftY-M(e)},jt=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(e){return _(zt(e))},Vt=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(e){return _(Gt(e))},Wt=e.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return ze(Wt)},d.__private__.setStrokeColor=d.setDrawColor=function(e,t,n,i){return Wt=Ge({ch1:e,ch2:t,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),Y(Wt),this};var Kt=e.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return ze(Kt)},d.__private__.setFillColor=d.setFillColor=function(e,t,n,i){return Kt=Ge({ch1:e,ch2:t,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),Y(Kt),this};var qt=e.textColor||"0 g",Xt=d.__private__.getTextColor=d.getTextColor=function(){return ze(qt)};d.__private__.setTextColor=d.setTextColor=function(e,t,n,i){return qt=Ge({ch1:e,ch2:t,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this};var Jt=e.charSpace,Yt=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Jt||0)};d.__private__.setCharSpace=d.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jt=e,this};var Zt=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(e){var t=d.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,Y(t+" J"),this};var $t=0;d.__private__.setLineJoin=d.setLineJoin=function(e){var t=d.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,Y(t+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(_(M(e))+" M"),this},d.GState=UE,d.setGState=function(e){(e="string"==typeof e?be[xe[e]]:en(null,e)).equals(Be)||(Y("/"+e.id+" gs"),Be=e)};var en=function(e,t){if(!e||!xe[e]){var n=!1;for(var i in be)if(be.hasOwnProperty(i)&&be[i].equals(t)){n=!0;break}if(n)t=be[i];else{var r="GS"+(Object.keys(be).length+1).toString(10);be[r]=t,t.id=r}return e&&(xe[e]=t.id),Se.publish("addGState",t),t}};d.addGState=function(e,t){return en(e,t),this},d.saveGraphicsState=function(){return Y("q"),ve.push({key:ue,size:te,color:qt}),this},d.restoreGraphicsState=function(){Y("Q");var e=ve.pop();return ue=e.key,te=e.size,qt=e.color,Be=null,this},d.setCurrentTransformationMatrix=function(e){return Y(e.toString()+" cm"),this},d.comment=function(e){return Y("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var i=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(e){r=e.toString()}}),this},nn=function(e,t,n,i){tn.call(this,e,t),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var o=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},rn=function(){this.page=_e,this.currentPage=O,this.pages=K.slice(0),this.pagesContext=Ce.slice(0),this.x=de,this.y=pe,this.matrix=fe,this.width=an(O),this.height=An(O),this.outputDestination=X,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){_e=this.page,O=this.currentPage,Ce=this.pagesContext,K=this.pages,de=this.x,pe=this.y,fe=this.matrix,ln(O,this.width),cn(O,this.height),X=this.outputDestination};var on=function(e,t,n,i,r){Fe.push(new rn),_e=O=0,K=[],de=e,pe=t,fe=r,it([n,i])};for(var sn in d.beginFormObject=function(e,t,n,i,r){return on(e,t,n,i,r),this},d.endFormObject=function(e){return function(e){if(Me[e])Fe.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Te).length+1).toString(10);t.id=n,Me[e]=n,Te[n]=t,Se.publish("addFormObject",t),Fe.pop().restore()}}(e),this},d.doFormObject=function(e,t){var n=Te[Me[e]];return Y("q"),Y(t.toString()+" cm"),Y("/"+n.id+" Do"),Y("Q"),this},d.getFormObject=function(e){var t=Te[Me[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},d.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(AE(ft(pt()),e),"function"==typeof AE.unload&&iE.setTimeout&&setTimeout(AE.unload,911),this):new Promise(function(t,n){try{var r=AE(ft(pt()),e);"function"==typeof AE.unload&&iE.setTimeout&&setTimeout(AE.unload,911),t(r)}catch(i){n(i.message)}})},NE.API)NE.API.hasOwnProperty(sn)&&("events"===sn&&NE.API.events.length?function(e,t){var n,i,r;for(r=t.length-1;-1!==r;r--)n=t[r][0],i=t[r][1],e.subscribe.apply(e,[n].concat("function"==typeof i?[i]:i))}(Se,NE.API.events):d[sn]=NE.API[sn]);function an(e){return Ce[e].mediaBox.topRightX-Ce[e].mediaBox.bottomLeftX}function ln(e,t){Ce[e].mediaBox.topRightX=t+Ce[e].mediaBox.bottomLeftX}function An(e){return Ce[e].mediaBox.topRightY-Ce[e].mediaBox.bottomLeftY}function cn(e,t){Ce[e].mediaBox.topRightY=t+Ce[e].mediaBox.bottomLeftY}var un=d.getPageWidth=function(e){return an(e=e||O)/he},hn=d.setPageWidth=function(e,t){ln(e,t*he)},dn=d.getPageHeight=function(e){return An(e=e||O)/he},pn=d.setPageHeight=function(e,t){cn(e,t*he)};return d.internal={pdfEscape:nt,getStyle:_t,getFont:Rt,getFontSize:ie,getCharSpace:Yt,getTextColor:Xt,getLineHeight:Ot,getLineHeightFactor:Qt,getLineWidth:kt,write:Z,getHorizontalCoordinate:zt,getVerticalCoordinate:Gt,getCoordinateString:jt,getVerticalCoordinateString:Vt,collections:{},newObject:Ne,newAdditionalObject:Oe,newObjectDeferred:ke,newObjectDeferredBegin:De,getFilters:je,putStream:Ve,events:Se,scaleFactor:he,pageSize:{getWidth:function(){return un(O)},setWidth:function(e){hn(O,e)},getHeight:function(){return dn(O)},setHeight:function(e){pn(O,e)}},encryptionOptions:c,encryption:vt,getEncryptor:function(e){return null!==c?vt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:at,pages:K,out:Y,f2:E,f3:T,getPageInfo:yt,getPageInfoByObjId:wt,getCurrentPageInfo:bt,getPDFVersion:f,Point:tn,Rectangle:nn,Matrix:Ie,hasHotfix:mt},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return un(O)},set:function(e){hn(O,e)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return dn(O)},set:function(e){pn(O,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var i=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(h[i]=!0);var r=e[t][0].split("-");et({id:i,fontName:r[0],fontStyle:r[1]||""})}Se.publish("addFonts",{fonts:ge,dictionary:me})}.call(d,ee),ue="F1",rt(r,n),Se.publish("initialized"),d}ME.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ME.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ME.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},ME.prototype.processOwnerPassword=function(e,t){return EE(_E(t).substr(0,5),e)},ME.prototype.encryptor=function(e,t){var n=_E(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return EE(n,e)}},UE.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,Gb.A)(e)!==(0,Gb.A)(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return 0===i},NE.API={events:[]},NE.version="3.0.3";var kE=NE.API,DE=1,OE=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},HE=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},QE=function(e){return e.toFixed(2)},zE=function(e){return e.toFixed(5)};kE.__acroform__={};var GE=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},jE=function(e){return e*DE},VE=function(e){var t=new aT,n=bT.internal.getHeight(e)||0,i=bT.internal.getWidth(e)||0;return t.BBox=[0,0,Number(QE(i)),Number(QE(n))],t},WE=kE.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},KE=kE.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},qE=kE.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},XE=kE.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qE(e,t-1)},JE=kE.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return WE(e,t-1)},YE=kE.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return KE(e,t-1)},ZE=kE.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=e[0],o=e[1],s=e[2],a=e[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(o+a)||0,l.upperRight_X=n(r+s)||0,l.upperRight_Y=i(o)||0,[Number(QE(l.lowerLeft_X)),Number(QE(l.lowerLeft_Y)),Number(QE(l.upperRight_X)),Number(QE(l.upperRight_Y))]},$E=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=eT(e,n),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+QE(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=VE(e);return o.scope=e.scope,o.stream=t.join("\n"),o}},eT=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},r=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map(function(e){return e.split("\n")}):r.map(function(e){return[e]});var o=n,s=bT.internal.getHeight(e)||0;s=s<0?-s:s;var a=bT.internal.getWidth(e)||0;a=a<0?-a:a;var l=function(t,n,i){if(t+1<r.length){var o=n+" "+r[t+1][0];return tT(o,e,i).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var A,c,u=tT("3",e,o).height,h=e.multiline?s-o:(s-u)/2,d=h+=2,p=0,f=0,g=0;if(o<=0){t="(...) Tj\n",t+="% Width of Text: "+tT(t,e,o=12).width+", FieldWidth:"+a+"\n";break}for(var m="",v=0,y=0;y<r.length;y++)if(r.hasOwnProperty(y)){var w=!1;if(1!==r[y].length&&g!==r[y].length-1){if((u+2)*(v+2)+2>s)continue e;m+=r[y][g],w=!0,f=y,y--}else{m=" "==(m+=r[y][g]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var b=parseInt(y),x=l(b,m,o),B=y>=r.length-1;if(x&&!B){m+=" ",g=0;continue}if(x||B){if(B)f=b;else if(e.multiline&&(u+2)*(v+2)+2>s)continue e}else{if(!e.multiline)continue e;if((u+2)*(v+2)+2>s)continue e;f=b}}for(var _="",C=p;C<=f;C++){var S=r[C];if(e.multiline){if(C===f){_+=S[g]+" ",g=(g+1)%S.length;continue}if(C===p){_+=S[S.length-1]+" ";continue}}_+=S[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,c=tT(_,e,o).width,e.textAlign){case"right":A=a-c-2;break;case"center":A=(a-c)/2;break;default:A=2}t+=QE(A)+" "+QE(d)+" Td\n",t+="("+OE(_)+") Tj\n",t+=-QE(A)+" 0 Td\n",d=-(o+2),c=0,p=w?f:f+1,v++,m=""}break}return i.text=t,i.fontSize=o,i},tT=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},nT={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iT=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},rT=kE.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(e){return e};if(Array.isArray(e)){for(var r="[",o=0;o<e.length;o++)switch(0!==o&&(r+=" "),(0,Gb.A)(e[o])){case"boolean":case"number":case"object":r+=e[o].toString();break;case"string":"/"!==e[o].substr(0,1)?(void 0!==t&&n&&(i=n.internal.getEncryptor(t)),r+="("+OE(i(e[o].toString()))+")"):r+=e[o].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},oT=function(e,t,n){var i=function(e){return e};return void 0!==t&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+OE(i(e))+")"},sT=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sT.prototype.toString=function(){return this.objId+" 0 R"},sT.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},sT.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var i=t[n],r=this[i];r&&(Array.isArray(r)?e.push({key:i,value:rT(r,this.objId,this.scope)}):r instanceof sT?(r.scope=this.scope,e.push({key:i,value:r.objId+" 0 R"})):"function"!=typeof r&&e.push({key:i,value:r}))}return e};var aT=function(){sT.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};GE(aT,sT);var lT=function(){sT.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+OE(t(e))+")"}},set:function(t){e=t}})};GE(lT,sT);var AT=function e(){sT.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(t,3))},set:function(e){!0===Boolean(e)?this.F=JE(t,3):this.F=YE(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(e){i=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(e){i[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(e){i[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(e){i[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(e){i[3]=e}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof mT)return;o="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+OE(t(o))+")"},set:function(e){o=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===A?50/DE:A},set:function(e){A=e}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){c=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof mT||this instanceof yT))return oT(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof pT==0?oT(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof pT==0?"("===e.substr(0,1)?HE(e.substr(1,e.length-2)):HE(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pT==1?HE(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof pT==1?"/"+e:e}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof pT==0?oT(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof pT==0?"("===e.substr(0,1)?HE(e.substr(1,e.length-2)):HE(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pT==1?HE(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof pT==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,1):this.Ff=YE(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,2):this.Ff=YE(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,3):this.Ff=YE(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};GE(AT,sT);var cT=function(){AT.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rT(t,this.objId,this.scope)},set:function(e){var n,i;i=[],"string"==typeof(n=e)&&(i=function(e,t,n){n||(n=1);for(var i,r=[];i=t.exec(e);)r.push(i[n]);return r}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,18):this.Ff=YE(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=JE(this.Ff,19):this.Ff=YE(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=JE(this.Ff,20),t.sort()):this.Ff=YE(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,22):this.Ff=YE(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,23):this.Ff=YE(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,27):this.Ff=YE(this.Ff,27)}}),this.hasAppearanceStream=!1};GE(cT,AT);var uT=function(){cT.call(this),this.fontName="helvetica",this.combo=!1};GE(uT,cT);var hT=function(){uT.call(this),this.combo=!0};GE(hT,uT);var dT=function(){hT.call(this),this.edit=!0};GE(dT,hT);var pT=function(){AT.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,15):this.Ff=YE(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,16):this.Ff=YE(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,17):this.Ff=YE(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,26):this.Ff=YE(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+OE(e(t[n]))+")");return i.push(">>"),i.join("\n")}},set:function(e){"object"===(0,Gb.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};GE(pT,AT);var fT=function(){pT.call(this),this.pushButton=!0};GE(fT,pT);var gT=function(){pT.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};GE(gT,pT);var mT=function(){var e,t;AT.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),i)n.push("/"+t+" ("+OE(e(i[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,Gb.A)(e)&&(i=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(e){"string"==typeof e&&(i.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bT.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};GE(mT,AT),gT.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},gT.prototype.createOption=function(e){var t=new mT;return t.Parent=this,t.optionName=e,this.Kids.push(t),xT.call(this.scope,t),t};var vT=function(){pT.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bT.CheckBox.createAppearanceStream()};GE(vT,pT);var yT=function(){AT.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,13):this.Ff=YE(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,21):this.Ff=YE(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,23):this.Ff=YE(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,24):this.Ff=YE(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,25):this.Ff=YE(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,26):this.Ff=YE(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};GE(yT,AT);var wT=function(){yT.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(XE(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=JE(this.Ff,14):this.Ff=YE(this.Ff,14)}}),this.password=!0};GE(wT,yT);var bT={CheckBox:{createAppearanceStream:function(){return{N:{On:bT.CheckBox.YesNormal},D:{On:bT.CheckBox.YesPushDown,Off:bT.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=VE(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=eT(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+QE(bT.internal.getWidth(e))+" "+QE(bT.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+QE(o.fontSize)+" Tf "+r),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=VE(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),r=[],o=bT.internal.getHeight(e),s=bT.internal.getWidth(e),a=eT(e,e.caption);return r.push("1 g"),r.push("0 0 "+QE(s)+" "+QE(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+QE(s-1)+" "+QE(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+QE(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=VE(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+QE(bT.internal.getWidth(e))+" "+QE(bT.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:bT.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=bT.RadioButton.Circle.YesNormal,t.D[e]=bT.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=VE(e);t.scope=e.scope;var n=[],i=bT.internal.getWidth(e)<=bT.internal.getHeight(e)?bT.internal.getWidth(e)/4:bT.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=bT.internal.Bezier_C,o=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+zE(bT.internal.getWidth(e)/2)+" "+zE(bT.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=VE(e);t.scope=e.scope;var n=[],i=bT.internal.getWidth(e)<=bT.internal.getHeight(e)?bT.internal.getWidth(e)/4:bT.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*bT.internal.Bezier_C).toFixed(5)),s=Number((i*bT.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+zE(bT.internal.getWidth(e)/2)+" "+zE(bT.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+zE(bT.internal.getWidth(e)/2)+" "+zE(bT.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=VE(e);t.scope=e.scope;var n=[],i=bT.internal.getWidth(e)<=bT.internal.getHeight(e)?bT.internal.getWidth(e)/4:bT.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*bT.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+zE(bT.internal.getWidth(e)/2)+" "+zE(bT.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:bT.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=bT.RadioButton.Cross.YesNormal,t.D[e]=bT.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=VE(e);t.scope=e.scope;var n=[],i=bT.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+QE(bT.internal.getWidth(e)-2)+" "+QE(bT.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(QE(i.x1.x)+" "+QE(i.x1.y)+" m"),n.push(QE(i.x2.x)+" "+QE(i.x2.y)+" l"),n.push(QE(i.x4.x)+" "+QE(i.x4.y)+" m"),n.push(QE(i.x3.x)+" "+QE(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=VE(e);t.scope=e.scope;var n=bT.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+QE(bT.internal.getWidth(e))+" "+QE(bT.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+QE(bT.internal.getWidth(e)-2)+" "+QE(bT.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(QE(n.x1.x)+" "+QE(n.x1.y)+" m"),i.push(QE(n.x2.x)+" "+QE(n.x2.y)+" l"),i.push(QE(n.x4.x)+" "+QE(n.x4.y)+" m"),i.push(QE(n.x3.x)+" "+QE(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=VE(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+QE(bT.internal.getWidth(e))+" "+QE(bT.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};bT.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=bT.internal.getWidth(e),n=bT.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},bT.internal.getWidth=function(e){var t=0;return"object"===(0,Gb.A)(e)&&(t=jE(e.Rect[2])),t},bT.internal.getHeight=function(e){var t=0;return"object"===(0,Gb.A)(e)&&(t=jE(e.Rect[3])),t};var xT=kE.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(AT.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(nT)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");DE=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new lT,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.objId=void 0,i.hasAnnotation&&iT(i,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var i in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(i)){var r=e[i],o=[],s=r.Rect;if(r.Rect&&(r.Rect=ZE(r.Rect,t)),t.internal.newObjectDeferredBegin(r.objId,!0),r.DA=bT.createDefaultAppearanceStream(r),"object"===(0,Gb.A)(r)&&"function"==typeof r.getKeyValueListForStream&&(o=r.getKeyValueListForStream()),r.Rect=s,r.hasAppearanceStream&&!r.appearanceStreamContent){var a=$E(r);o.push({key:"AP",value:"<</N "+a+">>"}),t.internal.acroformPlugin.xForms.push(a)}if(r.appearanceStreamContent){var l="";for(var A in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(A)){var c=r.appearanceStreamContent[A];if(l+="/"+A+" ",l+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var i in c)if(c.hasOwnProperty(i)){var u=c[i];"function"==typeof u&&(u=u.call(t,r)),l+="/"+i+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=c)&&(u=u.call(t,r)),l+="/"+i+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:o,objectId:r.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=n,r=e[n];t.internal.newObjectDeferredBegin(r.objId,!0),"object"===(0,Gb.A)(r)&&"function"==typeof r.putStream&&r.putStream(),delete e[i]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof AT))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};kE.AcroFormChoiceField=cT,kE.AcroFormListBox=uT,kE.AcroFormComboBox=hT,kE.AcroFormEditBox=dT,kE.AcroFormButton=pT,kE.AcroFormPushButton=fT,kE.AcroFormRadioButton=gT,kE.AcroFormCheckBox=vT,kE.AcroFormTextField=yT,kE.AcroFormPasswordField=wT,kE.AcroFormAppearance=bT,kE.AcroForm={ChoiceField:cT,ListBox:uT,ComboBox:hT,EditBox:dT,Button:pT,PushButton:fT,RadioButton:gT,CheckBox:vT,TextField:yT,PasswordField:wT,Appearance:bT},NE.AcroForm={ChoiceField:cT,ListBox:uT,ComboBox:hT,EditBox:dT,Button:pT,PushButton:fT,RadioButton:gT,CheckBox:vT,TextField:yT,PasswordField:wT,Appearance:bT};NE.AcroForm;function BT(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,t){var r,o,s,a,l,A=n;if("RGBA"===(t=t||n)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(x(e))for(l in i)for(s=i[l],r=0;r<s.length;r+=1){for(a=!0,o=0;o<s[r].length;o+=1)if(void 0!==s[r][o]&&s[r][o]!==e[o]){a=!1;break}if(!0===a){A=l;break}}else for(l in i)for(s=i[l],r=0;r<s.length;r+=1){for(a=!0,o=0;o<s[r].length;o+=1)if(void 0!==s[r][o]&&s[r][o]!==e.charCodeAt(o)){a=!1;break}if(!0===a){A=l;break}}return A===n&&t!==n&&(A=t),A},o=function e(t){for(var n=this.internal.write,i=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:t.width}),o.push({key:"Height",value:t.height}),t.colorSpace===m.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===m.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)&&t.transparency.length>0){for(var s="",a=0,l=t.transparency.length;a<l;a++)s+=t.transparency[a]+" "+t.transparency[a]+" ";o.push({key:"Mask",value:"["+s+"]"})}void 0!==t.sMask&&o.push({key:"SMask",value:t.objectId+1+" 0 R"});var A=void 0!==t.filter?["/"+t.filter]:void 0;if(i({data:t.data,additionalKeyValues:o,alreadyAppliedFilters:A,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var c,u=null!==(c=t.sMaskBitsPerComponent)&&void 0!==c?c:t.bitsPerComponent,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:u,data:t.sMask};"filter"in t&&(h.decodeParameters="/Predictor ".concat(t.predictor," /Colors 1 /BitsPerComponent ").concat(u," /Columns ").concat(t.width),h.filter=t.filter),e.call(this,h)}if(t.colorSpace===m.INDEXED){var d=this.internal.newObject();i({data:_(new Uint8Array(t.palette)),objectId:d}),n("endobj")}},s=function(){var e=this.internal.collections[t+"images"];for(var n in e)o.call(this,e[n])},a=function(){var e,n=this.internal.collections[t+"images"],i=this.internal.write;for(var r in n)i("/I"+(e=n[r]).index,e.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},A=function(){var e=this.internal.collections[t+"images"];return l.call(this),e},c=function(){return Object.keys(this.internal.collections[t+"images"]).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,Gb.A)(e)&&1===e.nodeType},d=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var i=""+t.getAttribute("src");if(0===i.indexOf("data:image/"))return uE(unescape(i).split("base64,").pop());var r=e.loadFile(i,!0);if(void 0!==r)return r}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return uE(t.toDataURL(o,1).split("base64,").pop())}},p=function(e){var n=this.internal.collections[t+"images"];if(n)for(var i in n)if(e===n[i].alias)return n[i]},f=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,i,r,o){var s=f.call(this,n,i,r),a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=A.call(this);if(n=s[0],i=s[1],c[r.index]=r,o){o*=Math.PI/180;var u=Math.cos(o),h=Math.sin(o),d=function(e){return e.toFixed(4)},p=[d(u),d(h),d(-1*h),d(u),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,a(e),l(t+i),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([a(n),"0","0",a(i),"0","0","cm"].join(" "))):this.internal.write([a(n),"0","0",a(i),a(e),l(t+i),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,i=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;else if(x(e))for(n=e.byteLength/2,t=0;t<n;t++)i=(i<<5)-i+e[t],i|=0;return i},w=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var x=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},B=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(i);return n},_=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=x(e)?e:new Uint8Array(e),i=0;i<n.length;i+=8192)t+=String.fromCharCode.apply(null,n.subarray(i,i+8192));return t};e.addImage=function(){var e,t,i,r,o,s,a,A,c;if("number"==typeof arguments[1]?(t=n,i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5],A=arguments[6],c=arguments[7]):(t=arguments[1],i=arguments[2],r=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6],A=arguments[7],c=arguments[8]),"object"===(0,Gb.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var u=e;e=u.imageData,t=u.format||t||n,i=u.x||i||0,r=u.y||r||0,o=u.w||u.width||o,s=u.h||u.height||s,a=u.alias||a,A=u.compression||A,c=u.rotation||u.angle||c}var d=this.internal.getFilters();if(void 0===A&&-1!==d.indexOf("FlateEncode")&&(A="SLOW"),isNaN(i)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var p=C.call(this,e,t,a,A);return g.call(this,i,r,o,s,p,c),this};var C=function(t,i,o,s){var a,l,A;if("string"==typeof t&&r(t)===n){t=unescape(t);var f=S(t,!1);(""!==f||void 0!==(f=e.loadFile(t,!0)))&&(t=f)}if(h(t)&&(t=d(t,i)),i=r(t,i),!u(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(A=o)||0===A.length)&&(o=function(e){return"string"==typeof e||x(e)?y(e):x(e.data)?y(e.data):null}(t)),(a=p.call(this,o))||(t instanceof Uint8Array||"RGBA"===i||(l=t,t=B(t)),a=this["process"+i.toUpperCase()](t,c.call(this),o,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(s),l)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},S=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,i="";if("string"==typeof e){var o;n=null!==(o=b(e))&&void 0!==o?o:e;try{i=uE(n)}catch(r){if(t)throw w(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+r.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(t){var i,o,s="";if(h(t)&&(t=d(t)),"string"==typeof t&&r(t)===n&&(""===(s=S(t,!1))&&(s=e.loadFile(t)||""),t=s),o=r(t),!u(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(t instanceof Uint8Array||(t=B(t)),!(i=this["process"+o.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(NE.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};NE.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,i,r,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,A=!1,c=0;c<l.length&&!A;c++)switch((n=l[c]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(0!=A){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var h=this.internal.pdfEscape,d=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),m=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",r+=" /Popup "+f.objId+" 0 R",r+=" /P "+a.objId+" 0 R",r+=" /T ("+h(g(m))+") >>",p.content=r;var v=p.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(r+=" /Open true"),r+=" >>",f.content=r,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var y=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(d(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var w=this.annotations._nameMap[n.options.name];n.options.pageNumber=w.page,n.options.top=w.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(d(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;default:var b=s(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+b+" "+n.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,i,r){var o=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:s(e),y:a(t),w:s(e+n),h:a(t+i)},options:r,type:"link"})},e.textWithLink=function(e,t,n,i){var r,o,s=this.getTextWidth(e),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==i.maxWidth){o=i.maxWidth;var l=this.splitTextToSize(e,o).length;r=Math.ceil(a*l)}else o=s,r=a;return this.text(e,t,n,i),n+=.2*a,"center"===i.align&&(t-=s/2),"right"===i.align&&(t-=s),this.link(t,n-a,o,r,i),s},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(NE.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},a=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&r.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&o(e)&&t[e.charCodeAt(0)].length>=1};var A=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&o(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&o(e)&&t[e.charCodeAt(0)].length>=3};var c=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&o(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,i=n,r="",o=0;for(t=0;t<e.length;t+=1)void 0!==i[e.charCodeAt(t)]?(o++,"number"==typeof(i=i[e.charCodeAt(t)])&&(r+=String.fromCharCode(i),i=n,o=0),t===e.length-1&&(i=n,r+=e.charAt(t-(o-1)),t-=o-1,o=0)):(i=n,r+=e.charAt(t-o),t-=o,o=0);return r};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==i[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return s(e)?!1===o(e)?-1:!A(e)||!s(t)&&!s(n)||!s(n)&&a(t)||a(e)&&!s(t)||a(e)&&l(t)||a(e)&&a(t)?0:c(e)&&s(t)&&!a(t)&&s(n)&&A(n)?3:a(e)||!s(n)?1:2:-1},d=function(e){var n=0,i=0,r=0,o="",a="",l="",A=(e=e||"").split("\\s+"),c=[];for(n=0;n<A.length;n+=1){for(c.push(""),i=0;i<A[n].length;i+=1)o=A[n][i],a=A[n][i-1],l=A[n][i+1],s(o)?(r=h(o,a,l),c[n]+=-1!==r?String.fromCharCode(t[o.charCodeAt(0)][r]):o):c[n]+=o;c[n]=u(c[n])}return c.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var i=0;for(n=[],i=0;i<t.length;i+=1)Array.isArray(t[i])?n.push([d(t[i][0]),t[i][1],t[i][2]]):n.push([d(t[i])]);e=n}else e=d(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(NE.API),NE.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(e){i=e}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(NE.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(e){s=e}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){i.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),o=t.scaleFactor||this.internal.scaleFactor,s=0,a=0,l=0,A=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var c=t.maxWidth;c>0?"string"==typeof e?e=this.splitTextToSize(e,c):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(A.splitTextToSize(t,c))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)s<(l=this.getStringUnitWidth(e[u],{font:r})*n)&&(s=l);return 0!==s&&(a=e.length),{w:s/=o,h:Math.max((a*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var e;e=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var r=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,a=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=a.top,A&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,A,c){if(i.call(this),!l)throw new Error("No data for PDF table.");var u,h,d,p,f=[],g=[],m=[],v={},y={},w=[],b=[],x=(c=c||{}).autoSize||!1,B=!1!==c.printHeaders,_=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,C=c.margins||Object.assign({width:this.getPageWidth()},t),S="number"==typeof c.padding?c.padding:3,E=c.headerBackgroundColor||"#c8c8c8",T=c.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=_,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=T,this.setFontSize(_),null==A)g=f=Object.keys(l[0]),m=f.map(function(){return"left"});else if(Array.isArray(A)&&"object"===(0,Gb.A)(A[0]))for(f=A.map(function(e){return e.name}),g=A.map(function(e){return e.prompt||e.name||""}),m=A.map(function(e){return e.align||"left"}),u=0;u<A.length;u+=1)y[A[u].name]=.7499990551181103*A[u].width;else Array.isArray(A)&&"string"==typeof A[0]&&(g=f=A,m=f.map(function(){return"left"}));if(x||Array.isArray(A)&&"string"==typeof A[0])for(u=0;u<f.length;u+=1){for(v[p=f[u]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=v[p],this.setFont(void 0,"normal"),d=0;d<h.length;d+=1)w.push(this.getTextDimensions(h[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[p]=Math.max.apply(null,w)+S+S,w=[]}if(B){var M={};for(u=0;u<f.length;u+=1)M[f[u]]={},M[f[u]].text=g[u],M[f[u]].align=m[u];var F=a.call(this,M,y);b=f.map(function(t){return new o(e,n,y[t],F,M[t].text,void 0,M[t].align)}),this.setTableHeaderRow(b),this.printHeaderRow(1,!1)}var I=A.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:u,data:l[u]},this);var U=a.call(this,l[u],y);for(d=0;d<f.length;d+=1){var L=l[u][f[d]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:u,col:d,data:L},this),s.call(this,new o(e,n,y[f[d]],U,L,u+2,I[f[d]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var a=function(e,t){var n=this.internal.__cell__.padding,i=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(e).map(function(i){var r=e[i];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,t[i]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*i/r+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){i.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){r=this.internal.__cell__.tableHeaderRow[A].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,r),this.setTextColor(c)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(NE.API);var _T={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},CT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ST=BT(CT),ET=[100,200,300,400,500,600,700,800,900],TT=BT(ET);function MT(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return _T[e=e||"normal"]?e:"normal"}(e.style),i=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),r=function(e){return"number"==typeof ST[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:i,stretch:r,src:e.src||[],ref:e.ref||{name:t,style:[r,n,i].join(" ")}}}function FT(e,t,n,i){var r;for(r=n;r>=0&&r<t.length;r+=i)if(e[t[r]])return e[t[r]];for(r=n;r>=0&&r<t.length;r-=i)if(e[t[r]])return e[t[r]]}var IT={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},UT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function LT(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function RT(e){return e.trimLeft()}function PT(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function NT(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var kT,DT,OT,HT,QT,zT,GT,jT,VT,WT=["times"];function KT(e,t,n,i,r){var o=4,s=JT;switch(r){case NE.API.image_compression.FAST:o=1,s=XT;break;case NE.API.image_compression.MEDIUM:o=6,s=YT;break;case NE.API.image_compression.SLOW:o=9,s=ZT}e=function(e,t,n,i){for(var r,o=e.length/t,s=new Uint8Array(e.length+o),a=[qT,XT,JT,YT,ZT],l=0;l<o;l+=1){var A=l*t,c=e.subarray(A,A+t);if(i)s.set(i(c,n,r),A+l);else{for(var u=a.length,h=[],d=0;d<u;d+=1)h[d]=a[d](c,n,r);var p=eM(h.concat());s.set(h[p],A+l)}r=c}return s}(e,t,Math.ceil(n*i/8),s);var a=Ex(e,{level:o});return NE.API.__addimage__.arrayBufferToBinaryString(a)}function qT(e){var t=Array.apply([],e);return t.unshift(0),t}function XT(e,t){var n=e.length,i=[];i[0]=1;for(var r=0;r<n;r+=1){var o=e[r-t]||0;i[r+1]=e[r]-o+256&255}return i}function JT(e,t,n){var i=e.length,r=[];r[0]=2;for(var o=0;o<i;o+=1){var s=n&&n[o]||0;r[o+1]=e[o]-s+256&255}return r}function YT(e,t,n){var i=e.length,r=[];r[0]=3;for(var o=0;o<i;o+=1){var s=e[o-t]||0,a=n&&n[o]||0;r[o+1]=e[o]+256-(s+a>>>1)&255}return r}function ZT(e,t,n){var i=e.length,r=[];r[0]=4;for(var o=0;o<i;o+=1){var s=$T(e[o-t]||0,n&&n[o]||0,n&&n[o-t]||0);r[o+1]=e[o]-s+256&255}return r}function $T(e,t,n){if(e===t&&t===n)return e;var i=Math.abs(t-n),r=Math.abs(e-n),o=Math.abs(e+t-n-n);return i<=r&&i<=o?e:r<=o?t:n}function eM(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function tM(e,t,n){var i=t*n,r=Math.floor(i/8),o=16-(i-8*r+n),s=(1<<n)-1;return iM(e,r)>>o&s}function nM(e,t,n,i){var r=n*i,o=Math.floor(r/8),s=16-(r-8*o+i),a=(1<<i)-1,l=(t&a)<<s;!function(e,t,n){if(t+1<e.byteLength)e.setUint16(t,n,!1);else{var i=n>>8&255;e.setUint8(t,i)}}(e,o,iM(e,o)&~(a<<s)&65535|l)}function iM(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function rM(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,r=e[t++],o=r>>7,s=1<<1+(7&r);e[t++],e[t++];var a=null,l=null;o&&(a=t,l=s,t+=3*s);var A=!0,c=[],u=0,h=null,d=0,p=null;for(this.width=n,this.height=i;A&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],1&f||(h=null),d=f>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++],b=w>>6&1,x=1<<1+(7&w),B=a,_=l,C=!1;w>>7&&(C=!0,B=t,_=x,t+=3*x);var S=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}c.push({x:g,y:m,width:v,height:y,has_local_palette:C,palette_offset:B,palette_size:_,data_offset:S,data_length:t-S,transparent_index:h,interlaced:!!b,delay:u,disposal:d});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=c.length)throw new Error("Frame index out of range.");return c[e]},this.decodeAndBlitFrameBGRA=function(t,i){var r=this.frameInfo(t),o=r.width*r.height,s=new Uint8Array(o);oM(e,r.data_offset,s,o);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var A=r.width,c=n-A,u=A,h=4*(r.y*n+r.x),d=4*((r.y+r.height)*n+r.x),p=h,f=4*c;!0===r.interlaced&&(f+=4*n*7);for(var g=8,m=0,v=s.length;m<v;++m){var y=s[m];if(0===u&&(u=A,(p+=f)>=d&&(f=4*c+4*n*(g-1),p=h+(A+c)*(g<<1),g>>=1)),y===l)p+=4;else{var w=e[a+3*y],b=e[a+3*y+1],x=e[a+3*y+2];i[p++]=x,i[p++]=b,i[p++]=w,i[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,i){var r=this.frameInfo(t),o=r.width*r.height,s=new Uint8Array(o);oM(e,r.data_offset,s,o);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var A=r.width,c=n-A,u=A,h=4*(r.y*n+r.x),d=4*((r.y+r.height)*n+r.x),p=h,f=4*c;!0===r.interlaced&&(f+=4*n*7);for(var g=8,m=0,v=s.length;m<v;++m){var y=s[m];if(0===u&&(u=A,(p+=f)>=d&&(f=4*c+4*n*(g-1),p=h+(A+c)*(g<<1),g>>=1)),y===l)p+=4;else{var w=e[a+3*y],b=e[a+3*y+1],x=e[a+3*y+2];i[p++]=w,i[p++]=b,i[p++]=x,i[p++]=255}--u}}}function oM(e,t,n,i){for(var r=e[t++],o=1<<r,s=o+1,a=s+1,l=r+1,A=(1<<l)-1,c=0,u=0,h=0,d=e[t++],p=new Int32Array(4096),f=null;;){for(;c<16&&0!==d;)u|=e[t++]<<c,c+=8,1===d?d=e[t++]:--d;if(c<l)break;var g=u&A;if(u>>=l,c-=l,g!==o){if(g===s)break;for(var m=g<a?g:f,v=0,y=m;y>o;)y=p[y]>>8,++v;var w=y;if(h+v+(m!==g?1:0)>i)return void oE.log("Warning, gif stream longer than expected.");n[h++]=w;var b=h+=v;for(m!==g&&(n[h++]=w),y=m;v--;)y=p[y],n[--b]=255&y,y>>=8;null!==f&&a<4096&&(p[a++]=f<<8|w,a>=A+1&&l<12&&(++l,A=A<<1|1)),f=g}else a=s+1,A=(1<<(l=r+1))-1,f=null}return h!==i&&oE.log("Warning, gif stream shorter than expected."),n}function sM(e){var t,n,i,r,o,s=Math.floor,a=new Array(64),l=new Array(64),A=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),d=new Array(64),p=new Array(64),f=[],g=0,m=7,v=new Array(64),y=new Array(64),w=new Array(64),b=new Array(256),x=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(e,t){for(var n=0,i=0,r=new Array,o=1;o<=16;o++){for(var s=1;s<=e[o];s++)r[t[i]]=[],r[t[i]][0]=n,r[t[i]][1]=o,i++,n++;n*=2}return r}function L(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<m),n--,--m<0&&(255==g?(R(255),R(0)):R(g),m=7,g=0)}function R(e){f.push(e)}function P(e){R(e>>8&255),R(255&e)}function N(e,t,n,i,r){for(var o,s=r[0],a=r[240],l=function(e,t){var n,i,r,o,s,a,l,A,c,u,h=0;for(c=0;c<8;++c){n=e[h],i=e[h+1],r=e[h+2],o=e[h+3],s=e[h+4],a=e[h+5],l=e[h+6];var p=n+(A=e[h+7]),f=n-A,g=i+l,m=i-l,v=r+a,y=r-a,w=o+s,b=o-s,x=p+w,B=p-w,_=g+v,C=g-v;e[h]=x+_,e[h+4]=x-_;var S=.707106781*(C+B);e[h+2]=B+S,e[h+6]=B-S;var E=.382683433*((x=b+y)-(C=m+f)),T=.5411961*x+E,M=1.306562965*C+E,F=.707106781*(_=y+m),I=f+F,U=f-F;e[h+5]=U+T,e[h+3]=U-T,e[h+1]=I+M,e[h+7]=I-M,h+=8}for(h=0,c=0;c<8;++c){n=e[h],i=e[h+8],r=e[h+16],o=e[h+24],s=e[h+32],a=e[h+40],l=e[h+48];var L=n+(A=e[h+56]),R=n-A,P=i+l,N=i-l,k=r+a,D=r-a,O=o+s,H=o-s,Q=L+O,z=L-O,G=P+k,j=P-k;e[h]=Q+G,e[h+32]=Q-G;var V=.707106781*(j+z);e[h+16]=z+V,e[h+48]=z-V;var W=.382683433*((Q=H+D)-(j=N+R)),K=.5411961*Q+W,q=1.306562965*j+W,X=.707106781*(G=D+N),J=R+X,Y=R-X;e[h+40]=Y+K,e[h+24]=Y-K,e[h+8]=J+q,e[h+56]=J-q,h++}for(c=0;c<64;++c)u=e[c]*t[c],d[c]=u>0?u+.5|0:u-.5|0;return d}(e,t),A=0;A<64;++A)p[B[A]]=l[A];var c=p[0]-n;n=p[0],0==c?L(i[0]):(L(i[h[o=32767+c]]),L(u[o]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return L(s),n;for(var g,m=1;m<=f;){for(var v=m;0==p[m]&&m<=f;)++m;var y=m-v;if(y>=16){g=y>>4;for(var w=1;w<=g;++w)L(a);y&=15}o=32767+p[m],L(r[(y<<4)+h[o]]),L(u[o]),m++}return 63!=f&&L(s),n}function k(e){e=Math.min(Math.max(e,1),100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=s((t[n]*e+50)/100);i=Math.min(Math.max(i,1),255),a[B[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var u=s((r[o]*e+50)/100);u=Math.min(Math.max(u,1),255),l[B[o]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var f=0;f<8;f++)A[d]=1/(a[B[d]]*h[p]*h[f]*8),c[d]=1/(l[B[d]]*h[p]*h[f]*8),d++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){o&&k(o),f=new Array,g=0,m=7,P(65496),P(65504),P(16),R(74),R(70),R(73),R(70),R(0),R(1),R(1),R(0),P(1),P(1),R(0),R(0),function(){P(65499),P(132),R(0);for(var e=0;e<64;e++)R(a[e]);R(1);for(var t=0;t<64;t++)R(l[t])}(),function(e,t){P(65472),P(17),R(8),P(t),P(e),R(3),R(1),R(17),R(0),R(2),R(17),R(1),R(3),R(17),R(1)}(e.width,e.height),function(){P(65476),P(418),R(0);for(var e=0;e<16;e++)R(_[e+1]);for(var t=0;t<=11;t++)R(C[t]);R(16);for(var n=0;n<16;n++)R(S[n+1]);for(var i=0;i<=161;i++)R(E[i]);R(1);for(var r=0;r<16;r++)R(T[r+1]);for(var o=0;o<=11;o++)R(M[o]);R(17);for(var s=0;s<16;s++)R(F[s+1]);for(var a=0;a<=161;a++)R(I[a])}(),P(65498),P(12),R(3),R(1),R(0),R(2),R(17),R(3),R(17),R(0),R(63),R(0);var s=0,u=0,h=0;g=0,m=7,this.encode.displayName="_encode_";for(var d,p,b,B,U,D,O,H,Q,z=e.data,G=e.width,j=e.height,V=4*G,W=0;W<j;){for(d=0;d<V;){for(U=V*W+d,O=-1,H=0,Q=0;Q<64;Q++)D=U+(H=Q>>3)*V+(O=4*(7&Q)),W+H>=j&&(D-=V*(W+1+H-j)),d+O>=V&&(D-=d+O-V+4),p=z[D++],b=z[D++],B=z[D++],v[Q]=(x[p]+x[b+256|0]+x[B+512|0]>>16)-128,y[Q]=(x[p+768|0]+x[b+1024|0]+x[B+1280|0]>>16)-128,w[Q]=(x[p+1280|0]+x[b+1536|0]+x[B+1792|0]>>16)-128;s=N(v,A,s,t,i),u=N(y,c,u,n,r),h=N(w,c,h,n,r),d+=32}W+=8}if(m>=0){var K=[];K[1]=m+1,K[0]=(1<<m+1)-1,L(K)}return P(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)b[t]=e(t)}(),t=U(_,C),n=U(T,M),i=U(S,E),r=U(F,I),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var i=e;i<t;i++)h[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=i;for(var r=-(t-1);r<=-e;r++)h[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256|0]=38470*e,x[e+512|0]=7471*e+32768,x[e+768|0]=-11059*e,x[e+1024|0]=-21709*e,x[e+1280|0]=32768*e+8421375,x[e+1536|0]=-27439*e,x[e+1792|0]=-5329*e}(),k(e)}function aM(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function lM(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var i=0;4>i;i++)if(e[t+i]!=n.charCodeAt(i))return!0;return!1}function i(e,t,n,i,r){for(var o=0;o<r;o++)e[t+o]=n[i+o]}function r(e,t,n,i){for(var r=0;r<i;r++)e[t+r]=n}function o(e){return new Int32Array(e)}function s(e,t){for(var n=[],i=0;i<e;i++)n.push(new t);return n}function a(e,t){var n=[];return function e(n,i,r){for(var o=r[i],s=0;s<o&&(n.push(r.length>i+1?[]:new t),!(r.length<i+1));s++)e(n[s],i+1,r)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function A(e,n,i,r,o){t(!(r%i));do{e[n+(r-=i)]=o}while(0<r)}function c(e,n,i,r,s){if(t(2328>=s),512>=s)var a=o(512);else if(null==(a=o(s)))return 0;return function(e,n,i,r,s,a){var c,h,d=n,p=1<<i,f=o(16),g=o(16);for(t(0!=s),t(null!=r),t(null!=e),t(0<i),h=0;h<s;++h){if(15<r[h])return 0;++f[r[h]]}if(f[0]==s)return 0;for(g[1]=0,c=1;15>c;++c){if(f[c]>1<<c)return 0;g[c+1]=g[c]+f[c]}for(h=0;h<s;++h)c=r[h],0<r[h]&&(a[g[c]++]=h);if(1==g[15])return(r=new u).g=0,r.value=a[0],A(e,d,1,p,r),p;var m,v=-1,y=p-1,w=0,b=1,x=1,B=1<<i;for(h=0,c=1,s=2;c<=i;++c,s<<=1){if(b+=x<<=1,0>(x-=f[c]))return 0;for(;0<f[c];--f[c])(r=new u).g=c,r.value=a[h++],A(e,d+w,s,B,r),w=l(w,c)}for(c=i+1,s=2;15>=c;++c,s<<=1){if(b+=x<<=1,0>(x-=f[c]))return 0;for(;0<f[c];--f[c]){if(r=new u,(w&y)!=v){for(d+=B,m=1<<(v=c)-i;15>v&&!(0>=(m-=f[v]));)++v,m<<=1;p+=B=1<<(m=v-i),e[n+(v=w&y)].g=m+i,e[n+v].value=d-n-v}r.g=c-i,r.value=a[h++],A(e,d+(w>>i),s,B,r),w=l(w,c)}}return b!=2*g[15]-1?0:p}(e,n,i,r,s,a)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function d(){this.G=s(5,u),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Dn,h)}function p(e,n,i,r){t(null!=e),t(null!=n),t(2147483648>r),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=i,e.Jd=n,e.Yc=i+r,e.Zc=4<=r?i+r-4+1:i,S(e)}function f(e,t){for(var n=0;0<t--;)n|=T(e,128)<<t;return n}function g(e,t){var n=f(e,t);return E(e)?-n:n}function m(e,n,i,r){var o,s=0;for(t(null!=e),t(null!=n),t(4294967288>r),e.Sb=r,e.Ra=0,e.u=0,e.h=0,4<r&&(r=4),o=0;o<r;++o)s+=n[i+o]<<8*o;e.Ra=s,e.bb=r,e.oa=n,e.pa=i}function v(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Qn-8>>>0,++e.bb,e.u-=8;B(e)&&(e.h=1,e.u=0)}function y(e,n){if(t(0<=n),!e.h&&n<=Hn){var i=x(e)&On[n];return e.u+=n,v(e),i}return e.h=1,e.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function b(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(e){return e.Ra>>>(e.u&Qn-1)>>>0}function B(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Qn}function _(e,t){e.u=t,e.h=B(e)}function C(e){e.u>=zn&&(t(e.u>=zn),v(e))}function S(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function E(e){return f(e,1)}function T(e,t){var n=e.Ca;0>e.b&&S(e);var i=e.b,r=n*t>>>8,o=(e.I>>>i>r)+0;for(o?(n-=r,e.I-=r+1<<i>>>0):n=r+1,i=n,r=0;256<=i;)r+=8,i>>=8;return i=7^r+Gn[i],e.b-=i,e.Ca=(n<<i)-1,o}function M(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function F(e,t){return e[t+0]|e[t+1]<<8}function I(e,t){return F(e,t)|e[t+2]<<16}function U(e,t){return F(e,t)|F(e,t+2)<<16}function L(e,n){var i=1<<n;return t(null!=e),t(0<n),e.X=o(i),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function R(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),i(n.X,0,e.X,0,1<<n.Xa)}function P(){this.X=[],this.Xa=this.Mb=0}function N(e,n,i,r){t(null!=i),t(null!=r);var o=i[0],s=r[0];return 0==o&&(o=(e*s+n/2)/n),0==s&&(s=(n*o+e/2)/e),0>=o||0>=s?0:(i[0]=o,r[0]=s,1)}function k(e,t){return e+(1<<t)-1>>>t}function D(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function O(t,n){e[n]=function(n,i,r,o,s,a,l){var A;for(A=0;A<s;++A){var c=e[t](a[l+A-1],r,o+A);a[l+A]=D(n[i+A],c)}}}function H(){this.ud=this.hd=this.jd=0}function Q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function z(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function G(e,t){return z(e+(e-t+.5>>1))}function j(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function V(e,t,n,i,r,o,s){for(i=o[s-1],n=0;n<r;++n)o[s+n]=i=D(e[t+n],i)}function W(e,t,n,i,r){var o;for(o=0;o<n;++o){var s=e[t+o],a=s>>8&255,l=16711935&(l=(l=16711935&s)+((a<<16)+a));i[r+o]=(4278255360&s)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function q(e,t,n,i,r,o){var s;for(s=0;s<i;++s){var a=t[n+s],l=a>>>8,A=a,c=255&(c=(c=a>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));A=255&(A=(A+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(c<<24>>24)>>>5)),r[o+s]=(4278255360&a)+(c<<16)+A}}function X(t,n,i,r,o){e[n]=function(e,t,n,i,s,a,l,A,c){for(i=l;i<A;++i)for(l=0;l<c;++l)s[a++]=o(n[r(e[t++])])},e[t]=function(t,n,s,a,l,A,c){var u=8>>t.b,h=t.Ea,d=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;n<s;++n){var f,g=0;for(f=0;f<h;++f)f&t||(g=r(a[l++])),A[c++]=o(d[g&p]),g>>=u}else e["VP8LMapColor"+i](a,l,d,p,A,c,n,s,h)}}function J(e,t,n,i,r){for(n=t+n;t<n;){var o=e[t++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=255&o}}function Y(e,t,n,i,r){for(n=t+n;t<n;){var o=e[t++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=255&o,i[r++]=o>>24&255}}function Z(e,t,n,i,r){for(n=t+n;t<n;){var o=(s=e[t++])>>16&240|s>>12&15,s=240&s|s>>28&15;i[r++]=o,i[r++]=s}}function $(e,t,n,i,r){for(n=t+n;t<n;){var o=(s=e[t++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;i[r++]=o,i[r++]=s}}function ee(e,t,n,i,r){for(n=t+n;t<n;){var o=e[t++];i[r++]=255&o,i[r++]=o>>8&255,i[r++]=o>>16&255}}function te(e,t,n,r,o,s){if(0==s)for(n=t+n;t<n;)M(r,((s=e[t++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),o+=32;else i(r,o,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function ie(e){return e==zi||e==Gi||e==ji||e==Vi}function re(){this.eb=[],this.size=this.A=this.fb=0}function oe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function se(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new re,this.f.kb=new oe,this.sd=null}function ae(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ae(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ce(e,t){var n=e.T,r=t.ba.f.RGBA,o=r.eb,s=r.fb+e.ka*r.A,a=gr[t.ba.S],l=e.y,A=e.O,c=e.f,u=e.N,h=e.ea,d=e.W,p=t.cc,f=t.dc,g=t.Mc,m=t.Nc,v=e.ka,y=e.ka+e.T,w=e.U,b=w+1>>1;for(0==v?a(l,A,null,null,c,u,h,d,c,u,h,d,o,s,null,null,w):(a(t.ec,t.fc,l,A,p,f,g,m,c,u,h,d,o,s-r.A,o,s,w),++n);v+2<y;v+=2)p=c,f=u,g=h,m=d,u+=e.Rc,d+=e.Rc,s+=2*r.A,a(l,(A+=2*e.fa)-e.fa,l,A,p,f,g,m,c,u,h,d,o,s-r.A,o,s,w);return A+=e.fa,e.j+y<e.o?(i(t.ec,t.fc,l,A,w),i(t.cc,t.dc,c,u,b),i(t.Mc,t.Nc,h,d,b),n--):1&y||a(l,A,null,null,c,u,h,d,c,u,h,d,o,s+r.A,null,null,w),n}function ue(e,n,i){var r=e.F,o=[e.J];if(null!=r){var s=e.U,a=n.ba.S,l=a==Oi||a==ji;n=n.ba.f.RGBA;var A=[0],c=e.ka;A[0]=e.T,e.Kb&&(0==c?--A[0]:(--c,o[0]-=e.width),e.j+e.ka+e.T==e.o&&(A[0]=e.o-e.j-c));var u=n.eb;c=n.fb+c*n.A,e=_i(r,o[0],e.width,s,A,u,c+(l?0:3),n.A),t(i==A),e&&ie(a)&&xi(u,c,l,s,A,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,i=11>n,r=n==Ni||n==Di||n==Oi||n==Hi||12==n||ie(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Pn(t.Oa,e,r?11:12))return 0;if(r&&ie(n)&&vn(),e.da)alert("todo:use_scaling");else{if(i){if(t.Ib=Ae,e.Kb){if(n=e.U+1>>1,t.memory=o(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ce,vn()}}else alert("todo:EmitYUV");r&&(t.Jb=ue,i&&gn())}if(i&&!Fr){for(e=0;256>e;++e)Ir[e]=89858*(e-128)+Cr>>_r,Rr[e]=-22014*(e-128)+Cr,Lr[e]=-45773*(e-128),Ur[e]=113618*(e-128)+Cr>>_r;for(e=Sr;e<Er;++e)t=76283*(e-16)+Cr>>_r,Pr[e-Sr]=Ve(t,255),Nr[e-Sr]=Ve(t+8>>4,15);Fr=1}return 1}function de(e){var n=e.ma,i=e.U,r=e.T;return t(!(1&e.ka)),0>=i||0>=r?0:(i=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,i),n.Dc+=i,1)}function pe(e){e.ma.memory=null}function fe(e,t,n,i){return 47!=y(e,8)?0:(t[0]=y(e,14)+1,n[0]=y(e,14)+1,i[0]=y(e,1),0!=y(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+y(t,n)+1}function me(e,t){return 120<t?t-120:1<=(n=((n=Yi[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ve(e,t,n){var i=x(n),r=e[t+=255&i].g-8;return 0<r&&(_(n,n.u+8),i=x(n),t+=e[t].value,t+=i&(1<<r)-1),_(n,n.u+e[t].g),e[t].value}function ye(e,n,i){return i.g+=e.g,i.value+=e.value<<n>>>0,t(8>=i.g),e.g}function we(e,n,i){var r=e.xc;return t((n=0==r?0:e.vc[e.md*(i>>r)+(n>>r)])<e.Wb),e.Ya[n]}function be(e,n,r,o){var s=e.ab,a=e.c*n,l=e.C;n=l+n;var A=r,c=o;for(o=e.Ta,r=e.Ua;0<s--;){var u=e.gc[s],h=l,d=n,p=A,f=c,g=(c=o,A=r,u.Ea);switch(t(h<d),t(d<=u.nc),u.hc){case 2:Wn(p,f,(d-h)*g,c,A);break;case 0:var m=h,v=d,y=c,w=A,b=(S=u).Ea;0==m&&(jn(p,f,null,null,1,y,w),V(p,f+1,0,0,b-1,y,w+1),f+=b,w+=b,++m);for(var x=1<<S.b,B=x-1,_=k(b,S.b),C=S.K,S=S.w+(m>>S.b)*_;m<v;){var E=C,T=S,M=1;for(Vn(p,f,y,w-b,1,y,w);M<b;){var F=(M&~B)+x;F>b&&(F=b),(0,Yn[E[T++]>>8&15])(p,f+ +M,y,w+M-b,F-M,y,w+M),M=F}f+=b,w+=b,++m&B||(S+=_)}d!=u.nc&&i(c,A-g,c,A+(d-h-1)*g,g);break;case 1:for(g=p,v=f,b=(p=u.Ea)-(w=p&~(y=(f=1<<u.b)-1)),m=k(p,u.b),x=u.K,u=u.w+(h>>u.b)*m;h<d;){for(B=x,_=u,C=new H,S=v+w,E=v+p;v<S;)K(B[_++],C),Zn(C,g,v,f,c,A),v+=f,A+=f;v<E&&(K(B[_++],C),Zn(C,g,v,b,c,A),v+=b,A+=b),++h&y||(u+=m)}break;case 3:if(p==c&&f==A&&0<u.b){for(v=c,p=g=A+(d-h)*g-(w=(d-h)*k(u.Ea,u.b)),f=c,y=A,m=[],w=(b=w)-1;0<=w;--w)m[w]=f[y+w];for(w=b-1;0<=w;--w)v[p+w]=m[w];Kn(u,h,d,c,g,c,A)}else Kn(u,h,d,p,f,c,A)}A=o,c=r}c!=r&&i(o,r,A,c,a)}function xe(e,n){var i=e.V,r=e.Ba+e.c*e.C,o=n-e.C;if(t(n<=e.l.o),t(16>=o),0<o){var s=e.l,a=e.Ta,l=e.Ua,A=s.width;if(be(e,o,i,r),o=l=[l],t((i=e.C)<(r=n)),t(s.v<s.va),r>s.o&&(r=s.o),i<s.j){var c=s.j-i;i=s.j,o[0]+=c*A}if(i>=r?i=0:(o[0]+=4*s.v,s.ka=i-s.j,s.U=s.va-s.v,s.T=r-i,i=1),i){if(l=l[0],11>(i=e.ca).S){var u=i.f.RGBA,h=(r=i.S,o=s.U,s=s.T,c=u.eb,u.A),d=s;for(u=u.fb+e.Ma*u.A;0<d--;){var p=a,f=l,g=o,m=c,v=u;switch(r){case Pi:$n(p,f,g,m,v);break;case Ni:ei(p,f,g,m,v);break;case zi:ei(p,f,g,m,v),xi(m,v,0,g,1,0);break;case ki:ii(p,f,g,m,v);break;case Di:te(p,f,g,m,v,1);break;case Gi:te(p,f,g,m,v,1),xi(m,v,0,g,1,0);break;case Oi:te(p,f,g,m,v,0);break;case ji:te(p,f,g,m,v,0),xi(m,v,1,g,1,0);break;case Hi:ti(p,f,g,m,v);break;case Vi:ti(p,f,g,m,v),Bi(m,v,g,1,0);break;case Qi:ni(p,f,g,m,v);break;default:t(0)}l+=A,u+=h}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=i.height)}}e.C=n,t(e.C<=e.i)}function Be(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,i=e.Ya[t].H;if(0<n[1][i[1]+0].g||0<n[2][i[2]+0].g||0<n[3][i[3]+0].g)return 0}return 1}function _e(e,n,i,r,o,s){if(0!=e.Z){var a=e.qd,l=e.rd;for(t(null!=fr[e.Z]);n<i;++n)fr[e.Z](a,l,r,o,r,o,s),a=r,l=o,o+=s;e.qd=a,e.rd=l}}function Ce(e,n){var i=e.l.ma,r=0==i.Z||1==i.Z?e.l.j:e.C;if(r=e.C<r?r:e.C,t(n<=e.l.o),n>r){var o=e.l.width,s=i.ca,a=i.tb+o*r,l=e.V,A=e.Ba+e.c*r,c=e.gc;t(1==e.ab),t(3==c[0].hc),Xn(c[0],r,n,l,A,s,a),_e(i,r,n,s,a,o)}e.C=e.Ma=n}function Se(e,n,i,r,o,s,a){var l=e.$/r,A=e.$%r,c=e.m,u=e.s,h=i+e.$,d=h;o=i+r*o;var p=i+r*s,f=280+u.ua,g=e.Pb?l:16777216,m=0<u.ua?u.Wa:null,v=u.wc,y=h<p?we(u,A,l):null;t(e.C<s),t(p<=o);var w=!1;e:for(;;){for(;w||h<p;){var b=0;if(l>=g){var S=h-i;t((g=e).Pb),g.wd=g.m,g.xd=S,0<g.s.ua&&R(g.s.Wa,g.s.vb),g=l+$i}if(A&v||(y=we(u,A,l)),t(null!=y),y.Qb&&(n[h]=y.qb,w=!0),!w)if(C(c),y.jc){b=c,S=n;var E=h,T=y.pd[x(b)&Dn-1];t(y.jc),256>T.g?(_(b,b.u+T.g),S[E]=T.value,b=0):(_(b,b.u+T.g-256),t(256<=T.value),b=T.value),0==b&&(w=!0)}else b=ve(y.G[0],y.H[0],c);if(c.h)break;if(w||256>b){if(!w)if(y.nd)n[h]=(y.qb|b<<8)>>>0;else{if(C(c),w=ve(y.G[1],y.H[1],c),C(c),S=ve(y.G[2],y.H[2],c),E=ve(y.G[3],y.H[3],c),c.h)break;n[h]=(E<<24|w<<16|b<<8|S)>>>0}if(w=!1,++h,++A>=r&&(A=0,++l,null!=a&&l<=s&&!(l%16)&&a(e,l),null!=m))for(;d<h;)b=n[d++],m.X[(506832829*b&4294967295)>>>m.Mb]=b}else if(280>b){if(b=ge(b-256,c),S=ve(y.G[4],y.H[4],c),C(c),S=me(r,S=ge(S,c)),c.h)break;if(h-i<S||o-h<b)break e;for(E=0;E<b;++E)n[h+E]=n[h+E-S];for(h+=b,A+=b;A>=r;)A-=r,++l,null!=a&&l<=s&&!(l%16)&&a(e,l);if(t(h<=o),A&v&&(y=we(u,A,l)),null!=m)for(;d<h;)b=n[d++],m.X[(506832829*b&4294967295)>>>m.Mb]=b}else{if(!(b<f))break e;for(w=b-280,t(null!=m);d<h;)b=n[d++],m.X[(506832829*b&4294967295)>>>m.Mb]=b;b=h,t(!(w>>>(S=m).Xa)),n[b]=S.X[w],w=!0}w||t(c.h==B(c))}if(e.Pb&&c.h&&h<o)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&R(e.s.vb,e.s.Wa);else{if(c.h)break e;null!=a&&a(e,l>s?s:l),e.a=0,e.$=h-i}return 1}return e.a=3,0}function Ee(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Te(){var t=new sn;return null==t?null:(t.a=0,t.xb=pr,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Wn=W,Zn=q,$n=J,ei=Y,ti=Z,ni=$,ii=ee,e.VP8LMapColor32b=qn,e.VP8LMapColor8b=Jn,t)}function Me(e,n,i,a,l){var A=1,h=[e],p=[n],f=a.m,g=a.s,m=null,v=0;e:for(;;){if(i)for(;A&&y(f,1);){var w=h,b=p,B=a,S=1,E=B.m,T=B.gc[B.ab],M=y(E,2);if(B.Oc&1<<M)A=0;else{switch(B.Oc|=1<<M,T.hc=M,T.Ea=w[0],T.nc=b[0],T.K=[null],++B.ab,t(4>=B.ab),M){case 0:case 1:T.b=y(E,3)+2,S=Me(k(T.Ea,T.b),k(T.nc,T.b),0,B,T.K),T.K=T.K[0];break;case 3:var F,I=y(E,8)+1,U=16<I?0:4<I?1:2<I?2:3;if(w[0]=k(T.Ea,U),T.b=U,F=S=Me(I,1,0,B,T.K)){var R,P=I,N=T,O=1<<(8>>N.b),H=o(O);if(null==H)F=0;else{var Q=N.K[0],z=N.w;for(H[0]=N.K[0][0],R=1;R<1*P;++R)H[R]=D(Q[z+R],H[R-1]);for(;R<4*O;++R)H[R]=0;N.K[0]=null,N.K[0]=H,F=1}}S=F;break;case 2:break;default:t(0)}A=S}}if(h=h[0],p=p[0],A&&y(f,1)&&!(A=1<=(v=y(f,4))&&11>=v)){a.a=3;break e}var G;if(G=A)t:{var j,V,W,K=a,q=h,X=p,J=v,Y=i,Z=K.m,$=K.s,ee=[null],te=1,ne=0,ie=Zi[J];n:for(;;){if(Y&&y(Z,1)){var re=y(Z,3)+2,oe=k(q,re),se=k(X,re),ae=oe*se;if(!Me(oe,se,0,K,ee))break n;for(ee=ee[0],$.xc=re,j=0;j<ae;++j){var le=ee[j]>>8&65535;ee[j]=le,le>=te&&(te=le+1)}}if(Z.h)break n;for(V=0;5>V;++V){var Ae=qi[V];!V&&0<J&&(Ae+=1<<J),ne<Ae&&(ne=Ae)}var ce=s(te*ie,u),ue=te,he=s(ue,d);if(null==he)var de=null;else t(65536>=ue),de=he;var pe=o(ne);if(null==de||null==pe||null==ce){K.a=1;break n}var fe=ce;for(j=W=0;j<te;++j){var ge=de[j],me=ge.G,ve=ge.H,we=0,be=1,xe=0;for(V=0;5>V;++V){Ae=qi[V],me[V]=fe,ve[V]=W,!V&&0<J&&(Ae+=1<<J);i:{var Be,_e=Ae,Ce=K,Te=pe,Fe=fe,Ie=W,Ue=0,Le=Ce.m,Re=y(Le,1);if(r(Te,0,0,_e),Re){var Pe=y(Le,1)+1,Ne=y(Le,1),ke=y(Le,0==Ne?1:8);Te[ke]=1,2==Pe&&(Te[ke=y(Le,8)]=1);var De=1}else{var Oe=o(19),He=y(Le,4)+4;if(19<He){Ce.a=3;var Qe=0;break i}for(Be=0;Be<He;++Be)Oe[Ji[Be]]=y(Le,3);var ze=void 0,Ge=void 0,je=Ce,Ve=Oe,We=_e,Ke=Te,qe=0,Xe=je.m,Je=8,Ye=s(128,u);r:for(;c(Ye,0,7,Ve,19);){if(y(Xe,1)){var Ze=2+2*y(Xe,3);if((ze=2+y(Xe,Ze))>We)break r}else ze=We;for(Ge=0;Ge<We&&ze--;){C(Xe);var $e=Ye[0+(127&x(Xe))];_(Xe,Xe.u+$e.g);var et=$e.value;if(16>et)Ke[Ge++]=et,0!=et&&(Je=et);else{var tt=16==et,nt=et-16,it=Ki[nt],rt=y(Xe,Wi[nt])+it;if(Ge+rt>We)break r;for(var ot=tt?Je:0;0<rt--;)Ke[Ge++]=ot}}qe=1;break r}qe||(je.a=3),De=qe}(De=De&&!Le.h)&&(Ue=c(Fe,Ie,8,Te,_e)),De&&0!=Ue?Qe=Ue:(Ce.a=3,Qe=0)}if(0==Qe)break n;if(be&&1==Xi[V]&&(be=0==fe[W].g),we+=fe[W].g,W+=Qe,3>=V){var st,at=pe[0];for(st=1;st<Ae;++st)pe[st]>at&&(at=pe[st]);xe+=at}}if(ge.nd=be,ge.Qb=0,be&&(ge.qb=(me[3][ve[3]+0].value<<24|me[1][ve[1]+0].value<<16|me[2][ve[2]+0].value)>>>0,0==we&&256>me[0][ve[0]+0].value&&(ge.Qb=1,ge.qb+=me[0][ve[0]+0].value<<8)),ge.jc=!ge.Qb&&6>xe,ge.jc){var lt,At=ge;for(lt=0;lt<Dn;++lt){var ct=lt,ut=At.pd[ct],ht=At.G[0][At.H[0]+ct];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,ct>>=ye(ht,8,ut),ct>>=ye(At.G[1][At.H[1]+ct],16,ut),ct>>=ye(At.G[2][At.H[2]+ct],0,ut),ye(At.G[3][At.H[3]+ct],24,ut))}}}$.vc=ee,$.Wb=te,$.Ya=de,$.yc=ce,G=1;break t}G=0}if(!(A=G)){a.a=3;break e}if(0<v){if(g.ua=1<<v,!L(g.Wa,v)){a.a=1,A=0;break e}}else g.ua=0;var dt=a,pt=h,ft=p,gt=dt.s,mt=gt.xc;if(dt.c=pt,dt.i=ft,gt.md=k(pt,mt),gt.wc=0==mt?-1:(1<<mt)-1,i){a.xb=dr;break e}if(null==(m=o(h*p))){a.a=1,A=0;break e}A=(A=Se(a,m,0,h,p,p,null))&&!f.h;break e}return A?(null!=l?l[0]=m:(t(null==m),t(i)),a.$=0,i||Ee(g)):Ee(g),A}function Fe(e,n){var i=e.c*e.i,r=i+n+16*n;return t(e.c<=n),e.V=o(r),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+i+n,1)}function Ie(e,n){var i=e.C,r=n-i,o=e.V,s=e.Ba+e.c*i;for(t(n<=e.l.o);0<r;){var a=16<r?16:r,l=e.l.ma,A=e.l.width,c=A*a,u=l.ca,h=l.tb+A*i,d=e.Ta,p=e.Ua;be(e,a,o,s),Ci(d,p,u,h,c),_e(l,i,i+a,u,h,A),r-=a,o+=a*e.c,i+=a}t(i==n),e.C=e.Ma=n}function Ue(){this.ub=this.yd=this.td=this.Rb=0}function Le(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Re(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Pe(){this.Yb=function(){var e=[];return function e(t,n,i){for(var r=i[n],o=0;o<r&&(t.push(i.length>n+1?[]:0),!(i.length<n+1));o++)e(t[o],n+1,i)}(e,0,[3,11]),e}()}function Ne(){this.jb=o(3),this.Wc=a([4,8],Pe),this.Xc=a([4,17],Pe)}function ke(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function De(){this.ld=this.La=this.dd=this.tc=0}function Oe(){this.Na=this.la=0}function He(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qe(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ze(){this.uc=this.M=this.Nb=0,this.wa=Array(new De),this.Y=0,this.ya=Array(new Qe),this.aa=0,this.l=new We}function Ge(){this.y=o(16),this.f=o(8),this.ea=o(8)}function je(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Ue,this.Kc=new Le,this.ed=new ke,this.Qa=new Re,this.Ic=this.$c=this.Aa=0,this.D=new ze,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,w),this.ia=0,this.pb=s(4,He),this.Pa=new Ne,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ge),this.Hd=0,this.rb=Array(new Oe),this.sb=0,this.wa=Array(new De),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qe),this.L=this.aa=0,this.gd=a([4,2],De),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function We(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new je;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,nr||(nr=Ye)),e}function qe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Je(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return qe(e,2,"null VP8Io passed to VP8GetHeaders()");var i=n.data,o=n.w,s=n.ha;if(4>s)return qe(e,7,"Truncated header.");var a=i[o+0]|i[o+1]<<8|i[o+2]<<16,l=e.Od;if(l.Rb=!(1&a),l.td=a>>1&7,l.yd=a>>4&1,l.ub=a>>5,3<l.td)return qe(e,3,"Incorrect keyframe parameters.");if(!l.yd)return qe(e,4,"Frame not displayable.");o+=3,s-=3;var A=e.Kc;if(l.Rb){if(7>s)return qe(e,7,"cannot parse picture header");if(!Xe(i,o,s))return qe(e,3,"Bad code word");A.c=16383&(i[o+4]<<8|i[o+3]),A.Td=i[o+4]>>6,A.i=16383&(i[o+6]<<8|i[o+5]),A.Ud=i[o+6]>>6,o+=7,s-=7,e.za=A.c+15>>4,e.Ub=A.i+15>>4,n.width=A.c,n.height=A.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((a=e.Pa).jb,0,255,a.jb.length),t(null!=(a=e.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,r(a.Zb,0,0,a.Zb.length),r(a.Lb,0,0,a.Lb)}if(l.ub>s)return qe(e,7,"bad partition length");p(a=e.m,i,o,l.ub),o+=l.ub,s-=l.ub,l.Rb&&(A.Ld=E(a),A.Kd=E(a)),A=e.Qa;var c,u=e.Pa;if(t(null!=a),t(null!=A),A.Cb=E(a),A.Cb){if(A.Bb=E(a),E(a)){for(A.Fb=E(a),c=0;4>c;++c)A.Zb[c]=E(a)?g(a,7):0;for(c=0;4>c;++c)A.Lb[c]=E(a)?g(a,6):0}if(A.Bb)for(c=0;3>c;++c)u.jb[c]=E(a)?f(a,8):255}else A.Bb=0;if(a.Ka)return qe(e,3,"cannot parse segment header");if((A=e.ed).zd=E(a),A.Tb=f(a,6),A.wb=f(a,3),A.Pc=E(a),A.Pc&&E(a)){for(u=0;4>u;++u)E(a)&&(A.vd[u]=g(a,6));for(u=0;4>u;++u)E(a)&&(A.od[u]=g(a,6))}if(e.L=0==A.Tb?0:A.zd?1:2,a.Ka)return qe(e,3,"cannot parse filter header");var h=s;if(s=c=o,o=c+h,A=h,e.Xb=(1<<f(e.m,2))-1,h<3*(u=e.Xb))i=7;else{for(c+=3*u,A-=3*u,h=0;h<u;++h){var d=i[s+0]|i[s+1]<<8|i[s+2]<<16;d>A&&(d=A),p(e.Jc[+h],i,c,d),c+=d,A-=d,s+=3}p(e.Jc[+u],i,c,A),i=c<o?0:5}if(0!=i)return qe(e,i,"cannot parse partitions");for(i=f(c=e.m,7),s=E(c)?g(c,4):0,o=E(c)?g(c,4):0,A=E(c)?g(c,4):0,u=E(c)?g(c,4):0,c=E(c)?g(c,4):0,h=e.Qa,d=0;4>d;++d){if(h.Cb){var m=h.Zb[d];h.Fb||(m+=i)}else{if(0<d){e.pb[d]=e.pb[0];continue}m=i}var v=e.pb[d];v.Sc[0]=er[Ve(m+s,127)],v.Sc[1]=tr[Ve(m+0,127)],v.Eb[0]=2*er[Ve(m+o,127)],v.Eb[1]=101581*tr[Ve(m+A,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=er[Ve(m+u,117)],v.Qc[1]=tr[Ve(m+c,127)],v.lc=m+c}if(!l.Rb)return qe(e,4,"Not a key frame.");for(E(a),l=e.Pa,i=0;4>i;++i){for(s=0;8>s;++s)for(o=0;3>o;++o)for(A=0;11>A;++A)u=T(a,lr[i][s][o][A])?f(a,8):sr[i][s][o][A],l.Wc[i][s].Yb[o][A]=u;for(s=0;17>s;++s)l.Xc[i][s]=l.Wc[i][Ar[s]]}return e.kc=E(a),e.kc&&(e.Bd=f(a,8)),e.cb=1}function Ye(e,t,n,i,r,o,s){var a=t[r].Yb[n];for(n=0;16>r;++r){if(!T(e,a[n+0]))return r;for(;!T(e,a[n+1]);)if(a=t[++r].Yb[0],n=0,16==r)return 16;var l=t[r+1].Yb;if(T(e,a[n+2])){var A=e,c=0;if(T(A,(h=a)[(u=n)+3]))if(T(A,h[u+6])){for(a=0,u=2*(c=T(A,h[u+8]))+(h=T(A,h[u+9+c])),c=0,h=ir[u];h[a];++a)c+=c+T(A,h[a]);c+=3+(8<<u)}else T(A,h[u+7])?(c=7+2*T(A,165),c+=T(A,145)):c=5+T(A,159);else c=T(A,h[u+4])?3+T(A,h[u+5]):2;a=l[2]}else c=1,a=l[1];l=s+rr[r],0>(A=e).b&&S(A);var u,h=A.b,d=(u=A.Ca>>1)-(A.I>>h)>>31;--A.b,A.Ca+=d,A.Ca|=1,A.I-=(u+1&d)<<h,o[l]=((c^d)-d)*i[(0<r)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,r(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,t,n,i,r){r=e[t+n+32*i]+(r>>3),e[t+n+32*i]=-256&r?0>r?0:255:r}function et(e,t,n,i,r,o){$e(e,t,0,n,i+r),$e(e,t,1,n,i+o),$e(e,t,2,n,i-o),$e(e,t,3,n,i-r)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,i){var r,s=0,a=o(16);for(r=0;4>r;++r){var l=e[t+0]+e[t+8],A=e[t+0]-e[t+8],c=(35468*e[t+4]>>16)-tt(e[t+12]),u=tt(e[t+4])+(35468*e[t+12]>>16);a[s+0]=l+u,a[s+1]=A+c,a[s+2]=A-c,a[s+3]=l-u,s+=4,t++}for(r=s=0;4>r;++r)l=(e=a[s+0]+4)+a[s+8],A=e-a[s+8],c=(35468*a[s+4]>>16)-tt(a[s+12]),$e(n,i,0,0,l+(u=tt(a[s+4])+(35468*a[s+12]>>16))),$e(n,i,1,0,A+c),$e(n,i,2,0,A-c),$e(n,i,3,0,l-u),s++,i+=32}function it(e,t,n,i){var r=e[t+0]+4,o=35468*e[t+4]>>16,s=tt(e[t+4]),a=35468*e[t+1]>>16;et(n,i,0,r+s,e=tt(e[t+1]),a),et(n,i,1,r+o,e,a),et(n,i,2,r-o,e,a),et(n,i,3,r-s,e,a)}function rt(e,t,n,i,r){nt(e,t,n,i),r&&nt(e,t+16,n,i+4)}function ot(e,t,n,i){oi(e,t+0,n,i,1),oi(e,t+32,n,i+128,1)}function st(e,t,n,i){var r;for(e=e[t+0]+4,r=0;4>r;++r)for(t=0;4>t;++t)$e(n,i,t,r,e)}function at(e,t,n,i){e[t+0]&&li(e,t+0,n,i),e[t+16]&&li(e,t+16,n,i+4),e[t+32]&&li(e,t+32,n,i+128),e[t+48]&&li(e,t+48,n,i+128+4)}function lt(e,t,n,i){var r,s=o(16);for(r=0;4>r;++r){var a=e[t+0+r]+e[t+12+r],l=e[t+4+r]+e[t+8+r],A=e[t+4+r]-e[t+8+r],c=e[t+0+r]-e[t+12+r];s[0+r]=a+l,s[8+r]=a-l,s[4+r]=c+A,s[12+r]=c-A}for(r=0;4>r;++r)a=(e=s[0+4*r]+3)+s[3+4*r],l=s[1+4*r]+s[2+4*r],A=s[1+4*r]-s[2+4*r],c=e-s[3+4*r],n[i+0]=a+l>>3,n[i+16]=c+A>>3,n[i+32]=a-l>>3,n[i+48]=c-A>>3,i+=64}function At(e,t,n){var i,r=t-32,o=Li,s=255-e[r-1];for(i=0;i<n;++i){var a,l=o,A=s+e[t-1];for(a=0;a<n;++a)e[t+a]=l[A+e[r+a]];t+=32}}function ct(e,t){At(e,t,4)}function ut(e,t){At(e,t,8)}function ht(e,t){At(e,t,16)}function dt(e,t){var n;for(n=0;16>n;++n)i(e,t+32*n,e,t-32,16)}function pt(e,t){var n;for(n=16;0<n;--n)r(e,t,e[t-1],16),t+=32}function ft(e,t,n){var i;for(i=0;16>i;++i)r(t,n+32*i,e,16)}function gt(e,t){var n,i=16;for(n=0;16>n;++n)i+=e[t-1+32*n]+e[t+n-32];ft(i>>5,e,t)}function mt(e,t){var n,i=8;for(n=0;16>n;++n)i+=e[t-1+32*n];ft(i>>4,e,t)}function vt(e,t){var n,i=8;for(n=0;16>n;++n)i+=e[t+n-32];ft(i>>4,e,t)}function yt(e,t){ft(128,e,t)}function wt(e,t,n){return e+2*t+n+2>>2}function bt(e,t){var n,r=t-32;for(r=new Uint8Array([wt(e[r-1],e[r+0],e[r+1]),wt(e[r+0],e[r+1],e[r+2]),wt(e[r+1],e[r+2],e[r+3]),wt(e[r+2],e[r+3],e[r+4])]),n=0;4>n;++n)i(e,t+32*n,r,0,r.length)}function xt(e,t){var n=e[t-1],i=e[t-1+32],r=e[t-1+64],o=e[t-1+96];M(e,t+0,16843009*wt(e[t-1-32],n,i)),M(e,t+32,16843009*wt(n,i,r)),M(e,t+64,16843009*wt(i,r,o)),M(e,t+96,16843009*wt(r,o,o))}function Bt(e,t){var n,i=4;for(n=0;4>n;++n)i+=e[t+n-32]+e[t-1+32*n];for(i>>=3,n=0;4>n;++n)r(e,t+32*n,i,4)}function _t(e,t){var n=e[t-1+0],i=e[t-1+32],r=e[t-1+64],o=e[t-1-32],s=e[t+0-32],a=e[t+1-32],l=e[t+2-32],A=e[t+3-32];e[t+0+96]=wt(i,r,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(n,i,r),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(o,n,i),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(s,o,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(a,s,o),e[t+3+32]=e[t+2+0]=wt(l,a,s),e[t+3+0]=wt(A,l,a)}function Ct(e,t){var n=e[t+1-32],i=e[t+2-32],r=e[t+3-32],o=e[t+4-32],s=e[t+5-32],a=e[t+6-32],l=e[t+7-32];e[t+0+0]=wt(e[t+0-32],n,i),e[t+1+0]=e[t+0+32]=wt(n,i,r),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(i,r,o),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(r,o,s),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(o,s,a),e[t+3+64]=e[t+2+96]=wt(s,a,l),e[t+3+96]=wt(a,l,l)}function St(e,t){var n=e[t-1+0],i=e[t-1+32],r=e[t-1+64],o=e[t-1-32],s=e[t+0-32],a=e[t+1-32],l=e[t+2-32],A=e[t+3-32];e[t+0+0]=e[t+1+64]=o+s+1>>1,e[t+1+0]=e[t+2+64]=s+a+1>>1,e[t+2+0]=e[t+3+64]=a+l+1>>1,e[t+3+0]=l+A+1>>1,e[t+0+96]=wt(r,i,n),e[t+0+64]=wt(i,n,o),e[t+0+32]=e[t+1+96]=wt(n,o,s),e[t+1+32]=e[t+2+96]=wt(o,s,a),e[t+2+32]=e[t+3+96]=wt(s,a,l),e[t+3+32]=wt(a,l,A)}function Et(e,t){var n=e[t+0-32],i=e[t+1-32],r=e[t+2-32],o=e[t+3-32],s=e[t+4-32],a=e[t+5-32],l=e[t+6-32],A=e[t+7-32];e[t+0+0]=n+i+1>>1,e[t+1+0]=e[t+0+64]=i+r+1>>1,e[t+2+0]=e[t+1+64]=r+o+1>>1,e[t+3+0]=e[t+2+64]=o+s+1>>1,e[t+0+32]=wt(n,i,r),e[t+1+32]=e[t+0+96]=wt(i,r,o),e[t+2+32]=e[t+1+96]=wt(r,o,s),e[t+3+32]=e[t+2+96]=wt(o,s,a),e[t+3+64]=wt(s,a,l),e[t+3+96]=wt(a,l,A)}function Tt(e,t){var n=e[t-1+0],i=e[t-1+32],r=e[t-1+64],o=e[t-1+96];e[t+0+0]=n+i+1>>1,e[t+2+0]=e[t+0+32]=i+r+1>>1,e[t+2+32]=e[t+0+64]=r+o+1>>1,e[t+1+0]=wt(n,i,r),e[t+3+0]=e[t+1+32]=wt(i,r,o),e[t+3+32]=e[t+1+64]=wt(r,o,o),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=o}function Mt(e,t){var n=e[t-1+0],i=e[t-1+32],r=e[t-1+64],o=e[t-1+96],s=e[t-1-32],a=e[t+0-32],l=e[t+1-32],A=e[t+2-32];e[t+0+0]=e[t+2+32]=n+s+1>>1,e[t+0+32]=e[t+2+64]=i+n+1>>1,e[t+0+64]=e[t+2+96]=r+i+1>>1,e[t+0+96]=o+r+1>>1,e[t+3+0]=wt(a,l,A),e[t+2+0]=wt(s,a,l),e[t+1+0]=e[t+3+32]=wt(n,s,a),e[t+1+32]=e[t+3+64]=wt(i,n,s),e[t+1+64]=e[t+3+96]=wt(r,i,n),e[t+1+96]=wt(o,r,i)}function Ft(e,t){var n;for(n=0;8>n;++n)i(e,t+32*n,e,t-32,8)}function It(e,t){var n;for(n=0;8>n;++n)r(e,t,e[t-1],8),t+=32}function Ut(e,t,n){var i;for(i=0;8>i;++i)r(t,n+32*i,e,8)}function Lt(e,t){var n,i=8;for(n=0;8>n;++n)i+=e[t+n-32]+e[t-1+32*n];Ut(i>>4,e,t)}function Rt(e,t){var n,i=4;for(n=0;8>n;++n)i+=e[t+n-32];Ut(i>>3,e,t)}function Pt(e,t){var n,i=4;for(n=0;8>n;++n)i+=e[t-1+32*n];Ut(i>>3,e,t)}function Nt(e,t){Ut(128,e,t)}function kt(e,t,n){var i=e[t-n],r=e[t+0],o=3*(r-i)+Ii[1020+e[t-2*n]-e[t+n]],s=Ui[112+(o+4>>3)];e[t-n]=Li[255+i+Ui[112+(o+3>>3)]],e[t+0]=Li[255+r-s]}function Dt(e,t,n,i){var r=e[t+0],o=e[t+n];return Ri[255+e[t-2*n]-e[t-n]]>i||Ri[255+o-r]>i}function Ot(e,t,n,i){return 4*Ri[255+e[t-n]-e[t+0]]+Ri[255+e[t-2*n]-e[t+n]]<=i}function Ht(e,t,n,i,r){var o=e[t-3*n],s=e[t-2*n],a=e[t-n],l=e[t+0],A=e[t+n],c=e[t+2*n],u=e[t+3*n];return 4*Ri[255+a-l]+Ri[255+s-A]>i?0:Ri[255+e[t-4*n]-o]<=r&&Ri[255+o-s]<=r&&Ri[255+s-a]<=r&&Ri[255+u-c]<=r&&Ri[255+c-A]<=r&&Ri[255+A-l]<=r}function Qt(e,t,n,i){var r=2*i+1;for(i=0;16>i;++i)Ot(e,t+i,n,r)&&kt(e,t+i,n)}function zt(e,t,n,i){var r=2*i+1;for(i=0;16>i;++i)Ot(e,t+i*n,1,r)&&kt(e,t+i*n,1)}function Gt(e,t,n,i){var r;for(r=3;0<r;--r)Qt(e,t+=4*n,n,i)}function jt(e,t,n,i){var r;for(r=3;0<r;--r)zt(e,t+=4,n,i)}function Vt(e,t,n,i,r,o,s,a){for(o=2*o+1;0<r--;){if(Ht(e,t,n,o,s))if(Dt(e,t,n,a))kt(e,t,n);else{var l=e,A=t,c=n,u=l[A-2*c],h=l[A-c],d=l[A+0],p=l[A+c],f=l[A+2*c],g=27*(v=Ii[1020+3*(d-h)+Ii[1020+u-p]])+63>>7,m=18*v+63>>7,v=9*v+63>>7;l[A-3*c]=Li[255+l[A-3*c]+v],l[A-2*c]=Li[255+u+m],l[A-c]=Li[255+h+g],l[A+0]=Li[255+d-g],l[A+c]=Li[255+p-m],l[A+2*c]=Li[255+f-v]}t+=i}}function Wt(e,t,n,i,r,o,s,a){for(o=2*o+1;0<r--;){if(Ht(e,t,n,o,s))if(Dt(e,t,n,a))kt(e,t,n);else{var l=e,A=t,c=n,u=l[A-c],h=l[A+0],d=l[A+c],p=Ui[112+(4+(f=3*(h-u))>>3)],f=Ui[112+(f+3>>3)],g=p+1>>1;l[A-2*c]=Li[255+l[A-2*c]+g],l[A-c]=Li[255+u+f],l[A+0]=Li[255+h-p],l[A+c]=Li[255+d-g]}t+=i}}function Kt(e,t,n,i,r,o){Vt(e,t,n,1,16,i,r,o)}function qt(e,t,n,i,r,o){Vt(e,t,1,n,16,i,r,o)}function Xt(e,t,n,i,r,o){var s;for(s=3;0<s;--s)Wt(e,t+=4*n,n,1,16,i,r,o)}function Jt(e,t,n,i,r,o){var s;for(s=3;0<s;--s)Wt(e,t+=4,1,n,16,i,r,o)}function Yt(e,t,n,i,r,o,s,a){Vt(e,t,r,1,8,o,s,a),Vt(n,i,r,1,8,o,s,a)}function Zt(e,t,n,i,r,o,s,a){Vt(e,t,1,r,8,o,s,a),Vt(n,i,1,r,8,o,s,a)}function $t(e,t,n,i,r,o,s,a){Wt(e,t+4*r,r,1,8,o,s,a),Wt(n,i+4*r,r,1,8,o,s,a)}function en(e,t,n,i,r,o,s,a){Wt(e,t+4,1,r,8,o,s,a),Wt(n,i+4,1,r,8,o,s,a)}function tn(){this.ba=new se,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new P,this.vb=new P,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new u}function sn(){this.xb=this.a=0,this.l=new We,this.ca=new se,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new b,this.Pb=0,this.wd=new b,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=s(4,rn),this.Oc=0}function an(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new We,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,i,r,o,s){for(e=null==e?0:e[t+0],t=0;t<s;++t)r[o+t]=e+n[i+t]&255,e=r[o+t]}function An(e,t,n,i,r,o,s){var a;if(null==e)ln(null,null,n,i,r,o,s);else for(a=0;a<s;++a)r[o+a]=e[t+a]+n[i+a]&255}function cn(e,t,n,i,r,o,s){if(null==e)ln(null,null,n,i,r,o,s);else{var a,l=e[t+0],A=l,c=l;for(a=0;a<s;++a)A=c+(l=e[t+a])-A,c=n[i+a]+(-256&A?0>A?0:255:A)&255,A=l,r[o+a]=c}}function un(e,n,r,s){var a=n.width,l=n.o;if(t(null!=e&&null!=n),0>r||0>=s||r+s>l)return null;if(!e.Cc){if(null==e.ga){var A;if(e.ga=new an,(A=null==e.ga)||(A=n.width*n.o,t(0==e.Gb.length),e.Gb=o(A),e.Uc=0,null==e.Gb?A=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,A=1),A=!A),!A){A=e.ga;var c=e.Fa,u=e.P,h=e.qc,d=e.mb,p=e.nb,f=u+1,g=h-1,v=A.l;if(t(null!=c&&null!=d&&null!=n),fr[0]=null,fr[1]=ln,fr[2]=An,fr[3]=cn,A.ca=d,A.tb=p,A.c=n.width,A.i=n.height,t(0<A.c&&0<A.i),1>=h)n=0;else if(A.$a=3&c[u+0],A.Z=c[u+0]>>2&3,A.Lc=c[u+0]>>4&3,u=c[u+0]>>6&3,0>A.$a||1<A.$a||4<=A.Z||1<A.Lc||u)n=0;else if(v.put=de,v.ac=he,v.bc=pe,v.ma=A,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,A.$a)e:{t(1==A.$a),n=Te();t:for(;;){if(null==n){n=0;break e}if(t(null!=A),A.mc=n,n.c=A.c,n.i=A.i,n.l=A.l,n.l.ma=A,n.l.width=A.c,n.l.height=A.i,n.a=0,m(n.m,c,f,g),!Me(A.c,A.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Be(n.s)?(A.ic=1,c=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(c),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(A.ic=0,n=Fe(n,A.c)),!n)break t;n=1;break e}A.mc=null,n=0}else n=g>=A.c*A.i;A=!n}if(A)return null;1!=e.ga.Lc?e.Ga=0:s=l-r}t(null!=e.ga),t(r+s<=l);e:{if(n=(c=e.ga).c,l=c.l.o,0==c.$a){if(f=e.rc,g=e.Vc,v=e.Fa,u=e.P+1+r*n,h=e.mb,d=e.nb+r*n,t(u<=e.P+e.qc),0!=c.Z)for(t(null!=fr[c.Z]),A=0;A<s;++A)fr[c.Z](f,g,v,u,h,d,n),f=h,g=d,d+=n,u+=n;else for(A=0;A<s;++A)i(h,d,v,u,n),f=h,g=d,d+=n,u+=n;e.rc=f,e.Vc=g}else{if(t(null!=c.mc),n=r+s,t(null!=(A=c.mc)),t(n<=A.i),A.C>=n)n=1;else if(c.ic||gn(),c.ic){c=A.V,f=A.Ba,g=A.c;var y=A.i,w=(v=1,u=A.$/g,h=A.$%g,d=A.m,p=A.s,A.$),b=g*y,x=g*n,_=p.wc,S=w<x?we(p,h,u):null;t(w<=b),t(n<=y),t(Be(p));t:for(;;){for(;!d.h&&w<x;){if(h&_||(S=we(p,h,u)),t(null!=S),C(d),256>(y=ve(S.G[0],S.H[0],d)))c[f+w]=y,++w,++h>=g&&(h=0,++u<=n&&!(u%16)&&Ce(A,u));else{if(!(280>y)){v=0;break t}y=ge(y-256,d);var E,T=ve(S.G[4],S.H[4],d);if(C(d),!(w>=(T=me(g,T=ge(T,d)))&&b-w>=y)){v=0;break t}for(E=0;E<y;++E)c[f+w+E]=c[f+w+E-T];for(w+=y,h+=y;h>=g;)h-=g,++u<=n&&!(u%16)&&Ce(A,u);w<x&&h&_&&(S=we(p,h,u))}t(d.h==B(d))}Ce(A,u>n?n:u);break t}!v||d.h&&w<b?(v=0,A.a=d.h?5:3):A.$=w,n=v}else n=Se(A,A.V,A.Ba,A.c,A.i,n,Ie);if(!n){s=0;break e}}r+s>=l&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+r*a}function hn(e,t,n,i,r,o){for(;0<r--;){var s,a=e,l=t+(n?1:0),A=e,c=t+(n?0:3);for(s=0;s<i;++s){var u=A[c+4*s];255!=u&&(u*=32897,a[l+4*s+0]=a[l+4*s+0]*u>>23,a[l+4*s+1]=a[l+4*s+1]*u>>23,a[l+4*s+2]=a[l+4*s+2]*u>>23)}t+=o}}function dn(e,t,n,i,r){for(;0<i--;){var o;for(o=0;o<n;++o){var s=e[t+2*o+0],a=15&(A=e[t+2*o+1]),l=4369*a,A=(240&A|A>>4)*l>>16;e[t+2*o+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,e[t+2*o+1]=240&A|a}t+=r}}function pn(e,t,n,i,r,o,s,a){var l,A,c=255;for(A=0;A<r;++A){for(l=0;l<i;++l){var u=e[t+l];o[s+4*l]=u,c&=u}t+=n,s+=a}return 255!=c}function fn(e,t,n,i,r){var o;for(o=0;o<r;++o)n[i+o]=e[t+o]>>8}function gn(){xi=hn,Bi=dn,_i=pn,Ci=fn}function mn(n,i,r){e[n]=function(e,n,o,s,a,l,A,c,u,h,d,p,f,g,m,v,y){var w,b=y-1>>1,x=a[l+0]|A[c+0]<<16,B=u[h+0]|d[p+0]<<16;t(null!=e);var _=3*x+B+131074>>2;for(i(e[n+0],255&_,_>>16,f,g),null!=o&&(_=3*B+x+131074>>2,i(o[s+0],255&_,_>>16,m,v)),w=1;w<=b;++w){var C=a[l+w]|A[c+w]<<16,S=u[h+w]|d[p+w]<<16,E=x+C+B+S+524296,T=E+2*(C+B)>>3;_=T+x>>1,x=(E=E+2*(x+S)>>3)+C>>1,i(e[n+2*w-1],255&_,_>>16,f,g+(2*w-1)*r),i(e[n+2*w-0],255&x,x>>16,f,g+(2*w-0)*r),null!=o&&(_=E+B>>1,x=T+S>>1,i(o[s+2*w-1],255&_,_>>16,m,v+(2*w-1)*r),i(o[s+2*w+0],255&x,x>>16,m,v+(2*w+0)*r)),x=C,B=S}1&y||(_=3*x+B+131074>>2,i(e[n+y-1],255&_,_>>16,f,g+(y-1)*r),null!=o&&(_=3*B+x+131074>>2,i(o[s+y-1],255&_,_>>16,m,v+(y-1)*r)))}}function vn(){gr[Pi]=mr,gr[Ni]=yr,gr[ki]=vr,gr[Di]=wr,gr[Oi]=br,gr[Hi]=xr,gr[Qi]=Br,gr[zi]=yr,gr[Gi]=wr,gr[ji]=br,gr[Vi]=xr}function yn(e){return e&~Mr?0>e?0:255:e>>Tr}function wn(e,t){return yn((19077*e>>8)+(26149*t>>8)-14234)}function bn(e,t,n){return yn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function xn(e,t){return yn((19077*e>>8)+(33050*t>>8)-17685)}function Bn(e,t,n,i,r){i[r+0]=wn(e,n),i[r+1]=bn(e,t,n),i[r+2]=xn(e,t)}function _n(e,t,n,i,r){i[r+0]=xn(e,t),i[r+1]=bn(e,t,n),i[r+2]=wn(e,n)}function Cn(e,t,n,i,r){var o=bn(e,t,n);t=o<<3&224|xn(e,t)>>3,i[r+0]=248&wn(e,n)|o>>5,i[r+1]=t}function Sn(e,t,n,i,r){var o=240&xn(e,t)|15;i[r+0]=240&wn(e,n)|bn(e,t,n)>>4,i[r+1]=o}function En(e,t,n,i,r){i[r+0]=255,Bn(e,t,n,i,r+1)}function Tn(e,t,n,i,r){_n(e,t,n,i,r),i[r+3]=255}function Mn(e,t,n,i,r){Bn(e,t,n,i,r),i[r+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function Fn(t,n,i){e[t]=function(e,t,r,o,s,a,l,A,c){for(var u=A+(-2&c)*i;A!=u;)n(e[t+0],r[o+0],s[a+0],l,A),n(e[t+1],r[o+0],s[a+0],l,A+i),t+=2,++o,++a,A+=2*i;1&c&&n(e[t+0],r[o+0],s[a+0],l,A)}}function In(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Un(e,t,n,i,r){switch(e>>>30){case 3:oi(t,n,i,r,0);break;case 2:si(t,n,i,r);break;case 1:li(t,n,i,r)}}function Ln(e,t){var n,o,s=t.M,a=t.Nb,l=e.oc,A=e.pc+40,c=e.oc,u=e.pc+584,h=e.oc,d=e.pc+600;for(n=0;16>n;++n)l[A+32*n-1]=129;for(n=0;8>n;++n)c[u+32*n-1]=129,h[d+32*n-1]=129;for(0<s?l[A-1-32]=c[u-1-32]=h[d-1-32]=129:(r(l,A-32-1,127,21),r(c,u-32-1,127,9),r(h,d-32-1,127,9)),o=0;o<e.za;++o){var p=t.ya[t.aa+o];if(0<o){for(n=-1;16>n;++n)i(l,A+32*n-4,l,A+32*n+12,4);for(n=-1;8>n;++n)i(c,u+32*n-4,c,u+32*n+4,4),i(h,d+32*n-4,h,d+32*n+4,4)}var f=e.Gd,g=e.Hd+o,m=p.ad,v=p.Hc;if(0<s&&(i(l,A-32,f[g].y,0,16),i(c,u-32,f[g].f,0,8),i(h,d-32,f[g].ea,0,8)),p.Za){var y=l,w=A-32+16;for(0<s&&(o>=e.za-1?r(y,w,f[g].y[15],4):i(y,w,f[g+1].y,0,4)),n=0;4>n;n++)y[w+128+n]=y[w+256+n]=y[w+384+n]=y[w+0+n];for(n=0;16>n;++n,v<<=2)y=l,w=A+kr[n],ur[p.Ob[n]](y,w),Un(v,m,16*+n,y,w)}else if(y=In(o,s,p.Ob[0]),cr[y](l,A),0!=v)for(n=0;16>n;++n,v<<=2)Un(v,m,16*+n,l,A+kr[n]);for(n=p.Gc,y=In(o,s,p.Dd),hr[y](c,u),hr[y](h,d),v=m,y=c,w=u,255&(p=0|n)&&(170&p?ai(v,256,y,w):Ai(v,256,y,w)),p=h,v=d,255&(n>>=8)&&(170&n?ai(m,320,p,v):Ai(m,320,p,v)),s<e.Ub-1&&(i(f[g].y,0,l,A+480,16),i(f[g].f,0,c,u+224,8),i(f[g].ea,0,h,d+224,8)),n=8*a*e.B,f=e.sa,g=e.ta+16*o+16*a*e.R,m=e.qa,p=e.ra+8*o+n,v=e.Ha,y=e.Ia+8*o+n,n=0;16>n;++n)i(f,g+n*e.R,l,A+32*n,16);for(n=0;8>n;++n)i(m,p+n*e.B,c,u+32*n,8),i(v,y+n*e.B,h,d+32*n,8)}}function Rn(e,i,r,o,s,a,l,A,c){var u=[0],h=[0],d=0,p=null!=c?c.kd:0,f=null!=c?c:new nn;if(null==e||12>r)return 7;f.data=e,f.w=i,f.ha=r,i=[i],r=[r],f.gb=[f.gb];e:{var g=i,v=r,y=f.gb;if(t(null!=e),t(null!=v),t(null!=y),y[0]=0,12<=v[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){y=3;break e}var w=U(e,g[0]+4);if(12>w||4294967286<w){y=3;break e}if(p&&w>v[0]-8){y=7;break e}y[0]=w,g[0]+=12,v[0]-=12}y=0}if(0!=y)return y;for(w=0<f.gb[0],r=r[0];;){e:{var x=e;v=i,y=r;var B=u,_=h,C=g=[0];if((T=d=[d])[0]=0,8>y[0])y=7;else{if(!n(x,v[0],"VP8X")){if(10!=U(x,v[0]+4)){y=3;break e}if(18>y[0]){y=7;break e}var S=U(x,v[0]+8),E=1+I(x,v[0]+12);if(2147483648<=E*(x=1+I(x,v[0]+15))){y=3;break e}null!=C&&(C[0]=S),null!=B&&(B[0]=E),null!=_&&(_[0]=x),v[0]+=18,y[0]-=18,T[0]=1}y=0}}if(d=d[0],g=g[0],0!=y)return y;if(v=!!(2&g),!w&&d)return 3;if(null!=a&&(a[0]=!!(16&g)),null!=l&&(l[0]=v),null!=A&&(A[0]=0),l=u[0],g=h[0],d&&v&&null==c){y=0;break}if(4>r){y=7;break}if(w&&d||!w&&!d&&!n(e,i[0],"ALPH")){r=[r],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{S=e,y=i,w=r;var T=f.gb;B=f.na,_=f.P,C=f.Sa,E=22,t(null!=S),t(null!=w),x=y[0];var M=w[0];for(t(null!=B),t(null!=C),B[0]=null,_[0]=null,C[0]=0;;){if(y[0]=x,w[0]=M,8>M){y=7;break e}var F=U(S,x+4);if(4294967286<F){y=3;break e}var L=8+F+1&-2;if(E+=L,0<T&&E>T){y=3;break e}if(!n(S,x,"VP8 ")||!n(S,x,"VP8L")){y=0;break e}if(M[0]<L){y=7;break e}n(S,x,"ALPH")||(B[0]=S,_[0]=x+8,C[0]=F),x+=L,M-=L}}if(r=r[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=y)break}r=[r],f.Ja=[f.Ja],f.xa=[f.xa];e:if(T=e,y=i,w=r,B=f.gb[0],_=f.Ja,C=f.xa,S=y[0],x=!n(T,S,"VP8 "),E=!n(T,S,"VP8L"),t(null!=T),t(null!=w),t(null!=_),t(null!=C),8>w[0])y=7;else{if(x||E){if(T=U(T,S+4),12<=B&&T>B-12){y=3;break e}if(p&&T>w[0]-8){y=7;break e}_[0]=T,y[0]+=8,w[0]-=8,C[0]=E}else C[0]=5<=w[0]&&47==T[S+0]&&!(T[S+4]>>5),_[0]=w[0];y=0}if(r=r[0],f.Ja=f.Ja[0],f.xa=f.xa[0],i=i[0],0!=y)break;if(4294967286<f.Ja)return 3;if(null==A||v||(A[0]=f.xa?2:1),l=[l],g=[g],f.xa){if(5>r){y=7;break}A=l,p=g,v=a,null==e||5>r?e=0:5<=r&&47==e[i+0]&&!(e[i+4]>>5)?(w=[0],T=[0],B=[0],m(_=new b,e,i,r),fe(_,w,T,B)?(null!=A&&(A[0]=w[0]),null!=p&&(p[0]=T[0]),null!=v&&(v[0]=B[0]),e=1):e=0):e=0}else{if(10>r){y=7;break}A=g,null==e||10>r||!Xe(e,i+3,r-3)?e=0:(p=e[i+0]|e[i+1]<<8|e[i+2]<<16,v=16383&(e[i+7]<<8|e[i+6]),e=16383&(e[i+9]<<8|e[i+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!v||!e?e=0:(l&&(l[0]=v),A&&(A[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],d&&(u[0]!=l||h[0]!=g))return 3;null!=c&&(c[0]=f,c.offset=i-c.w,t(4294967286>i-c.w),t(c.offset==c.ha-r));break}return 0==y||7==y&&d&&null==c?(null!=a&&(a[0]|=null!=f.na&&0<f.na.length),null!=o&&(o[0]=l),null!=s&&(s[0]=g),0):y}function Pn(e,t,n){var i=t.width,r=t.height,o=0,s=0,a=i,l=r;if(t.Da=null!=e&&0<e.Da,t.Da&&(a=e.cd,l=e.bd,o=e.v,s=e.j,11>n||(o&=-2,s&=-2),0>o||0>s||0>=a||0>=l||o+a>i||s+l>r))return 0;if(t.v=o,t.j=s,t.va=o+a,t.o=s+l,t.U=a,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!N(a,l,n=[e.ib],o=[e.hb]))return 0;t.ib=n[0],t.hb=o[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*i/4&&t.hb<3*r/4,t.Kb=0),1}function Nn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function kn(e,t,n,i){if(null==i||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var r=n.cd,s=n.bd,a=-2&n.v,l=-2&n.j;if(0>a||0>l||0>=r||0>=s||a+r>e||l+s>t)return 2;e=r,t=s}if(n.da){if(!N(e,t,r=[n.ib],s=[n.hb]))return 2;e=r[0],t=s[0]}}i.width=e,i.height=t;e:{var A=i.width,c=i.height;if(e=i.S,0>=A||0>=c||!(e>=Pi&&13>e))e=2;else{if(0>=i.Rd&&null==i.sd){a=s=r=t=0;var u=(l=A*Hr[e])*c;if(11>e||(s=(c+1)/2*(t=(A+1)/2),12==e&&(a=(r=A)*c)),null==(c=o(u+2*s+a))){e=1;break e}i.sd=c,11>e?((A=i.f.RGBA).eb=c,A.fb=0,A.A=l,A.size=u):((A=i.f.kb).y=c,A.O=0,A.fa=l,A.Fd=u,A.f=c,A.N=0+u,A.Ab=t,A.Cd=s,A.ea=c,A.W=0+u+s,A.Db=t,A.Ed=s,12==e&&(A.F=c,A.J=0+u+2*s),A.Tc=a,A.lb=r)}if(t=1,r=i.S,s=i.width,a=i.height,r>=Pi&&13>r)if(11>r)e=i.f.RGBA,t&=(l=Math.abs(e.A))*(a-1)+s<=e.size,t&=l>=s*Hr[r],t&=null!=e.eb;else{e=i.f.kb,l=(s+1)/2,u=(a+1)/2,A=Math.abs(e.fa),c=Math.abs(e.Ab);var h=Math.abs(e.Db),d=Math.abs(e.lb),p=d*(a-1)+s;t&=A*(a-1)+s<=e.Fd,t&=c*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&A>=s&c>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==r&&(t&=d>=s,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Nn(i)),e}var Dn=64,On=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hn=24,Qn=32,zn=8,Gn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];O("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return Q(Q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return Q(e,t[n-1])},e.Predictor7=function(e,t,n){return Q(e,t[n+0])},e.Predictor8=function(e,t,n){return Q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return Q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return Q(Q(e,t[n-1]),Q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var i=t[n+0];return 0>=j(i>>24&255,e>>24&255,(t=t[n-1])>>24&255)+j(i>>16&255,e>>16&255,t>>16&255)+j(i>>8&255,e>>8&255,t>>8&255)+j(255&i,255&e,255&t)?i:e},e.Predictor12=function(e,t,n){var i=t[n+0];return(z((e>>24&255)+(i>>24&255)-((t=t[n-1])>>24&255))<<24|z((e>>16&255)+(i>>16&255)-(t>>16&255))<<16|z((e>>8&255)+(i>>8&255)-(t>>8&255))<<8|z((255&e)+(255&i)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var i=t[n-1];return(G((e=Q(e,t[n+0]))>>24&255,i>>24&255)<<24|G(e>>16&255,i>>16&255)<<16|G(e>>8&255,i>>8&255)<<8|G(255&e,255&i))>>>0};var jn=e.PredictorAdd0;e.PredictorAdd1=V,O("Predictor2","PredictorAdd2"),O("Predictor3","PredictorAdd3"),O("Predictor4","PredictorAdd4"),O("Predictor5","PredictorAdd5"),O("Predictor6","PredictorAdd6"),O("Predictor7","PredictorAdd7"),O("Predictor8","PredictorAdd8"),O("Predictor9","PredictorAdd9"),O("Predictor10","PredictorAdd10"),O("Predictor11","PredictorAdd11"),O("Predictor12","PredictorAdd12"),O("Predictor13","PredictorAdd13");var Vn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Wn,Kn=e.ColorIndexInverseTransform,qn=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,Jn=e.MapAlpha,Yn=e.VP8LPredictorsAdd=[];Yn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,$n,ei,ti,ni,ii,ri,oi,si,ai,li,Ai,ci,ui,hi,di,pi,fi,gi,mi,vi,yi,wi,bi,xi,Bi,_i,Ci,Si=o(511),Ei=o(2041),Ti=o(225),Mi=o(767),Fi=0,Ii=Ei,Ui=Ti,Li=Mi,Ri=Si,Pi=0,Ni=1,ki=2,Di=3,Oi=4,Hi=5,Qi=6,zi=7,Gi=8,ji=9,Vi=10,Wi=[2,3,7],Ki=[3,3,11],qi=[280,256,256,256,40],Xi=[0,1,1,1,0],Ji=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$i=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nr=null,ir=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],or=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ar=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ar=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cr=[],ur=[],hr=[],dr=1,pr=2,fr=[],gr=[];mn("UpsampleRgbLinePair",Bn,3),mn("UpsampleBgrLinePair",_n,3),mn("UpsampleRgbaLinePair",Mn,4),mn("UpsampleBgraLinePair",Tn,4),mn("UpsampleArgbLinePair",En,4),mn("UpsampleRgba4444LinePair",Sn,2),mn("UpsampleRgb565LinePair",Cn,2);var mr=e.UpsampleRgbLinePair,vr=e.UpsampleBgrLinePair,yr=e.UpsampleRgbaLinePair,wr=e.UpsampleBgraLinePair,br=e.UpsampleArgbLinePair,xr=e.UpsampleRgba4444LinePair,Br=e.UpsampleRgb565LinePair,_r=16,Cr=1<<_r-1,Sr=-227,Er=482,Tr=6,Mr=(256<<Tr)-1,Fr=0,Ir=o(256),Ur=o(256),Lr=o(256),Rr=o(256),Pr=o(Er-Sr),Nr=o(Er-Sr);Fn("YuvToRgbRow",Bn,3),Fn("YuvToBgrRow",_n,3),Fn("YuvToRgbaRow",Mn,4),Fn("YuvToBgraRow",Tn,4),Fn("YuvToArgbRow",En,4),Fn("YuvToRgba4444Row",Sn,2),Fn("YuvToRgb565Row",Cn,2);var kr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dr=[0,2,8],Or=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,n,a,l,A){var c=Ni,u=new tn,h=new se;u.ba=h,h.S=c,h.width=[h.width],h.height=[h.height];var d=h.width,p=h.height,f=new ae;if(null==f||null==e)var g=2;else t(null!=f),g=Rn(e,n,a,f.width,f.height,f.Pd,f.Qd,f.format,null);if(0!=g?d=0:(null!=d&&(d[0]=f.width[0]),null!=p&&(p[0]=f.height[0]),d=1),d){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=A&&(A[0]=h.height);e:{if(l=new We,(A=new nn).data=e,A.w=n,A.ha=a,A.kd=1,n=[0],t(null!=A),(0==(e=Rn(A.data,A.w,A.ha,null,null,null,n,null,A))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=u),l.data=A.data,l.w=A.w+A.offset,l.ha=A.ha-A.offset,l.put=de,l.ac=he,l.bc=pe,l.ma=u,A.xa){if(null==(e=Te())){u=1;break e}if(function(e,n){var i=[0],r=[0],o=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,m(e.m,n.data,n.w,n.ha),!fe(e.m,i,r,o)){e.a=3;break t}if(e.xb=pr,n.width=i[0],n.height=r[0],!Me(i[0],r[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=kn(l.width,l.height,u.Oa,u.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(a=l.l)),t(null!=(A=a.ma)),0!=l.xb){if(l.ca=A.ba,l.tb=A.tb,t(null!=l.ca),!Pn(A.Oa,a,Di)){l.a=2;break n}if(!Fe(l,a.width))break n;if(a.da)break n;if((a.da||ie(l.ca.S))&&gn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&gn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!L(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!Se(l,l.V,l.Ba,l.c,l.i,a.o,xe))break n;A.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new Ke)){u=1;break e}if(e.Fa=A.na,e.P=A.P,e.qc=A.Sa,Je(e,l)){if(0==(n=kn(l.width,l.height,u.Oa,u.ba))){if(e.Aa=0,a=u.Oa,t(null!=(A=e)),null!=a){if(0<(d=0>(d=a.Md)?0:100<d?255:255*d/100)){for(p=f=0;4>p;++p)12>(g=A.pb[p]).lc&&(g.ia=d*Or[0>g.lc?0:g.lc]>>3),f|=g.ia;f&&(alert("todo:VP8InitRandom"),A.ia=1)}A.Ga=a.Id,100<A.Ga?A.Ga=100:0>A.Ga&&(A.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return qe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Je(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var a=Dr[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-a>>4,e.zb=n.j-a>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+a>>4,e.Hb=n.va+15+a>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(a=0;4>a;++a){var A;if(e.Qa.Cb){var c=e.Qa.Lb[a];e.Qa.Fb||(c+=l.Tb)}else c=l.Tb;for(A=0;1>=A;++A){var u=e.gd[a][A],h=c;if(l.Pc&&(h+=l.vd[0],A&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var d=h;0<l.wb&&(d=4<l.wb?d>>2:d>>1)>9-l.wb&&(d=9-l.wb),1>d&&(d=1),u.dd=d,u.tc=2*h+d,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=A}}}a=0}else qe(e,6,"Frame setup failed"),a=e.a;if(a=0==a){if(a){e.$c=0,0<e.Aa||(e.Ic=1);t:{a=e.Ic,l=4*(d=e.za);var p=32*d,f=d+1,g=0<e.L?d*(0<e.Aa?2:1):0,m=(2==e.Aa?2:1)*d;if((u=l+832+(A=3*(16*a+Dr[e.L])/2*p)+(c=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)a=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=o(u),e.Fc=0,null==e.Ec){a=qe(e,1,"no memory during frame initialization.");break t}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=s(p,Ge),e.Hd=0,e.rb=s(f+1,Oe),e.sb=1,e.wa=g?s(g,De):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=d),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=s(m,Qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=d),e.R=16*d,e.B=8*d,d=(p=Dr[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=h+d,e.qa=e.sa,e.ra=e.ta+16*a*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*a*e.B+p,e.$c=0,h+=A,e.mb=c?u:null,e.nb=c?h:null,t(h+c<=e.Fc+e.Vb),Ze(e),r(e.Ac,e.Bc,0,l),a=1}}if(a){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Fi){for(a=-255;255>=a;++a)Si[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)Ei[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)Ti[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Mi[255+a]=0>a?0:255<a?255:a;Fi=1}ri=lt,oi=rt,ai=ot,li=st,Ai=at,si=it,ci=Kt,ui=qt,hi=Yt,di=Zt,pi=Xt,fi=Jt,gi=$t,mi=en,vi=Qt,yi=zt,wi=Gt,bi=jt,ur[0]=Bt,ur[1]=ct,ur[2]=bt,ur[3]=xt,ur[4]=_t,ur[5]=St,ur[6]=Ct,ur[7]=Et,ur[8]=Mt,ur[9]=Tt,cr[0]=gt,cr[1]=ht,cr[2]=dt,cr[3]=pt,cr[4]=mt,cr[5]=vt,cr[6]=yt,hr[0]=Lt,hr[1]=ut,hr[2]=Ft,hr[3]=It,hr[4]=Pt,hr[5]=Rt,hr[6]=Nt,a=1}else a=0}a&&(a=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var s,a=e.Jc[e.M&e.Xb],l=e.m,A=e;for(s=0;s<A.za;++s){var c=l,u=A,h=u.Ac,d=u.Bc+4*s,p=u.zc,f=u.ya[u.aa+s];if(u.Qa.Bb?f.$b=T(c,u.Pa.jb[0])?2+T(c,u.Pa.jb[2]):T(c,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=T(c,u.Bd)),f.Za=!T(c,145)+0,f.Za){var g=f.Ob,m=0;for(u=0;4>u;++u){var v,y=p[0+u];for(v=0;4>v;++v){y=ar[h[d+v]][y];for(var w=or[T(c,y[0])];0<w;)w=or[2*w+T(c,y[w])];y=-w,h[d+v]=y}i(g,m,h,d,4),m+=4,p[0+u]=y}}else y=T(c,156)?T(c,128)?1:3:T(c,163)?2:0,f.Ob[0]=y,r(h,d,y,4),r(p,0,y,4);f.Dd=T(c,142)?T(c,114)?T(c,183)?1:3:2:0}if(A.m.Ka)return qe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(A=a,c=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],d=l.kc?s.Ad:0)c.la=h.la=0,s.Za||(c.Na=h.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var b,x;if(c=h,h=A,d=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],u=p.ad,g=0,m=l.rb[l.sb-1],y=v=0,r(u,g,0,384),p.Za)var B=0,_=d[3];else{w=o(16);var C=c.Na+m.Na;if(C=nr(h,d[1],C,f.Eb,0,w,0),c.Na=m.Na=(0<C)+0,1<C)ri(w,0,u,g);else{var S=w[0]+3>>3;for(w=0;256>w;w+=16)u[g+w]=S}B=1,_=d[0]}var E=15&c.la,M=15&m.la;for(w=0;4>w;++w){var F=1&M;for(S=x=0;4>S;++S)E=E>>1|(F=(C=nr(h,_,C=F+(1&E),f.Sc,B,u,g))>B)<<7,x=x<<2|(3<C?3:1<C?2:0!=u[g+0]),g+=16;E>>=4,M=M>>1|F<<7,v=(v<<8|x)>>>0}for(_=E,B=M>>4,b=0;4>b;b+=2){for(x=0,E=c.la>>4+b,M=m.la>>4+b,w=0;2>w;++w){for(F=1&M,S=0;2>S;++S)C=F+(1&E),E=E>>1|(F=0<(C=nr(h,d[2],C,f.Qc,0,u,g)))<<3,x=x<<2|(3<C?3:1<C?2:0!=u[g+0]),g+=16;E>>=2,M=M>>1|F<<5}y|=x<<4*b,_|=E<<4<<b,B|=(240&M)<<b}c.la=_,m.la=B,p.Hc=v,p.Gc=y,p.ia=43690&y?0:f.ia,d=!(v|y)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!d),A.Ka)return qe(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=n,A=1,s=(a=e).D,c=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(s.M=a.M,s.uc=c,Ln(a,s),A=1,s=(x=a.D).Nb,c=(y=Dr[a.L])*a.R,h=y/2*a.B,w=16*s*a.R,S=8*s*a.B,d=a.sa,p=a.ta-c+w,f=a.qa,u=a.ra-h+S,g=a.Ha,m=a.Ia-h+S,M=0==(E=x.M),v=E>=a.Va-1,2==a.Aa&&Ln(a,x),x.uc)for(F=(C=a).D.M,t(C.D.uc),x=C.yb;x<C.Hb;++x){B=x,_=F;var I=(U=(Q=C).D).Nb;b=Q.R;var U=U.wa[U.Y+B],L=Q.sa,R=Q.ta+16*I*b+16*B,P=U.dd,N=U.tc;if(0!=N)if(t(3<=N),1==Q.L)0<B&&yi(L,R,b,N+4),U.La&&bi(L,R,b,N),0<_&&vi(L,R,b,N+4),U.La&&wi(L,R,b,N);else{var k=Q.B,D=Q.qa,O=Q.ra+8*I*k+8*B,H=Q.Ha,Q=Q.Ia+8*I*k+8*B;I=U.ld,0<B&&(ui(L,R,b,N+4,P,I),di(D,O,H,Q,k,N+4,P,I)),U.La&&(fi(L,R,b,N,P,I),mi(D,O,H,Q,k,N,P,I)),0<_&&(ci(L,R,b,N+4,P,I),hi(D,O,H,Q,k,N+4,P,I)),U.La&&(pi(L,R,b,N,P,I),gi(D,O,H,Q,k,N,P,I))}}if(a.ia&&alert("todo:DitherRow"),null!=l.put){if(x=16*E,E=16*(E+1),M?(l.y=a.sa,l.O=a.ta+w,l.f=a.qa,l.N=a.ra+S,l.ea=a.Ha,l.W=a.Ia+S):(x-=y,l.y=d,l.O=p,l.f=f,l.N=u,l.ea=g,l.W=m),v||(E-=y),E>l.o&&(E=l.o),l.F=null,l.J=null,null!=a.Fa&&0<a.Fa.length&&x<E&&(l.J=un(a,l,x,E-x),l.F=a.mb,null==l.F&&0==l.F.length)){A=qe(a,3,"Could not decode alpha data.");break t}x<l.j&&(y=l.j-x,x=l.j,t(!(1&y)),l.O+=a.R*y,l.N+=a.B*(y>>1),l.W+=a.B*(y>>1),null!=l.F&&(l.J+=l.width*y)),x<E&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=x-l.j,l.U=l.va-l.v,l.T=E-x,A=l.put(l))}s+1!=a.Ic||v||(i(a.sa,a.ta-c,d,p+16*a.R,c),i(a.qa,a.ra-h,f,u+8*a.B,h),i(a.Ha,a.Ia-h,g,m+8*a.B,h))}if(!A)return qe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),a&=1}return a?(e.cb=0,a):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=u.Oa&&u.Oa.fd&&(n=Nn(u.ba))}u=n}c=0!=u?null:11>c?h.f.RGBA.eb:h.f.kb.y}else c=null;return c};var Hr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(e,t){for(var n="",i=0;i<4;i++)n+=String.fromCharCode(e[t++]);return n}function c(e,t){return e[t+0]|e[t+1]<<8}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var d=[0],p=[0],f=[],g=new l,m=e,v=function(e,t){var n={},i=0,r=!1,o=0,s=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(h(e,t+=4),t+=8;t<e.length;){var a=A(e,t),l=h(e,t+=4);t+=4;var d=l+(1&l);switch(a){case"VP8 ":case"VP8L":void 0===n.frames[i]&&(n.frames[i]={}),(g=n.frames[i]).src_off=r?s:t-8,g.src_size=o+l+8,i++,r&&(r=!1,o=0,s=0);break;case"VP8X":(g=n.header={}).feature_flags=e[t];var p=t+4;g.canvas_width=1+u(e,p),p+=3,g.canvas_height=1+u(e,p),p+=3;break;case"ALPH":r=!0,o=d+8,s=t-8;break;case"ANIM":(g=n.header).bgcolor=h(e,t),p=t+4,g.loop_count=c(e,p),p+=2;break;case"ANMF":var f,g;(g=n.frames[i]={}).offset_x=2*u(e,t),t+=3,g.offset_y=2*u(e,t),t+=3,g.width=1+u(e,t),t+=3,g.height=1+u(e,t),t+=3,g.duration=u(e,t),t+=3,f=e[t++],g.dispose=1&f,g.blend=f>>1&1}"ANMF"!=a&&(t+=d)}return n}}(m,0);v.response=m,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,w=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],p=[y.canvas_width];for(var b=0;b<w.length&&0!=w[b].blend;b++);}var x=w[0],B=g.WebPDecodeRGBA(m,x.src_off,x.src_size,p,d);x.rgba=B,x.imgwidth=p[0],x.imgheight=d[0];for(var _=0;_<p[0]*d[0]*4;_++)f[_]=B[_];return this.width=p,this.height=d,this.data=f,this}!function(e){var t,n,i,r,o,s,a,l,A,c=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,A=new c}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(e){i=Boolean(e)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(e){isNaN(e)||(o=e)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),A.margin=t}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(e){s=e}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(e){a=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(e){e instanceof c&&(A=e)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(e){A.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var d=null,p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){d=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var i=t[3],r=t[4];t[5];var o=t[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===s?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var a=function(e){var t,n,i=[],r=e.trim();if(""===r)return WT;if(r in UT)return[UT[r]];for(;""!==r;){switch(n=null,t=(r=RT(r)).charAt(0)){case'"':case"'":n=PT(r.substring(1),t);break;default:n=NT(r)}if(null===n)return WT;if(i.push(n[0]),""!==(r=RT(n[1]))&&","!==r.charAt(0))return WT;r=r.replace(/^,/,"")}return i}(o);if(this.fontFaces){var l=function(e,t){if(null===d){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var i=null;switch(e){case"bold":i={family:n,weight:"bold"};break;case"italic":i={family:n,style:"italic"};break;case"bolditalic":i={family:n,weight:"bold",style:"italic"};break;case"":case"normal":i={family:n}}null!==i&&(i.ref={name:n,style:e},t.push(i))})}),t}(e.getFontList());d=function(e){for(var t={},n=0;n<e.length;++n){var i=MT(e[n]),r=i.family,o=i.stretch,s=i.style,a=i.weight;t[r]=t[r]||{},t[r][o]=t[r][o]||{},t[r][o][s]=t[r][o][s]||{},t[r][o][s][a]=i}return t}(n.concat(t))}return d}(this.pdf,this.fontFaces),A=a.map(function(e){return{family:e,stretch:"normal",weight:i,style:n}}),c=function(e,t,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},IT,n.genericFontFamilies||{}),o=null,s=null,a=0;a<t.length;++a)if(r[(o=MT(t[a])).family]&&(o.family=r[o.family]),e.hasOwnProperty(o.family)){s=e[o.family];break}if(!(s=s||e[i]))throw new Error("Could not find a font-family for the rule '"+LT(o)+"' and default family '"+i+"'.");if(s=function(e,t){if(t[e])return t[e];var n=ST[e],i=n<=ST.normal?-1:1,r=FT(t,CT,n,i);if(!r)throw new Error("Could not find a matching font-stretch value for "+e);return r}(o.stretch,s),s=function(e,t){if(t[e])return t[e];for(var n=_T[e],i=0;i<n.length;++i)if(t[n[i]])return t[n[i]];throw new Error("Could not find a matching font-style for "+e)}(o.style,s),!(s=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=TT[e],i=FT(t,ET,n,e<400?-1:1);if(!i)throw new Error("Could not find a matching font-weight for value "+e);return i}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+LT(o)+"'.");return s}(l,A);this.pdf.setFont(c.ref.name,c.ref.style)}else{var u="";("bold"===i||parseInt(i,10)>=700||"bold"===n)&&(u="bold"),"italic"===n&&(u+="italic"),0===u.length&&(u="normal");for(var h="",p={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},f=0;f<a.length;f++){if(void 0!==this.pdf.internal.getFont(a[f],u,{noFallback:!0,disableWarning:!0})){h=a[f];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(a[f],"bold",{noFallback:!0,disableWarning:!0}))h=a[f],u="bold";else if(void 0!==this.pdf.internal.getFont(a[f],"normal",{noFallback:!0,disableWarning:!0})){h=a[f],u="normal";break}}if(""===h)for(var g=0;g<a.length;g++)if(p[a[g]]){h=p[a[g]];break}h=""===h?"Times":h,this.pdf.setFont(h,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,k.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,k.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){w.call(this,"fill",!1)},u.prototype.stroke=function(){w.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw oE.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(e,t)},u.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,Gb.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw oE.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,n,i){if(isNaN(n)||isNaN(i)||isNaN(e)||isNaN(t))throw oE.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new s(n,i)),o=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:r.x,y:r.y}),this.ctx.lastPoint=new s(r.x,r.y)},u.prototype.bezierCurveTo=function(e,t,n,i,r,o){if(isNaN(r)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw oE.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new s(r,o)),l=this.ctx.transform.applyToPoint(new s(e,t)),A=this.ctx.transform.applyToPoint(new s(n,i));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:A.x,y2:A.y,x:a.x,y:a.y}),this.ctx.lastPoint=new s(a.x,a.y)},u.prototype.arc=function(e,t,n,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r))throw oE.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new s(e,t));e=a.x,t=a.y;var l=this.ctx.transform.applyToPoint(new s(0,n)),A=this.ctx.transform.applyToPoint(new s(0,0));n=Math.sqrt(Math.pow(l.x-A.x,2)+Math.pow(l.y-A.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:i,endAngle:r,counterclockwise:o})},u.prototype.arcTo=function(e,t,n,i,r){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw oE.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+i),this.lineTo(e,t+i),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw oE.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},u.prototype.strokeRect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw oE.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,i),this.stroke())},u.prototype.clearRect=function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i))throw oE.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,i))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=i}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,i,r;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,i=0,r=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=parseFloat(o[4]);else{if(r=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new cE(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,i=e.substring(3,4),i+=i):(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:t,g:n,b:i,a:r,style:e}},d=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,n,i){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw oE.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!d.call(this)){var r=R(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;T.call(this,{text:e,x:t,y:n,scale:o,angle:r,align:this.textAlign,maxWidth:i})}},u.prototype.strokeText=function(e,t,n,i){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw oE.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){i=isNaN(i)?void 0:i;var r=R(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;T.call(this,{text:e,x:t,y:n,scale:o,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw oE.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,i=t.internal.getFontSize(),r=t.getStringUnitWidth(e)*i/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:r*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw oE.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(e){if(isNaN(e))throw oE.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw oE.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(e,t,n,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o))throw oE.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new l(e,t,n,i,r,o);this.ctx.transform=this.ctx.transform.multiply(s)},u.prototype.setTransform=function(e,t,n,i,r,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,o=isNaN(o)?0:o,this.ctx.transform=new l(e,t,n,i,r,o)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,n,i,r,o,s,A,c){var u=this.pdf.getImageProperties(e),h=1,d=1,p=1,m=1;void 0!==i&&void 0!==A&&(p=A/i,m=c/r,h=u.width/i*A/i,d=u.height/r*c/r),void 0===o&&(o=t,s=n,t=0,n=0),void 0!==i&&void 0===A&&(A=i,c=r),void 0===i&&void 0===A&&(A=u.width,c=u.height);for(var w,x=this.ctx.transform.decompose(),B=R(x.rotate.shx),_=new l,C=(_=(_=(_=_.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new a(o-t*p,s-n*m,i*h,r*d)),S=g.call(this,C),E=[],T=0;T<S.length;T+=1)-1===E.indexOf(S[T])&&E.push(S[T]);if(y(E),this.autoPaging)for(var M=E[0],F=E[E.length-1],I=M;I<F+1;I++){this.pdf.setPage(I);var U=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],L=1===I?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],N=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],k=1===I?0:P+(I-2)*N;if(0!==this.ctx.clip_path.length){var D=this.path;w=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(w,this.posX+this.margin[3],-k+L+this.ctx.prevPageLastElemOffset),b.call(this,"fill",!0),this.path=D}var O=JSON.parse(JSON.stringify(C));O=v([O],this.posX+this.margin[3],-k+L+this.ctx.prevPageLastElemOffset)[0];var H=(I>M||I<F)&&f.call(this);H&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],U,N,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",O.x,O.y,O.w,O.h,null,null,B),H&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,B)};var g=function(e,t,n){var i=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":i.push(Math.floor((e.y+r)/n)+1);break;case"arc":i.push(Math.floor((e.y+r-e.radius)/n)+1),i.push(Math.floor((e.y+r+e.radius)/n)+1);break;case"qct":var o=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);i.push(Math.floor((o.y+r)/n)+1),i.push(Math.floor((o.y+o.h+r)/n)+1);break;case"bct":var s=N(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);i.push(Math.floor((s.y+r)/n)+1),i.push(Math.floor((s.y+s.h+r)/n)+1);break;case"rect":i.push(Math.floor((e.y+r)/n)+1),i.push(Math.floor((e.y+e.h+r)/n)+1)}for(var a=0;a<i.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<i[a];)m.call(this);return i},m=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=o},v=function(e,t,n){for(var i=0;i<e.length;i++)switch(e[i].type){case"bct":e[i].x2+=t,e[i].y2+=n;case"qct":e[i].x1+=t,e[i].y1+=n;default:e[i].x+=t,e[i].y+=n}return e},y=function(e){return e.sort(function(e,t){return e-t})},w=function(e,t){for(var n,i,r=this.fillStyle,o=this.strokeStyle,s=this.lineCap,a=this.lineWidth,l=Math.abs(a*this.ctx.transform.scaleX),A=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],d=0;d<u.length;d++)if(void 0!==u[d].x)for(var p=g.call(this,u[d]),w=0;w<p.length;w+=1)-1===h.indexOf(p[w])&&h.push(p[w]);for(var x=0;x<h.length;x++)for(;this.pdf.internal.getNumberOfPages()<h[x];)m.call(this);if(y(h),this.autoPaging)for(var B=h[0],_=h[h.length-1],C=B;C<_+1;C++){this.pdf.setPage(C),this.fillStyle=r,this.strokeStyle=o,this.lineCap=s,this.lineWidth=l,this.lineJoin=A;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],E=1===C?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===C?0:T+(C-2)*M;if(0!==this.ctx.clip_path.length){var I=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-F+E+this.ctx.prevPageLastElemOffset),b.call(this,e,!0),this.path=I}if(i=JSON.parse(JSON.stringify(c)),this.path=v(i,this.posX+this.margin[3],-F+E+this.ctx.prevPageLastElemOffset),!1===t||0===C){var U=(C>B||C<_)&&f.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,M,null).clip().discardPath()),b.call(this,e,t),U&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=l,b.call(this,e,t),this.lineWidth=a;this.path=c},b=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!d.call(this))){for(var n,i,r=[],o=this.path,s=0;s<o.length;s++){var a=o[s];switch(a.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:a,deltas:[],abs:[]});break;case"lt":var l=r.length;if(o[s-1]&&!isNaN(o[s-1].x)&&(n=[a.x-o[s-1].x,a.y-o[s-1].y],l>0))for(;l>=0;l--)if(!0!==r[l-1].close&&!0!==r[l-1].begin){r[l-1].deltas.push(n),r[l-1].abs.push(a);break}break;case"bct":n=[a.x1-o[s-1].x,a.y1-o[s-1].y,a.x2-o[s-1].x,a.y2-o[s-1].y,a.x-o[s-1].x,a.y-o[s-1].y],r[r.length-1].deltas.push(n);break;case"qct":var A=o[s-1].x+2/3*(a.x1-o[s-1].x),c=o[s-1].y+2/3*(a.y1-o[s-1].y),u=a.x+2/3*(a.x1-a.x),h=a.y+2/3*(a.y1-a.y),f=a.x,g=a.y;n=[A-o[s-1].x,c-o[s-1].y,u-o[s-1].x,h-o[s-1].y,f-o[s-1].x,g-o[s-1].y],r[r.length-1].deltas.push(n);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(a)}}i=t?null:"stroke"===e?"stroke":"fill";for(var m=!1,v=0;v<r.length;v++)if(r[v].arc)for(var y=r[v].abs,w=0;w<y.length;w++){var b=y[w];"arc"===b.type?_.call(this,b.x,b.y,b.radius,b.startAngle,b.endAngle,b.counterclockwise,void 0,t,!m):M.call(this,b.x,b.y),m=!0}else if(!0===r[v].close)this.pdf.internal.out("h"),m=!1;else if(!0!==r[v].begin){var x=r[v].start.x,B=r[v].start.y;F.call(this,r[v].deltas,x,B),m=!0}i&&C.call(this,i),t&&S.call(this)}},x=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},B=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(e,t,n,i,r,o,s,a,l){for(var A=U.call(this,n,i,r,o),c=0;c<A.length;c++){var u=A[c];0===c&&(l?E.call(this,u.x1+e,u.y1+t):M.call(this,u.x1+e,u.y1+t)),I.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}a?S.call(this):C.call(this,s)},C=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(e,t){this.pdf.internal.out(n(e)+" "+i(t)+" m")},T=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),i=x.call(this,e.y),r=B.call(this,i)-n.h,o=this.ctx.transform.applyToPoint(new s(e.x,i)),A=this.ctx.transform.decompose(),c=new l;c=(c=(c=c.multiply(A.translate)).multiply(A.skew)).multiply(A.scale);for(var u,h,d,p=this.ctx.transform.applyToRectangle(new a(e.x,i,n.w,n.h)),m=c.applyToRectangle(new a(e.x,r,n.w,n.h)),w=g.call(this,m),_=[],C=0;C<w.length;C+=1)-1===_.indexOf(w[C])&&_.push(w[C]);if(y(_),this.autoPaging)for(var S=_[0],E=_[_.length-1],T=S;T<E+1;T++){this.pdf.setPage(T);var M=1===T?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[2],U=I-this.margin[0],L=this.pdf.internal.pageSize.width-this.margin[1],R=L-this.margin[3],P=1===T?0:F+(T-2)*U;if(0!==this.ctx.clip_path.length){var N=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*P+M),b.call(this,"fill",!0),this.path=N}var k=v([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-P+M+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),d=this.lineWidth,this.lineWidth=d*e.scale);var D="text"!==this.autoPaging;if(D||k.y+k.h<=I){if(D||k.y>=M&&k.x<=L){var O=D?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||L-k.x)[0],H=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-P+M+this.ctx.prevPageLastElemOffset)[0],Q=D&&(T>S||T<E)&&f.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,U,null).clip().discardPath()),this.pdf.text(O,H.x,H.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),Q&&this.pdf.restoreGraphicsState()}}else k.y<I&&(this.ctx.prevPageLastElemOffset+=I-k.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=d)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),d=this.lineWidth,this.lineWidth=d*e.scale),this.pdf.text(e.text,o.x+this.posX,o.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=d)},M=function(e,t,r,o){r=r||0,o=o||0,this.pdf.internal.out(n(e+r)+" "+i(t+o)+" l")},F=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},I=function(e,n,i,s,a,l,A,c){this.pdf.internal.out([t(r(i+e)),t(o(s+n)),t(r(a+e)),t(o(l+n)),t(r(A+e)),t(o(c+n)),"c"].join(" "))},U=function(e,t,n,i){for(var r=2*Math.PI,o=Math.PI/2;t>n;)t-=r;var s=Math.abs(n-t);s<r&&i&&(s=r-s);for(var a=[],l=i?-1:1,A=t;s>1e-5;){var c=A+l*Math.min(s,o);a.push(L.call(this,e,A,c)),s-=Math.abs(c-A),A=c}return a},L=function(e,t,n){var i=(n-t)/2,r=e*Math.cos(i),o=e*Math.sin(i),s=r,a=-o,l=s*s+a*a,A=l+s*r+a*o,c=4/3*(Math.sqrt(2*l*A)-A)/(s*o-a*r),u=s-c*a,h=a+c*s,d=u,p=-h,f=i+t,g=Math.cos(f),m=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*m,y2:u*m+h*g,x3:d*g-p*m,y3:d*m+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},R=function(e){return 180*e/Math.PI},P=function(e,t,n,i,r,o){var s=e+.5*(n-e),l=t+.5*(i-t),A=r+.5*(n-r),c=o+.5*(i-o),u=Math.min(e,r,s,A),h=Math.max(e,r,s,A),d=Math.min(t,o,l,c),p=Math.max(t,o,l,c);return new a(u,d,h-u,p-d)},N=function(e,t,n,i,r,o,s,l){var A,c,u,h,d,p,f,g,m,v,y,w,b,x,B=n-e,_=i-t,C=r-n,S=o-i,E=s-r,T=l-o;for(c=0;c<41;c++)m=(f=(u=e+(A=c/40)*B)+A*((d=n+A*C)-u))+A*(d+A*(r+A*E-d)-f),v=(g=(h=t+A*_)+A*((p=i+A*S)-h))+A*(p+A*(o+A*T-p)-g),0==c?(y=m,w=v,b=m,x=v):(y=Math.min(y,m),w=Math.min(w,v),b=Math.max(b,m),x=Math.max(x,v));return new a(Math.round(y),Math.round(w),Math.round(b-y),Math.round(x-w))},k=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(NE.API),function(e){var t=function(e){var t,n,i,r,o,s,a,l,A,c;for(/[^\x00-\xFF]/.test(e),n=[],i=0,r=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;r>i;i+=4)0!==(o=(e.charCodeAt(i)<<24)+(e.charCodeAt(i+1)<<16)+(e.charCodeAt(i+2)<<8)+e.charCodeAt(i+3))?(s=(o=((o=((o=((o=(o-(c=o%85))/85)-(A=o%85))/85)-(l=o%85))/85)-(a=o%85))/85)%85,n.push(s+33,a+33,l+33,A+33,c+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,i,r,o,s=String,a="length",l=255,A="charCodeAt",c="slice",u="replace";for(e[c](-2),e=e[c](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),i=[],r=0,o=(e+=t="uuuuu"[c](e[a]%5||5))[a];o>r;r+=5)n=52200625*(e[A](r)-33)+614125*(e[A](r+1)-33)+7225*(e[A](r+2)-33)+85*(e[A](r+3)-33)+(e[A](r+4)-33),i.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(i,t[a]),s.fromCharCode.apply(s,i)},i=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",i=0;i<e.length;i+=2)n+=String.fromCharCode("0x"+(e[i]+e[i+1]));return n},o=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=Ex(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,s){var a=0,l=e||"",A=[];for("string"==typeof(s=s||[])&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=i(l),A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:A.reverse().join(" ")}}}(NE.API),(VT=NE.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(e,t,n){var i=new XMLHttpRequest,r=0,o=function(e){var t=e.length,n=[],i=String.fromCharCode;for(r=0;r<t;r+=1)n.push(i(255&e.charCodeAt(r)));return n.join("")};if(i.open("GET",e,!t),i.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(i.onload=function(){200===i.status?n(o(this.responseText)):n(void 0)}),i.send(null),t&&200===i.status)return o(i.responseText)}(e,t,n)}catch(cv){}return i}(e,t,n)},VT.loadImageFile=VT.loadFile,function(e){function t(){return(iE.html2canvas?Promise.resolve(iE.html2canvas):Promise.resolve().then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function i(){return(iE.DOMPurify?Promise.resolve(iE.DOMPurify):n.e(977).then(n.bind(n,7977))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var r=function(e){var t=(0,Gb.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},o=function(e,t){var n=document.createElement(e);for(var i in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[i]=t.style[i];return n},s=function e(t,n){for(var i=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(e(r,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(i.value=t.value),i.addEventListener("load",function(){i.scrollTop=t.scrollTop,i.scrollLeft=t.scrollLeft},!0)),i},a=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),i=e.convert(Promise.resolve(),n);return(i=i.setProgress(1,e,1,[e])).set(t)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(e,t){return e.__proto__=t||a.prototype,e},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(r(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(i).then(function(t){return this.set({src:o("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},a.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,i="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:i,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var s=n[o],a=s.src.find(function(e){return"truetype"===e.format});a&&t.addFont(a.url,s.ref.name,s.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,t.context2d.save(!0),e(this.prop.container,r)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},a.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},a.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},a.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(e){if("object"!==r(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in a.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},a.prototype.get=function(e,t){return this.then(function(){var n=e in a.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},a.prototype.setMargin=function(e){return this.then(function(){switch(r(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},a.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||NE.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},a.prototype.setProgress=function(e,t,n,i){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(e,t,n,i){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},a.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},a.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var i=this;e&&(e=e.bind(i)),t&&(t=t.bind(i));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?i:a.convert(Object.assign({},i),Promise.prototype),o=n.call(r,e,t);return a.convert(o,i.__proto__)},a.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},a.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},a.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return a.convert(t,this)},a.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},a.prototype.error=function(e){return this.then(function(){throw new Error(e)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,NE.getPageSize=function(e,t,n){if("object"===(0,Gb.A)(e)){var i=e;e=i.orientation,t=i.unit||t,n=i.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var r,o=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+t}var a,l=0,A=0;if(s.hasOwnProperty(o))l=s[o][1]/r,A=s[o][0]/r;else try{l=n[1],A=n[0]}catch(c){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",A>l&&(a=A,A=l,l=a);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>A&&(a=A,A=l,l=a)}return{width:A,height:l,unit:t,k:r,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(MT):null;var n=new a(t);return t.worker?n:n.from(e).doCallback()}}(NE.API),NE.API.addJS=function(e){return OT=e,this.internal.events.subscribe("postPutResources",function(){kT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kT+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),DT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+OT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==kT&&void 0!==DT&&this.internal.out("/Names <</JavaScript "+kT+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),r=0;r<i.length;r++){var o=i[r],s=n.exec(o);if(null!=s){var a=s[1];e.internal.newObjectDeferredBegin(a,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,A=[];for(r=0;r<l;r++){var c=e.internal.newObject();A.push(c);var u=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<A.length;r++)e.internal.write("(page_"+(r+1)+")"+A[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var i={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(i),i},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<t.children.length;i++){var r=t.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(t)),i>0&&this.line("/Prev "+this.makeRef(t.children[i-1])),i<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[i+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var o=this.count=this.count_r({count:0},r);if(o>0&&this.line("/Count "+o),r.options&&r.options.pageNumber){var s=e.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<t.children.length;a++)this.renderItems(t.children[a])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(NE.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,i,r,o,s){var a,l=this.decode.DCT_DECODE,A=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,a=function(e){for(var n,i=256*e.charCodeAt(4)+e.charCodeAt(5),r=e.length,o={width:0,height:0,numcomponents:1},s=4;s<r;s+=2){if(s+=i,-1!==t.indexOf(e.charCodeAt(s+1))){n=256*e.charCodeAt(s+5)+e.charCodeAt(s+6),o={width:256*e.charCodeAt(s+7)+e.charCodeAt(s+8),height:n,numcomponents:e.charCodeAt(s+9)};break}i=256*e.charCodeAt(s+2)+e.charCodeAt(s+3)}return o}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),a.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}A={data:e,width:a.width,height:a.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:i}}return A}}(NE.API),NE.API.processPNG=function(e,t,n,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var r,o=function(e,t){return new tE(e,t).decode()}(e,{checkCrc:!0}),s=o.width,a=o.height,l=o.channels,A=o.palette,c=o.depth;r=A&&1===l?function(e){for(var t=e.width,n=e.height,i=e.data,r=e.palette,o=e.depth,s=!1,a=[],l=[],A=void 0,c=!1,u=0,h=0;h<r.length;h++){var d=Fx(r[h],4),p=d[0],f=d[1],g=d[2],m=d[3];a.push(p,f,g),null!=m&&(0===m?(u++,l.length<1&&l.push(h)):m<255&&(c=!0))}if(c||u>1){s=!0,l=void 0;var v=t*n;A=new Uint8Array(v);for(var y=new DataView(i.buffer),w=0;w<v;w++){var b=Fx(r[tM(y,w,o)],4)[3];A[w]=b}}else 0===u&&(l=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:s?8:void 0,colorBytes:i,alphaBytes:A,needSMask:s,palette:a,mask:l}}(o):2===l||4===l?function(e){for(var t=e.data,n=e.width,i=e.height,r=e.channels,o=e.depth,s=2===r?"DeviceGray":"DeviceRGB",a=r-1,l=n*i,A=a,c=l*A,u=1*l,h=Math.ceil(c*o/8),d=Math.ceil(u*o/8),p=new Uint8Array(h),f=new Uint8Array(d),g=new DataView(t.buffer),m=new DataView(p.buffer),v=new DataView(f.buffer),y=!1,w=0;w<l;w++){for(var b=w*r,x=0;x<A;x++)nM(m,tM(g,b+x,o),w*A+x,o);var B=tM(g,b+A,o);B<(1<<o)-1&&(y=!0),nM(v,B,1*w,o)}return{colorSpace:s,colorsPerPixel:a,sMaskBitsPerComponent:y?o:void 0,colorBytes:p,alphaBytes:f,needSMask:y}}(o):function(e){var t=e.data,n=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:n,colorsPerPixel:"DeviceGray"===n?1:3,colorBytes:t instanceof Uint16Array?function(e){for(var t=e.length,n=new Uint8Array(2*t),i=new DataView(n.buffer,n.byteOffset,n.byteLength),r=0;r<t;r++)i.setUint16(2*r,e[r],!1);return n}(t):t,needSMask:!1}}(o);var u,h,d,p=r,f=p.colorSpace,g=p.colorsPerPixel,m=p.sMaskBitsPerComponent,v=p.colorBytes,y=p.alphaBytes,w=p.needSMask,b=p.palette,x=p.mask,B=null;return i!==NE.API.image_compression.NONE?(B=function(e){var t;switch(e){case NE.API.image_compression.FAST:t=11;break;case NE.API.image_compression.MEDIUM:t=13;break;case NE.API.image_compression.SLOW:t=14;break;default:t=12}return t}(i),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(B," /Colors ").concat(g," /BitsPerComponent ").concat(c," /Columns ").concat(s),e=KT(v,Math.ceil(s*g*c/8),g,c,i),w&&(d=KT(y,Math.ceil(s*m/8),1,m,i))):(u=void 0,h=void 0,e=v,w&&(d=y)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:n,data:e,index:t,filter:u,decodeParameters:h,transparency:x,palette:b,sMask:d,predictor:B,width:s,height:a,bitsPerComponent:c,sMaskBitsPerComponent:m,colorSpace:f}}},function(e){e.processGIF89A=function(t,n,i,r){var o=new rM(t),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var A={data:l,width:s,height:a},c=new sM(100).encode(A,100);return e.processJPEG.call(this,c,n,i,r)},e.processGIF87A=e.processGIF89A}(NE.API),aM.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},aM.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){oE.log("bit decode error:"+n)}},aM.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}0!==n&&(this.pos+=4-n)}},aM.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,a=o>>4,l=15&o,A=this.palette[a];if(this.data[s]=A.blue,this.data[s+1]=A.green,this.data[s+2]=A.red,this.data[s+3]=255,2*r+1>=this.width)break;A=this.palette[l],this.data[s+4]=A.blue,this.data[s+4+1]=A.green,this.data[s+4+2]=A.red,this.data[s+4+3]=255}0!==t&&(this.pos+=4-t)}},aM.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==e&&(this.pos+=4-e)}},aM.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,A=o>>15?255:0,c=i*this.width*4+4*r;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=A}this.pos+=e}},aM.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&n)/n*255|0,A=(s>>11)/t*255|0,c=r*this.width*4+4*o;this.data[c]=A,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=e}},aM.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},aM.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=s}},aM.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,i,r){var o=new aM(t,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},A=new sM(100).encode(l,100);return e.processJPEG.call(this,A,n,i,r)}}(NE.API),lM.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,i,r){var o=new lM(t),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},A=new sM(100).encode(l,100);return e.processJPEG.call(this,A,n,i,r)}}(NE.API),NE.API.processRGBA=function(e,t,n){for(var i=e.data,r=i.length,o=new Uint8Array(r/4*3),s=new Uint8Array(r/4),a=0,l=0,A=0;A<r;A+=4){var c=i[A],u=i[A+1],h=i[A+2],d=i[A+3];o[a++]=c,o[a++]=u,o[a++]=h,s[l++]=d}var p=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},NE.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},HT=NE.API,QT=HT.getCharWidthsArray=function(e,t){var n,i,r=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,A=t.kerning?t.kerning:r.metadata.Unicode.kerning,c=A.fof?A.fof:1,u=!1!==t.doKerning,h=0,d=e.length,p=0,f=a[0]||l,g=[];for(n=0;n<d;n++)i=e.charCodeAt(n),"function"==typeof r.metadata.widthOfString?g.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+s*(1e3/o)||0)/1e3):(h=u&&"object"===(0,Gb.A)(A[i])&&!isNaN(parseInt(A[i][p],10))?A[i][p]/c:0,g.push((a[i]||f)/l+h)),p=i;return g},zT=HT.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return HT.processArabic&&(e=HT.processArabic(e)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(e,n,r)/n:QT.apply(this,arguments).reduce(function(e,t){return e+t},0)},GT=function(e,t,n,i){for(var r=[],o=0,s=e.length,a=0;o!==s&&a+t[o]<n;)a+=t[o],o++;r.push(e.slice(0,o));var l=o;for(a=0;o!==s;)a+t[o]>i&&(r.push(e.slice(l,o)),a=0,l=o),a+=t[o],o++;return l!==o&&r.push(e.slice(l,o)),r},jT=function(e,t,n){n||(n={});var i,r,o,s,a,l,A,c=[],u=[c],h=n.textIndent||0,d=0,p=0,f=e.split(" "),g=QT.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var m=Array(l).join(" "),v=[];f.map(function(e){(e=e.split(/\s*\n/)).length>1?v=v.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):v.push(e[0])}),f=v,l=zT.apply(this,[m,n])}for(o=0,s=f.length;o<s;o++){var y=0;if(i=f[o],l&&"\n"==i[0]&&(i=i.substr(1),y=1),h+d+(p=(r=QT.apply(this,[i,n])).reduce(function(e,t){return e+t},0))>t||y){if(p>t){for(a=GT.apply(this,[i,r,t-(h+d),t]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);p=r.slice(i.length-(c[0]?c[0].length:0)).reduce(function(e,t){return e+t},0)}else c=[i];u.push(c),h=p+l,d=g}else c.push(i),h+=d+p,d=g}return A=l?function(e,t){return(t?m:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(A)},HT.splitTextToSize=function(e,t,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var a,l,A=[];for(a=0,l=i.length;a<l;a++)A=A.concat(jT.apply(this,[i[a],s,o]));return A},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",i={},r={},o=0;o<16;o++)i[n[o]]=t[o],r[t[o]]=n[o];var s=function(e){return"0x"+parseInt(e,10).toString(16)},a=e.__fontmetrics__.compress=function(e){var t,n,i,o,l=["{"];for(var A in e){if(t=e[A],isNaN(parseInt(A,10))?n="'"+A+"'":(A=parseInt(A,10),n=(n=s(A).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(i=s(t).slice(3),o="-"):(i=s(t).slice(2),o=""),i=o+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==(0,Gb.A)(t))throw new Error("Don't know what to do with value type "+(0,Gb.A)(t)+".");i=a(t)}l.push(n+i)}return l.push("}"),l.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,r,o,s={},a=1,l=s,A=[],c="",u="",h=e.length-1,d=1;d<h;d+=1)"'"==(o=e[d])?t?(r=t.join(""),t=void 0):t=[]:t?t.push(o):"{"==o?(A.push([l,r]),l={},r=void 0):"}"==o?((n=A.pop())[0][n[1]]=l,r=void 0,l=n[0]):"-"==o?a=-1:void 0===r?i.hasOwnProperty(o)?(c+=i[o],r=parseInt(c,16)*a,a=1,c=""):c+=o:i.hasOwnProperty(o)?(u+=i[o],l[r]=parseInt(u,16)*a,a=1,r=void 0,u=""):u+=o;return s},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var i=c.Unicode[t.postScriptName];i&&(t.metadata.Unicode.encoding=i,t.encoding=i.codePages[0])}])}(NE.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(i);return n};e.API.events.push(["addFont",function(n){var i=void 0,r=n.font,o=n.instance;if(!r.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(i=!1===o.existsFileInVFS(r.postScriptName)?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,i){i=/^\x00\x01\x00\x00/.test(i)?t(i):t(uE(i)),n.metadata=e.API.TTFFont.open(i),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,i)}}])}(NE),NE.API.addSvgAsImage=function(e,t,i,r,o,s,a,l){if(isNaN(t)||isNaN(i))throw oE.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw oE.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=r,A.height=o;var c=A.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,A.width,A.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(iE.canvg?Promise.resolve(iE.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(c,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(A.toDataURL("image/jpeg",1),t,i,r,o,a,l)})},NE.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,n);return this},NE.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,r,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],A=0,c=0,u=0;function h(e,t){var n,i=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var d=a.length;for(u=0;u<d;u+=1)n[a[u]].value=n[a[u]].defaultValue,n[a[u]].explicitSet=!1}if("object"===(0,Gb.A)(e))for(r in e)if(o=e[r],h(a,r)&&void 0!==o){if("boolean"===n[r].type&&"boolean"==typeof o)n[r].value=o;else if("name"===n[r].type&&h(n[r].valueSet,o))n[r].value=o;else if("integer"===n[r].type&&Number.isInteger(o))n[r].value=o;else if("array"===n[r].type){for(A=0;A<o.length;A+=1)if(i=!0,1===o[A].length&&"number"==typeof o[A][0])l.push(String(o[A]-1));else if(o[A].length>1){for(c=0;c<o[A].length;c+=1)"number"!=typeof o[A][c]&&(i=!1);!0===i&&l.push([o[A][0]-1,o[A][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+i.length+r.length+t.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+n+i+r+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(NE.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,i=t.metadata.Unicode.widths,r=["","0","00","000","0000"],o=[""],s=0,a=e.length;s<a;++s){if(n=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(s),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(r[4-n.length],n)}return o.join("")},i=function(e){var t,n,i,r,o,s,a;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],s=0,a=(n=Object.keys(e).sort(function(e,t){return e-t})).length;s<a;s++)t=n[s],i.length>=100&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(r=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),i.push("<"+t+"><"+r+">"));return i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,r=t.out,o=t.newObject,s=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var a=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),A="",c=0;c<l.length;c++)A+=String.fromCharCode(l[c]);var u=o();s({data:A,addLength1:!0,objectId:u}),r("endobj");var h=o();s({data:i(n.metadata.toUnicode),addLength1:!0,objectId:h}),r("endobj");var d=o();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+FE(n.fontName)),r("/FontFile2 "+u+" 0 R"),r("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var p=o();r("<<"),r("/Type /Font"),r("/BaseFont /"+FE(n.fontName)),r("/FontDescriptor "+d+" 0 R"),r("/W "+e.API.PDFObject.convert(a)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=o(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+h+" 0 R"),r("/BaseFont /"+FE(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+p+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,r=t.out,o=t.newObject,s=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var a=n.metadata.rawData,l="",A=0;A<a.length;A++)l+=String.fromCharCode(a[A]);var c=o();s({data:l,addLength1:!0,objectId:c}),r("endobj");var u=o();s({data:i(n.metadata.toUnicode),addLength1:!0,objectId:u}),r("endobj");var h=o();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+c+" 0 R"),r("/Flags 96"),r("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+FE(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=o();for(var d=0;d<n.metadata.hmtx.widths.length;d++)n.metadata.hmtx.widths[d]=parseInt(n.metadata.hmtx.widths[d]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+FE(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(t)}]);var r=function(e){var t,i=e.text||"",r=e.x,o=e.y,s=e.options||{},a=e.mutex||{},l=a.pdfEscape,A=a.activeFontKey,c=a.fonts,u=A,h="",d=0,p="",f=c[u].encoding;if("Identity-H"!==c[u].encoding)return{text:i,x:r,y:o,options:s,mutex:a};for(p=i,u=A,Array.isArray(i)&&(p=i[0]),d=0;d<p.length;d+=1)c[u].metadata.hasOwnProperty("cmap")&&(t=c[u].metadata.cmap.unicode.codeMap[p[d].charCodeAt(0)]),t||p[d].charCodeAt(0)<256&&c[u].metadata.hasOwnProperty("Unicode")?h+=p[d]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===f?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===f&&(g=n(h,c[u])),a.isHex=!0,{text:g,x:r,y:o,options:s,mutex:a}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],i={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var o=0;for(o=0;o<t.length;o+=1)Array.isArray(t[o])&&3===t[o].length?n.push([r(Object.assign({},i,{text:t[o][0]})).text,t[o][1],t[o][2]]):n.push(r(Object.assign({},i,{text:t[o]})).text);e.text=n}else e.text=r(Object.assign({},i,{text:t})).text}])}(NE),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(NE.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,i,r,o,s,a,l,A=t,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},d={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,m=0;this.__bidiEngine__={};var v=function(e){var t=e.charCodeAt(),n=t>>8,i=d[n];return void 0!==i?A[256*i+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},y=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=v(e.charAt(n))))return!1;if("R"===t)return!0}return!1},w=function(e,t,s,a){var l,A,c,u,h=t[a];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":a<1||a+1>=t.length||"EN"!==(l=s[a-1])&&"AN"!==l||"EN"!==(A=t[a+1])&&"AN"!==A?h="N":g&&(A="AN"),h=A===l?A:"N";break;case"ES":h="EN"===(l=a>0?s[a-1]:"B")&&a+1<t.length&&"EN"===t[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===s[a-1]){h="EN";break}if(g){h="N";break}for(c=a+1,u=t.length;c<u&&"ET"===t[c];)c++;h=c<u&&"EN"===t[c]?"EN":"N";break;case"NSM":if(r&&!o){for(u=t.length,c=a+1;c<u&&"NSM"===t[c];)c++;if(c<u){var d=e[a],p=d>=1425&&d<=2303||64286===d;if(l=t[c],p&&("R"===l||"AL"===l)){h="R";break}}}h=a<1||"B"===(l=t[a-1])?"N":s[a-1];break;case"B":g=!1,n=!0,h=m;break;case"S":i=!0,h="N"}return h},b=function(e,t,n){var i=e.split("");return n&&x(i,n,{hiLevel:m}),i.reverse(),t&&t.reverse(),i.join("")},x=function(e,t,r){var o,s,a,l,A,d=-1,p=e.length,f=0,y=[],b=m?u:c,x=[];for(g=!1,n=!1,i=!1,s=0;s<p;s++)x[s]=v(e[s]);for(a=0;a<p;a++){if(A=f,y[a]=w(e,x,y,a),o=240&(f=b[A][h[y[a]]]),f&=15,t[a]=l=b[f][5],o>0)if(16===o){for(s=d;s<a;s++)t[s]=1;d=-1}else d=-1;if(b[f][6])-1===d&&(d=a);else if(d>-1){for(s=d;s<a;s++)t[s]=l;d=-1}"B"===x[a]&&(t[a]=0),r.hiLevel|=l}i&&function(e,t,n){for(var i=0;i<n;i++)if("S"===e[i]){t[i]=m;for(var r=i-1;r>=0&&"WS"===e[r];r--)t[r]=m}}(x,t,p)},B=function(e,t,i,r,o){if(!(o.hiLevel<e)){if(1===e&&1===m&&!n)return t.reverse(),void(i&&i.reverse());for(var s,a,l,A,c=t.length,u=0;u<c;){if(r[u]>=e){for(l=u+1;l<c&&r[l]>=e;)l++;for(A=u,a=l-1;A<a;A++,a--)s=t[A],t[A]=t[a],t[a]=s,i&&(s=i[A],i[A]=i[a],i[a]=s);u=l}u++}}},_=function(e,t,n){var i=e.split(""),r={hiLevel:m};return n||(n=[]),x(i,n,r),function(e,t,n){if(0!==n.hiLevel&&l)for(var i,r=0;r<e.length;r++)1===t[r]&&(i=p.indexOf(e[r]))>=0&&(e[r]=p[i+1])}(i,n,r),B(2,i,t,n,r),B(1,i,t,n,r),i.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===o&&(o=y(e)),void 0===a&&(a=y(e))}(e,t),r||!s||a)if(r&&s&&o^a)m=o?1:0,e=b(e,t,n);else if(!r&&s&&a)m=o?1:0,e=_(e,t,n),e=b(e,t);else if(!r||o||s||a){if(r&&!s&&o^a)e=b(e,t),o?(m=0,e=_(e,t,n)):(m=1,e=_(e,t,n),e=b(e,t));else if(r&&o&&!s&&a)m=1,e=_(e,t,n),e=b(e,t);else if(!r&&!s&&o^a){var i=l;o?(m=1,e=_(e,t,n),m=0,l=!1,e=_(e,t,n),l=i):(m=0,e=_(e,t,n),e=b(e,t),m=1,l=!1,e=_(e,t,n),l=i,e=b(e,t))}}else m=0,e=_(e,t,n);else m=o?1:0,e=_(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(r=e.isInputVisual,s=e.isOutputVisual,o=e.isInputRtl,a=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var i=e.options||{};e.mutex,i.lang;var r=[];if(i.isInputVisual="boolean"!=typeof i.isInputVisual||i.isInputVisual,n.setOptions(i),"[object Array]"===Object.prototype.toString.call(t)){var o=0;for(r=[],o=0;o<t.length;o+=1)"[object Array]"===Object.prototype.toString.call(t[o])?r.push([n.doBidiReorder(t[o][0]),t[o][1],t[o][2]]):r.push([n.doBidiReorder(t[o])]);e.text=r}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(NE),NE.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new cM(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new MM(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new uM(this.contents),this.head=new pM(this),this.name=new bM(this),this.cmap=new gM(this),this.toUnicode={},this.hhea=new mM(this),this.maxp=new xM(this),this.hmtx=new BM(this),this.post=new yM(this),this.os2=new vM(this),this.loca=new TM(this),this.glyf=new CM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.bbox).length;t<n;t++)e=i[t],r.push(Math.round(e*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var i,r,o,s;for(o=0,r=0,s=(e=""+e).length;0<=s?r<s:r>s;r=0<=s?++r:--r)i=e.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var AM,cM=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,i,r,o,s,a;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^s)+(255^a)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*r+65536*o+256*s+a},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;n<i;n++)t=e[n],r.push(this.writeByte(t));return r},e}(),uM=function(){var e;function t(e){var t,n,i;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,i,r,o,s,a,l,A,c,u,h,d,p;for(p in h=Object.keys(t).length,a=Math.log(2),c=16*Math.floor(Math.log(h)/a),o=Math.floor(c/a),A=16*h-c,(i=new cM).writeInt(this.scalarType),i.writeShort(h),i.writeShort(c),i.writeShort(o),i.writeShort(A),r=16*h,l=i.pos+r,s=null,d=[],t)for(u=t[p],i.writeString(p),i.writeInt(e(u)),i.writeInt(l),i.writeInt(u.length),d=d.concat(u),"head"===p&&(s=l),l+=u.length;l%4;)d.push(0),l++;return i.write(d),n=2981146554-e(i.data),i.pos=s+8,i.writeUInt32(n),i.data},e=function(e){var t,n,i,r;for(e=_M.call(e);e.length%4;)e.push(0);for(i=new cM(e),n=0,t=0,r=e.length;t<r;t=t+=4)n+=i.readUInt32();return 4294967295&n},t}(),hM={}.hasOwnProperty,dM=function(e,t){for(var n in t)hM.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};AM=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var pM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new cM).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),fM=function(){function e(e,t){var n,i,r,o,s,a,l,A,c,u,h,d,p,f,g,m,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,r=function(){var t,n;for(n=[],a=t=0;0<=u?t<u:t>u;a=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],a=t=0;0<=u?t<u:t>u;a=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],a=t=0;0<=u?t<u:t>u;a=0<=u?++t:--t)n.push(e.readUInt16());return n}(),A=function(){var t,n;for(n=[],a=t=0;0<=u?t<u:t>u;a=0<=u?++t:--t)n.push(e.readUInt16());return n}(),i=(this.length-e.pos+this.offset)/2,s=function(){var t,n;for(n=[],a=t=0;0<=i?t<i:t>i;a=0<=i?++t:--t)n.push(e.readUInt16());return n}(),a=g=0,v=r.length;g<v;a=++g)for(f=r[a],n=m=d=p[a];d<=f?m<=f:m>=f;n=d<=f?++m:--m)0===A[a]?o=n+l[a]:0!==(o=s[A[a]/2+(n-d)-(u-a)]||0)&&(o+=l[a]),this.codeMap[n]=65535&o}e.pos=c}return e.encode=function(e,t){var n,i,r,o,s,a,l,A,c,u,h,d,p,f,g,m,v,y,w,b,x,B,_,C,S,E,T,M,F,I,U,L,R,P,N,k,D,O,H,Q,z,G,j,V,W,K;switch(M=new cM,o=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,f=function(){var e=[];for(d=0;d<256;++d)e.push(0);return e}(),m={0:0},r={},F=0,R=o.length;F<R;F++)null==m[j=e[i=o[F]]]&&(m[j]=++p),r[i]={old:e[i],new:m[e[i]]},f[i]=m[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(f),{charMap:r,subtable:M.data,maxGlyphID:p+1};case"unicode":for(E=[],c=[],v=0,m={},n={},g=l=null,I=0,P=o.length;I<P;I++)null==m[w=e[i=o[I]]]&&(m[w]=++v),n[i]={old:w,new:m[w]},s=m[w]-i,null!=g&&s===l||(g&&c.push(g),E.push(i),l=s),g=i;for(g&&c.push(g),c.push(65535),E.push(65535),C=2*(_=E.length),B=2*Math.pow(Math.log(_)/Math.LN2,2),u=Math.log(B/2)/Math.LN2,x=2*_-B,a=[],b=[],h=[],d=U=0,N=E.length;U<N;d=++U){if(S=E[d],A=c[d],65535===S){a.push(0),b.push(0);break}if(S-(T=n[S].new)>=32768)for(a.push(0),b.push(2*(h.length+_-d)),i=L=S;S<=A?L<=A:L>=A;i=S<=A?++L:--L)h.push(n[i].new);else a.push(T-S),b.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*_+2*h.length),M.writeUInt16(0),M.writeUInt16(C),M.writeUInt16(B),M.writeUInt16(u),M.writeUInt16(x),z=0,k=c.length;z<k;z++)i=c[z],M.writeUInt16(i);for(M.writeUInt16(0),G=0,D=E.length;G<D;G++)i=E[G],M.writeUInt16(i);for(V=0,O=a.length;V<O;V++)s=a[V],M.writeUInt16(s);for(W=0,H=b.length;W<H;W++)y=b[W],M.writeUInt16(y);for(K=0,Q=h.length;K<Q;K++)p=h[K],M.writeUInt16(p);return{charMap:n,subtable:M.data,maxGlyphID:v+1}}},e}(),gM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new fM(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,i;return null==t&&(t="macroman"),n=fM.encode(e,t),(i=new cM).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),mM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),vM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),yM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(n=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,i;for(i=[],r=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;r=0<=n?++t:--t)i.push(e.readUInt32());return i}.call(this)}},e}(),wM=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},bM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,i,r,o,s,a,l,A,c,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(a={},r=A=0,c=n.length;A<c;r=++A)i=n[r],e.pos=i.offset,l=e.readString(i.length),o=new wM(l,i),null==a[u=i.nameID]&&(a[u]=[]),a[i.nameID].push(o);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(h){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),xM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),BM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,i,r,o,s,a;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],t=n=0;0<=i?n<i:n>i;t=0<=i?++n:--n)r.push(e.readInt16());return r}(),this.widths=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.metrics).length;e<t;e++)r=n[e],i.push(r.advance);return i}.call(this),n=this.widths[this.widths.length-1],a=[],t=o=0;0<=i?o<i:o>i;t=0<=i?++o:--o)a.push(this.widths.push(n));return a},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),_M=[].slice,CM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,i,r,o,s,a,l,A,c;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,n=r.indexOf(e),0===(i=r.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,o=(s=new cM(t.read(i))).readShort(),l=s.readShort(),c=s.readShort(),a=s.readShort(),A=s.readShort(),this.cache[e]=-1===o?new EM(s,l,c,a,A):new SM(s,o,l,c,a,A),this.cache[e]))},e.prototype.encode=function(e,t,n){var i,r,o,s,a;for(o=[],r=[],s=0,a=t.length;s<a;s++)i=e[t[s]],r.push(o.length),i&&(o=o.concat(i.encode(n)));return r.push(o.length),{table:o,offsets:r}},e}(),SM=function(){function e(e,t,n,i,r,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),EM=function(){function e(e,t,n,i,r){var o,s;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new cM(_M.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),TM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return dM(e,AM),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,i;for(i=[],n=0,t=this.length;n<t;n+=2)i.push(2*e.readUInt16());return i}.call(this):function(){var t,i;for(i=[],n=0,t=this.length;n<t;n+=4)i.push(e.readUInt32());return i}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,o=0;o<n.length;++o)if(n[o]=i,r<t.length&&t[r]==o){++r,n[o]=i;var s=this.offsets[o],a=this.offsets[o+1]-s;a>0&&(i+=a)}for(var l=new Array(4*n.length),A=0;A<n.length;++A)l[4*A+3]=255&n[A],l[4*A+2]=(65280&n[A])>>8,l[4*A+1]=(16711680&n[A])>>16,l[4*A]=(4278190080&n[A])>>24;return l},e}(),MM=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,i,r;for(t in i=this.font.cmap.tables[0].codeMap,e={},r=this.subset)n=r[t],e[t]=i[n];return e},e.prototype.glyphsFor=function(e){var t,n,i,r,o,s,a;for(i={},o=0,s=e.length;o<s;o++)i[r=e[o]]=this.font.glyf.glyphFor(r);for(r in t=[],i)(null!=(n=i[r])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(r in a=this.glyphsFor(t))n=a[r],i[r]=n;return i},e.prototype.encode=function(e,t){var n,i,r,o,s,a,l,A,c,u,h,d,p,f,g;for(i in n=gM.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},g=n.charMap)h[(a=g[i]).old]=a.new;for(d in u=n.maxGlyphID,o)d in h||(h[d]=u++);return A=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),c=Object.keys(A).sort(function(e,t){return e-t}),p=function(){var e,t,n;for(n=[],e=0,t=c.length;e<t;e++)s=c[e],n.push(A[s]);return n}(),r=this.font.glyf.encode(o,p,h),l=this.font.loca.encode(r.offsets,p),f={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();NE.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var i,r,o,s;if(Array.isArray(n))return"["+function(){var e,r,o;for(o=[],e=0,r=n.length;e<r;e++)i=n[e],o.push(t.convert(i));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(r in o=["<<"],n)s=n[r],o.push("/"+r+" "+t.convert(s));return o.push(">>"),o.join("\n")}return""+n},t}();var FM=n(5239),IM=n.n(FM);const UM=async(e,t,n)=>{const i=document.createElement("div");i.style.position="absolute",i.style.left="-9999px",i.style.top="0",i.style.width="210mm",i.innerHTML=((e,t,n)=>{const i=new Date,r=i.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),o=i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),s=e.length>0?(e.reduce((e,t)=>e+(t.x||0),0)/e.length).toFixed(3):0,a=e.length>0?(e.reduce((e,t)=>e+(t.y||0),0)/e.length).toFixed(3):0,l=e.length>0?(e.reduce((e,t)=>e+(t.z||0),0)/e.length).toFixed(3):0,A=[...e].sort((e,t)=>e.timestamp&&t.timestamp?e.timestamp-t.timestamp:(e.id||"").localeCompare(t.id||""));return'\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="UTF-8">\n      <style>\n        @page {\n          margin: 2cm;\n        }\n        \n        * {\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n        \n        body {\n          font-family: \'Times New Roman\', Times, serif;\n          font-size: 11pt;\n          line-height: 1.6;\n          color: #000;\n          background: #fff;\n          padding: 40px;\n          max-width: 210mm;\n          margin: 0 auto;\n        }\n        \n        .header {\n          text-align: center;\n          border-bottom: 3px double #000;\n          padding-bottom: 20px;\n          margin-bottom: 30px;\n        }\n        \n        .header h1 {\n          font-size: 24pt;\n          font-weight: bold;\n          margin-bottom: 10px;\n          letter-spacing: 1px;\n          text-transform: uppercase;\n        }\n        \n        .header .subtitle {\n          font-size: 14pt;\n          color: #333;\n          font-style: italic;\n          margin-bottom: 15px;\n        }\n        \n        .header .metadata {\n          font-size: 10pt;\n          color: #666;\n          margin-top: 10px;\n        }\n        \n        .header .metadata strong {\n          color: #000;\n        }\n        \n        .section {\n          margin-bottom: 25px;\n          page-break-inside: avoid;\n        }\n        \n        .section-title {\n          font-size: 14pt;\n          font-weight: bold;\n          text-transform: uppercase;\n          border-bottom: 2px solid #000;\n          padding-bottom: 5px;\n          margin-bottom: 15px;\n          letter-spacing: 0.5px;\n        }\n        \n        .abstract {\n          background: #f8f8f8;\n          border-left: 4px solid #000;\n          padding: 15px 20px;\n          margin: 20px 0;\n          font-size: 10pt;\n          text-align: justify;\n        }\n        \n        .abstract strong {\n          font-weight: bold;\n          text-transform: uppercase;\n          font-size: 9pt;\n          letter-spacing: 1px;\n        }\n        \n        .info-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin: 15px 0;\n        }\n        \n        .info-item {\n          padding: 8px 12px;\n          background: #f5f5f5;\n          border-left: 3px solid #666;\n        }\n        \n        .info-item label {\n          font-weight: bold;\n          font-size: 9pt;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n          color: #444;\n          display: block;\n          margin-bottom: 3px;\n        }\n        \n        .info-item value {\n          font-size: 11pt;\n          color: #000;\n        }\n        \n        table {\n          width: 100%;\n          border-collapse: collapse;\n          margin: 20px 0;\n          font-size: 9pt;\n        }\n        \n        table caption {\n          font-weight: bold;\n          text-align: left;\n          margin-bottom: 10px;\n          font-size: 10pt;\n        }\n        \n        th {\n          background: #000;\n          color: #fff;\n          padding: 10px 8px;\n          text-align: left;\n          font-weight: bold;\n          text-transform: uppercase;\n          font-size: 8pt;\n          letter-spacing: 0.5px;\n        }\n        \n        td {\n          padding: 8px;\n          border-bottom: 1px solid #ddd;\n        }\n        \n        tr:hover {\n          background: #f9f9f9;\n        }\n        \n        .annotation-entry {\n          margin-bottom: 20px;\n          padding: 15px;\n          border: 1px solid #ddd;\n          background: #fafafa;\n          page-break-inside: avoid;\n        }\n        \n        .annotation-entry h3 {\n          font-size: 12pt;\n          margin-bottom: 10px;\n          color: #000;\n        }\n        \n        .annotation-entry .coordinates {\n          font-family: \'Courier New\', monospace;\n          background: #fff;\n          padding: 10px;\n          border-left: 3px solid #000;\n          margin: 10px 0;\n          font-size: 9pt;\n        }\n        \n        .annotation-entry .meta {\n          font-size: 9pt;\n          color: #666;\n          margin-top: 8px;\n        }\n        \n        .statistics {\n          background: #f0f0f0;\n          padding: 15px;\n          border-radius: 5px;\n          margin: 20px 0;\n        }\n        \n        .statistics h4 {\n          font-size: 11pt;\n          margin-bottom: 10px;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n        \n        .stat-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 5px 0;\n          border-bottom: 1px solid #ddd;\n        }\n        \n        .stat-row:last-child {\n          border-bottom: none;\n        }\n        \n        .footer {\n          margin-top: 40px;\n          padding-top: 20px;\n          border-top: 2px solid #000;\n          font-size: 9pt;\n          color: #666;\n          text-align: center;\n        }\n        \n        .reference-number {\n          font-weight: bold;\n          color: #000;\n          font-family: monospace;\n        }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <h1>Lunar Terrain Exploration Report</h1>\n        <div class="subtitle">Observational Survey and Coordinate Documentation</div>\n        <div class="metadata">\n          <div><strong>Report ID:</strong> LTE-'.concat(i.getTime().toString().slice(-8),"</div>\n          <div><strong>Date:</strong> ").concat(r,"</div>\n          <div><strong>Time:</strong> ").concat(o," UTC</div>\n          <div><strong>Principal Investigator:</strong> ").concat((null===t||void 0===t?void 0:t.name)||"Unknown Researcher",'</div>\n        </div>\n      </div>\n      \n      <div class="abstract">\n        <strong>Abstract:</strong> This report documents ').concat(e.length," georeferenced observation").concat(1!==e.length?"s":""," \n        conducted during a systematic survey of the lunar surface terrain. Data collection was performed using \n        the Space Viewer platform with real-time coordinate tracking and collaborative annotation capabilities. \n        The study involved ").concat((null===n||void 0===n?void 0:n.length)||0," active team member").concat(1!==(null===n||void 0===n?void 0:n.length)?"s":"",' and encompasses \n        spatial analysis of identified features across the lunar coordinate system.\n      </div>\n      \n      <div class="section">\n        <h2 class="section-title">1. Mission Overview</h2>\n        <div class="info-grid">\n          <div class="info-item">\n            <label>Mission Coordinator</label>\n            <value>').concat((null===t||void 0===t?void 0:t.name)||"Unknown",'</value>\n          </div>\n          <div class="info-item">\n            <label>Total Observations</label>\n            <value>').concat(e.length,'</value>\n          </div>\n          <div class="info-item">\n            <label>Active Team Members</label>\n            <value>').concat((null===n||void 0===n?void 0:n.length)||0,'</value>\n          </div>\n          <div class="info-item">\n            <label>Survey Region</label>\n            <value>Lunar Surface</value>\n          </div>\n        </div>\n      </div>\n      \n      ').concat(e.length>0?'\n      <div class="section">\n        <h2 class="section-title">2. Statistical Summary</h2>\n        <div class="statistics">\n          <h4>Coordinate Centroid Analysis</h4>\n          <div class="stat-row">\n            <span>Mean X-Coordinate:</span>\n            <span class="reference-number">'.concat(s,'</span>\n          </div>\n          <div class="stat-row">\n            <span>Mean Y-Coordinate:</span>\n            <span class="reference-number">').concat(a,'</span>\n          </div>\n          <div class="stat-row">\n            <span>Mean Z-Coordinate:</span>\n            <span class="reference-number">').concat(l,'</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class="section">\n        <h2 class="section-title">3. Observational Data</h2>\n        <table>\n          <caption>Table 1: Complete Catalog of Observed Locations</caption>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Location Designation</th>\n              <th>X</th>\n              <th>Y</th>\n              <th>Z</th>\n              <th>Observer</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(A.map((e,t)=>"\n              <tr>\n                <td><strong>".concat(String(t+1).padStart(3,"0"),"</strong></td>\n                <td>").concat(e.text,"</td>\n                <td>").concat((e.x||0).toFixed(3),"</td>\n                <td>").concat((e.y||0).toFixed(3),"</td>\n                <td>").concat((e.z||0).toFixed(3),"</td>\n                <td>").concat(e.userName||"Unknown","</td>\n              </tr>\n            ")).join(""),'\n          </tbody>\n        </table>\n      </div>\n      \n      <div class="section">\n        <h2 class="section-title">4. Detailed Observation Records</h2>\n        ').concat(A.map((e,t)=>'\n          <div class="annotation-entry">\n            <h3>Observation '.concat(String(t+1).padStart(3,"0"),": ").concat(e.text,'</h3>\n            <div class="coordinates">\n              <strong>Spatial Coordinates:</strong><br>\n              X-axis: ').concat((e.x||0).toFixed(6),"<br>\n              Y-axis: ").concat((e.y||0).toFixed(6),"<br>\n              Z-axis: ").concat((e.z||0).toFixed(6),'\n            </div>\n            <div class="meta">\n              <strong>Observer:</strong> ').concat(e.userName||"Unknown Researcher","<br>\n              ").concat(e.timestamp?"<strong>Timestamp:</strong> ".concat(new Date(e.timestamp).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})):"","\n            </div>\n          </div>\n        ")).join(""),"\n      </div>\n      "):'\n      <div class="section">\n        <h2 class="section-title">2. Observations</h2>\n        <p style="font-style: italic; color: #666; text-align: center; padding: 40px 0;">\n          No observational data was recorded during this survey mission.\n        </p>\n      </div>\n      ','\n      \n      <div class="footer">\n        <div><strong>Space Viewer - Lunar Terrain Exploration System</strong></div>\n        <div>Report generated automatically from observational database</div>\n        <div>Reference: LTE-').concat(i.getTime().toString().slice(-8),"</div>\n      </div>\n    </body>\n    </html>\n  ")})(e,t,n),document.body.appendChild(i);try{const e=await IM()(i,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),t=210,n=e.height*t/e.width,r=new NE("p","mm","a4");let o=0;const s=297;for(;o<n;)o>0&&r.addPage(),r.addImage(e.toDataURL("image/jpeg",.95),"JPEG",0,-o,t,n),o+=s;const a="lunar-exploration-report-".concat((new Date).getTime(),".pdf");return r.save(a),a}finally{document.body.removeChild(i)}};const LM=function(e){let{position:t={x:0,y:0,z:0},annotations:n=[],activeUsers:r=[],onTeleport:o,onRemoveAnnotation:s,show:a=!0,currentUserId:l,currentUser:c,uiMode:u=!1,locked:h=!1}=e;const[d,p]=(0,i.useState)(null),[f,g]=(0,i.useState)(null);if(!a)return null;const m=e=>{if(void 0===e.x||null===e.x||void 0===e.z||null===e.z)return 0;const n=e.x-t.x,i=(e.y||0)-t.y,r=e.z-t.z;return Math.sqrt(n*n+i*i+r*r)},v=n.filter(e=>void 0!==e.z&&null!==e.z).filter(e=>void 0!==e.x&&null!==e.x).map(e=>A(A({},e),{},{distance:m(e)})).filter(e=>null!==e.distance&&void 0!==e.distance).sort((e,t)=>(e.distance||0)-(t.distance||0));return(0,xt.jsxs)("div",{className:"hud-container",children:[(0,xt.jsxs)("div",{className:"hud-panel hud-left",children:[(0,xt.jsxs)("div",{className:"hud-header",children:[(0,xt.jsxs)("div",{className:"hud-title",children:["Locations (",v.length,")"]}),(0,xt.jsx)("button",{className:"hud-export-btn",onClick:()=>{try{const e=UM(n,c,r);g("Exported: ".concat(e)),setTimeout(()=>g(null),3e3)}catch(e){console.error("Error exporting PDF:",e),g("Export failed"),setTimeout(()=>g(null),3e3)}},disabled:0===v.length,title:"Export all annotations as PDF report",children:"Export PDF"})]}),f&&(0,xt.jsx)("div",{className:"hud-export-status",children:f}),(0,xt.jsx)("div",{className:"hud-annotations-list",children:0===v.length?(0,xt.jsxs)("div",{className:"hud-empty-message",children:["No annotations yet.",(0,xt.jsx)("br",{}),"Press ",(0,xt.jsx)("span",{className:"hud-key-inline",children:"E"})," to create one."]}):v.map(e=>{const t=d===e.id,n=e.userId===l;return(0,xt.jsxs)("div",{className:"hud-annotation-item ".concat(t?"selected":""),onClick:()=>(e=>{o&&void 0!==e.x&&void 0!==e.z&&(o(e.x,(e.y||0)+5,e.z),p(e.id),setTimeout(()=>p(null),1e3))})(e),children:[(0,xt.jsxs)("div",{className:"hud-annotation-header",children:[(0,xt.jsx)("div",{className:"hud-annotation-text",children:e.text}),n&&(0,xt.jsx)("span",{className:"hud-badge-own",children:"You"})]}),(0,xt.jsxs)("div",{className:"hud-annotation-meta",children:[(0,xt.jsxs)("span",{className:"hud-annotation-distance",children:[(e.distance||0).toFixed(1),"m away"]}),e.userName&&(0,xt.jsxs)("span",{className:"hud-annotation-user",children:["by ",e.userName]})]}),(0,xt.jsxs)("div",{className:"hud-annotation-coords",children:["(",(e.x||0).toFixed(0),", ",(e.y||0).toFixed(0),", ",(e.z||0).toFixed(0),")"]})]},e.id)})})]}),(0,xt.jsxs)("div",{className:"hud-panel hud-top-right",children:[(0,xt.jsxs)("div",{className:"hud-section",children:[(0,xt.jsx)("div",{className:"hud-label",children:"ACTIVE USERS"}),(0,xt.jsx)("div",{className:"hud-value-medium",children:r.length})]}),(0,xt.jsxs)("div",{className:"hud-section",children:[(0,xt.jsx)("div",{className:"hud-label",children:"YOUR POSITION"}),(0,xt.jsxs)("div",{className:"hud-coords-compact",children:[(0,xt.jsxs)("div",{children:["X: ",t.x.toFixed(1)]}),(0,xt.jsxs)("div",{children:["Y: ",t.y.toFixed(1)]}),(0,xt.jsxs)("div",{children:["Z: ",t.z.toFixed(1)]})]})]})]}),(0,xt.jsx)("div",{className:"hud-panel hud-bottom-center",children:(0,xt.jsxs)("div",{className:"hud-controls",children:[(0,xt.jsx)("span",{className:"hud-key",children:"WASD"})," Move",(0,xt.jsx)("span",{className:"hud-separator",children:"\u2022"}),(0,xt.jsx)("span",{className:"hud-key",children:"SPACE/SHIFT"})," Up/Down",(0,xt.jsx)("span",{className:"hud-separator",children:"\u2022"}),(0,xt.jsx)("span",{className:"hud-key",children:"E"})," Annotate",(0,xt.jsx)("span",{className:"hud-separator",children:"\u2022"}),(0,xt.jsx)("span",{className:"hud-key",children:"TAB"})," Toggle UI",(0,xt.jsx)("span",{className:"hud-separator",children:"\u2022"}),u?(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("span",{className:"hud-key",children:"Click"})," Interact"]}):(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("span",{className:"hud-key",children:"Esc"})," Exit Mode"]})]})})]})},RM=Object.create(null);RM.open="0",RM.close="1",RM.ping="2",RM.pong="3",RM.message="4",RM.upgrade="5",RM.noop="6";const PM=Object.create(null);Object.keys(RM).forEach(e=>{PM[RM[e]]=e});const NM={type:"error",data:"parser error"},kM="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),DM="function"===typeof ArrayBuffer,OM=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,HM=(e,t,n)=>{let{type:i,data:r}=e;return kM&&r instanceof Blob?t?n(r):QM(r,n):DM&&(r instanceof ArrayBuffer||OM(r))?t?n(r):QM(new Blob([r]),n):n(RM[i]+(r||""))},QM=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function zM(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let GM;const jM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",VM="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)VM[jM.charCodeAt(n)]=n;const WM="function"===typeof ArrayBuffer,KM=(e,t)=>{if("string"!==typeof e)return{type:"message",data:XM(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:qM(e.substring(1),t)};return PM[n]?e.length>1?{type:PM[n],data:e.substring(1)}:{type:PM[n]}:NM},qM=(e,t)=>{if(WM){const n=(e=>{let t,n,i,r,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const A=new ArrayBuffer(s),c=new Uint8Array(A);for(t=0;t<a;t+=4)n=VM[e.charCodeAt(t)],i=VM[e.charCodeAt(t+1)],r=VM[e.charCodeAt(t+2)],o=VM[e.charCodeAt(t+3)],c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return A})(e);return XM(n,t)}return{base64:!0,data:e}},XM=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,JM=String.fromCharCode(30);function YM(){return new TransformStream({transform(e,t){!function(e,t){kM&&e.data instanceof Blob?e.data.arrayBuffer().then(zM).then(t):DM&&(e.data instanceof ArrayBuffer||OM(e.data))?t(zM(e.data)):HM(e,!1,e=>{GM||(GM=new TextEncoder),t(GM.encode(e))})}(e,n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)})}})}let ZM;function $M(e){return e.reduce((e,t)=>e+t.length,0)}function eF(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function tF(e){if(e)return function(e){for(var t in tF.prototype)e[t]=tF.prototype[t];return e}(e)}tF.prototype.on=tF.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},tF.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},tF.prototype.off=tF.prototype.removeListener=tF.prototype.removeAllListeners=tF.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},tF.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},tF.prototype.emitReserved=tF.prototype.emit,tF.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},tF.prototype.hasListeners=function(e){return!!this.listeners(e).length};const nF="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),iF="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function rF(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const oF=iF.setTimeout,sF=iF.clearTimeout;function aF(e,t){t.useNativeTimers?(e.setTimeoutFn=oF.bind(iF),e.clearTimeoutFn=sF.bind(iF)):(e.setTimeoutFn=iF.setTimeout.bind(iF),e.clearTimeoutFn=iF.clearTimeout.bind(iF))}function lF(e){return"string"===typeof e?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function AF(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class cF extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class uF extends tF{constructor(e){super(),this.writable=!1,aF(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new cF(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=KM(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class hF extends uF{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(JM),i=[];for(let r=0;r<n.length;r++){const e=KM(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach((e,o)=>{HM(e,!1,e=>{i[o]=e,++r===n&&t(i.join(JM))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=AF()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let dF=!1;try{dF="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(MI){}const pF=dF;function fF(){}class gF extends hF{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class mF extends tF{constructor(e,t,n){super(),this.createRequest=e,aF(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=rF(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(EI){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(EI){}try{n.setRequestHeader("Accept","*/*")}catch(EI){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"===typeof n.status?n.status:0)},0))},n.send(this._data)}catch(EI){return void this.setTimeoutFn(()=>{this._onError(EI)},0)}"undefined"!==typeof document&&(this._index=mF.requestsCount++,mF.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=fF,e)try{this._xhr.abort()}catch(EI){}"undefined"!==typeof document&&delete mF.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(mF.requestsCount=0,mF.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",vF);else if("function"===typeof addEventListener){addEventListener("onpagehide"in iF?"pagehide":"unload",vF,!1)}function vF(){for(let e in mF.requests)mF.requests.hasOwnProperty(e)&&mF.requests[e].abort()}const yF=function(){const e=wF({xdomain:!1});return e&&null!==e.responseType}();function wF(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||pF))return new XMLHttpRequest}catch(EI){}if(!t)try{return new(iF[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(EI){}}const bF="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class xF extends uF{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=bF?{}:rF(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(MI){return this.emitReserved("error",MI)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;HM(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(EI){}i&&nF(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=AF()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const BF=iF.WebSocket||iF.MozWebSocket;const _F={websocket:class extends xF{createSocket(e,t,n){return bF?new BF(e,t,n):t?new BF(e,t):new BF(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends uF{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(MI){return this.emitReserved("error",MI)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){ZM||(ZM=new TextDecoder);const n=[];let i=0,r=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===i){if($M(n)<1)break;const e=eF(n,1);o=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if($M(n)<2)break;const e=eF(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if($M(n)<8)break;const e=eF(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(NM);break}r=o*Math.pow(2,32)+t.getUint32(4),i=3}else{if($M(n)<r)break;const e=eF(n,r);a.enqueue(KM(o?e:ZM.decode(e),t)),i=0}if(0===r||r>e){a.enqueue(NM);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=YM();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())}).catch(e=>{})};r();const o={type:"open"};this.query.sid&&(o.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then(()=>{i&&nF(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends gF{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=yF&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new mF(wF,this.uri(),e)}}},CF=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,SF=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function EF(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=CF.exec(e||""),o={},s=14;for(;s--;)o[SF[s]]=r[s]||"";return-1!=n&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,i){t&&(n[t]=i)}),n}(0,o.query),o}const TF="function"===typeof addEventListener&&"function"===typeof removeEventListener,MF=[];TF&&addEventListener("offline",()=>{MF.forEach(e=>e())},!1);class FF extends tF{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=EF(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=EF(t.host).host);aF(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),TF&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},MF.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&FF.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",FF.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=lF(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nF(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(FF.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),TF&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=MF.indexOf(this._offlineEventListener);-1!==e&&MF.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}FF.protocol=4;class IF extends FF{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;FF.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;FF.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(A(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function r(){n||(n=!0,A(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function l(e){t&&e.name!==t.name&&r()}const A=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class UF extends IF{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>_F[e]).filter(e=>!!e)),super(e,t)}}const LF="function"===typeof ArrayBuffer,RF=Object.prototype.toString,PF="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===RF.call(Blob),NF="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===RF.call(File);function kF(e){return LF&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||PF&&e instanceof Blob||NF&&e instanceof File}function DF(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(DF(e[t]))return!0;return!1}if(kF(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return DF(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&DF(e[n]))return!0;return!1}function OF(e){const t=[],n=e.data,i=e;return i.data=HF(n,t),i.attachments=t.length,{packet:i,buffers:t}}function HF(e,t){if(!e)return e;if(kF(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=HF(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=HF(e[i],t));return n}return e}function QF(e,t){return e.data=zF(e.data,t),delete e.attachments,e}function zF(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=zF(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=zF(e[n],t));return e}const GF=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jF=5;var VF;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(VF||(VF={}));class WF{constructor(e){this.replacer=e}encode(e){return e.type!==VF.EVENT&&e.type!==VF.ACK||!DF(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===VF.EVENT?VF.BINARY_EVENT:VF.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==VF.BINARY_EVENT&&e.type!==VF.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=OF(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function KF(e){return"[object Object]"===Object.prototype.toString.call(e)}class qF extends tF{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===VF.BINARY_EVENT;n||t.type===VF.BINARY_ACK?(t.type=n?VF.EVENT:VF.ACK,this.reconstructor=new XF(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!kF(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===VF[n.type])throw new Error("unknown packet type "+n.type);if(n.type===VF.BINARY_EVENT||n.type===VF.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!qF.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(EI){return!1}}static isPayloadValid(e,t){switch(e){case VF.CONNECT:return KF(t);case VF.DISCONNECT:return void 0===t;case VF.CONNECT_ERROR:return"string"===typeof t||KF(t);case VF.EVENT:case VF.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===GF.indexOf(t[0]));case VF.ACK:case VF.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class XF{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=QF(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function JF(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const YF=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ZF extends tF{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[JF(e,"open",this.onopen.bind(this)),JF(e,"packet",this.onpacket.bind(this)),JF(e,"error",this.onerror.bind(this)),JF(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,i;if(YF.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const a={type:VF.EVENT,data:o,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof o[o.length-1]){const e=this.ids++,t=o.pop();this._registerAckCallback(e,t),a.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,A=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!l||(A?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r),s=function(){i.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,n)};s.withError=!0,this.acks[e]=s}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t,i)=>{const r=(e,n)=>e?i(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)})}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];n(null,...o)}return i.pending=!1,t._drainQueue()}),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:VF.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case VF.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case VF.EVENT:case VF.BINARY_EVENT:this.onevent(e);break;case VF.ACK:case VF.BINARY_ACK:this.onack(e);break;case VF.DISCONNECT:this.ondisconnect();break;case VF.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];t.packet({type:VF.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:VF.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function $F(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}$F.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},$F.prototype.reset=function(){this.attempts=0},$F.prototype.setMin=function(e){this.ms=e},$F.prototype.setMax=function(e){this.max=e},$F.prototype.setJitter=function(e){this.jitter=e};class eI extends tF{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,aF(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new $F({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||t;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new UF(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=JF(t,"open",function(){n.onopen(),e&&e()}),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=JF(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(JF(e,"ping",this.onping.bind(this)),JF(e,"data",this.ondata.bind(this)),JF(e,"error",this.onerror.bind(this)),JF(e,"close",this.onclose.bind(this)),JF(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(EI){this.onclose("parse error",EI)}}ondecoded(e){nF(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new ZF(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const tI={};function nI(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=EF(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,o=n.path,s=tI[r]&&o in tI[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new eI(i,t):(tI[r]||(tI[r]=new eI(i,t)),a=tI[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(nI,{Manager:eI,Socket:ZF,io:nI,connect:nI});const iI=()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[o,s]=(0,i.useState)(null),[a,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)({id:"",name:""}),[h,d]=(0,i.useState)("1"),[p,f]=(0,i.useState)([]),[g,m]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),w=(0,i.useRef)(new Map),b=(0,i.useCallback)(()=>{if(e&&(e.connected||e.connecting))return console.log(" Reusing existing socket connection"),e;console.log("\ud83d\udd0c Creating new socket connection...");const n=nI("http://localhost:3000",{transports:["websocket","polling"],forceNew:!1,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:1e3,timeout:5e3,autoConnect:!0});return t(n),n.on("connect",()=>{r(!0),s(null),l(!1),console.log("\ud83d\udd0c Connected to server")}),n.on("connect_error",e=>{console.warn("Server unavailable, enabling mock mode:",e.message),r(!1),s(e.message),l(!0),r(!0),console.log("Mock mode enabled for local development"),n.disconnect()}),n.on("disconnect",()=>{a||(r(!1),console.log(" Disconnected from server"))}),n.on("user-joined",e=>{let{user:t,activeUsers:n}=e;f(n),console.log("".concat(t.name," joined"))}),n.on("user-left",e=>{let{user:t,activeUsers:n}=e;f(n),w.current.delete(t.id),console.log(" ".concat(t.name," left"))}),n.on("position-update",e=>{w.current.set(e.userId,{x:e.x,y:e.y,zoom:e.zoom})}),n.on("position-update-3d",e=>{w.current.set(e.userId,{x:e.x,y:e.y,z:e.z,pitch:e.pitch,yaw:e.yaw})}),n.on("existing-annotations",e=>{console.log("Received existing annotations:",e),m(e)}),n.on("existing-overlays",e=>{console.log(" Received existing overlays:",e),y(e)}),n.on("annotation-added",e=>{console.log("New annotation added from server:",e),m(t=>{const n=t.some(t=>t.id===e.id||Math.abs(t.x-e.x)<.001&&Math.abs(t.y-e.y)<.001&&t.text===e.text&&(t.userId===e.user_id||t.user_id===e.user_id));if(n)return console.log(" Annotation already exists locally, replacing with server version"),t.map(t=>Math.abs(t.x-e.x)<.001&&Math.abs(t.y-e.y)<.001&&t.text===e.text&&(t.userId===e.user_id||t.user_id===e.user_id)?e:t);const i=[...t,e];return console.log("Updated annotations array:",i),i})}),n.on("annotation-removed",e=>{let{annotationId:t}=e;console.log("Annotation removed:",t),m(e=>e.filter(e=>e.id!==t))}),n.on("overlay-added",e=>{y(t=>[...t,e])}),n.on("overlay-removed",e=>{let{overlayId:t}=e;y(e=>e.filter(e=>e.id!==t))}),n.on("annotation-position-updated",e=>{let{annotationId:t,x:n,y:i}=e;m(e=>e.map(e=>e.id===t?A(A({},e),{},{x:n,y:i}):e))}),n.on("overlay-position-updated",e=>{let{overlayId:t,x:n,y:i}=e;y(e=>e.map(e=>e.id===t?A(A({},e),{},{x:n,y:i}):e))}),n.on("overlay-size-updated",e=>{let{overlayId:t,width:n,height:i}=e;y(e=>e.map(e=>e.id===t?A(A({},e),{},{width:n,height:i}):e))}),n},[e]),x=(0,i.useCallback)(function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=Math.random().toString(36).substring(7);if(u({id:r,name:n}),d(t),a)return console.log("Mock mode: Simulating room join"),void f([{id:r,name:n,socketId:"mock"}]);const o=i||e;null===o||void 0===o||o.emit("join-room",{roomId:t,userName:n,userId:r})},[e,a]),B=(0,i.useCallback)((t,n,i)=>{a||null===e||void 0===e||e.emit("position-update",{x:t,y:n,zoom:i})},[e,a]),_=(0,i.useCallback)((t,n,i,r,o)=>{a||null===e||void 0===e||e.emit("position-update-3d",{x:t,y:n,z:i,pitch:r,yaw:o})},[e,a]),C=(0,i.useCallback)(function(t,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const o={id:Date.now(),text:t,x:n,y:i,z:r,userName:c.name,userId:c.id,user_name:c.name,user_id:c.id};m(e=>[...e,o]),a||null===e||void 0===e||e.emit("add-annotation",{roomId:h,userId:c.id,userName:c.name,text:t,x:n,y:i,z:r})},[e,h,c,a]),S=(0,i.useCallback)(t=>{m(e=>{const n=e.filter(e=>e.id!==t);return n}),a||null===e||void 0===e||e.emit("remove-annotation",{annotationId:t,roomId:h})},[e,h,a]),E=(0,i.useCallback)((t,n,i,r,o,s)=>{null===e||void 0===e||e.emit("add-overlay",{roomId:h,userId:c.id,userName:c.name,imagePath:t,originalName:n,x:i,y:r,width:o,height:s})},[e,h,c]),T=(0,i.useCallback)(t=>{y(e=>e.filter(e=>e.id!==t)),a||null===e||void 0===e||e.emit("remove-overlay",{overlayId:t,roomId:h})},[e,h,a]),M=(0,i.useCallback)((t,n,i)=>{m(e=>e.map(e=>e.id===t?A(A({},e),{},{x:n,y:i}):e)),a||null===e||void 0===e||e.emit("update-annotation-position",{annotationId:t,roomId:h,x:n,y:i})},[e,h,a]),F=(0,i.useCallback)((t,n,i)=>{y(e=>e.map(e=>e.id===t?A(A({},e),{},{x:n,y:i}):e)),a||null===e||void 0===e||e.emit("update-overlay-position",{overlayId:t,roomId:h,x:n,y:i})},[e,h,a]),I=(0,i.useCallback)((t,n,i)=>{y(e=>e.map(e=>e.id===t?A(A({},e),{},{width:n,height:i}):e)),a||null===e||void 0===e||e.emit("update-overlay-size",{overlayId:t,roomId:h,width:n,height:i})},[e,h,a]),U=(0,i.useCallback)(()=>{null===e||void 0===e||e.disconnect(),r(!1)},[e]);return(0,i.useEffect)(()=>()=>{null===e||void 0===e||e.disconnect()},[e]),{socket:e,connected:n,connectionError:o,mockMode:a,currentUser:c,currentRoom:h,activeUsers:p,annotations:g,overlays:v,userPositions:w.current,initSocket:b,joinRoom:x,updatePosition:B,updatePosition3D:_,addAnnotation:C,removeAnnotation:S,addOverlay:E,removeOverlay:T,updateAnnotationPosition:M,updateOverlayPosition:F,updateOverlaySize:I,disconnect:U}};function rI(){const e=(0,i.useRef)(),t=i.useMemo(()=>{const e=new il,t=new Float32Array(15e3);for(let n=0;n<15e3;n+=3){const e=150+100*Math.random(),i=Math.random()*Math.PI*2,r=Math.acos(2*Math.random()-1);t[n]=e*Math.sin(r)*Math.cos(i),t[n+1]=e*Math.sin(r)*Math.sin(i),t[n+2]=e*Math.cos(r)}return e.setAttribute("position",new Ha(t,3)),e},[]);return ey(t=>{e.current&&(e.current.rotation.y+=1e-4)}),(0,xt.jsx)("points",{ref:e,geometry:t,children:(0,xt.jsx)("pointsMaterial",{size:.5,color:"#ffffff",sizeAttenuation:!0,transparent:!0,opacity:.8})})}function oI(){const e=(0,i.useRef)(),t=(0,i.useRef)(),n=[100,80,50];return(0,xt.jsxs)("group",{children:[(0,xt.jsx)("directionalLight",{ref:t,position:n,intensity:2,color:"#FFF8E7",castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":200,"shadow-camera-left":-100,"shadow-camera-right":100,"shadow-camera-top":100,"shadow-camera-bottom":-100}),(0,xt.jsxs)("mesh",{ref:e,position:n,children:[(0,xt.jsx)("sphereGeometry",{args:[3,32,32]}),(0,xt.jsx)("meshBasicMaterial",{color:"#FFD700",toneMapped:!1})]}),(0,xt.jsxs)("mesh",{position:n,children:[(0,xt.jsx)("sphereGeometry",{args:[5,32,32]}),(0,xt.jsx)("meshBasicMaterial",{color:"#FFD700",transparent:!0,opacity:.3,depthWrite:!1,toneMapped:!1})]})]})}const sI=i.forwardRef((e,t)=>{let{heightScale:n}=e;const[r,o]=(0,i.useState)(null),[s,a]=(0,i.useState)(null);(0,i.useEffect)(()=>{const e=new $h,t=new $h;e.load("/moon_data/moon_color.png",o),t.load("/moon_data/moon_height.png",a)},[]);const l=i.useMemo(()=>{if(null===s||void 0===s||!s.image)return new Yu(100,100,512,512);const e=new Yu(100,100,512,512),t=document.createElement("canvas"),i=t.getContext("2d"),r=s.image;t.width=r.width,t.height=r.height,i.drawImage(r,0,0);const o=i.getImageData(0,0,t.width,t.height),a=e.attributes.position;for(let s=0;s<a.count;s++){const e=s%513/512,i=Math.floor(s/513)/512,r=Math.floor(e*(t.width-1)),l=4*(Math.floor(i*(t.height-1))*t.width+r),A=(256*o.data[l]+o.data[l+1])/65535;a.setZ(s,(A-.5)*n*20)}return e.computeVertexNormals(),e},[s,n]);return r&&s?(0,xt.jsx)("mesh",{ref:t,geometry:l,rotation:[-Math.PI/2,0,0],position:[0,0,0],children:(0,xt.jsx)("meshStandardMaterial",{map:r,side:Qt})}):null});function aI(e){let{speed:t=20,updatePosition3D:n,isJoined:r,terrainRef:o,minHeight:s=2.5,onPositionChange:a,teleportTo:l,onLockChange:A,uiMode:c=!1,isAnnotating:u=!1}=e;const{camera:h,scene:d,raycaster:p,gl:f}=$v(),g=(0,i.useRef)({}),m=(0,i.useRef)(0),v=(0,i.useRef)();(0,i.useEffect)(()=>{c&&document.pointerLockElement&&(console.log("UI Mode enabled, exiting pointer lock"),document.exitPointerLock())},[c]);const y=(0,i.useRef)(null),w=(0,i.useRef)(null);return(0,i.useEffect)(()=>{l&&void 0!==l.x&&(w.current=h.position.clone(),y.current=Date.now())},[l,h]),(0,i.useEffect)(()=>{const e=e=>{g.current[e.code]=!0},t=e=>{g.current[e.code]=!1};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),ey((e,i)=>{if(l&&y.current&&w.current){const e=Date.now()-y.current,t=500,n=Math.min(e/t,1),i=1-Math.pow(1-n,3);return h.position.lerpVectors(w.current,new Mo(l.x,l.y,l.z),i),void(n>=1&&(y.current=null,w.current=null))}const A=g.current,d=t*i,f=!c&&!u,v=new Mo;h.getWorldDirection(v);const b=new Mo;b.crossVectors(v,h.up).normalize();const x=new Mo;if(f&&(A.KeyW&&x.add(v),A.KeyS&&x.sub(v),A.KeyD&&x.add(b),A.KeyA&&x.sub(b),A.Space&&(x.y+=1),A.ShiftLeft&&(x.y-=1)),x.length()>0&&(x.normalize().multiplyScalar(d),h.position.add(x)),o&&o.current){const e=h.position.clone(),t=new Mo(0,-1,0);p.set(e,t);const n=p.intersectObject(o.current,!0);if(n.length>0){const e=n[0].point.y+s;h.position.y<e&&(h.position.y=e)}}if(r&&e.clock.elapsedTime-m.current>.1){m.current=e.clock.elapsedTime;const t=new Mo;h.getWorldDirection(t);const i=Math.asin(t.y),r=Math.atan2(t.x,t.z);n(h.position.x,h.position.y,h.position.z,i,r)}a&&a({x:h.position.x,y:h.position.y,z:h.position.z})}),c?null:(0,xt.jsx)(pw,{ref:v,onLock:()=>{console.log("Pointer locked"),A&&A(!0)},onUnlock:()=>{console.log("Pointer unlocked"),A&&A(!1)}})}const lI=i.memo(e=>{let{isJoined:t,onShowInput:n,terrainRef:r}=e;const{camera:o,raycaster:s,scene:a}=$v();return(0,i.useEffect)(()=>{if(!t)return;const e=e=>{if("e"!==e.key&&"E"!==e.key&&"KeyE"!==e.code)return;s.setFromCamera(new Eo(0,0),o);const t=s.intersectObjects(a.children,!0);if(console.log("Found ".concat(t.length," intersections")),t.length>0){const e=t[0].point;n({x:e.x,y:e.y,z:e.z})}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,o,s,a,n]),null});const AI=function(e){let{heightScale:t=.15,collaborationData:n}=e;const[r,o]=(0,i.useState)(!1),[s,a]=(0,i.useState)(!1),l=(0,i.useRef)(),[A,c]=(0,i.useState)({x:0,y:10,z:30}),[u,h]=(0,i.useState)(null),[d,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[m,v]=(0,i.useState)({x:0,y:0,z:0}),[y,w]=(0,i.useState)(""),b=iI(),{connected:x,mockMode:B,currentUser:_,activeUsers:C,annotations:S,userPositions:E,updatePosition3D:T,addAnnotation:M,removeAnnotation:F}=n||b,I=(x||B)&&(null===_||void 0===_?void 0:_.id),[,U]=(0,i.useState)({});(0,i.useEffect)(()=>{const e=setInterval(()=>{I&&E.size>0&&U({})},100);return()=>clearInterval(e)},[I,E]),(0,i.useEffect)(()=>{console.log("\ud83c\udfae CollaborativeThreeScene state:",{connected:x,mockMode:B,currentUserId:null===_||void 0===_?void 0:_.id,currentUserName:null===_||void 0===_?void 0:_.name,isJoined:I,activeUsersCount:(null===C||void 0===C?void 0:C.length)||0,annotationsCount:(null===S||void 0===S?void 0:S.length)||0,userPositionsCount:(null===E||void 0===E?void 0:E.size)||0})},[x,B,_,I,C,S,E]);const L=(0,i.useCallback)((e,t,n,i)=>{console.log("handlePlaceAnnotation called:",{text:e,x:t,y:n,z:i}),M(e,t,n,i)},[M]),R=(0,i.useCallback)(e=>{v(e),g(!0),p(!0),a(!0)},[]),P=(0,i.useCallback)(()=>{y.trim()&&(L(y,m.x,m.y,m.z),w(""),g(!1),p(!1),a(!1))},[y,m,L]),N=(0,i.useCallback)(()=>{w(""),g(!1),p(!1),a(!1)},[]),k=(0,i.useCallback)((e,t,n)=>{console.log("Teleporting to:",{x:e,y:t,z:n}),h({x:e,y:t,z:n}),setTimeout(()=>h(null),600)},[]),D=(0,i.useCallback)(e=>{c(e)},[]),O=(0,i.useCallback)(e=>{console.log("Lock state changed to:",e),o(e),e||a(!1)},[]),H=(0,i.useCallback)(()=>{a(e=>{const t=!e;return console.log("Toggling UI mode from",e,"to",t),t})},[]);return(0,i.useEffect)(()=>{const e=e=>{"Tab"!==e.key&&"Tab"!==e.code||!r||(e.preventDefault(),e.stopPropagation(),console.log("Tab key pressed"),H())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[r,H]),(0,xt.jsxs)("div",{style:{width:"100%",height:"100vh",position:"relative"},children:[f&&(0,xt.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.95)",padding:"15px",borderRadius:"8px",border:"2px solid #4CAF50",minWidth:"250px",maxWidth:"400px",boxShadow:"0 4px 16px rgba(0,0,0,0.7)",zIndex:1e4},onClick:e=>e.stopPropagation(),children:[(0,xt.jsx)("input",{type:"text",placeholder:"Enter annotation text...",value:y,onChange:e=>{e.stopPropagation(),w(e.target.value)},onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key?(e.preventDefault(),P()):"Escape"===e.key&&(e.preventDefault(),N())},onKeyUp:e=>e.stopPropagation(),onKeyPress:e=>e.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"8px",fontSize:"14px",border:"1px solid #666",borderRadius:"4px",background:"#222",color:"white",outline:"none"}}),(0,xt.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"10px",justifyContent:"flex-end"},children:[(0,xt.jsx)("button",{onClick:N,style:{padding:"6px 12px",fontSize:"13px",background:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),(0,xt.jsx)("button",{onClick:P,style:{padding:"6px 12px",fontSize:"13px",background:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})]})]}),(r||s)&&I&&(0,xt.jsx)(LM,{position:A,annotations:S,activeUsers:C,onTeleport:k,onRemoveAnnotation:F,show:r||s,currentUserId:null===_||void 0===_?void 0:_.id,currentUser:_,uiMode:s,locked:r}),r&&s&&(0,xt.jsx)("div",{style:{position:"absolute",bottom:80,left:"50%",transform:"translateX(-50%)",zIndex:99,background:"rgba(100, 150, 255, 0.9)",color:"#fff",padding:"8px 16px",borderRadius:"20px",fontSize:"12px",fontWeight:"bold",pointerEvents:"none",boxShadow:"0 0 20px rgba(100, 150, 255, 0.5)",textShadow:"0 0 5px #000"},children:"UI MODE - Press TAB to return to camera control"}),!r&&(0,xt.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,background:"rgba(0,0,0,0.9)",padding:"30px",borderRadius:"12px",color:"white",textAlign:"center",maxWidth:"500px"},children:[(0,xt.jsx)("h3",{children:" Collaborative Lunar Terrain"}),(0,xt.jsx)("p",{style:{marginBottom:"20px"},children:"Click anywhere to start exploring"}),(0,xt.jsxs)("div",{style:{textAlign:"left",fontSize:"14px",marginTop:"20px",background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"8px"},children:[(0,xt.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,xt.jsx)("strong",{style:{color:"#4CAF50"},children:"Movement:"}),(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"WASD"})," - Move forward/back/left/right",(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"Mouse"})," - Look around",(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"Space/Shift"})," - Move up/down"]}),(0,xt.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,xt.jsx)("strong",{style:{color:"#2196F3"},children:"Annotations:"}),(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"E Key"})," - Place annotation at crosshair",(0,xt.jsx)("br",{}),(0,xt.jsx)("span",{style:{fontSize:"12px",color:"#999"},children:"(Aim at terrain and press E to add a note)"})]}),(0,xt.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,xt.jsx)("strong",{style:{color:"#FFA726"},children:"UI Interaction:"}),(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"TAB"})," - Toggle UI mode (click HUD elements)",(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"Exit Button"})," - Exit camera control",(0,xt.jsx)("br",{}),(0,xt.jsx)("span",{style:{fontSize:"12px",color:"#999"},children:"(Use TAB to interact with annotations, export PDFs, etc.)"})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("strong",{style:{color:"#FF6B6B"},children:"Exit:"}),(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:"ESC"})," or ",(0,xt.jsx)("strong",{children:" Button"})," - Leave camera control"]})]}),I&&(0,xt.jsx)("p",{style:{fontSize:"13px",marginTop:"15px",color:"#4CAF50",fontWeight:"bold",background:"rgba(76, 175, 80, 0.2)",padding:"8px",borderRadius:"6px"},children:"Connected - You can see other users and annotations in real-time!"})]}),r&&I&&(0,xt.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:98,pointerEvents:"none"},children:[(0,xt.jsxs)("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(76, 175, 80, 0.8)",borderRadius:"50%",position:"relative",boxShadow:"0 0 10px rgba(76, 175, 80, 0.5)"},children:[(0,xt.jsx)("div",{style:{position:"absolute",width:"2px",height:"10px",background:"rgba(76, 175, 80, 0.8)",left:"50%",top:"-12px",transform:"translateX(-50%)"}}),(0,xt.jsx)("div",{style:{position:"absolute",width:"2px",height:"10px",background:"rgba(76, 175, 80, 0.8)",left:"50%",bottom:"-12px",transform:"translateX(-50%)"}}),(0,xt.jsx)("div",{style:{position:"absolute",width:"10px",height:"2px",background:"rgba(76, 175, 80, 0.8)",top:"50%",left:"-12px",transform:"translateY(-50%)"}}),(0,xt.jsx)("div",{style:{position:"absolute",width:"10px",height:"2px",background:"rgba(76, 175, 80, 0.8)",top:"50%",right:"-12px",transform:"translateY(-50%)"}})]}),(0,xt.jsx)("div",{style:{position:"absolute",top:"30px",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",color:"#4CAF50",whiteSpace:"nowrap",fontWeight:"bold"},children:"Press E to place annotation"})]}),(0,xt.jsxs)("div",{style:{position:"absolute",top:20,right:20,zIndex:99,background:"rgba(0,0,0,0.85)",padding:"15px",borderRadius:"8px",color:"white",minWidth:"200px",pointerEvents:r?"none":"auto"},children:[(0,xt.jsx)("h4",{style:{margin:"0 0 10px 0",fontFamily:"Orbitron, sans-serif",color:"#fff",textShadow:"0 0 5px rgba(255, 255, 255, 0.5)"},children:"Collaboration"}),I?(0,xt.jsxs)("div",{style:{fontSize:"13px"},children:[(0,xt.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,xt.jsx)("strong",{children:"You:"})," ",_.name]}),(0,xt.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,xt.jsx)("strong",{children:"Users:"})," ",C.length]}),(0,xt.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,xt.jsx)("strong",{children:"Annotations:"})," ",S.length]}),(0,xt.jsx)("div",{style:{fontSize:"12px",fontWeight:"bold",color:B?"#FFA500":"#6495ED",marginTop:"8px"},children:B?"Mock Mode":"Connected"})]}):(0,xt.jsx)("div",{style:{fontSize:"13px",color:"#ff6b6b"},children:"Not connected to collaboration"})]}),(0,xt.jsxs)(Zy,{camera:{position:[0,10,30],fov:75},style:{background:"#000000",width:"100%",height:"100%",position:"absolute",top:0,left:0},children:[(0,xt.jsx)(rI,{}),(0,xt.jsx)("ambientLight",{intensity:.2}),(0,xt.jsx)(oI,{}),(0,xt.jsx)("directionalLight",{position:[-50,30,-30],intensity:.3,color:"#9DB4FF"}),(0,xt.jsx)(aI,{speed:25,updatePosition3D:T,isJoined:I,terrainRef:l,minHeight:2.5,onPositionChange:D,teleportTo:u,onLockChange:O,uiMode:s,isAnnotating:d}),(0,xt.jsx)(i.Suspense,{fallback:null,children:(0,xt.jsx)(sI,{heightScale:t,ref:l})}),I&&S.filter(e=>void 0!==e.z&&null!==e.z).map(e=>(0,xt.jsx)(Ew,{annotation:e,currentUserId:_.id,onRemove:F},e.id)),I&&(()=>{const e=Array.from(E.entries());return console.log("\ud83d\udc65 Rendering users. Total positions:",e.length,"Current user:",null===_||void 0===_?void 0:_.id),e.map(e=>{let[t,n]=e;if(console.log("  - User:",t,"Position:",n,"Is current?",t===_.id),t===_.id)return null;if(!n.z&&0!==n.z)return console.log("  \u26a0\ufe0f Skipping user (no Z coordinate):",t),null;const i=C.find(e=>e.id===t);return console.log("  \u2705 Rendering user avatar:",t,(null===i||void 0===i?void 0:i.name)||"Unknown"),(0,xt.jsx)(zb,{userId:t,userName:(null===i||void 0===i?void 0:i.name)||"Unknown",position:n,rotation:{pitch:n.pitch||0,yaw:n.yaw||0}},t)})})(),(0,xt.jsx)(lI,{isJoined:I,onShowInput:R,terrainRef:l})]}),r&&(0,xt.jsxs)("div",{style:{position:"absolute",top:20,left:20,zIndex:99,display:"flex",gap:"10px"},children:[(0,xt.jsx)("button",{onClick:H,style:{background:s?"rgba(100, 150, 255, 0.9)":"rgba(100, 150, 255, 0.7)",color:"white",border:"2px solid rgba(255, 255, 255, 0.3)",padding:"10px 15px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",boxShadow:"0 0 15px rgba(100, 150, 255, 0.5)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.transform="scale(1)"},children:s?"Camera Mode":" UI Mode"}),!s&&(0,xt.jsx)("button",{onClick:()=>{document.exitPointerLock(),o(!1)},style:{background:"rgba(255, 100, 100, 0.9)",color:"white",border:"2px solid rgba(255, 255, 255, 0.3)",padding:"10px 15px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",boxShadow:"0 0 15px rgba(255, 100, 100, 0.5)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 50, 50, 1)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 100, 100, 0.9)",e.target.style.transform="scale(1)"},children:"Exit"})]})]})},cI=e=>{let{userId:t,position:n,userName:i}=e;return(0,xt.jsx)("div",{className:"user-cursor",style:n&&"number"===typeof n.x&&"number"===typeof n.y?{left:"".concat(100*n.x,"%"),top:"".concat(100*n.y,"%"),position:"absolute",pointerEvents:"none",zIndex:100,transform:"translate(-50%, -50%)"}:{display:"none"},children:(0,xt.jsx)("span",{className:"cursor-name",children:i})})},uI=e=>{let{annotation:t,currentUserId:n,onSelect:r,onRemove:o,onStartDrag:s,isDragging:a,style:l={}}=e;const[A,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),d=(t.user_id||t.userId)===n,p=A||u;return(0,xt.jsxs)("div",{className:"annotation-marker ".concat(a?"being-dragged":""),style:l,onClick:e=>{e.stopPropagation(),h(!u),r&&r(t)},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onMouseDown:e=>{(t.user_id||t.userId)===n&&(e.preventDefault(),e.stopPropagation(),s&&s(t,e))},title:d?"Click and drag to move":"Read-only",children:["\ud83d\udccc",p&&(0,xt.jsxs)("div",{className:"annotation-popup",children:[(0,xt.jsx)("div",{className:"annotation-user",children:t.user_name||t.userName||"Unknown User"}),(0,xt.jsx)("div",{className:"annotation-text",children:t.text}),d&&(0,xt.jsx)("button",{className:"annotation-delete-btn",onClick:e=>{e.stopPropagation(),o&&o(t.id),h(!1)},children:"Delete"})]})]})},hI=e=>{let{overlay:t,currentUserId:n,onRemove:r,onStartDrag:o,onStartResize:s,isDragging:a,style:l={},apiBase:A=""}=e;const[c,u]=(0,i.useState)(!1),h=t.user_id===n;return(0,xt.jsxs)("div",{className:"image-overlay ".concat(a?"being-dragged":""),style:l,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onMouseDown:e=>{t.user_id===n&&(e.preventDefault(),e.stopPropagation(),o&&o(t,e))},title:h?"Click and drag to move":"Read-only",children:[(0,xt.jsx)("img",{src:"".concat(A).concat(t.image_path),alt:t.original_name||"Overlay",draggable:!1}),c&&h&&(0,xt.jsxs)("div",{className:"overlay-controls",children:[(0,xt.jsx)("button",{className:"overlay-delete-btn",onClick:e=>{e.stopPropagation(),r&&r(t.id)},children:"\ud83d\uddd1\ufe0f"}),(0,xt.jsx)("div",{className:"resize-handle",onMouseDown:e=>{t.user_id===n&&(e.preventDefault(),e.stopPropagation(),s&&s(t,e))},children:"\u22f1"})]})]})},dI=e=>{let{onZoomIn:t,onZoomOut:n,onResetView:i,onToggleFullscreen:r,className:o=""}=e;return(0,xt.jsxs)("div",{className:"viewer-toolbar ".concat(o),children:[(0,xt.jsx)("button",{className:"tool-btn",onClick:t,title:"Zoom In",children:"+"}),(0,xt.jsx)("button",{className:"tool-btn",onClick:n,title:"Zoom Out",children:"-"}),(0,xt.jsx)("button",{className:"tool-btn",onClick:i,title:"Reset View",children:"Reset"}),(0,xt.jsx)("button",{className:"tool-btn",onClick:r,title:"Fullscreen",children:"Full"})]})},pI=e=>{let{dragPreview:t,isVisible:n=!1}=e;if(!n||!t)return null;return(0,xt.jsx)("div",{className:"drag-preview",style:{left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),position:"fixed",zIndex:9999,pointerEvents:"none",fontSize:"2rem",transform:"translate(-50%, -50%)"},children:(()=>{switch(t.type){case"annotation":return"Pin";case"overlay":return"Image";default:return"\u22ef"}})()})};let fI;const gI={width:10121,height:7085,tileSize:254,tileOverlap:1,minLevel:0,maxLevel:6,getTileUrl:(e,t,n)=>"/space1/space1_files/".concat(e,"/").concat(t,"_").concat(n,".jpg")},mI=1.5,vI=.7,yI=-.1,wI=1.1,bI=()=>{function e(){document.body.style.background="linear-gradient(to right, #09162a, #0d284d, #113b72, #194f99)",function(){const e=200;for(let t=0;t<e;t++){const e=document.createElement("div");e.classList.add("backgroundStar");const t=Math.random()*window.innerWidth-20,n=Math.random()*document.documentElement.scrollHeight-20;e.style.left=t+"px",e.style.top=n+"px",e.style.animationDelay=5*Math.random()+"s",document.body.appendChild(e)}}(),fI=setInterval(()=>{Math.random()>.75&&function(){const e=document.createElement("div");e.classList.add("shootingStar");let t=Math.random()>.5?window.innerWidth-100:100,n=Math.random()*(document.documentElement.scrollHeight/2);e.style.left=t+"px",e.style.top=n+"px",t>window.innerWidth/2?(e.style.animation="shootingLeft 1.5s linear forwards",e.classList.add("left")):(e.style.animation="shootingRight 1.5s linear forwards",e.classList.add("right")),document.body.appendChild(e),e.addEventListener("animationend",()=>{e.parentNode&&e.parentNode.removeChild(e)})}()},3e3)}const{id:t}=fe(),n=(0,i.useRef)(null),[r,o]=(0,i.useState)(!1),[s,a]=(0,i.useState)(0),[l,c]=(0,i.useState)(""),[u,h]=(0,i.useState)("1"),[d,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[m,v]=(0,i.useState)({x:0,y:0}),[y,w]=(0,i.useState)(""),[b,x]=(0,i.useState)(!1),[B,_]=(0,i.useState)(!1),[C,S]=(0,i.useState)(null),[E,T]=(0,i.useState)(null),[M,F]=(0,i.useState)(null),{connected:I,mockMode:U,currentUser:L,activeUsers:R,annotations:P,overlays:N,userPositions:k,initSocket:D,joinRoom:O,addAnnotation:H,removeAnnotation:Q,removeOverlay:z,updatePosition:G,updatePosition3D:j,updateAnnotationPosition:V,updateOverlayPosition:W,updateOverlaySize:K}=iI(),q=(0,i.useCallback)(e=>{if(!e.quick||!n.current)return;const t=n.current,i=t.viewport.pointFromPixel(e.position),r=t.viewport.viewportToViewerElementCoordinates(i);g(!0),v({x:r.x,y:r.y}),t.tempAnnotationLocation=i},[]),X=(0,i.useCallback)(()=>{if(!n.current||!d)return;const e=n.current,t=e.viewport.getCenter(),i=e.viewport.getZoom();G(t.x,t.y,i),a(e=>e+1)},[d,G]);(0,i.useEffect)(()=>{const e=St()({id:"openseadragon-viewer",prefixUrl:"https://openseadragon.github.io/openseadragon/images/",tileSources:gI,showNavigator:!0,navigatorPosition:"BOTTOM_RIGHT",navigatorSizeRatio:.15,constrainDuringPan:!0,visibilityRatio:.5});return n.current=e,e.addHandler("canvas-click",q),e.addHandler("viewport-change",X),()=>e.destroy()},[q,X]);const J=(0,i.useCallback)(e=>{if(!C||!n.current)return;const t=n.current,i=t.element.getBoundingClientRect(),r=new(St().Point)(e.clientX-i.left,e.clientY-i.top),o=t.viewport.viewerElementToViewportCoordinates(r),s=Math.max(yI,Math.min(wI,o.x)),a=Math.max(yI,Math.min(wI,o.y));"annotation"===C.type?V(C.id,s,a):"overlay"===C.type&&W(C.id,s,a)},[C,V,W]),Y=(0,i.useCallback)(e=>{C&&n.current&&console.log("Resize move:",e.clientX,e.clientY)},[C]);(0,i.useEffect)(()=>{if(e(),!b&&!B)return;const t=e=>{b?J(e):B&&Y(e),T({type:(null===C||void 0===C?void 0:C.type)||"dragging",x:e.clientX,y:e.clientY})},n=()=>{x(!1),_(!1),S(null),T(null)};return document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),clearInterval(fI),document.querySelectorAll(".shootingStar").forEach(e=>{e.parentNode&&(e.style.animation="none",e.parentNode.removeChild(e))}),document.querySelectorAll(".backgroundStar").forEach(e=>{document.body.removeChild(e)})}},[b,B,C,J,Y]);const Z=(0,i.useCallback)(e=>(e.user_id||e.userId)===L.id,[L.id]),$=(0,i.useCallback)((e,t)=>{Z(e)&&(t.preventDefault(),t.stopPropagation(),x(!0),S(A(A({},e),{},{type:"annotation"})))},[Z]),ee=(0,i.useCallback)((e,t)=>{Z(e)&&(t.preventDefault(),t.stopPropagation(),x(!0),S(A(A({},e),{},{type:"overlay"})))},[Z]),te=(0,i.useCallback)((e,t)=>{Z(e)&&(t.preventDefault(),t.stopPropagation(),_(!0),S(A(A({},e),{},{type:"overlay"})))},[Z]),ne=(0,i.useCallback)(()=>{var e;null===(e=n.current)||void 0===e||e.viewport.zoomBy(mI)},[]),ie=(0,i.useCallback)(()=>{var e;null===(e=n.current)||void 0===e||e.viewport.zoomBy(vI)},[]),re=(0,i.useCallback)(()=>{var e;null===(e=n.current)||void 0===e||e.viewport.goHome()},[]),oe=(0,i.useCallback)(()=>{const e=document.getElementById("openseadragon-viewer");e&&(document.fullscreenElement?document.exitFullscreen():e.requestFullscreen())},[]),se=(0,i.useCallback)(e=>{const t=n.current;if(null===t||void 0===t||!t.viewport)return{display:"none"};try{const n=new(St().Point)(e.x,e.y),i=t.viewport.viewportToViewerElementCoordinates(n),r={position:"absolute",left:"".concat(i.x,"px"),top:"".concat(i.y,"px"),transform:"translate(-50%, -50%)",pointerEvents:"auto"};if(e.width&&e.height){const n=new(St().Point)(e.width,e.height),i=t.viewport.deltaPixelsFromPointsNoRotate(n);r.width="".concat(Math.abs(i.x),"px"),r.height="".concat(Math.abs(i.y),"px"),r.transform="translate(0, 0)"}return r}catch(i){return console.error("Error calculating overlay style:",i,e),{display:"none"}}},[]),ae=(0,i.useCallback)(()=>{const e=n.current,t=null===e||void 0===e?void 0:e.tempAnnotationLocation;if(!y.trim()||!t)return g(!1),void w("");H(y,t.x,t.y),g(!1),w("")},[y,H]),le=(0,i.useCallback)(()=>{g(!1),w("")},[]),Ae=(0,i.useCallback)(()=>{if(!l.trim())return;const e=D(),t=()=>{O(u,l.trim(),e),p(!0)};e&&(e.connected?t():(console.log("Waiting for socket connection..."),e.once("connect",()=>{t()})))},[l,u,D,O]),ce=(0,i.useCallback)(()=>{p(!1),c("")},[]);return(0,xt.jsxs)("div",{className:"App",children:[(0,xt.jsx)("h1",{className:"sectionHeader ",children:"Space Viewer"}),(0,xt.jsx)("div",{className:"collaboration-panel",children:d?(0,xt.jsxs)("div",{children:[(0,xt.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("strong",{children:L.name})," in Room: ",u,(0,xt.jsx)("span",{className:"status-indicator ".concat(I?U?"status-mock":"status-connected":"status-disconnected"),children:I?U?"Mock Mode":"Connected":"Disconnected"})]}),(0,xt.jsx)("button",{onClick:ce,style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",cursor:"pointer"},children:"Leave"})]}),R.length>1&&(0,xt.jsxs)("div",{style:{marginTop:"8px",fontSize:"14px"},children:[(0,xt.jsxs)("strong",{children:["Active Users (",R.length,"):"]})," "," ",R.map(e=>e.name).join(", ")]}),P.length>0&&(0,xt.jsxs)("div",{style:{marginTop:"8px",fontSize:"14px"},children:[(0,xt.jsx)("strong",{children:"Annotations:"})," ",P.length," total"]}),N.length>0&&(0,xt.jsxs)("div",{style:{marginTop:"8px",fontSize:"14px"},children:[(0,xt.jsx)("strong",{children:"Overlays:"})," ",N.length," total"]})]}):(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h3",{children:"Join Collaboration Room"}),(0,xt.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,xt.jsx)("input",{type:"text",placeholder:"Enter your name",value:l,onChange:e=>c(e.target.value)}),(0,xt.jsx)("input",{type:"text",placeholder:"Room ID",value:u,onChange:e=>h(e.target.value),style:{width:"100px"}}),(0,xt.jsx)("button",{onClick:Ae,disabled:!l.trim(),style:{backgroundColor:l.trim()?"#007acc":"#ccc",color:"white",cursor:l.trim()?"pointer":"not-allowed"},children:"Join Room"})]})]})}),(0,xt.jsx)("button",{onClick:()=>o(!r),className:"viewerButton",children:r?"Show 2D View":"Show 3D View"}),r?(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h2",{children:"3D Collaborative View"}),d?(0,xt.jsx)(AI,{collaborationData:{connected:I,mockMode:U,currentUser:L,activeUsers:R,annotations:P,userPositions:k,updatePosition3D:j,addAnnotation:H,removeAnnotation:Q}}):(0,xt.jsxs)("div",{style:{padding:"40px",textAlign:"center",background:"rgba(255, 255, 255, 0.1)",margin:"20px",borderRadius:"12px",border:"2px dashed #666"},children:[(0,xt.jsx)("h3",{children:"Join a room to enable 3D collaboration"}),(0,xt.jsx)("p",{style:{color:"#666"},children:"Connect to see other users, their positions, and shared annotations in the 3D space"})]})]}):(0,xt.jsxs)("div",{style:{position:"relative"},children:[(0,xt.jsxs)("h2",{children:["2D View ",d?"- Click to Add Collaborative Annotations":"- Join a room to collaborate"]}),(0,xt.jsxs)("div",{style:{position:"relative",width:"100%",height:"600px",overflow:"hidden"},children:[(0,xt.jsx)("div",{id:"openseadragon-viewer",style:{width:"100%",height:"100%",border:"1px solid black",position:"absolute",top:0,left:0,zIndex:1}}),(0,xt.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:10},children:[d&&P.map(e=>(0,xt.jsx)(uI,{annotation:e,currentUserId:L.id,onSelect:F,onRemove:Q,onStartDrag:$,isDragging:b&&(null===C||void 0===C?void 0:C.id)===e.id,style:se(e)},"".concat(e.id,"-").concat(s))),d&&N.map(e=>(0,xt.jsx)(hI,{overlay:e,currentUserId:L.id,onRemove:z,onStartDrag:ee,onStartResize:te,isDragging:b&&(null===C||void 0===C?void 0:C.id)===e.id,style:se(e),apiBase:""},"".concat(e.id,"-").concat(s)))]}),(0,xt.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:50},children:d&&Array.from(k.entries()).map(e=>{let[t,n]=e;if(t===L.id)return null;const i=R.find(e=>e.id===t);return(0,xt.jsx)(cI,{userId:t,position:n,userName:(null===i||void 0===i?void 0:i.name)||"Unknown"},t)})}),d&&(0,xt.jsx)("div",{style:{position:"absolute",zIndex:100},children:(0,xt.jsx)(dI,{onZoomIn:ne,onZoomOut:ie,onResetView:re,onToggleFullscreen:oe})})]}),(0,xt.jsx)(pI,{dragPreview:E,isVisible:b||B}),f&&d&&(0,xt.jsxs)("div",{className:"annotationInput",style:{top:m.y,left:m.x,position:"absolute",zIndex:200},children:[(0,xt.jsx)("input",{type:"text",placeholder:"Enter annotation text...",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),ae()):"Escape"===e.key&&(e.preventDefault(),le())},autoFocus:!0}),(0,xt.jsxs)("div",{className:"controls",children:[(0,xt.jsx)("button",{className:"secondary",onClick:le,children:"Cancel"}),(0,xt.jsx)("button",{onClick:ae,children:"Save"})]})]})]})]})};function xI(e){let{heightScale:t}=e;const n=(0,i.useRef)(),[r,o]=(0,i.useState)(null),[s,a]=(0,i.useState)(null);(0,i.useEffect)(()=>{const e=new $h,t=new $h;e.load("/moon_data/moon_color_16k.png",o),t.load("/moon_data/moon_height_16k.png",a)},[]);const l=(0,i.useMemo)(()=>{if(null===s||void 0===s||!s.image)return new Yu(100,100,512,512);const e=new Yu(100,100,512,512),n=document.createElement("canvas"),i=n.getContext("2d"),r=s.image;n.width=r.width,n.height=r.height,i.drawImage(r,0,0);const o=i.getImageData(0,0,n.width,n.height),a=e.attributes.position;for(let s=0;s<a.count;s++){const e=s%513/512,i=Math.floor(s/513)/512,r=Math.floor(e*(n.width-1)),l=4*(Math.floor(i*(n.height-1))*n.width+r),A=(256*o.data[l]+o.data[l+1])/65535;a.setZ(s,(A-.5)*t*20)}return e.computeVertexNormals(),e},[s,t]);return r&&s?(0,xt.jsx)("mesh",{ref:n,geometry:l,rotation:[-Math.PI/2,0,0],position:[0,0,0],children:(0,xt.jsx)("meshStandardMaterial",{map:r,side:Qt})}):null}function BI(e){let{speed:t=20}=e;const{camera:n}=$v(),r=(0,i.useRef)({});return(0,i.useEffect)(()=>{const e=e=>{r.current[e.code]=!0},t=e=>{r.current[e.code]=!1};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),ey((e,i)=>{const o=r.current,s=t*i,a=new Mo;n.getWorldDirection(a);const l=new Mo;l.crossVectors(a,n.up).normalize();const A=new Mo;o.KeyW&&A.add(a),o.KeyS&&A.sub(a),o.KeyD&&A.add(l),o.KeyA&&A.sub(l),o.Space&&(A.y+=1),o.ShiftLeft&&(A.y-=1),A.length()>0&&(A.normalize().multiplyScalar(s),n.position.add(A))}),(0,xt.jsx)(pw,{})}const _I=function(){const[e,t]=(0,i.useState)(.15),[n,r]=(0,i.useState)(!1);return(0,xt.jsxs)("div",{style:{width:"100%",height:"100vh"},children:[!n&&(0,xt.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,background:"rgba(0,0,0,0.9)",padding:"30px",borderRadius:"12px",color:"white",textAlign:"center"},children:[(0,xt.jsx)("h3",{children:"Lunar Terrain Flythrough"}),(0,xt.jsx)("p",{children:"Click anywhere to start"}),(0,xt.jsxs)("p",{style:{fontSize:"14px",marginTop:"20px"},children:["WASD - Move",(0,xt.jsx)("br",{}),"Mouse - Look around",(0,xt.jsx)("br",{}),"Space/Shift - Up/Down",(0,xt.jsx)("br",{}),"ESC - Exit"]})]}),(0,xt.jsxs)("div",{style:{position:"absolute",top:20,left:20,zIndex:99,background:"rgba(0,0,0,0.7)",padding:"15px",borderRadius:"8px",color:"white",pointerEvents:n?"none":"auto"},children:[(0,xt.jsx)("h3",{children:"Lunar Terrain Explorer"}),(0,xt.jsxs)("div",{children:[(0,xt.jsxs)("label",{children:["Height Exaggeration: ",e.toFixed(2),"x"]}),(0,xt.jsx)("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:e,onChange:e=>t(parseFloat(e.target.value)),style:{width:"200px",display:"block",marginTop:"5px"}})]})]}),(0,xt.jsxs)(Zy,{camera:{position:[0,10,30],fov:75},onPointerDown:()=>r(!0),children:[(0,xt.jsx)("ambientLight",{intensity:.3}),(0,xt.jsx)("directionalLight",{position:[50,50,30],intensity:1.2}),(0,xt.jsx)("directionalLight",{position:[-50,30,-30],intensity:.5}),(0,xt.jsx)(BI,{speed:25}),(0,xt.jsx)(i.Suspense,{fallback:null,children:(0,xt.jsx)(xI,{heightScale:e})}),(0,xt.jsx)("gridHelper",{args:[200,50],position:[0,-5,0]})]})]})};const CI=function(){return(0,xt.jsx)(dt,{children:(0,xt.jsxs)(Re,{children:[(0,xt.jsx)(Ue,{path:"/",element:(0,xt.jsx)(_t,{})}),(0,xt.jsx)(Ue,{path:"/home",element:(0,xt.jsx)(_t,{})}),(0,xt.jsx)(Ue,{path:"/viewer/:id",element:(0,xt.jsx)(bI,{})}),(0,xt.jsx)(Ue,{path:"/moon",element:(0,xt.jsx)(_I,{})})]})})},SI=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:s}=t;n(e),i(e),r(e),o(e),s(e)})};o.createRoot(document.getElementById("root")).render((0,xt.jsx)(i.StrictMode,{children:(0,xt.jsx)(CI,{})})),SI()})()})();
//# sourceMappingURL=main.313d39be.js.map